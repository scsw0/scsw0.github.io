<!DOCTYPE html>
<html lang="ja">
<head>
  <meta name="description" content="みなくんの公式ホームページへようこそ!!" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>ホーム - みなくん</title>
  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="data:text/css;base64,LyohDQogKiBNYXRlcmlhbGl6ZSB2MS4wLjAtcmMuMSAoaHR0cDovL21hdGVyaWFsaXplY3NzLmNvbSkNCiAqIENvcHlyaWdodCAyMDE0LTIwMTcgTWF0ZXJpYWxpemUNCiAqIE1JVCBMaWNlbnNlIChodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRG9nZmFsby9tYXRlcmlhbGl6ZS9tYXN0ZXIvTElDRU5TRSkNCiAqLw0KLm1hdGVyaWFsaXplLXJlZCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNlNTFjMjMgIWltcG9ydGFudDsNCn0NCg0KLm1hdGVyaWFsaXplLXJlZC10ZXh0IHsNCiAgY29sb3I6ICNlNTFjMjMgIWltcG9ydGFudDsNCn0NCg0KLm1hdGVyaWFsaXplLXJlZC5saWdodGVuLTUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmRlYWViICFpbXBvcnRhbnQ7DQp9DQoNCi5tYXRlcmlhbGl6ZS1yZWQtdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7DQogIGNvbG9yOiAjZmRlYWViICFpbXBvcnRhbnQ7DQp9DQoNCi5tYXRlcmlhbGl6ZS1yZWQubGlnaHRlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4YzFjMyAhaW1wb3J0YW50Ow0KfQ0KDQoubWF0ZXJpYWxpemUtcmVkLXRleHQudGV4dC1saWdodGVuLTQgew0KICBjb2xvcjogI2Y4YzFjMyAhaW1wb3J0YW50Ow0KfQ0KDQoubWF0ZXJpYWxpemUtcmVkLmxpZ2h0ZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmMzk4OWIgIWltcG9ydGFudDsNCn0NCg0KLm1hdGVyaWFsaXplLXJlZC10ZXh0LnRleHQtbGlnaHRlbi0zIHsNCiAgY29sb3I6ICNmMzk4OWIgIWltcG9ydGFudDsNCn0NCg0KLm1hdGVyaWFsaXplLXJlZC5saWdodGVuLTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWU2ZTczICFpbXBvcnRhbnQ7DQp9DQoNCi5tYXRlcmlhbGl6ZS1yZWQtdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7DQogIGNvbG9yOiAjZWU2ZTczICFpbXBvcnRhbnQ7DQp9DQoNCi5tYXRlcmlhbGl6ZS1yZWQubGlnaHRlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2VhNDU0YiAhaW1wb3J0YW50Ow0KfQ0KDQoubWF0ZXJpYWxpemUtcmVkLXRleHQudGV4dC1saWdodGVuLTEgew0KICBjb2xvcjogI2VhNDU0YiAhaW1wb3J0YW50Ow0KfQ0KDQoubWF0ZXJpYWxpemUtcmVkLmRhcmtlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2QwMTgxZSAhaW1wb3J0YW50Ow0KfQ0KDQoubWF0ZXJpYWxpemUtcmVkLXRleHQudGV4dC1kYXJrZW4tMSB7DQogIGNvbG9yOiAjZDAxODFlICFpbXBvcnRhbnQ7DQp9DQoNCi5tYXRlcmlhbGl6ZS1yZWQuZGFya2VuLTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjkxNTFiICFpbXBvcnRhbnQ7DQp9DQoNCi5tYXRlcmlhbGl6ZS1yZWQtdGV4dC50ZXh0LWRhcmtlbi0yIHsNCiAgY29sb3I6ICNiOTE1MWIgIWltcG9ydGFudDsNCn0NCg0KLm1hdGVyaWFsaXplLXJlZC5kYXJrZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNhMjEzMTggIWltcG9ydGFudDsNCn0NCg0KLm1hdGVyaWFsaXplLXJlZC10ZXh0LnRleHQtZGFya2VuLTMgew0KICBjb2xvcjogI2EyMTMxOCAhaW1wb3J0YW50Ow0KfQ0KDQoubWF0ZXJpYWxpemUtcmVkLmRhcmtlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzhiMTAxNCAhaW1wb3J0YW50Ow0KfQ0KDQoubWF0ZXJpYWxpemUtcmVkLXRleHQudGV4dC1kYXJrZW4tNCB7DQogIGNvbG9yOiAjOGIxMDE0ICFpbXBvcnRhbnQ7DQp9DQoNCi5yZWQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjQ0MzM2ICFpbXBvcnRhbnQ7DQp9DQoNCi5yZWQtdGV4dCB7DQogIGNvbG9yOiAjRjQ0MzM2ICFpbXBvcnRhbnQ7DQp9DQoNCi5yZWQubGlnaHRlbi01IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRUJFRSAhaW1wb3J0YW50Ow0KfQ0KDQoucmVkLXRleHQudGV4dC1saWdodGVuLTUgew0KICBjb2xvcjogI0ZGRUJFRSAhaW1wb3J0YW50Ow0KfQ0KDQoucmVkLmxpZ2h0ZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNGRkNERDIgIWltcG9ydGFudDsNCn0NCg0KLnJlZC10ZXh0LnRleHQtbGlnaHRlbi00IHsNCiAgY29sb3I6ICNGRkNERDIgIWltcG9ydGFudDsNCn0NCg0KLnJlZC5saWdodGVuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjRUY5QTlBICFpbXBvcnRhbnQ7DQp9DQoNCi5yZWQtdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7DQogIGNvbG9yOiAjRUY5QTlBICFpbXBvcnRhbnQ7DQp9DQoNCi5yZWQubGlnaHRlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0U1NzM3MyAhaW1wb3J0YW50Ow0KfQ0KDQoucmVkLXRleHQudGV4dC1saWdodGVuLTIgew0KICBjb2xvcjogI0U1NzM3MyAhaW1wb3J0YW50Ow0KfQ0KDQoucmVkLmxpZ2h0ZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNFRjUzNTAgIWltcG9ydGFudDsNCn0NCg0KLnJlZC10ZXh0LnRleHQtbGlnaHRlbi0xIHsNCiAgY29sb3I6ICNFRjUzNTAgIWltcG9ydGFudDsNCn0NCg0KLnJlZC5kYXJrZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNFNTM5MzUgIWltcG9ydGFudDsNCn0NCg0KLnJlZC10ZXh0LnRleHQtZGFya2VuLTEgew0KICBjb2xvcjogI0U1MzkzNSAhaW1wb3J0YW50Ow0KfQ0KDQoucmVkLmRhcmtlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0QzMkYyRiAhaW1wb3J0YW50Ow0KfQ0KDQoucmVkLXRleHQudGV4dC1kYXJrZW4tMiB7DQogIGNvbG9yOiAjRDMyRjJGICFpbXBvcnRhbnQ7DQp9DQoNCi5yZWQuZGFya2VuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjQzYyODI4ICFpbXBvcnRhbnQ7DQp9DQoNCi5yZWQtdGV4dC50ZXh0LWRhcmtlbi0zIHsNCiAgY29sb3I6ICNDNjI4MjggIWltcG9ydGFudDsNCn0NCg0KLnJlZC5kYXJrZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNCNzFDMUMgIWltcG9ydGFudDsNCn0NCg0KLnJlZC10ZXh0LnRleHQtZGFya2VuLTQgew0KICBjb2xvcjogI0I3MUMxQyAhaW1wb3J0YW50Ow0KfQ0KDQoucmVkLmFjY2VudC0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0ZGOEE4MCAhaW1wb3J0YW50Ow0KfQ0KDQoucmVkLXRleHQudGV4dC1hY2NlbnQtMSB7DQogIGNvbG9yOiAjRkY4QTgwICFpbXBvcnRhbnQ7DQp9DQoNCi5yZWQuYWNjZW50LTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkY1MjUyICFpbXBvcnRhbnQ7DQp9DQoNCi5yZWQtdGV4dC50ZXh0LWFjY2VudC0yIHsNCiAgY29sb3I6ICNGRjUyNTIgIWltcG9ydGFudDsNCn0NCg0KLnJlZC5hY2NlbnQtMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNGRjE3NDQgIWltcG9ydGFudDsNCn0NCg0KLnJlZC10ZXh0LnRleHQtYWNjZW50LTMgew0KICBjb2xvcjogI0ZGMTc0NCAhaW1wb3J0YW50Ow0KfQ0KDQoucmVkLmFjY2VudC00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0Q1MDAwMCAhaW1wb3J0YW50Ow0KfQ0KDQoucmVkLXRleHQudGV4dC1hY2NlbnQtNCB7DQogIGNvbG9yOiAjRDUwMDAwICFpbXBvcnRhbnQ7DQp9DQoNCi5waW5rIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2U5MWU2MyAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay10ZXh0IHsNCiAgY29sb3I6ICNlOTFlNjMgIWltcG9ydGFudDsNCn0NCg0KLnBpbmsubGlnaHRlbi01IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZjZTRlYyAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay10ZXh0LnRleHQtbGlnaHRlbi01IHsNCiAgY29sb3I6ICNmY2U0ZWMgIWltcG9ydGFudDsNCn0NCg0KLnBpbmsubGlnaHRlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4YmJkMCAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay10ZXh0LnRleHQtbGlnaHRlbi00IHsNCiAgY29sb3I6ICNmOGJiZDAgIWltcG9ydGFudDsNCn0NCg0KLnBpbmsubGlnaHRlbi0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y0OGZiMSAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay10ZXh0LnRleHQtbGlnaHRlbi0zIHsNCiAgY29sb3I6ICNmNDhmYjEgIWltcG9ydGFudDsNCn0NCg0KLnBpbmsubGlnaHRlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2YwNjI5MiAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay10ZXh0LnRleHQtbGlnaHRlbi0yIHsNCiAgY29sb3I6ICNmMDYyOTIgIWltcG9ydGFudDsNCn0NCg0KLnBpbmsubGlnaHRlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2VjNDA3YSAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay10ZXh0LnRleHQtbGlnaHRlbi0xIHsNCiAgY29sb3I6ICNlYzQwN2EgIWltcG9ydGFudDsNCn0NCg0KLnBpbmsuZGFya2VuLTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDgxYjYwICFpbXBvcnRhbnQ7DQp9DQoNCi5waW5rLXRleHQudGV4dC1kYXJrZW4tMSB7DQogIGNvbG9yOiAjZDgxYjYwICFpbXBvcnRhbnQ7DQp9DQoNCi5waW5rLmRhcmtlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2MyMTg1YiAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay10ZXh0LnRleHQtZGFya2VuLTIgew0KICBjb2xvcjogI2MyMTg1YiAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay5kYXJrZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNhZDE0NTcgIWltcG9ydGFudDsNCn0NCg0KLnBpbmstdGV4dC50ZXh0LWRhcmtlbi0zIHsNCiAgY29sb3I6ICNhZDE0NTcgIWltcG9ydGFudDsNCn0NCg0KLnBpbmsuZGFya2VuLTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjODgwZTRmICFpbXBvcnRhbnQ7DQp9DQoNCi5waW5rLXRleHQudGV4dC1kYXJrZW4tNCB7DQogIGNvbG9yOiAjODgwZTRmICFpbXBvcnRhbnQ7DQp9DQoNCi5waW5rLmFjY2VudC0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmODBhYiAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay10ZXh0LnRleHQtYWNjZW50LTEgew0KICBjb2xvcjogI2ZmODBhYiAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay5hY2NlbnQtMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZjQwODEgIWltcG9ydGFudDsNCn0NCg0KLnBpbmstdGV4dC50ZXh0LWFjY2VudC0yIHsNCiAgY29sb3I6ICNmZjQwODEgIWltcG9ydGFudDsNCn0NCg0KLnBpbmsuYWNjZW50LTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjUwMDU3ICFpbXBvcnRhbnQ7DQp9DQoNCi5waW5rLXRleHQudGV4dC1hY2NlbnQtMyB7DQogIGNvbG9yOiAjZjUwMDU3ICFpbXBvcnRhbnQ7DQp9DQoNCi5waW5rLmFjY2VudC00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2M1MTE2MiAhaW1wb3J0YW50Ow0KfQ0KDQoucGluay10ZXh0LnRleHQtYWNjZW50LTQgew0KICBjb2xvcjogI2M1MTE2MiAhaW1wb3J0YW50Ow0KfQ0KDQoucHVycGxlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzljMjdiMCAhaW1wb3J0YW50Ow0KfQ0KDQoucHVycGxlLXRleHQgew0KICBjb2xvcjogIzljMjdiMCAhaW1wb3J0YW50Ow0KfQ0KDQoucHVycGxlLmxpZ2h0ZW4tNSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmM2U1ZjUgIWltcG9ydGFudDsNCn0NCg0KLnB1cnBsZS10ZXh0LnRleHQtbGlnaHRlbi01IHsNCiAgY29sb3I6ICNmM2U1ZjUgIWltcG9ydGFudDsNCn0NCg0KLnB1cnBsZS5saWdodGVuLTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTFiZWU3ICFpbXBvcnRhbnQ7DQp9DQoNCi5wdXJwbGUtdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7DQogIGNvbG9yOiAjZTFiZWU3ICFpbXBvcnRhbnQ7DQp9DQoNCi5wdXJwbGUubGlnaHRlbi0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2NlOTNkOCAhaW1wb3J0YW50Ow0KfQ0KDQoucHVycGxlLXRleHQudGV4dC1saWdodGVuLTMgew0KICBjb2xvcjogI2NlOTNkOCAhaW1wb3J0YW50Ow0KfQ0KDQoucHVycGxlLmxpZ2h0ZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICNiYTY4YzggIWltcG9ydGFudDsNCn0NCg0KLnB1cnBsZS10ZXh0LnRleHQtbGlnaHRlbi0yIHsNCiAgY29sb3I6ICNiYTY4YzggIWltcG9ydGFudDsNCn0NCg0KLnB1cnBsZS5saWdodGVuLTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWI0N2JjICFpbXBvcnRhbnQ7DQp9DQoNCi5wdXJwbGUtdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7DQogIGNvbG9yOiAjYWI0N2JjICFpbXBvcnRhbnQ7DQp9DQoNCi5wdXJwbGUuZGFya2VuLTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjOGUyNGFhICFpbXBvcnRhbnQ7DQp9DQoNCi5wdXJwbGUtdGV4dC50ZXh0LWRhcmtlbi0xIHsNCiAgY29sb3I6ICM4ZTI0YWEgIWltcG9ydGFudDsNCn0NCg0KLnB1cnBsZS5kYXJrZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM3YjFmYTIgIWltcG9ydGFudDsNCn0NCg0KLnB1cnBsZS10ZXh0LnRleHQtZGFya2VuLTIgew0KICBjb2xvcjogIzdiMWZhMiAhaW1wb3J0YW50Ow0KfQ0KDQoucHVycGxlLmRhcmtlbi0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzZhMWI5YSAhaW1wb3J0YW50Ow0KfQ0KDQoucHVycGxlLXRleHQudGV4dC1kYXJrZW4tMyB7DQogIGNvbG9yOiAjNmExYjlhICFpbXBvcnRhbnQ7DQp9DQoNCi5wdXJwbGUuZGFya2VuLTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGExNDhjICFpbXBvcnRhbnQ7DQp9DQoNCi5wdXJwbGUtdGV4dC50ZXh0LWRhcmtlbi00IHsNCiAgY29sb3I6ICM0YTE0OGMgIWltcG9ydGFudDsNCn0NCg0KLnB1cnBsZS5hY2NlbnQtMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNlYTgwZmMgIWltcG9ydGFudDsNCn0NCg0KLnB1cnBsZS10ZXh0LnRleHQtYWNjZW50LTEgew0KICBjb2xvcjogI2VhODBmYyAhaW1wb3J0YW50Ow0KfQ0KDQoucHVycGxlLmFjY2VudC0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2UwNDBmYiAhaW1wb3J0YW50Ow0KfQ0KDQoucHVycGxlLXRleHQudGV4dC1hY2NlbnQtMiB7DQogIGNvbG9yOiAjZTA0MGZiICFpbXBvcnRhbnQ7DQp9DQoNCi5wdXJwbGUuYWNjZW50LTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDUwMGY5ICFpbXBvcnRhbnQ7DQp9DQoNCi5wdXJwbGUtdGV4dC50ZXh0LWFjY2VudC0zIHsNCiAgY29sb3I6ICNkNTAwZjkgIWltcG9ydGFudDsNCn0NCg0KLnB1cnBsZS5hY2NlbnQtNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNhYTAwZmYgIWltcG9ydGFudDsNCn0NCg0KLnB1cnBsZS10ZXh0LnRleHQtYWNjZW50LTQgew0KICBjb2xvcjogI2FhMDBmZiAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1wdXJwbGUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjczYWI3ICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS10ZXh0IHsNCiAgY29sb3I6ICM2NzNhYjcgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLmxpZ2h0ZW4tNSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNlZGU3ZjYgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLXRleHQudGV4dC1saWdodGVuLTUgew0KICBjb2xvcjogI2VkZTdmNiAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1wdXJwbGUubGlnaHRlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2QxYzRlOSAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1wdXJwbGUtdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7DQogIGNvbG9yOiAjZDFjNGU5ICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS5saWdodGVuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjM5ZGRiICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS10ZXh0LnRleHQtbGlnaHRlbi0zIHsNCiAgY29sb3I6ICNiMzlkZGIgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLmxpZ2h0ZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM5NTc1Y2QgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLXRleHQudGV4dC1saWdodGVuLTIgew0KICBjb2xvcjogIzk1NzVjZCAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1wdXJwbGUubGlnaHRlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzdlNTdjMiAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1wdXJwbGUtdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7DQogIGNvbG9yOiAjN2U1N2MyICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS5kYXJrZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICM1ZTM1YjEgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLXRleHQudGV4dC1kYXJrZW4tMSB7DQogIGNvbG9yOiAjNWUzNWIxICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS5kYXJrZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM1MTJkYTggIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLXRleHQudGV4dC1kYXJrZW4tMiB7DQogIGNvbG9yOiAjNTEyZGE4ICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS5kYXJrZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICM0NTI3YTAgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLXRleHQudGV4dC1kYXJrZW4tMyB7DQogIGNvbG9yOiAjNDUyN2EwICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS5kYXJrZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMzMTFiOTIgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLXRleHQudGV4dC1kYXJrZW4tNCB7DQogIGNvbG9yOiAjMzExYjkyICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS5hY2NlbnQtMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNiMzg4ZmYgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLXRleHQudGV4dC1hY2NlbnQtMSB7DQogIGNvbG9yOiAjYjM4OGZmICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS5hY2NlbnQtMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM3YzRkZmYgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLXRleHQudGV4dC1hY2NlbnQtMiB7DQogIGNvbG9yOiAjN2M0ZGZmICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS5hY2NlbnQtMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICM2NTFmZmYgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLXRleHQudGV4dC1hY2NlbnQtMyB7DQogIGNvbG9yOiAjNjUxZmZmICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLXB1cnBsZS5hY2NlbnQtNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICM2MjAwZWEgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtcHVycGxlLXRleHQudGV4dC1hY2NlbnQtNCB7DQogIGNvbG9yOiAjNjIwMGVhICFpbXBvcnRhbnQ7DQp9DQoNCi5pbmRpZ28gew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjM2Y1MWI1ICFpbXBvcnRhbnQ7DQp9DQoNCi5pbmRpZ28tdGV4dCB7DQogIGNvbG9yOiAjM2Y1MWI1ICFpbXBvcnRhbnQ7DQp9DQoNCi5pbmRpZ28ubGlnaHRlbi01IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2U4ZWFmNiAhaW1wb3J0YW50Ow0KfQ0KDQouaW5kaWdvLXRleHQudGV4dC1saWdodGVuLTUgew0KICBjb2xvcjogI2U4ZWFmNiAhaW1wb3J0YW50Ow0KfQ0KDQouaW5kaWdvLmxpZ2h0ZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNjNWNhZTkgIWltcG9ydGFudDsNCn0NCg0KLmluZGlnby10ZXh0LnRleHQtbGlnaHRlbi00IHsNCiAgY29sb3I6ICNjNWNhZTkgIWltcG9ydGFudDsNCn0NCg0KLmluZGlnby5saWdodGVuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWZhOGRhICFpbXBvcnRhbnQ7DQp9DQoNCi5pbmRpZ28tdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7DQogIGNvbG9yOiAjOWZhOGRhICFpbXBvcnRhbnQ7DQp9DQoNCi5pbmRpZ28ubGlnaHRlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzc5ODZjYiAhaW1wb3J0YW50Ow0KfQ0KDQouaW5kaWdvLXRleHQudGV4dC1saWdodGVuLTIgew0KICBjb2xvcjogIzc5ODZjYiAhaW1wb3J0YW50Ow0KfQ0KDQouaW5kaWdvLmxpZ2h0ZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICM1YzZiYzAgIWltcG9ydGFudDsNCn0NCg0KLmluZGlnby10ZXh0LnRleHQtbGlnaHRlbi0xIHsNCiAgY29sb3I6ICM1YzZiYzAgIWltcG9ydGFudDsNCn0NCg0KLmluZGlnby5kYXJrZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICMzOTQ5YWIgIWltcG9ydGFudDsNCn0NCg0KLmluZGlnby10ZXh0LnRleHQtZGFya2VuLTEgew0KICBjb2xvcjogIzM5NDlhYiAhaW1wb3J0YW50Ow0KfQ0KDQouaW5kaWdvLmRhcmtlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzMwM2Y5ZiAhaW1wb3J0YW50Ow0KfQ0KDQouaW5kaWdvLXRleHQudGV4dC1kYXJrZW4tMiB7DQogIGNvbG9yOiAjMzAzZjlmICFpbXBvcnRhbnQ7DQp9DQoNCi5pbmRpZ28uZGFya2VuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjgzNTkzICFpbXBvcnRhbnQ7DQp9DQoNCi5pbmRpZ28tdGV4dC50ZXh0LWRhcmtlbi0zIHsNCiAgY29sb3I6ICMyODM1OTMgIWltcG9ydGFudDsNCn0NCg0KLmluZGlnby5kYXJrZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMxYTIzN2UgIWltcG9ydGFudDsNCn0NCg0KLmluZGlnby10ZXh0LnRleHQtZGFya2VuLTQgew0KICBjb2xvcjogIzFhMjM3ZSAhaW1wb3J0YW50Ow0KfQ0KDQouaW5kaWdvLmFjY2VudC0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzhjOWVmZiAhaW1wb3J0YW50Ow0KfQ0KDQouaW5kaWdvLXRleHQudGV4dC1hY2NlbnQtMSB7DQogIGNvbG9yOiAjOGM5ZWZmICFpbXBvcnRhbnQ7DQp9DQoNCi5pbmRpZ28uYWNjZW50LTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTM2ZGZlICFpbXBvcnRhbnQ7DQp9DQoNCi5pbmRpZ28tdGV4dC50ZXh0LWFjY2VudC0yIHsNCiAgY29sb3I6ICM1MzZkZmUgIWltcG9ydGFudDsNCn0NCg0KLmluZGlnby5hY2NlbnQtMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICMzZDVhZmUgIWltcG9ydGFudDsNCn0NCg0KLmluZGlnby10ZXh0LnRleHQtYWNjZW50LTMgew0KICBjb2xvcjogIzNkNWFmZSAhaW1wb3J0YW50Ow0KfQ0KDQouaW5kaWdvLmFjY2VudC00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzMwNGZmZSAhaW1wb3J0YW50Ow0KfQ0KDQouaW5kaWdvLXRleHQudGV4dC1hY2NlbnQtNCB7DQogIGNvbG9yOiAjMzA0ZmZlICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzIxOTZGMyAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS10ZXh0IHsNCiAgY29sb3I6ICMyMTk2RjMgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUubGlnaHRlbi01IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0UzRjJGRCAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS10ZXh0LnRleHQtbGlnaHRlbi01IHsNCiAgY29sb3I6ICNFM0YyRkQgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUubGlnaHRlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0JCREVGQiAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS10ZXh0LnRleHQtbGlnaHRlbi00IHsNCiAgY29sb3I6ICNCQkRFRkIgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUubGlnaHRlbi0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzkwQ0FGOSAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS10ZXh0LnRleHQtbGlnaHRlbi0zIHsNCiAgY29sb3I6ICM5MENBRjkgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUubGlnaHRlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzY0QjVGNiAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS10ZXh0LnRleHQtbGlnaHRlbi0yIHsNCiAgY29sb3I6ICM2NEI1RjYgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUubGlnaHRlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzQyQTVGNSAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS10ZXh0LnRleHQtbGlnaHRlbi0xIHsNCiAgY29sb3I6ICM0MkE1RjUgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUuZGFya2VuLTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMUU4OEU1ICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLXRleHQudGV4dC1kYXJrZW4tMSB7DQogIGNvbG9yOiAjMUU4OEU1ICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLmRhcmtlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzE5NzZEMiAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS10ZXh0LnRleHQtZGFya2VuLTIgew0KICBjb2xvcjogIzE5NzZEMiAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS5kYXJrZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICMxNTY1QzAgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUtdGV4dC50ZXh0LWRhcmtlbi0zIHsNCiAgY29sb3I6ICMxNTY1QzAgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUuZGFya2VuLTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMEQ0N0ExICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLXRleHQudGV4dC1kYXJrZW4tNCB7DQogIGNvbG9yOiAjMEQ0N0ExICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLmFjY2VudC0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzgyQjFGRiAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS10ZXh0LnRleHQtYWNjZW50LTEgew0KICBjb2xvcjogIzgyQjFGRiAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS5hY2NlbnQtMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM0NDhBRkYgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUtdGV4dC50ZXh0LWFjY2VudC0yIHsNCiAgY29sb3I6ICM0NDhBRkYgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUuYWNjZW50LTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjk3OUZGICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLXRleHQudGV4dC1hY2NlbnQtMyB7DQogIGNvbG9yOiAjMjk3OUZGICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLmFjY2VudC00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI5NjJGRiAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS10ZXh0LnRleHQtYWNjZW50LTQgew0KICBjb2xvcjogIzI5NjJGRiAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtYmx1ZSB7DQogIGJhY2tncm91bmQtY29sb3I6ICMwM2E5ZjQgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUtdGV4dCB7DQogIGNvbG9yOiAjMDNhOWY0ICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ibHVlLmxpZ2h0ZW4tNSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNlMWY1ZmUgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7DQogIGNvbG9yOiAjZTFmNWZlICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ibHVlLmxpZ2h0ZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNiM2U1ZmMgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7DQogIGNvbG9yOiAjYjNlNWZjICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ibHVlLmxpZ2h0ZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICM4MWQ0ZmEgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7DQogIGNvbG9yOiAjODFkNGZhICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ibHVlLmxpZ2h0ZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM0ZmMzZjcgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7DQogIGNvbG9yOiAjNGZjM2Y3ICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ibHVlLmxpZ2h0ZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICMyOWI2ZjYgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7DQogIGNvbG9yOiAjMjliNmY2ICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ibHVlLmRhcmtlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzAzOWJlNSAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtYmx1ZS10ZXh0LnRleHQtZGFya2VuLTEgew0KICBjb2xvcjogIzAzOWJlNSAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtYmx1ZS5kYXJrZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICMwMjg4ZDEgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWRhcmtlbi0yIHsNCiAgY29sb3I6ICMwMjg4ZDEgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUuZGFya2VuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDI3N2JkICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ibHVlLXRleHQudGV4dC1kYXJrZW4tMyB7DQogIGNvbG9yOiAjMDI3N2JkICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ibHVlLmRhcmtlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzAxNTc5YiAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtYmx1ZS10ZXh0LnRleHQtZGFya2VuLTQgew0KICBjb2xvcjogIzAxNTc5YiAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtYmx1ZS5hY2NlbnQtMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICM4MGQ4ZmYgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWFjY2VudC0xIHsNCiAgY29sb3I6ICM4MGQ4ZmYgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUuYWNjZW50LTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDBjNGZmICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ibHVlLXRleHQudGV4dC1hY2NlbnQtMiB7DQogIGNvbG9yOiAjNDBjNGZmICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ibHVlLmFjY2VudC0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzAwYjBmZiAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtYmx1ZS10ZXh0LnRleHQtYWNjZW50LTMgew0KICBjb2xvcjogIzAwYjBmZiAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtYmx1ZS5hY2NlbnQtNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMwMDkxZWEgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWJsdWUtdGV4dC50ZXh0LWFjY2VudC00IHsNCiAgY29sb3I6ICMwMDkxZWEgIWltcG9ydGFudDsNCn0NCg0KLmN5YW4gew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBiY2Q0ICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLXRleHQgew0KICBjb2xvcjogIzAwYmNkNCAhaW1wb3J0YW50Ow0KfQ0KDQouY3lhbi5saWdodGVuLTUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBmN2ZhICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLXRleHQudGV4dC1saWdodGVuLTUgew0KICBjb2xvcjogI2UwZjdmYSAhaW1wb3J0YW50Ow0KfQ0KDQouY3lhbi5saWdodGVuLTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjJlYmYyICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLXRleHQudGV4dC1saWdodGVuLTQgew0KICBjb2xvcjogI2IyZWJmMiAhaW1wb3J0YW50Ow0KfQ0KDQouY3lhbi5saWdodGVuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjODBkZWVhICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLXRleHQudGV4dC1saWdodGVuLTMgew0KICBjb2xvcjogIzgwZGVlYSAhaW1wb3J0YW50Ow0KfQ0KDQouY3lhbi5saWdodGVuLTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGRkMGUxICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLXRleHQudGV4dC1saWdodGVuLTIgew0KICBjb2xvcjogIzRkZDBlMSAhaW1wb3J0YW50Ow0KfQ0KDQouY3lhbi5saWdodGVuLTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZjNmRhICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLXRleHQudGV4dC1saWdodGVuLTEgew0KICBjb2xvcjogIzI2YzZkYSAhaW1wb3J0YW50Ow0KfQ0KDQouY3lhbi5kYXJrZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICMwMGFjYzEgIWltcG9ydGFudDsNCn0NCg0KLmN5YW4tdGV4dC50ZXh0LWRhcmtlbi0xIHsNCiAgY29sb3I6ICMwMGFjYzEgIWltcG9ydGFudDsNCn0NCg0KLmN5YW4uZGFya2VuLTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA5N2E3ICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLXRleHQudGV4dC1kYXJrZW4tMiB7DQogIGNvbG9yOiAjMDA5N2E3ICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLmRhcmtlbi0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzAwODM4ZiAhaW1wb3J0YW50Ow0KfQ0KDQouY3lhbi10ZXh0LnRleHQtZGFya2VuLTMgew0KICBjb2xvcjogIzAwODM4ZiAhaW1wb3J0YW50Ow0KfQ0KDQouY3lhbi5kYXJrZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMwMDYwNjQgIWltcG9ydGFudDsNCn0NCg0KLmN5YW4tdGV4dC50ZXh0LWRhcmtlbi00IHsNCiAgY29sb3I6ICMwMDYwNjQgIWltcG9ydGFudDsNCn0NCg0KLmN5YW4uYWNjZW50LTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjODRmZmZmICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLXRleHQudGV4dC1hY2NlbnQtMSB7DQogIGNvbG9yOiAjODRmZmZmICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLmFjY2VudC0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzE4ZmZmZiAhaW1wb3J0YW50Ow0KfQ0KDQouY3lhbi10ZXh0LnRleHQtYWNjZW50LTIgew0KICBjb2xvcjogIzE4ZmZmZiAhaW1wb3J0YW50Ow0KfQ0KDQouY3lhbi5hY2NlbnQtMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICMwMGU1ZmYgIWltcG9ydGFudDsNCn0NCg0KLmN5YW4tdGV4dC50ZXh0LWFjY2VudC0zIHsNCiAgY29sb3I6ICMwMGU1ZmYgIWltcG9ydGFudDsNCn0NCg0KLmN5YW4uYWNjZW50LTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBiOGQ0ICFpbXBvcnRhbnQ7DQp9DQoNCi5jeWFuLXRleHQudGV4dC1hY2NlbnQtNCB7DQogIGNvbG9yOiAjMDBiOGQ0ICFpbXBvcnRhbnQ7DQp9DQoNCi50ZWFsIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzAwOTY4OCAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC10ZXh0IHsNCiAgY29sb3I6ICMwMDk2ODggIWltcG9ydGFudDsNCn0NCg0KLnRlYWwubGlnaHRlbi01IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2UwZjJmMSAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC10ZXh0LnRleHQtbGlnaHRlbi01IHsNCiAgY29sb3I6ICNlMGYyZjEgIWltcG9ydGFudDsNCn0NCg0KLnRlYWwubGlnaHRlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2IyZGZkYiAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC10ZXh0LnRleHQtbGlnaHRlbi00IHsNCiAgY29sb3I6ICNiMmRmZGIgIWltcG9ydGFudDsNCn0NCg0KLnRlYWwubGlnaHRlbi0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzgwY2JjNCAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC10ZXh0LnRleHQtbGlnaHRlbi0zIHsNCiAgY29sb3I6ICM4MGNiYzQgIWltcG9ydGFudDsNCn0NCg0KLnRlYWwubGlnaHRlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzRkYjZhYyAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC10ZXh0LnRleHQtbGlnaHRlbi0yIHsNCiAgY29sb3I6ICM0ZGI2YWMgIWltcG9ydGFudDsNCn0NCg0KLnRlYWwubGlnaHRlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YSAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC10ZXh0LnRleHQtbGlnaHRlbi0xIHsNCiAgY29sb3I6ICMyNmE2OWEgIWltcG9ydGFudDsNCn0NCg0KLnRlYWwuZGFya2VuLTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA4OTdiICFpbXBvcnRhbnQ7DQp9DQoNCi50ZWFsLXRleHQudGV4dC1kYXJrZW4tMSB7DQogIGNvbG9yOiAjMDA4OTdiICFpbXBvcnRhbnQ7DQp9DQoNCi50ZWFsLmRhcmtlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzAwNzk2YiAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC10ZXh0LnRleHQtZGFya2VuLTIgew0KICBjb2xvcjogIzAwNzk2YiAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC5kYXJrZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICMwMDY5NWMgIWltcG9ydGFudDsNCn0NCg0KLnRlYWwtdGV4dC50ZXh0LWRhcmtlbi0zIHsNCiAgY29sb3I6ICMwMDY5NWMgIWltcG9ydGFudDsNCn0NCg0KLnRlYWwuZGFya2VuLTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA0ZDQwICFpbXBvcnRhbnQ7DQp9DQoNCi50ZWFsLXRleHQudGV4dC1kYXJrZW4tNCB7DQogIGNvbG9yOiAjMDA0ZDQwICFpbXBvcnRhbnQ7DQp9DQoNCi50ZWFsLmFjY2VudC0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2E3ZmZlYiAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC10ZXh0LnRleHQtYWNjZW50LTEgew0KICBjb2xvcjogI2E3ZmZlYiAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC5hY2NlbnQtMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM2NGZmZGEgIWltcG9ydGFudDsNCn0NCg0KLnRlYWwtdGV4dC50ZXh0LWFjY2VudC0yIHsNCiAgY29sb3I6ICM2NGZmZGEgIWltcG9ydGFudDsNCn0NCg0KLnRlYWwuYWNjZW50LTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWRlOWI2ICFpbXBvcnRhbnQ7DQp9DQoNCi50ZWFsLXRleHQudGV4dC1hY2NlbnQtMyB7DQogIGNvbG9yOiAjMWRlOWI2ICFpbXBvcnRhbnQ7DQp9DQoNCi50ZWFsLmFjY2VudC00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzAwYmZhNSAhaW1wb3J0YW50Ow0KfQ0KDQoudGVhbC10ZXh0LnRleHQtYWNjZW50LTQgew0KICBjb2xvcjogIzAwYmZhNSAhaW1wb3J0YW50Ow0KfQ0KDQouZ3JlZW4gew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNENBRjUwICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi10ZXh0IHsNCiAgY29sb3I6ICM0Q0FGNTAgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLmxpZ2h0ZW4tNSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNFOEY1RTkgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLXRleHQudGV4dC1saWdodGVuLTUgew0KICBjb2xvcjogI0U4RjVFOSAhaW1wb3J0YW50Ow0KfQ0KDQouZ3JlZW4ubGlnaHRlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0M4RTZDOSAhaW1wb3J0YW50Ow0KfQ0KDQouZ3JlZW4tdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7DQogIGNvbG9yOiAjQzhFNkM5ICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi5saWdodGVuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjQTVENkE3ICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi10ZXh0LnRleHQtbGlnaHRlbi0zIHsNCiAgY29sb3I6ICNBNUQ2QTcgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLmxpZ2h0ZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM4MUM3ODQgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLXRleHQudGV4dC1saWdodGVuLTIgew0KICBjb2xvcjogIzgxQzc4NCAhaW1wb3J0YW50Ow0KfQ0KDQouZ3JlZW4ubGlnaHRlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzY2QkI2QSAhaW1wb3J0YW50Ow0KfQ0KDQouZ3JlZW4tdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7DQogIGNvbG9yOiAjNjZCQjZBICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi5kYXJrZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICM0M0EwNDcgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLXRleHQudGV4dC1kYXJrZW4tMSB7DQogIGNvbG9yOiAjNDNBMDQ3ICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi5kYXJrZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICMzODhFM0MgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLXRleHQudGV4dC1kYXJrZW4tMiB7DQogIGNvbG9yOiAjMzg4RTNDICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi5kYXJrZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICMyRTdEMzIgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLXRleHQudGV4dC1kYXJrZW4tMyB7DQogIGNvbG9yOiAjMkU3RDMyICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi5kYXJrZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMxQjVFMjAgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLXRleHQudGV4dC1kYXJrZW4tNCB7DQogIGNvbG9yOiAjMUI1RTIwICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi5hY2NlbnQtMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNCOUY2Q0EgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLXRleHQudGV4dC1hY2NlbnQtMSB7DQogIGNvbG9yOiAjQjlGNkNBICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi5hY2NlbnQtMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM2OUYwQUUgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLXRleHQudGV4dC1hY2NlbnQtMiB7DQogIGNvbG9yOiAjNjlGMEFFICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi5hY2NlbnQtMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICMwMEU2NzYgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLXRleHQudGV4dC1hY2NlbnQtMyB7DQogIGNvbG9yOiAjMDBFNjc2ICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmVlbi5hY2NlbnQtNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMwMEM4NTMgIWltcG9ydGFudDsNCn0NCg0KLmdyZWVuLXRleHQudGV4dC1hY2NlbnQtNCB7DQogIGNvbG9yOiAjMDBDODUzICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ncmVlbiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM4YmMzNGEgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLXRleHQgew0KICBjb2xvcjogIzhiYzM0YSAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4ubGlnaHRlbi01IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjhlOSAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7DQogIGNvbG9yOiAjZjFmOGU5ICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ncmVlbi5saWdodGVuLTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGNlZGM4ICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ncmVlbi10ZXh0LnRleHQtbGlnaHRlbi00IHsNCiAgY29sb3I6ICNkY2VkYzggIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLmxpZ2h0ZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNjNWUxYTUgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLXRleHQudGV4dC1saWdodGVuLTMgew0KICBjb2xvcjogI2M1ZTFhNSAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4ubGlnaHRlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2FlZDU4MSAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7DQogIGNvbG9yOiAjYWVkNTgxICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ncmVlbi5saWdodGVuLTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWNjYzY1ICFpbXBvcnRhbnQ7DQp9DQoNCi5saWdodC1ncmVlbi10ZXh0LnRleHQtbGlnaHRlbi0xIHsNCiAgY29sb3I6ICM5Y2NjNjUgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLmRhcmtlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzdjYjM0MiAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWRhcmtlbi0xIHsNCiAgY29sb3I6ICM3Y2IzNDIgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLmRhcmtlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzY4OWYzOCAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWRhcmtlbi0yIHsNCiAgY29sb3I6ICM2ODlmMzggIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLmRhcmtlbi0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzU1OGIyZiAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWRhcmtlbi0zIHsNCiAgY29sb3I6ICM1NThiMmYgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLmRhcmtlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzMzNjkxZSAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWRhcmtlbi00IHsNCiAgY29sb3I6ICMzMzY5MWUgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLmFjY2VudC0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2NjZmY5MCAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWFjY2VudC0xIHsNCiAgY29sb3I6ICNjY2ZmOTAgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLmFjY2VudC0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2IyZmY1OSAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWFjY2VudC0yIHsNCiAgY29sb3I6ICNiMmZmNTkgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLmFjY2VudC0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzc2ZmYwMyAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWFjY2VudC0zIHsNCiAgY29sb3I6ICM3NmZmMDMgIWltcG9ydGFudDsNCn0NCg0KLmxpZ2h0LWdyZWVuLmFjY2VudC00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzY0ZGQxNyAhaW1wb3J0YW50Ow0KfQ0KDQoubGlnaHQtZ3JlZW4tdGV4dC50ZXh0LWFjY2VudC00IHsNCiAgY29sb3I6ICM2NGRkMTcgIWltcG9ydGFudDsNCn0NCg0KLmxpbWUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2RkYzM5ICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLXRleHQgew0KICBjb2xvcjogI2NkZGMzOSAhaW1wb3J0YW50Ow0KfQ0KDQoubGltZS5saWdodGVuLTUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmYmU3ICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLXRleHQudGV4dC1saWdodGVuLTUgew0KICBjb2xvcjogI2Y5ZmJlNyAhaW1wb3J0YW50Ow0KfQ0KDQoubGltZS5saWdodGVuLTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmNGMzICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLXRleHQudGV4dC1saWdodGVuLTQgew0KICBjb2xvcjogI2YwZjRjMyAhaW1wb3J0YW50Ow0KfQ0KDQoubGltZS5saWdodGVuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTZlZTljICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLXRleHQudGV4dC1saWdodGVuLTMgew0KICBjb2xvcjogI2U2ZWU5YyAhaW1wb3J0YW50Ow0KfQ0KDQoubGltZS5saWdodGVuLTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGNlNzc1ICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLXRleHQudGV4dC1saWdodGVuLTIgew0KICBjb2xvcjogI2RjZTc3NSAhaW1wb3J0YW50Ow0KfQ0KDQoubGltZS5saWdodGVuLTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDRlMTU3ICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLXRleHQudGV4dC1saWdodGVuLTEgew0KICBjb2xvcjogI2Q0ZTE1NyAhaW1wb3J0YW50Ow0KfQ0KDQoubGltZS5kYXJrZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNjMGNhMzMgIWltcG9ydGFudDsNCn0NCg0KLmxpbWUtdGV4dC50ZXh0LWRhcmtlbi0xIHsNCiAgY29sb3I6ICNjMGNhMzMgIWltcG9ydGFudDsNCn0NCg0KLmxpbWUuZGFya2VuLTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWZiNDJiICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLXRleHQudGV4dC1kYXJrZW4tMiB7DQogIGNvbG9yOiAjYWZiNDJiICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLmRhcmtlbi0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzllOWQyNCAhaW1wb3J0YW50Ow0KfQ0KDQoubGltZS10ZXh0LnRleHQtZGFya2VuLTMgew0KICBjb2xvcjogIzllOWQyNCAhaW1wb3J0YW50Ow0KfQ0KDQoubGltZS5kYXJrZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICM4Mjc3MTcgIWltcG9ydGFudDsNCn0NCg0KLmxpbWUtdGV4dC50ZXh0LWRhcmtlbi00IHsNCiAgY29sb3I6ICM4Mjc3MTcgIWltcG9ydGFudDsNCn0NCg0KLmxpbWUuYWNjZW50LTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmZjgxICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLXRleHQudGV4dC1hY2NlbnQtMSB7DQogIGNvbG9yOiAjZjRmZjgxICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLmFjY2VudC0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZmY0MSAhaW1wb3J0YW50Ow0KfQ0KDQoubGltZS10ZXh0LnRleHQtYWNjZW50LTIgew0KICBjb2xvcjogI2VlZmY0MSAhaW1wb3J0YW50Ow0KfQ0KDQoubGltZS5hY2NlbnQtMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNjNmZmMDAgIWltcG9ydGFudDsNCn0NCg0KLmxpbWUtdGV4dC50ZXh0LWFjY2VudC0zIHsNCiAgY29sb3I6ICNjNmZmMDAgIWltcG9ydGFudDsNCn0NCg0KLmxpbWUuYWNjZW50LTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWVlYTAwICFpbXBvcnRhbnQ7DQp9DQoNCi5saW1lLXRleHQudGV4dC1hY2NlbnQtNCB7DQogIGNvbG9yOiAjYWVlYTAwICFpbXBvcnRhbnQ7DQp9DQoNCi55ZWxsb3cgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZlYjNiICFpbXBvcnRhbnQ7DQp9DQoNCi55ZWxsb3ctdGV4dCB7DQogIGNvbG9yOiAjZmZlYjNiICFpbXBvcnRhbnQ7DQp9DQoNCi55ZWxsb3cubGlnaHRlbi01IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmRlNyAhaW1wb3J0YW50Ow0KfQ0KDQoueWVsbG93LXRleHQudGV4dC1saWdodGVuLTUgew0KICBjb2xvcjogI2ZmZmRlNyAhaW1wb3J0YW50Ow0KfQ0KDQoueWVsbG93LmxpZ2h0ZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY5YzQgIWltcG9ydGFudDsNCn0NCg0KLnllbGxvdy10ZXh0LnRleHQtbGlnaHRlbi00IHsNCiAgY29sb3I6ICNmZmY5YzQgIWltcG9ydGFudDsNCn0NCg0KLnllbGxvdy5saWdodGVuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmNTlkICFpbXBvcnRhbnQ7DQp9DQoNCi55ZWxsb3ctdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7DQogIGNvbG9yOiAjZmZmNTlkICFpbXBvcnRhbnQ7DQp9DQoNCi55ZWxsb3cubGlnaHRlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjE3NiAhaW1wb3J0YW50Ow0KfQ0KDQoueWVsbG93LXRleHQudGV4dC1saWdodGVuLTIgew0KICBjb2xvcjogI2ZmZjE3NiAhaW1wb3J0YW50Ow0KfQ0KDQoueWVsbG93LmxpZ2h0ZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmVlNTggIWltcG9ydGFudDsNCn0NCg0KLnllbGxvdy10ZXh0LnRleHQtbGlnaHRlbi0xIHsNCiAgY29sb3I6ICNmZmVlNTggIWltcG9ydGFudDsNCn0NCg0KLnllbGxvdy5kYXJrZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZGQ4MzUgIWltcG9ydGFudDsNCn0NCg0KLnllbGxvdy10ZXh0LnRleHQtZGFya2VuLTEgew0KICBjb2xvcjogI2ZkZDgzNSAhaW1wb3J0YW50Ow0KfQ0KDQoueWVsbG93LmRhcmtlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZiYzAyZCAhaW1wb3J0YW50Ow0KfQ0KDQoueWVsbG93LXRleHQudGV4dC1kYXJrZW4tMiB7DQogIGNvbG9yOiAjZmJjMDJkICFpbXBvcnRhbnQ7DQp9DQoNCi55ZWxsb3cuZGFya2VuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlhODI1ICFpbXBvcnRhbnQ7DQp9DQoNCi55ZWxsb3ctdGV4dC50ZXh0LWRhcmtlbi0zIHsNCiAgY29sb3I6ICNmOWE4MjUgIWltcG9ydGFudDsNCn0NCg0KLnllbGxvdy5kYXJrZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmNTdmMTcgIWltcG9ydGFudDsNCn0NCg0KLnllbGxvdy10ZXh0LnRleHQtZGFya2VuLTQgew0KICBjb2xvcjogI2Y1N2YxNyAhaW1wb3J0YW50Ow0KfQ0KDQoueWVsbG93LmFjY2VudC0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmY4ZCAhaW1wb3J0YW50Ow0KfQ0KDQoueWVsbG93LXRleHQudGV4dC1hY2NlbnQtMSB7DQogIGNvbG9yOiAjZmZmZjhkICFpbXBvcnRhbnQ7DQp9DQoNCi55ZWxsb3cuYWNjZW50LTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZjAwICFpbXBvcnRhbnQ7DQp9DQoNCi55ZWxsb3ctdGV4dC50ZXh0LWFjY2VudC0yIHsNCiAgY29sb3I6ICNmZmZmMDAgIWltcG9ydGFudDsNCn0NCg0KLnllbGxvdy5hY2NlbnQtMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmVhMDAgIWltcG9ydGFudDsNCn0NCg0KLnllbGxvdy10ZXh0LnRleHQtYWNjZW50LTMgew0KICBjb2xvcjogI2ZmZWEwMCAhaW1wb3J0YW50Ow0KfQ0KDQoueWVsbG93LmFjY2VudC00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZDYwMCAhaW1wb3J0YW50Ow0KfQ0KDQoueWVsbG93LXRleHQudGV4dC1hY2NlbnQtNCB7DQogIGNvbG9yOiAjZmZkNjAwICFpbXBvcnRhbnQ7DQp9DQoNCi5hbWJlciB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmMxMDcgIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLXRleHQgew0KICBjb2xvcjogI2ZmYzEwNyAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXIubGlnaHRlbi01IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjhlMSAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXItdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7DQogIGNvbG9yOiAjZmZmOGUxICFpbXBvcnRhbnQ7DQp9DQoNCi5hbWJlci5saWdodGVuLTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZlY2IzICFpbXBvcnRhbnQ7DQp9DQoNCi5hbWJlci10ZXh0LnRleHQtbGlnaHRlbi00IHsNCiAgY29sb3I6ICNmZmVjYjMgIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLmxpZ2h0ZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmUwODIgIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLXRleHQudGV4dC1saWdodGVuLTMgew0KICBjb2xvcjogI2ZmZTA4MiAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXIubGlnaHRlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZDU0ZiAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXItdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7DQogIGNvbG9yOiAjZmZkNTRmICFpbXBvcnRhbnQ7DQp9DQoNCi5hbWJlci5saWdodGVuLTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZjYTI4ICFpbXBvcnRhbnQ7DQp9DQoNCi5hbWJlci10ZXh0LnRleHQtbGlnaHRlbi0xIHsNCiAgY29sb3I6ICNmZmNhMjggIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLmRhcmtlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYjMwMCAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXItdGV4dC50ZXh0LWRhcmtlbi0xIHsNCiAgY29sb3I6ICNmZmIzMDAgIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLmRhcmtlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYTAwMCAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXItdGV4dC50ZXh0LWRhcmtlbi0yIHsNCiAgY29sb3I6ICNmZmEwMDAgIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLmRhcmtlbi0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmOGYwMCAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXItdGV4dC50ZXh0LWRhcmtlbi0zIHsNCiAgY29sb3I6ICNmZjhmMDAgIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLmRhcmtlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmNmYwMCAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXItdGV4dC50ZXh0LWRhcmtlbi00IHsNCiAgY29sb3I6ICNmZjZmMDAgIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLmFjY2VudC0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZTU3ZiAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXItdGV4dC50ZXh0LWFjY2VudC0xIHsNCiAgY29sb3I6ICNmZmU1N2YgIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLmFjY2VudC0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZDc0MCAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXItdGV4dC50ZXh0LWFjY2VudC0yIHsNCiAgY29sb3I6ICNmZmQ3NDAgIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLmFjY2VudC0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYzQwMCAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXItdGV4dC50ZXh0LWFjY2VudC0zIHsNCiAgY29sb3I6ICNmZmM0MDAgIWltcG9ydGFudDsNCn0NCg0KLmFtYmVyLmFjY2VudC00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYWIwMCAhaW1wb3J0YW50Ow0KfQ0KDQouYW1iZXItdGV4dC50ZXh0LWFjY2VudC00IHsNCiAgY29sb3I6ICNmZmFiMDAgIWltcG9ydGFudDsNCn0NCg0KLm9yYW5nZSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZjk4MDAgIWltcG9ydGFudDsNCn0NCg0KLm9yYW5nZS10ZXh0IHsNCiAgY29sb3I6ICNmZjk4MDAgIWltcG9ydGFudDsNCn0NCg0KLm9yYW5nZS5saWdodGVuLTUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmM2UwICFpbXBvcnRhbnQ7DQp9DQoNCi5vcmFuZ2UtdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7DQogIGNvbG9yOiAjZmZmM2UwICFpbXBvcnRhbnQ7DQp9DQoNCi5vcmFuZ2UubGlnaHRlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZTBiMiAhaW1wb3J0YW50Ow0KfQ0KDQoub3JhbmdlLXRleHQudGV4dC1saWdodGVuLTQgew0KICBjb2xvcjogI2ZmZTBiMiAhaW1wb3J0YW50Ow0KfQ0KDQoub3JhbmdlLmxpZ2h0ZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmNjODAgIWltcG9ydGFudDsNCn0NCg0KLm9yYW5nZS10ZXh0LnRleHQtbGlnaHRlbi0zIHsNCiAgY29sb3I6ICNmZmNjODAgIWltcG9ydGFudDsNCn0NCg0KLm9yYW5nZS5saWdodGVuLTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZiNzRkICFpbXBvcnRhbnQ7DQp9DQoNCi5vcmFuZ2UtdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7DQogIGNvbG9yOiAjZmZiNzRkICFpbXBvcnRhbnQ7DQp9DQoNCi5vcmFuZ2UubGlnaHRlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYTcyNiAhaW1wb3J0YW50Ow0KfQ0KDQoub3JhbmdlLXRleHQudGV4dC1saWdodGVuLTEgew0KICBjb2xvcjogI2ZmYTcyNiAhaW1wb3J0YW50Ow0KfQ0KDQoub3JhbmdlLmRhcmtlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZiOGMwMCAhaW1wb3J0YW50Ow0KfQ0KDQoub3JhbmdlLXRleHQudGV4dC1kYXJrZW4tMSB7DQogIGNvbG9yOiAjZmI4YzAwICFpbXBvcnRhbnQ7DQp9DQoNCi5vcmFuZ2UuZGFya2VuLTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjU3YzAwICFpbXBvcnRhbnQ7DQp9DQoNCi5vcmFuZ2UtdGV4dC50ZXh0LWRhcmtlbi0yIHsNCiAgY29sb3I6ICNmNTdjMDAgIWltcG9ydGFudDsNCn0NCg0KLm9yYW5nZS5kYXJrZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNlZjZjMDAgIWltcG9ydGFudDsNCn0NCg0KLm9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTMgew0KICBjb2xvcjogI2VmNmMwMCAhaW1wb3J0YW50Ow0KfQ0KDQoub3JhbmdlLmRhcmtlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2U2NTEwMCAhaW1wb3J0YW50Ow0KfQ0KDQoub3JhbmdlLXRleHQudGV4dC1kYXJrZW4tNCB7DQogIGNvbG9yOiAjZTY1MTAwICFpbXBvcnRhbnQ7DQp9DQoNCi5vcmFuZ2UuYWNjZW50LTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZkMTgwICFpbXBvcnRhbnQ7DQp9DQoNCi5vcmFuZ2UtdGV4dC50ZXh0LWFjY2VudC0xIHsNCiAgY29sb3I6ICNmZmQxODAgIWltcG9ydGFudDsNCn0NCg0KLm9yYW5nZS5hY2NlbnQtMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmFiNDAgIWltcG9ydGFudDsNCn0NCg0KLm9yYW5nZS10ZXh0LnRleHQtYWNjZW50LTIgew0KICBjb2xvcjogI2ZmYWI0MCAhaW1wb3J0YW50Ow0KfQ0KDQoub3JhbmdlLmFjY2VudC0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmOTEwMCAhaW1wb3J0YW50Ow0KfQ0KDQoub3JhbmdlLXRleHQudGV4dC1hY2NlbnQtMyB7DQogIGNvbG9yOiAjZmY5MTAwICFpbXBvcnRhbnQ7DQp9DQoNCi5vcmFuZ2UuYWNjZW50LTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY2ZDAwICFpbXBvcnRhbnQ7DQp9DQoNCi5vcmFuZ2UtdGV4dC50ZXh0LWFjY2VudC00IHsNCiAgY29sb3I6ICNmZjZkMDAgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtb3JhbmdlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmNTcyMiAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UtdGV4dCB7DQogIGNvbG9yOiAjZmY1NzIyICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS5saWdodGVuLTUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmJlOWU3ICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtbGlnaHRlbi01IHsNCiAgY29sb3I6ICNmYmU5ZTcgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtb3JhbmdlLmxpZ2h0ZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmNjYmMgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtb3JhbmdlLXRleHQudGV4dC1saWdodGVuLTQgew0KICBjb2xvcjogI2ZmY2NiYyAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UubGlnaHRlbi0zIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYWI5MSAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UtdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7DQogIGNvbG9yOiAjZmZhYjkxICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS5saWdodGVuLTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY4YTY1ICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtbGlnaHRlbi0yIHsNCiAgY29sb3I6ICNmZjhhNjUgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtb3JhbmdlLmxpZ2h0ZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZjcwNDMgIWltcG9ydGFudDsNCn0NCg0KLmRlZXAtb3JhbmdlLXRleHQudGV4dC1saWdodGVuLTEgew0KICBjb2xvcjogI2ZmNzA0MyAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UuZGFya2VuLTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjQ1MTFlICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTEgew0KICBjb2xvcjogI2Y0NTExZSAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UuZGFya2VuLTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTY0YTE5ICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTIgew0KICBjb2xvcjogI2U2NGExOSAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UuZGFya2VuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDg0MzE1ICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTMgew0KICBjb2xvcjogI2Q4NDMxNSAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UuZGFya2VuLTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYmYzNjBjICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtZGFya2VuLTQgew0KICBjb2xvcjogI2JmMzYwYyAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UuYWNjZW50LTEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY5ZTgwICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtYWNjZW50LTEgew0KICBjb2xvcjogI2ZmOWU4MCAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UuYWNjZW50LTIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY2ZTQwICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtYWNjZW50LTIgew0KICBjb2xvcjogI2ZmNmU0MCAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UuYWNjZW50LTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYzZDAwICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtYWNjZW50LTMgew0KICBjb2xvcjogI2ZmM2QwMCAhaW1wb3J0YW50Ow0KfQ0KDQouZGVlcC1vcmFuZ2UuYWNjZW50LTQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGQyYzAwICFpbXBvcnRhbnQ7DQp9DQoNCi5kZWVwLW9yYW5nZS10ZXh0LnRleHQtYWNjZW50LTQgew0KICBjb2xvcjogI2RkMmMwMCAhaW1wb3J0YW50Ow0KfQ0KDQouYnJvd24gew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzk1NTQ4ICFpbXBvcnRhbnQ7DQp9DQoNCi5icm93bi10ZXh0IHsNCiAgY29sb3I6ICM3OTU1NDggIWltcG9ydGFudDsNCn0NCg0KLmJyb3duLmxpZ2h0ZW4tNSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNlZmViZTkgIWltcG9ydGFudDsNCn0NCg0KLmJyb3duLXRleHQudGV4dC1saWdodGVuLTUgew0KICBjb2xvcjogI2VmZWJlOSAhaW1wb3J0YW50Ow0KfQ0KDQouYnJvd24ubGlnaHRlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Q3Y2NjOCAhaW1wb3J0YW50Ow0KfQ0KDQouYnJvd24tdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7DQogIGNvbG9yOiAjZDdjY2M4ICFpbXBvcnRhbnQ7DQp9DQoNCi5icm93bi5saWdodGVuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYmNhYWE0ICFpbXBvcnRhbnQ7DQp9DQoNCi5icm93bi10ZXh0LnRleHQtbGlnaHRlbi0zIHsNCiAgY29sb3I6ICNiY2FhYTQgIWltcG9ydGFudDsNCn0NCg0KLmJyb3duLmxpZ2h0ZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICNhMTg4N2YgIWltcG9ydGFudDsNCn0NCg0KLmJyb3duLXRleHQudGV4dC1saWdodGVuLTIgew0KICBjb2xvcjogI2ExODg3ZiAhaW1wb3J0YW50Ow0KfQ0KDQouYnJvd24ubGlnaHRlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzhkNmU2MyAhaW1wb3J0YW50Ow0KfQ0KDQouYnJvd24tdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7DQogIGNvbG9yOiAjOGQ2ZTYzICFpbXBvcnRhbnQ7DQp9DQoNCi5icm93bi5kYXJrZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICM2ZDRjNDEgIWltcG9ydGFudDsNCn0NCg0KLmJyb3duLXRleHQudGV4dC1kYXJrZW4tMSB7DQogIGNvbG9yOiAjNmQ0YzQxICFpbXBvcnRhbnQ7DQp9DQoNCi5icm93bi5kYXJrZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM1ZDQwMzcgIWltcG9ydGFudDsNCn0NCg0KLmJyb3duLXRleHQudGV4dC1kYXJrZW4tMiB7DQogIGNvbG9yOiAjNWQ0MDM3ICFpbXBvcnRhbnQ7DQp9DQoNCi5icm93bi5kYXJrZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICM0ZTM0MmUgIWltcG9ydGFudDsNCn0NCg0KLmJyb3duLXRleHQudGV4dC1kYXJrZW4tMyB7DQogIGNvbG9yOiAjNGUzNDJlICFpbXBvcnRhbnQ7DQp9DQoNCi5icm93bi5kYXJrZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMzZTI3MjMgIWltcG9ydGFudDsNCn0NCg0KLmJyb3duLXRleHQudGV4dC1kYXJrZW4tNCB7DQogIGNvbG9yOiAjM2UyNzIzICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLWdyZXkgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjA3ZDhiICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLWdyZXktdGV4dCB7DQogIGNvbG9yOiAjNjA3ZDhiICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLWdyZXkubGlnaHRlbi01IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2VjZWZmMSAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS1ncmV5LXRleHQudGV4dC1saWdodGVuLTUgew0KICBjb2xvcjogI2VjZWZmMSAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS1ncmV5LmxpZ2h0ZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNjZmQ4ZGMgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUtZ3JleS10ZXh0LnRleHQtbGlnaHRlbi00IHsNCiAgY29sb3I6ICNjZmQ4ZGMgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUtZ3JleS5saWdodGVuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjBiZWM1ICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLWdyZXktdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7DQogIGNvbG9yOiAjYjBiZWM1ICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLWdyZXkubGlnaHRlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzkwYTRhZSAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS1ncmV5LXRleHQudGV4dC1saWdodGVuLTIgew0KICBjb2xvcjogIzkwYTRhZSAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS1ncmV5LmxpZ2h0ZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICM3ODkwOWMgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUtZ3JleS10ZXh0LnRleHQtbGlnaHRlbi0xIHsNCiAgY29sb3I6ICM3ODkwOWMgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUtZ3JleS5kYXJrZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICM1NDZlN2EgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUtZ3JleS10ZXh0LnRleHQtZGFya2VuLTEgew0KICBjb2xvcjogIzU0NmU3YSAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS1ncmV5LmRhcmtlbi0yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzQ1NWE2NCAhaW1wb3J0YW50Ow0KfQ0KDQouYmx1ZS1ncmV5LXRleHQudGV4dC1kYXJrZW4tMiB7DQogIGNvbG9yOiAjNDU1YTY0ICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLWdyZXkuZGFya2VuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzc0NzRmICFpbXBvcnRhbnQ7DQp9DQoNCi5ibHVlLWdyZXktdGV4dC50ZXh0LWRhcmtlbi0zIHsNCiAgY29sb3I6ICMzNzQ3NGYgIWltcG9ydGFudDsNCn0NCg0KLmJsdWUtZ3JleS5kYXJrZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMyNjMyMzggIWltcG9ydGFudDsNCn0NCg0KLmJsdWUtZ3JleS10ZXh0LnRleHQtZGFya2VuLTQgew0KICBjb2xvcjogIzI2MzIzOCAhaW1wb3J0YW50Ow0KfQ0KDQouZ3JleSB7DQogIGJhY2tncm91bmQtY29sb3I6ICM5ZTllOWUgIWltcG9ydGFudDsNCn0NCg0KLmdyZXktdGV4dCB7DQogIGNvbG9yOiAjOWU5ZTllICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmV5LmxpZ2h0ZW4tNSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmEgIWltcG9ydGFudDsNCn0NCg0KLmdyZXktdGV4dC50ZXh0LWxpZ2h0ZW4tNSB7DQogIGNvbG9yOiAjZmFmYWZhICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmV5LmxpZ2h0ZW4tNCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjUgIWltcG9ydGFudDsNCn0NCg0KLmdyZXktdGV4dC50ZXh0LWxpZ2h0ZW4tNCB7DQogIGNvbG9yOiAjZjVmNWY1ICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmV5LmxpZ2h0ZW4tMyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWUgIWltcG9ydGFudDsNCn0NCg0KLmdyZXktdGV4dC50ZXh0LWxpZ2h0ZW4tMyB7DQogIGNvbG9yOiAjZWVlZWVlICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmV5LmxpZ2h0ZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDsNCn0NCg0KLmdyZXktdGV4dC50ZXh0LWxpZ2h0ZW4tMiB7DQogIGNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmV5LmxpZ2h0ZW4tMSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNiZGJkYmQgIWltcG9ydGFudDsNCn0NCg0KLmdyZXktdGV4dC50ZXh0LWxpZ2h0ZW4tMSB7DQogIGNvbG9yOiAjYmRiZGJkICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmV5LmRhcmtlbi0xIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzc1NzU3NSAhaW1wb3J0YW50Ow0KfQ0KDQouZ3JleS10ZXh0LnRleHQtZGFya2VuLTEgew0KICBjb2xvcjogIzc1NzU3NSAhaW1wb3J0YW50Ow0KfQ0KDQouZ3JleS5kYXJrZW4tMiB7DQogIGJhY2tncm91bmQtY29sb3I6ICM2MTYxNjEgIWltcG9ydGFudDsNCn0NCg0KLmdyZXktdGV4dC50ZXh0LWRhcmtlbi0yIHsNCiAgY29sb3I6ICM2MTYxNjEgIWltcG9ydGFudDsNCn0NCg0KLmdyZXkuZGFya2VuLTMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDI0MjQyICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmV5LXRleHQudGV4dC1kYXJrZW4tMyB7DQogIGNvbG9yOiAjNDI0MjQyICFpbXBvcnRhbnQ7DQp9DQoNCi5ncmV5LmRhcmtlbi00IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzIxMjEyMSAhaW1wb3J0YW50Ow0KfQ0KDQouZ3JleS10ZXh0LnRleHQtZGFya2VuLTQgew0KICBjb2xvcjogIzIxMjEyMSAhaW1wb3J0YW50Ow0KfQ0KDQouYmxhY2sgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwICFpbXBvcnRhbnQ7DQp9DQoNCi5ibGFjay10ZXh0IHsNCiAgY29sb3I6ICMwMDAwMDAgIWltcG9ydGFudDsNCn0NCg0KLndoaXRlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkZGRiAhaW1wb3J0YW50Ow0KfQ0KDQoud2hpdGUtdGV4dCB7DQogIGNvbG9yOiAjRkZGRkZGICFpbXBvcnRhbnQ7DQp9DQoNCi50cmFuc3BhcmVudCB7DQogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7DQp9DQoNCi50cmFuc3BhcmVudC10ZXh0IHsNCiAgY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7DQp9DQoNCi8qISBub3JtYWxpemUuY3NzIHY3LjAuMCB8IE1JVCBMaWNlbnNlIHwgZ2l0aHViLmNvbS9uZWNvbGFzL25vcm1hbGl6ZS5jc3MgKi8NCi8qIERvY3VtZW50DQogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLw0KLyoqDQogKiAxLiBDb3JyZWN0IHRoZSBsaW5lIGhlaWdodCBpbiBhbGwgYnJvd3NlcnMuDQogKiAyLiBQcmV2ZW50IGFkanVzdG1lbnRzIG9mIGZvbnQgc2l6ZSBhZnRlciBvcmllbnRhdGlvbiBjaGFuZ2VzIGluDQogKiAgICBJRSBvbiBXaW5kb3dzIFBob25lIGFuZCBpbiBpT1MuDQogKi8NCmh0bWwgew0KICBsaW5lLWhlaWdodDogMS4xNTsNCiAgLyogMSAqLw0KICAtbXMtdGV4dC1zaXplLWFkanVzdDogMTAwJTsNCiAgLyogMiAqLw0KICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7DQogIC8qIDIgKi8NCn0NCg0KLyogU2VjdGlvbnMNCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovDQovKioNCiAqIFJlbW92ZSB0aGUgbWFyZ2luIGluIGFsbCBicm93c2VycyAob3BpbmlvbmF0ZWQpLg0KICovDQpib2R5IHsNCiAgbWFyZ2luOiAwOw0KfQ0KDQovKioNCiAqIEFkZCB0aGUgY29ycmVjdCBkaXNwbGF5IGluIElFIDktLg0KICovDQphcnRpY2xlLA0KYXNpZGUsDQpmb290ZXIsDQpoZWFkZXIsDQpuYXYsDQpzZWN0aW9uIHsNCiAgZGlzcGxheTogYmxvY2s7DQp9DQoNCi8qKg0KICogQ29ycmVjdCB0aGUgZm9udCBzaXplIGFuZCBtYXJnaW4gb24gYGgxYCBlbGVtZW50cyB3aXRoaW4gYHNlY3Rpb25gIGFuZA0KICogYGFydGljbGVgIGNvbnRleHRzIGluIENocm9tZSwgRmlyZWZveCwgYW5kIFNhZmFyaS4NCiAqLw0KaDEgew0KICBmb250LXNpemU6IDJlbTsNCiAgbWFyZ2luOiAwLjY3ZW0gMDsNCn0NCg0KLyogR3JvdXBpbmcgY29udGVudA0KICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCi8qKg0KICogQWRkIHRoZSBjb3JyZWN0IGRpc3BsYXkgaW4gSUUgOS0uDQogKiAxLiBBZGQgdGhlIGNvcnJlY3QgZGlzcGxheSBpbiBJRS4NCiAqLw0KZmlnY2FwdGlvbiwNCmZpZ3VyZSwNCm1haW4gew0KICAvKiAxICovDQogIGRpc3BsYXk6IGJsb2NrOw0KfQ0KDQovKioNCiAqIEFkZCB0aGUgY29ycmVjdCBtYXJnaW4gaW4gSUUgOC4NCiAqLw0KZmlndXJlIHsNCiAgbWFyZ2luOiAxZW0gNDBweDsNCn0NCg0KLyoqDQogKiAxLiBBZGQgdGhlIGNvcnJlY3QgYm94IHNpemluZyBpbiBGaXJlZm94Lg0KICogMi4gU2hvdyB0aGUgb3ZlcmZsb3cgaW4gRWRnZSBhbmQgSUUuDQogKi8NCmhyIHsNCiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBjb250ZW50LWJveDsNCiAgICAgICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDsNCiAgLyogMSAqLw0KICBoZWlnaHQ6IDA7DQogIC8qIDEgKi8NCiAgb3ZlcmZsb3c6IHZpc2libGU7DQogIC8qIDIgKi8NCn0NCg0KLyoqDQogKiAxLiBDb3JyZWN0IHRoZSBpbmhlcml0YW5jZSBhbmQgc2NhbGluZyBvZiBmb250IHNpemUgaW4gYWxsIGJyb3dzZXJzLg0KICogMi4gQ29ycmVjdCB0aGUgb2RkIGBlbWAgZm9udCBzaXppbmcgaW4gYWxsIGJyb3dzZXJzLg0KICovDQpwcmUgew0KICBmb250LWZhbWlseTogbW9ub3NwYWNlLCBtb25vc3BhY2U7DQogIC8qIDEgKi8NCiAgZm9udC1zaXplOiAxZW07DQogIC8qIDIgKi8NCn0NCg0KLyogVGV4dC1sZXZlbCBzZW1hbnRpY3MNCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovDQovKioNCiAqIDEuIFJlbW92ZSB0aGUgZ3JheSBiYWNrZ3JvdW5kIG9uIGFjdGl2ZSBsaW5rcyBpbiBJRSAxMC4NCiAqIDIuIFJlbW92ZSBnYXBzIGluIGxpbmtzIHVuZGVybGluZSBpbiBpT1MgOCsgYW5kIFNhZmFyaSA4Ky4NCiAqLw0KYSB7DQogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Ow0KICAvKiAxICovDQogIC13ZWJraXQtdGV4dC1kZWNvcmF0aW9uLXNraXA6IG9iamVjdHM7DQogIC8qIDIgKi8NCn0NCg0KLyoqDQogKiAxLiBSZW1vdmUgdGhlIGJvdHRvbSBib3JkZXIgaW4gQ2hyb21lIDU3LSBhbmQgRmlyZWZveCAzOS0uDQogKiAyLiBBZGQgdGhlIGNvcnJlY3QgdGV4dCBkZWNvcmF0aW9uIGluIENocm9tZSwgRWRnZSwgSUUsIE9wZXJhLCBhbmQgU2FmYXJpLg0KICovDQphYmJyW3RpdGxlXSB7DQogIGJvcmRlci1ib3R0b206IG5vbmU7DQogIC8qIDEgKi8NCiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7DQogIC8qIDIgKi8NCiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmUgZG90dGVkOw0KICAvKiAyICovDQp9DQoNCi8qKg0KICogUHJldmVudCB0aGUgZHVwbGljYXRlIGFwcGxpY2F0aW9uIG9mIGBib2xkZXJgIGJ5IHRoZSBuZXh0IHJ1bGUgaW4gU2FmYXJpIDYuDQogKi8NCmIsDQpzdHJvbmcgew0KICBmb250LXdlaWdodDogaW5oZXJpdDsNCn0NCg0KLyoqDQogKiBBZGQgdGhlIGNvcnJlY3QgZm9udCB3ZWlnaHQgaW4gQ2hyb21lLCBFZGdlLCBhbmQgU2FmYXJpLg0KICovDQpiLA0Kc3Ryb25nIHsNCiAgZm9udC13ZWlnaHQ6IGJvbGRlcjsNCn0NCg0KLyoqDQogKiAxLiBDb3JyZWN0IHRoZSBpbmhlcml0YW5jZSBhbmQgc2NhbGluZyBvZiBmb250IHNpemUgaW4gYWxsIGJyb3dzZXJzLg0KICogMi4gQ29ycmVjdCB0aGUgb2RkIGBlbWAgZm9udCBzaXppbmcgaW4gYWxsIGJyb3dzZXJzLg0KICovDQpjb2RlLA0Ka2JkLA0Kc2FtcCB7DQogIGZvbnQtZmFtaWx5OiBtb25vc3BhY2UsIG1vbm9zcGFjZTsNCiAgLyogMSAqLw0KICBmb250LXNpemU6IDFlbTsNCiAgLyogMiAqLw0KfQ0KDQovKioNCiAqIEFkZCB0aGUgY29ycmVjdCBmb250IHN0eWxlIGluIEFuZHJvaWQgNC4zLS4NCiAqLw0KZGZuIHsNCiAgZm9udC1zdHlsZTogaXRhbGljOw0KfQ0KDQovKioNCiAqIEFkZCB0aGUgY29ycmVjdCBiYWNrZ3JvdW5kIGFuZCBjb2xvciBpbiBJRSA5LS4NCiAqLw0KbWFyayB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZjA7DQogIGNvbG9yOiAjMDAwOw0KfQ0KDQovKioNCiAqIEFkZCB0aGUgY29ycmVjdCBmb250IHNpemUgaW4gYWxsIGJyb3dzZXJzLg0KICovDQpzbWFsbCB7DQogIGZvbnQtc2l6ZTogODAlOw0KfQ0KDQovKioNCiAqIFByZXZlbnQgYHN1YmAgYW5kIGBzdXBgIGVsZW1lbnRzIGZyb20gYWZmZWN0aW5nIHRoZSBsaW5lIGhlaWdodCBpbg0KICogYWxsIGJyb3dzZXJzLg0KICovDQpzdWIsDQpzdXAgew0KICBmb250LXNpemU6IDc1JTsNCiAgbGluZS1oZWlnaHQ6IDA7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOw0KfQ0KDQpzdWIgew0KICBib3R0b206IC0wLjI1ZW07DQp9DQoNCnN1cCB7DQogIHRvcDogLTAuNWVtOw0KfQ0KDQovKiBFbWJlZGRlZCBjb250ZW50DQogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLw0KLyoqDQogKiBBZGQgdGhlIGNvcnJlY3QgZGlzcGxheSBpbiBJRSA5LS4NCiAqLw0KYXVkaW8sDQp2aWRlbyB7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCn0NCg0KLyoqDQogKiBBZGQgdGhlIGNvcnJlY3QgZGlzcGxheSBpbiBpT1MgNC03Lg0KICovDQphdWRpbzpub3QoW2NvbnRyb2xzXSkgew0KICBkaXNwbGF5OiBub25lOw0KICBoZWlnaHQ6IDA7DQp9DQoNCi8qKg0KICogUmVtb3ZlIHRoZSBib3JkZXIgb24gaW1hZ2VzIGluc2lkZSBsaW5rcyBpbiBJRSAxMC0uDQogKi8NCmltZyB7DQogIGJvcmRlci1zdHlsZTogbm9uZTsNCn0NCg0KLyoqDQogKiBIaWRlIHRoZSBvdmVyZmxvdyBpbiBJRS4NCiAqLw0Kc3ZnOm5vdCg6cm9vdCkgew0KICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQovKiBGb3Jtcw0KICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCi8qKg0KICogMS4gQ2hhbmdlIHRoZSBmb250IHN0eWxlcyBpbiBhbGwgYnJvd3NlcnMgKG9waW5pb25hdGVkKS4NCiAqIDIuIFJlbW92ZSB0aGUgbWFyZ2luIGluIEZpcmVmb3ggYW5kIFNhZmFyaS4NCiAqLw0KYnV0dG9uLA0KaW5wdXQsDQpvcHRncm91cCwNCnNlbGVjdCwNCnRleHRhcmVhIHsNCiAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7DQogIC8qIDEgKi8NCiAgZm9udC1zaXplOiAxMDAlOw0KICAvKiAxICovDQogIGxpbmUtaGVpZ2h0OiAxLjE1Ow0KICAvKiAxICovDQogIG1hcmdpbjogMDsNCiAgLyogMiAqLw0KfQ0KDQovKioNCiAqIFNob3cgdGhlIG92ZXJmbG93IGluIElFLg0KICogMS4gU2hvdyB0aGUgb3ZlcmZsb3cgaW4gRWRnZS4NCiAqLw0KYnV0dG9uLA0KaW5wdXQgew0KICAvKiAxICovDQogIG92ZXJmbG93OiB2aXNpYmxlOw0KfQ0KDQovKioNCiAqIFJlbW92ZSB0aGUgaW5oZXJpdGFuY2Ugb2YgdGV4dCB0cmFuc2Zvcm0gaW4gRWRnZSwgRmlyZWZveCwgYW5kIElFLg0KICogMS4gUmVtb3ZlIHRoZSBpbmhlcml0YW5jZSBvZiB0ZXh0IHRyYW5zZm9ybSBpbiBGaXJlZm94Lg0KICovDQpidXR0b24sDQpzZWxlY3Qgew0KICAvKiAxICovDQogIHRleHQtdHJhbnNmb3JtOiBub25lOw0KfQ0KDQovKioNCiAqIDEuIFByZXZlbnQgYSBXZWJLaXQgYnVnIHdoZXJlICgyKSBkZXN0cm95cyBuYXRpdmUgYGF1ZGlvYCBhbmQgYHZpZGVvYA0KICogICAgY29udHJvbHMgaW4gQW5kcm9pZCA0Lg0KICogMi4gQ29ycmVjdCB0aGUgaW5hYmlsaXR5IHRvIHN0eWxlIGNsaWNrYWJsZSB0eXBlcyBpbiBpT1MgYW5kIFNhZmFyaS4NCiAqLw0KYnV0dG9uLA0KaHRtbCBbdHlwZT0iYnV0dG9uIl0sDQpbdHlwZT0icmVzZXQiXSwNClt0eXBlPSJzdWJtaXQiXSB7DQogIC13ZWJraXQtYXBwZWFyYW5jZTogYnV0dG9uOw0KICAvKiAyICovDQp9DQoNCi8qKg0KICogUmVtb3ZlIHRoZSBpbm5lciBib3JkZXIgYW5kIHBhZGRpbmcgaW4gRmlyZWZveC4NCiAqLw0KYnV0dG9uOjotbW96LWZvY3VzLWlubmVyLA0KW3R5cGU9ImJ1dHRvbiJdOjotbW96LWZvY3VzLWlubmVyLA0KW3R5cGU9InJlc2V0Il06Oi1tb3otZm9jdXMtaW5uZXIsDQpbdHlwZT0ic3VibWl0Il06Oi1tb3otZm9jdXMtaW5uZXIgew0KICBib3JkZXItc3R5bGU6IG5vbmU7DQogIHBhZGRpbmc6IDA7DQp9DQoNCi8qKg0KICogUmVzdG9yZSB0aGUgZm9jdXMgc3R5bGVzIHVuc2V0IGJ5IHRoZSBwcmV2aW91cyBydWxlLg0KICovDQpidXR0b246LW1vei1mb2N1c3JpbmcsDQpbdHlwZT0iYnV0dG9uIl06LW1vei1mb2N1c3JpbmcsDQpbdHlwZT0icmVzZXQiXTotbW96LWZvY3VzcmluZywNClt0eXBlPSJzdWJtaXQiXTotbW96LWZvY3VzcmluZyB7DQogIG91dGxpbmU6IDFweCBkb3R0ZWQgQnV0dG9uVGV4dDsNCn0NCg0KLyoqDQogKiBDb3JyZWN0IHRoZSBwYWRkaW5nIGluIEZpcmVmb3guDQogKi8NCmZpZWxkc2V0IHsNCiAgcGFkZGluZzogMC4zNWVtIDAuNzVlbSAwLjYyNWVtOw0KfQ0KDQovKioNCiAqIDEuIENvcnJlY3QgdGhlIHRleHQgd3JhcHBpbmcgaW4gRWRnZSBhbmQgSUUuDQogKiAyLiBDb3JyZWN0IHRoZSBjb2xvciBpbmhlcml0YW5jZSBmcm9tIGBmaWVsZHNldGAgZWxlbWVudHMgaW4gSUUuDQogKiAzLiBSZW1vdmUgdGhlIHBhZGRpbmcgc28gZGV2ZWxvcGVycyBhcmUgbm90IGNhdWdodCBvdXQgd2hlbiB0aGV5IHplcm8gb3V0DQogKiAgICBgZmllbGRzZXRgIGVsZW1lbnRzIGluIGFsbCBicm93c2Vycy4NCiAqLw0KbGVnZW5kIHsNCiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIC8qIDEgKi8NCiAgY29sb3I6IGluaGVyaXQ7DQogIC8qIDIgKi8NCiAgZGlzcGxheTogdGFibGU7DQogIC8qIDEgKi8NCiAgbWF4LXdpZHRoOiAxMDAlOw0KICAvKiAxICovDQogIHBhZGRpbmc6IDA7DQogIC8qIDMgKi8NCiAgd2hpdGUtc3BhY2U6IG5vcm1hbDsNCiAgLyogMSAqLw0KfQ0KDQovKioNCiAqIDEuIEFkZCB0aGUgY29ycmVjdCBkaXNwbGF5IGluIElFIDktLg0KICogMi4gQWRkIHRoZSBjb3JyZWN0IHZlcnRpY2FsIGFsaWdubWVudCBpbiBDaHJvbWUsIEZpcmVmb3gsIGFuZCBPcGVyYS4NCiAqLw0KcHJvZ3Jlc3Mgew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIC8qIDEgKi8NCiAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOw0KICAvKiAyICovDQp9DQoNCi8qKg0KICogUmVtb3ZlIHRoZSBkZWZhdWx0IHZlcnRpY2FsIHNjcm9sbGJhciBpbiBJRS4NCiAqLw0KdGV4dGFyZWEgew0KICBvdmVyZmxvdzogYXV0bzsNCn0NCg0KLyoqDQogKiAxLiBBZGQgdGhlIGNvcnJlY3QgYm94IHNpemluZyBpbiBJRSAxMC0uDQogKiAyLiBSZW1vdmUgdGhlIHBhZGRpbmcgaW4gSUUgMTAtLg0KICovDQpbdHlwZT0iY2hlY2tib3giXSwNClt0eXBlPSJyYWRpbyJdIHsNCiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIC8qIDEgKi8NCiAgcGFkZGluZzogMDsNCiAgLyogMiAqLw0KfQ0KDQovKioNCiAqIENvcnJlY3QgdGhlIGN1cnNvciBzdHlsZSBvZiBpbmNyZW1lbnQgYW5kIGRlY3JlbWVudCBidXR0b25zIGluIENocm9tZS4NCiAqLw0KW3R5cGU9Im51bWJlciJdOjotd2Via2l0LWlubmVyLXNwaW4tYnV0dG9uLA0KW3R5cGU9Im51bWJlciJdOjotd2Via2l0LW91dGVyLXNwaW4tYnV0dG9uIHsNCiAgaGVpZ2h0OiBhdXRvOw0KfQ0KDQovKioNCiAqIDEuIENvcnJlY3QgdGhlIG9kZCBhcHBlYXJhbmNlIGluIENocm9tZSBhbmQgU2FmYXJpLg0KICogMi4gQ29ycmVjdCB0aGUgb3V0bGluZSBzdHlsZSBpbiBTYWZhcmkuDQogKi8NClt0eXBlPSJzZWFyY2giXSB7DQogIC13ZWJraXQtYXBwZWFyYW5jZTogdGV4dGZpZWxkOw0KICAvKiAxICovDQogIG91dGxpbmUtb2Zmc2V0OiAtMnB4Ow0KICAvKiAyICovDQp9DQoNCi8qKg0KICogUmVtb3ZlIHRoZSBpbm5lciBwYWRkaW5nIGFuZCBjYW5jZWwgYnV0dG9ucyBpbiBDaHJvbWUgYW5kIFNhZmFyaSBvbiBtYWNPUy4NCiAqLw0KW3R5cGU9InNlYXJjaCJdOjotd2Via2l0LXNlYXJjaC1jYW5jZWwtYnV0dG9uLA0KW3R5cGU9InNlYXJjaCJdOjotd2Via2l0LXNlYXJjaC1kZWNvcmF0aW9uIHsNCiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOw0KfQ0KDQovKioNCiAqIDEuIENvcnJlY3QgdGhlIGluYWJpbGl0eSB0byBzdHlsZSBjbGlja2FibGUgdHlwZXMgaW4gaU9TIGFuZCBTYWZhcmkuDQogKiAyLiBDaGFuZ2UgZm9udCBwcm9wZXJ0aWVzIHRvIGBpbmhlcml0YCBpbiBTYWZhcmkuDQogKi8NCjo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b24gew0KICAtd2Via2l0LWFwcGVhcmFuY2U6IGJ1dHRvbjsNCiAgLyogMSAqLw0KICBmb250OiBpbmhlcml0Ow0KICAvKiAyICovDQp9DQoNCi8qIEludGVyYWN0aXZlDQogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLw0KLyoNCiAqIEFkZCB0aGUgY29ycmVjdCBkaXNwbGF5IGluIElFIDktLg0KICogMS4gQWRkIHRoZSBjb3JyZWN0IGRpc3BsYXkgaW4gRWRnZSwgSUUsIGFuZCBGaXJlZm94Lg0KICovDQpkZXRhaWxzLA0KbWVudSB7DQogIGRpc3BsYXk6IGJsb2NrOw0KfQ0KDQovKg0KICogQWRkIHRoZSBjb3JyZWN0IGRpc3BsYXkgaW4gYWxsIGJyb3dzZXJzLg0KICovDQpzdW1tYXJ5IHsNCiAgZGlzcGxheTogbGlzdC1pdGVtOw0KfQ0KDQovKiBTY3JpcHRpbmcNCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovDQovKioNCiAqIEFkZCB0aGUgY29ycmVjdCBkaXNwbGF5IGluIElFIDktLg0KICovDQpjYW52YXMgew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQp9DQoNCi8qKg0KICogQWRkIHRoZSBjb3JyZWN0IGRpc3BsYXkgaW4gSUUuDQogKi8NCnRlbXBsYXRlIHsNCiAgZGlzcGxheTogbm9uZTsNCn0NCg0KLyogSGlkZGVuDQogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLw0KLyoqDQogKiBBZGQgdGhlIGNvcnJlY3QgZGlzcGxheSBpbiBJRSAxMC0uDQogKi8NCltoaWRkZW5dIHsNCiAgZGlzcGxheTogbm9uZTsNCn0NCg0KaHRtbCB7DQogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KDQoqLCAqOmJlZm9yZSwgKjphZnRlciB7DQogIC13ZWJraXQtYm94LXNpemluZzogaW5oZXJpdDsNCiAgICAgICAgICBib3gtc2l6aW5nOiBpbmhlcml0Ow0KfQ0KDQpidXR0b24sDQppbnB1dCwNCm9wdGdyb3VwLA0Kc2VsZWN0LA0KdGV4dGFyZWEgew0KICBmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIE94eWdlbi1TYW5zLCBVYnVudHUsIENhbnRhcmVsbCwgIkhlbHZldGljYSBOZXVlIiwgc2Fucy1zZXJpZjsNCn0NCg0KdWw6bm90KC5icm93c2VyLWRlZmF1bHQpIHsNCiAgcGFkZGluZy1sZWZ0OiAwOw0KICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7DQp9DQoNCnVsOm5vdCguYnJvd3Nlci1kZWZhdWx0KSA+IGxpIHsNCiAgbGlzdC1zdHlsZS10eXBlOiBub25lOw0KfQ0KDQphIHsNCiAgY29sb3I6ICMwMzliZTU7DQogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsNCn0NCg0KLnZhbGlnbi13cmFwcGVyIHsNCiAgZGlzcGxheTogLXdlYmtpdC1ib3g7DQogIGRpc3BsYXk6IC13ZWJraXQtZmxleDsNCiAgZGlzcGxheTogLW1zLWZsZXhib3g7DQogIGRpc3BsYXk6IGZsZXg7DQogIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7DQogIC13ZWJraXQtYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCn0NCg0KLmNsZWFyZml4IHsNCiAgY2xlYXI6IGJvdGg7DQp9DQoNCi56LWRlcHRoLTAgew0KICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsNCiAgICAgICAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7DQp9DQoNCi8qIDJkcCBlbGV2YXRpb24gbW9kaWZpZWQqLw0KLnotZGVwdGgtMSwgbmF2LCAuY2FyZC1wYW5lbCwgLmNhcmQsIC50b2FzdCwgLmJ0biwgLmJ0bi1sYXJnZSwgLmJ0bi1zbWFsbCwgLmJ0bi1mbG9hdGluZywgLmRyb3Bkb3duLWNvbnRlbnQsIC5jb2xsYXBzaWJsZSwgLnNpZGVuYXYgew0KICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMnB4IDJweCAwIHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgM3B4IDFweCAtMnB4IHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgMXB4IDVweCAwIHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAycHggMCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDNweCAxcHggLTJweCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDFweCA1cHggMCByZ2JhKDAsIDAsIDAsIDAuMik7DQp9DQoNCi56LWRlcHRoLTEtaGFsZiwgLmJ0bjpob3ZlciwgLmJ0bi1sYXJnZTpob3ZlciwgLmJ0bi1zbWFsbDpob3ZlciwgLmJ0bi1mbG9hdGluZzpob3ZlciB7DQogIC13ZWJraXQtYm94LXNoYWRvdzogMCAzcHggM3B4IDAgcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCAxcHggN3B4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAzcHggMXB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjIpOw0KICAgICAgICAgIGJveC1zaGFkb3c6IDAgM3B4IDNweCAwIHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgMXB4IDdweCAwIHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgM3B4IDFweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCn0NCg0KLyogNmRwIGVsZXZhdGlvbiBtb2RpZmllZCovDQouei1kZXB0aC0yIHsNCiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDRweCA1cHggMCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDFweCAxMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAycHggNHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjMpOw0KICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDVweCAwIHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgMXB4IDEwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDJweCA0cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMyk7DQp9DQoNCi8qIDEyZHAgZWxldmF0aW9uIG1vZGlmaWVkKi8NCi56LWRlcHRoLTMgew0KICAtd2Via2l0LWJveC1zaGFkb3c6IDAgOHB4IDE3cHggMnB4IHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgM3B4IDE0cHggMnB4IHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgNXB4IDVweCAtM3B4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgICAgICAgICBib3gtc2hhZG93OiAwIDhweCAxN3B4IDJweCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDNweCAxNHB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDVweCA1cHggLTNweCByZ2JhKDAsIDAsIDAsIDAuMik7DQp9DQoNCi8qIDE2ZHAgZWxldmF0aW9uICovDQouei1kZXB0aC00IHsNCiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDE2cHggMjRweCAycHggcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCA2cHggMzBweCA1cHggcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCA4cHggMTBweCAtN3B4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgICAgICAgICBib3gtc2hhZG93OiAwIDE2cHggMjRweCAycHggcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCA2cHggMzBweCA1cHggcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCA4cHggMTBweCAtN3B4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCn0NCg0KLyogMjRkcCBlbGV2YXRpb24gKi8NCi56LWRlcHRoLTUsIC5tb2RhbCB7DQogIC13ZWJraXQtYm94LXNoYWRvdzogMCAyNHB4IDM4cHggM3B4IHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgOXB4IDQ2cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgMTFweCAxNXB4IC03cHggcmdiYSgwLCAwLCAwLCAwLjIpOw0KICAgICAgICAgIGJveC1zaGFkb3c6IDAgMjRweCAzOHB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDlweCA0NnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDExcHggMTVweCAtN3B4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCn0NCg0KLmhvdmVyYWJsZSB7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7DQogIHRyYW5zaXRpb246IC13ZWJraXQtYm94LXNoYWRvdyAuMjVzOw0KICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IC4yNXM7DQogIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjI1cywgLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7DQp9DQoNCi5ob3ZlcmFibGU6aG92ZXIgew0KICAtd2Via2l0LWJveC1zaGFkb3c6IDAgOHB4IDE3cHggMCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgNnB4IDIwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTkpOw0KICAgICAgICAgIGJveC1zaGFkb3c6IDAgOHB4IDE3cHggMCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgNnB4IDIwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTkpOw0KfQ0KDQouZGl2aWRlciB7DQogIGhlaWdodDogMXB4Ow0KICBvdmVyZmxvdzogaGlkZGVuOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwOw0KfQ0KDQpibG9ja3F1b3RlIHsNCiAgbWFyZ2luOiAyMHB4IDA7DQogIHBhZGRpbmctbGVmdDogMS41cmVtOw0KICBib3JkZXItbGVmdDogNXB4IHNvbGlkICNlZTZlNzM7DQp9DQoNCmkgew0KICBsaW5lLWhlaWdodDogaW5oZXJpdDsNCn0NCg0KaS5sZWZ0IHsNCiAgZmxvYXQ6IGxlZnQ7DQogIG1hcmdpbi1yaWdodDogMTVweDsNCn0NCg0KaS5yaWdodCB7DQogIGZsb2F0OiByaWdodDsNCiAgbWFyZ2luLWxlZnQ6IDE1cHg7DQp9DQoNCmkudGlueSB7DQogIGZvbnQtc2l6ZTogMXJlbTsNCn0NCg0KaS5zbWFsbCB7DQogIGZvbnQtc2l6ZTogMnJlbTsNCn0NCg0KaS5tZWRpdW0gew0KICBmb250LXNpemU6IDRyZW07DQp9DQoNCmkubGFyZ2Ugew0KICBmb250LXNpemU6IDZyZW07DQp9DQoNCmltZy5yZXNwb25zaXZlLWltZywNCnZpZGVvLnJlc3BvbnNpdmUtdmlkZW8gew0KICBtYXgtd2lkdGg6IDEwMCU7DQogIGhlaWdodDogYXV0bzsNCn0NCg0KLnBhZ2luYXRpb24gbGkgew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICB2ZXJ0aWNhbC1hbGlnbjogdG9wOw0KICBoZWlnaHQ6IDMwcHg7DQp9DQoNCi5wYWdpbmF0aW9uIGxpIGEgew0KICBjb2xvcjogIzQ0NDsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBmb250LXNpemU6IDEuMnJlbTsNCiAgcGFkZGluZzogMCAxMHB4Ow0KICBsaW5lLWhlaWdodDogMzBweDsNCn0NCg0KLnBhZ2luYXRpb24gbGkuYWN0aXZlIGEgew0KICBjb2xvcjogI2ZmZjsNCn0NCg0KLnBhZ2luYXRpb24gbGkuYWN0aXZlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2VlNmU3MzsNCn0NCg0KLnBhZ2luYXRpb24gbGkuZGlzYWJsZWQgYSB7DQogIGN1cnNvcjogZGVmYXVsdDsNCiAgY29sb3I6ICM5OTk7DQp9DQoNCi5wYWdpbmF0aW9uIGxpIGkgew0KICBmb250LXNpemU6IDJyZW07DQp9DQoNCi5wYWdpbmF0aW9uIGxpLnBhZ2VzIHVsIGxpIHsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBmbG9hdDogbm9uZTsNCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgew0KICAucGFnaW5hdGlvbiB7DQogICAgd2lkdGg6IDEwMCU7DQogIH0NCiAgLnBhZ2luYXRpb24gbGkucHJldiwNCiAgLnBhZ2luYXRpb24gbGkubmV4dCB7DQogICAgd2lkdGg6IDEwJTsNCiAgfQ0KICAucGFnaW5hdGlvbiBsaS5wYWdlcyB7DQogICAgd2lkdGg6IDgwJTsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogIH0NCn0NCg0KLmJyZWFkY3J1bWIgew0KICBmb250LXNpemU6IDE4cHg7DQogIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyk7DQp9DQoNCi5icmVhZGNydW1iIGksDQouYnJlYWRjcnVtYiBbY2xhc3NePSJtZGktIl0sIC5icmVhZGNydW1iIFtjbGFzcyo9Im1kaS0iXSwNCi5icmVhZGNydW1iIGkubWF0ZXJpYWwtaWNvbnMgew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIGZsb2F0OiBsZWZ0Ow0KICBmb250LXNpemU6IDI0cHg7DQp9DQoNCi5icmVhZGNydW1iOmJlZm9yZSB7DQogIGNvbnRlbnQ6ICdcRTVDQyc7DQogIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyk7DQogIHZlcnRpY2FsLWFsaWduOiB0b3A7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgZm9udC1mYW1pbHk6ICdNYXRlcmlhbCBJY29ucyc7DQogIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQogIGZvbnQtc3R5bGU6IG5vcm1hbDsNCiAgZm9udC1zaXplOiAyNXB4Ow0KICBtYXJnaW46IDAgMTBweCAwIDhweDsNCiAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7DQp9DQoNCi5icmVhZGNydW1iOmZpcnN0LWNoaWxkOmJlZm9yZSB7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi5icmVhZGNydW1iOmxhc3QtY2hpbGQgew0KICBjb2xvcjogI2ZmZjsNCn0NCg0KLnBhcmFsbGF4LWNvbnRhaW5lciB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgaGVpZ2h0OiA1MDBweDsNCn0NCg0KLnBhcmFsbGF4LWNvbnRhaW5lciAucGFyYWxsYXggew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgcmlnaHQ6IDA7DQogIGJvdHRvbTogMDsNCiAgei1pbmRleDogLTE7DQp9DQoNCi5wYXJhbGxheC1jb250YWluZXIgLnBhcmFsbGF4IGltZyB7DQogIG9wYWNpdHk6IDA7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgbGVmdDogNTAlOw0KICBib3R0b206IDA7DQogIG1pbi13aWR0aDogMTAwJTsNCiAgbWluLWhlaWdodDogMTAwJTsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApOw0KICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7DQogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsNCn0NCg0KLnBpbi10b3AsIC5waW4tYm90dG9tIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KDQoucGlubmVkIHsNCiAgcG9zaXRpb246IGZpeGVkICFpbXBvcnRhbnQ7DQp9DQoNCi8qKioqKioqKioqKioqKioqKioqKioNCiAgVHJhbnNpdGlvbiBDbGFzc2VzDQoqKioqKioqKioqKioqKioqKioqKioqLw0KdWwuc3RhZ2dlcmVkLWxpc3QgbGkgew0KICBvcGFjaXR5OiAwOw0KfQ0KDQouZmFkZS1pbiB7DQogIG9wYWNpdHk6IDA7DQogIC13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMCA1MCU7DQogICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMCA1MCU7DQp9DQoNCi8qKioqKioqKioqKioqKioqKioqKioNCiAgTWVkaWEgUXVlcnkgQ2xhc3Nlcw0KKioqKioqKioqKioqKioqKioqKioqKi8NCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNjAwcHgpIHsNCiAgLmhpZGUtb24tc21hbGwtb25seSwgLmhpZGUtb24tc21hbGwtYW5kLWRvd24gew0KICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk5MnB4KSB7DQogIC5oaWRlLW9uLW1lZC1hbmQtZG93biB7DQogICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Ow0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAxcHgpIHsNCiAgLmhpZGUtb24tbWVkLWFuZC11cCB7DQogICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Ow0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAwcHgpIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgew0KICAuaGlkZS1vbi1tZWQtb25seSB7DQogICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Ow0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogOTkzcHgpIHsNCiAgLmhpZGUtb24tbGFyZ2Utb25seSB7DQogICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Ow0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTIwMXB4KSB7DQogIC5oaWRlLW9uLWV4dHJhLWxhcmdlLW9ubHkgew0KICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEyMDFweCkgew0KICAuc2hvdy1vbi1leHRyYS1sYXJnZSB7DQogICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk5M3B4KSB7DQogIC5zaG93LW9uLWxhcmdlIHsNCiAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50Ow0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAwcHgpIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgew0KICAuc2hvdy1vbi1tZWRpdW0gew0KICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MDBweCkgew0KICAuc2hvdy1vbi1zbWFsbCB7DQogICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMXB4KSB7DQogIC5zaG93LW9uLW1lZGl1bS1hbmQtdXAgew0KICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgew0KICAuc2hvdy1vbi1tZWRpdW0tYW5kLWRvd24gew0KICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MDBweCkgew0KICAuY2VudGVyLW9uLXNtYWxsLW9ubHkgew0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgfQ0KfQ0KDQoucGFnZS1mb290ZXIgew0KICBwYWRkaW5nLXRvcDogMjBweDsNCiAgY29sb3I6ICNmZmY7DQogIGJhY2tncm91bmQtY29sb3I6ICNlZTZlNzM7DQp9DQoNCi5wYWdlLWZvb3RlciAuZm9vdGVyLWNvcHlyaWdodCB7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIG1pbi1oZWlnaHQ6IDUwcHg7DQogIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogIGRpc3BsYXk6IC1tcy1mbGV4Ym94Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOw0KICAtd2Via2l0LWFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogIC13ZWJraXQtYm94LXBhY2s6IGp1c3RpZnk7DQogIC13ZWJraXQtanVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgLW1zLWZsZXgtcGFjazoganVzdGlmeTsNCiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogIHBhZGRpbmc6IDEwcHggMHB4Ow0KICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDUxLCA1MSwgNTEsIDAuMDgpOw0KfQ0KDQp0YWJsZSwgdGgsIHRkIHsNCiAgYm9yZGVyOiBub25lOw0KfQ0KDQp0YWJsZSB7DQogIHdpZHRoOiAxMDAlOw0KICBkaXNwbGF5OiB0YWJsZTsNCiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsNCiAgYm9yZGVyLXNwYWNpbmc6IDA7DQp9DQoNCnRhYmxlLnN0cmlwZWQgdHIgew0KICBib3JkZXItYm90dG9tOiBub25lOw0KfQ0KDQp0YWJsZS5zdHJpcGVkID4gdGJvZHkgPiB0cjpudGgtY2hpbGQob2RkKSB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQyLCAyNDIsIDI0MiwgMC41KTsNCn0NCg0KdGFibGUuc3RyaXBlZCA+IHRib2R5ID4gdHIgPiB0ZCB7DQogIGJvcmRlci1yYWRpdXM6IDA7DQp9DQoNCnRhYmxlLmhpZ2hsaWdodCA+IHRib2R5ID4gdHIgew0KICAtd2Via2l0LXRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjI1cyBlYXNlOw0KICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4yNXMgZWFzZTsNCn0NCg0KdGFibGUuaGlnaGxpZ2h0ID4gdGJvZHkgPiB0cjpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQyLCAyNDIsIDI0MiwgMC41KTsNCn0NCg0KdGFibGUuY2VudGVyZWQgdGhlYWQgdHIgdGgsIHRhYmxlLmNlbnRlcmVkIHRib2R5IHRyIHRkIHsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KDQp0ciB7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTIpOw0KfQ0KDQp0ZCwgdGggew0KICBwYWRkaW5nOiAxNXB4IDVweDsNCiAgZGlzcGxheTogdGFibGUtY2VsbDsNCiAgdGV4dC1hbGlnbjogbGVmdDsNCiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgYm9yZGVyLXJhZGl1czogMnB4Ow0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk5MnB4KSB7DQogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7DQogICAgYm9yZGVyLXNwYWNpbmc6IDA7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIC8qIHNvcnQgb3V0IGJvcmRlcnMgKi8NCiAgfQ0KICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlIHRkOmVtcHR5OmJlZm9yZSB7DQogICAgY29udGVudDogJ1wwMGEwJzsNCiAgfQ0KICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlIHRoLA0KICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlIHRkIHsNCiAgICBtYXJnaW46IDA7DQogICAgdmVydGljYWwtYWxpZ246IHRvcDsNCiAgfQ0KICB0YWJsZS5yZXNwb25zaXZlLXRhYmxlIHRoIHsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICB9DQogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUgdGhlYWQgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIGZsb2F0OiBsZWZ0Ow0KICB9DQogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUgdGhlYWQgdHIgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHBhZGRpbmc6IDAgMTBweCAwIDA7DQogIH0NCiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0aGVhZCB0ciB0aDo6YmVmb3JlIHsNCiAgICBjb250ZW50OiAiXDAwYTAiOw0KICB9DQogIHRhYmxlLnJlc3BvbnNpdmUtdGFibGUgdGJvZHkgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHdpZHRoOiBhdXRvOw0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBvdmVyZmxvdy14OiBhdXRvOw0KICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogIH0NCiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0Ym9keSB0ciB7DQogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7DQogIH0NCiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0aCB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgdGV4dC1hbGlnbjogcmlnaHQ7DQogIH0NCiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0ZCB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgbWluLWhlaWdodDogMS4yNWVtOw0KICAgIHRleHQtYWxpZ246IGxlZnQ7DQogIH0NCiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0ciB7DQogICAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCiAgICBwYWRkaW5nOiAwIDEwcHg7DQogIH0NCiAgdGFibGUucmVzcG9uc2l2ZS10YWJsZSB0aGVhZCB7DQogICAgYm9yZGVyOiAwOw0KICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMik7DQogIH0NCn0NCg0KLmNvbGxlY3Rpb24gew0KICBtYXJnaW46IDAuNXJlbSAwIDFyZW0gMDsNCiAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsNCiAgYm9yZGVyLXJhZGl1czogMnB4Ow0KICBvdmVyZmxvdzogaGlkZGVuOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi5jb2xsZWN0aW9uIC5jb2xsZWN0aW9uLWl0ZW0gew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICBsaW5lLWhlaWdodDogMS41cmVtOw0KICBwYWRkaW5nOiAxMHB4IDIwcHg7DQogIG1hcmdpbjogMDsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMGUwZTA7DQp9DQoNCi5jb2xsZWN0aW9uIC5jb2xsZWN0aW9uLWl0ZW0uYXZhdGFyIHsNCiAgbWluLWhlaWdodDogODRweDsNCiAgcGFkZGluZy1sZWZ0OiA3MnB4Ow0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi5jb2xsZWN0aW9uIC5jb2xsZWN0aW9uLWl0ZW0uYXZhdGFyOm5vdCguY2lyY2xlLWNsaXBwZXIpID4gLmNpcmNsZSwNCi5jb2xsZWN0aW9uIC5jb2xsZWN0aW9uLWl0ZW0uYXZhdGFyIDpub3QoLmNpcmNsZS1jbGlwcGVyKSA+IC5jaXJjbGUgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHdpZHRoOiA0MnB4Ow0KICBoZWlnaHQ6IDQycHg7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIGxlZnQ6IDE1cHg7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCn0NCg0KLmNvbGxlY3Rpb24gLmNvbGxlY3Rpb24taXRlbS5hdmF0YXIgaS5jaXJjbGUgew0KICBmb250LXNpemU6IDE4cHg7DQogIGxpbmUtaGVpZ2h0OiA0MnB4Ow0KICBjb2xvcjogI2ZmZjsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzk5OTsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KDQouY29sbGVjdGlvbiAuY29sbGVjdGlvbi1pdGVtLmF2YXRhciAudGl0bGUgew0KICBmb250LXNpemU6IDE2cHg7DQp9DQoNCi5jb2xsZWN0aW9uIC5jb2xsZWN0aW9uLWl0ZW0uYXZhdGFyIHAgew0KICBtYXJnaW46IDA7DQp9DQoNCi5jb2xsZWN0aW9uIC5jb2xsZWN0aW9uLWl0ZW0uYXZhdGFyIC5zZWNvbmRhcnktY29udGVudCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAxNnB4Ow0KICByaWdodDogMTZweDsNCn0NCg0KLmNvbGxlY3Rpb24gLmNvbGxlY3Rpb24taXRlbTpsYXN0LWNoaWxkIHsNCiAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCn0NCg0KLmNvbGxlY3Rpb24gLmNvbGxlY3Rpb24taXRlbS5hY3RpdmUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOw0KICBjb2xvcjogI2VhZmFmOTsNCn0NCg0KLmNvbGxlY3Rpb24gLmNvbGxlY3Rpb24taXRlbS5hY3RpdmUgLnNlY29uZGFyeS1jb250ZW50IHsNCiAgY29sb3I6ICNmZmY7DQp9DQoNCi5jb2xsZWN0aW9uIGEuY29sbGVjdGlvbi1pdGVtIHsNCiAgZGlzcGxheTogYmxvY2s7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogLjI1czsNCiAgdHJhbnNpdGlvbjogLjI1czsNCiAgY29sb3I6ICMyNmE2OWE7DQp9DQoNCi5jb2xsZWN0aW9uIGEuY29sbGVjdGlvbi1pdGVtOm5vdCguYWN0aXZlKTpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6ICNkZGQ7DQp9DQoNCi5jb2xsZWN0aW9uLndpdGgtaGVhZGVyIC5jb2xsZWN0aW9uLWhlYWRlciB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTBlMGUwOw0KICBwYWRkaW5nOiAxMHB4IDIwcHg7DQp9DQoNCi5jb2xsZWN0aW9uLndpdGgtaGVhZGVyIC5jb2xsZWN0aW9uLWl0ZW0gew0KICBwYWRkaW5nLWxlZnQ6IDMwcHg7DQp9DQoNCi5jb2xsZWN0aW9uLndpdGgtaGVhZGVyIC5jb2xsZWN0aW9uLWl0ZW0uYXZhdGFyIHsNCiAgcGFkZGluZy1sZWZ0OiA3MnB4Ow0KfQ0KDQouc2Vjb25kYXJ5LWNvbnRlbnQgew0KICBmbG9hdDogcmlnaHQ7DQogIGNvbG9yOiAjMjZhNjlhOw0KfQ0KDQouY29sbGFwc2libGUgLmNvbGxlY3Rpb24gew0KICBtYXJnaW46IDA7DQogIGJvcmRlcjogbm9uZTsNCn0NCg0KLnZpZGVvLWNvbnRhaW5lciB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgcGFkZGluZy1ib3R0b206IDU2LjI1JTsNCiAgaGVpZ2h0OiAwOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQoudmlkZW8tY29udGFpbmVyIGlmcmFtZSwgLnZpZGVvLWNvbnRhaW5lciBvYmplY3QsIC52aWRlby1jb250YWluZXIgZW1iZWQgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCn0NCg0KLnByb2dyZXNzIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBoZWlnaHQ6IDRweDsNCiAgZGlzcGxheTogYmxvY2s7DQogIHdpZHRoOiAxMDAlOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWNlY2U2Ow0KICBib3JkZXItcmFkaXVzOiAycHg7DQogIG1hcmdpbjogMC41cmVtIDAgMXJlbSAwOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQoucHJvZ3Jlc3MgLmRldGVybWluYXRlIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0b3A6IDA7DQogIGxlZnQ6IDA7DQogIGJvdHRvbTogMDsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAuM3MgbGluZWFyOw0KICB0cmFuc2l0aW9uOiB3aWR0aCAuM3MgbGluZWFyOw0KfQ0KDQoucHJvZ3Jlc3MgLmluZGV0ZXJtaW5hdGUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOw0KfQ0KDQoucHJvZ3Jlc3MgLmluZGV0ZXJtaW5hdGU6YmVmb3JlIHsNCiAgY29udGVudDogJyc7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgYmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDsNCiAgdG9wOiAwOw0KICBsZWZ0OiAwOw0KICBib3R0b206IDA7DQogIHdpbGwtY2hhbmdlOiBsZWZ0LCByaWdodDsNCiAgLXdlYmtpdC1hbmltYXRpb246IGluZGV0ZXJtaW5hdGUgMi4xcyBjdWJpYy1iZXppZXIoMC42NSwgMC44MTUsIDAuNzM1LCAwLjM5NSkgaW5maW5pdGU7DQogICAgICAgICAgYW5pbWF0aW9uOiBpbmRldGVybWluYXRlIDIuMXMgY3ViaWMtYmV6aWVyKDAuNjUsIDAuODE1LCAwLjczNSwgMC4zOTUpIGluZmluaXRlOw0KfQ0KDQoucHJvZ3Jlc3MgLmluZGV0ZXJtaW5hdGU6YWZ0ZXIgew0KICBjb250ZW50OiAnJzsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0Ow0KICB0b3A6IDA7DQogIGxlZnQ6IDA7DQogIGJvdHRvbTogMDsNCiAgd2lsbC1jaGFuZ2U6IGxlZnQsIHJpZ2h0Ow0KICAtd2Via2l0LWFuaW1hdGlvbjogaW5kZXRlcm1pbmF0ZS1zaG9ydCAyLjFzIGN1YmljLWJlemllcigwLjE2NSwgMC44NCwgMC40NCwgMSkgaW5maW5pdGU7DQogICAgICAgICAgYW5pbWF0aW9uOiBpbmRldGVybWluYXRlLXNob3J0IDIuMXMgY3ViaWMtYmV6aWVyKDAuMTY1LCAwLjg0LCAwLjQ0LCAxKSBpbmZpbml0ZTsNCiAgLXdlYmtpdC1hbmltYXRpb24tZGVsYXk6IDEuMTVzOw0KICAgICAgICAgIGFuaW1hdGlvbi1kZWxheTogMS4xNXM7DQp9DQoNCkAtd2Via2l0LWtleWZyYW1lcyBpbmRldGVybWluYXRlIHsNCiAgMCUgew0KICAgIGxlZnQ6IC0zNSU7DQogICAgcmlnaHQ6IDEwMCU7DQogIH0NCiAgNjAlIHsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHJpZ2h0OiAtOTAlOw0KICB9DQogIDEwMCUgew0KICAgIGxlZnQ6IDEwMCU7DQogICAgcmlnaHQ6IC05MCU7DQogIH0NCn0NCg0KQGtleWZyYW1lcyBpbmRldGVybWluYXRlIHsNCiAgMCUgew0KICAgIGxlZnQ6IC0zNSU7DQogICAgcmlnaHQ6IDEwMCU7DQogIH0NCiAgNjAlIHsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHJpZ2h0OiAtOTAlOw0KICB9DQogIDEwMCUgew0KICAgIGxlZnQ6IDEwMCU7DQogICAgcmlnaHQ6IC05MCU7DQogIH0NCn0NCg0KQC13ZWJraXQta2V5ZnJhbWVzIGluZGV0ZXJtaW5hdGUtc2hvcnQgew0KICAwJSB7DQogICAgbGVmdDogLTIwMCU7DQogICAgcmlnaHQ6IDEwMCU7DQogIH0NCiAgNjAlIHsNCiAgICBsZWZ0OiAxMDclOw0KICAgIHJpZ2h0OiAtOCU7DQogIH0NCiAgMTAwJSB7DQogICAgbGVmdDogMTA3JTsNCiAgICByaWdodDogLTglOw0KICB9DQp9DQoNCkBrZXlmcmFtZXMgaW5kZXRlcm1pbmF0ZS1zaG9ydCB7DQogIDAlIHsNCiAgICBsZWZ0OiAtMjAwJTsNCiAgICByaWdodDogMTAwJTsNCiAgfQ0KICA2MCUgew0KICAgIGxlZnQ6IDEwNyU7DQogICAgcmlnaHQ6IC04JTsNCiAgfQ0KICAxMDAlIHsNCiAgICBsZWZ0OiAxMDclOw0KICAgIHJpZ2h0OiAtOCU7DQogIH0NCn0NCg0KLyoqKioqKioqKioqKioqKioqKioNCiAgVXRpbGl0eSBDbGFzc2VzDQoqKioqKioqKioqKioqKioqKioqLw0KLmhpZGUgew0KICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7DQp9DQoNCi5sZWZ0LWFsaWduIHsNCiAgdGV4dC1hbGlnbjogbGVmdDsNCn0NCg0KLnJpZ2h0LWFsaWduIHsNCiAgdGV4dC1hbGlnbjogcmlnaHQ7DQp9DQoNCi5jZW50ZXIsIC5jZW50ZXItYWxpZ24gew0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoNCi5sZWZ0IHsNCiAgZmxvYXQ6IGxlZnQgIWltcG9ydGFudDsNCn0NCg0KLnJpZ2h0IHsNCiAgZmxvYXQ6IHJpZ2h0ICFpbXBvcnRhbnQ7DQp9DQoNCi5uby1zZWxlY3QsIGlucHV0W3R5cGU9cmFuZ2VdLA0KaW5wdXRbdHlwZT1yYW5nZV0gKyAudGh1bWIgew0KICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOw0KfQ0KDQouY2lyY2xlIHsNCiAgYm9yZGVyLXJhZGl1czogNTAlOw0KfQ0KDQouY2VudGVyLWJsb2NrIHsNCiAgZGlzcGxheTogYmxvY2s7DQogIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICBtYXJnaW4tcmlnaHQ6IGF1dG87DQp9DQoNCi50cnVuY2F0ZSB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCn0NCg0KLm5vLXBhZGRpbmcgew0KICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7DQp9DQoNCnNwYW4uYmFkZ2Ugew0KICBtaW4td2lkdGg6IDNyZW07DQogIHBhZGRpbmc6IDAgNnB4Ow0KICBtYXJnaW4tbGVmdDogMTRweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBmb250LXNpemU6IDFyZW07DQogIGxpbmUtaGVpZ2h0OiAyMnB4Ow0KICBoZWlnaHQ6IDIycHg7DQogIGNvbG9yOiAjNzU3NTc1Ow0KICBmbG9hdDogcmlnaHQ7DQogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KDQpzcGFuLmJhZGdlLm5ldyB7DQogIGZvbnQtd2VpZ2h0OiAzMDA7DQogIGZvbnQtc2l6ZTogMC44cmVtOw0KICBjb2xvcjogI2ZmZjsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsNCiAgYm9yZGVyLXJhZGl1czogMnB4Ow0KfQ0KDQpzcGFuLmJhZGdlLm5ldzphZnRlciB7DQogIGNvbnRlbnQ6ICIgbmV3IjsNCn0NCg0Kc3Bhbi5iYWRnZVtkYXRhLWJhZGdlLWNhcHRpb25dOjphZnRlciB7DQogIGNvbnRlbnQ6ICIgIiBhdHRyKGRhdGEtYmFkZ2UtY2FwdGlvbik7DQp9DQoNCm5hdiB1bCBhIHNwYW4uYmFkZ2Ugew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIGZsb2F0OiBub25lOw0KICBtYXJnaW4tbGVmdDogNHB4Ow0KICBsaW5lLWhlaWdodDogMjJweDsNCiAgaGVpZ2h0OiAyMnB4Ow0KICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhdXRvOw0KfQ0KDQouY29sbGVjdGlvbi1pdGVtIHNwYW4uYmFkZ2Ugew0KICBtYXJnaW4tdG9wOiBjYWxjKDAuNzVyZW0gLSAxMXB4KTsNCn0NCg0KLmNvbGxhcHNpYmxlIHNwYW4uYmFkZ2Ugew0KICBtYXJnaW4tbGVmdDogYXV0bzsNCn0NCg0KLnNpZGVuYXYgc3Bhbi5iYWRnZSB7DQogIG1hcmdpbi10b3A6IGNhbGMoMjRweCAtIDExcHgpOw0KfQ0KDQp0YWJsZSBzcGFuLmJhZGdlIHsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBmbG9hdDogbm9uZTsNCiAgbWFyZ2luLWxlZnQ6IGF1dG87DQp9DQoNCi8qIFRoaXMgaXMgbmVlZGVkIGZvciBzb21lIG1vYmlsZSBwaG9uZXMgdG8gZGlzcGxheSB0aGUgR29vZ2xlIEljb24gZm9udCBwcm9wZXJseSAqLw0KLm1hdGVyaWFsLWljb25zIHsNCiAgdGV4dC1yZW5kZXJpbmc6IG9wdGltaXplTGVnaWJpbGl0eTsNCiAgLXdlYmtpdC1mb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJzsNCiAgICAgLW1vei1mb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJzsNCiAgICAgICAgICBmb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJzsNCn0NCg0KLmNvbnRhaW5lciB7DQogIG1hcmdpbjogMCBhdXRvOw0KICBtYXgtd2lkdGg6IDEyODBweDsNCiAgd2lkdGg6IDkwJTsNCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDFweCkgew0KICAuY29udGFpbmVyIHsNCiAgICB3aWR0aDogODUlOw0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogOTkzcHgpIHsNCiAgLmNvbnRhaW5lciB7DQogICAgd2lkdGg6IDcwJTsNCiAgfQ0KfQ0KDQouY29sIC5yb3cgew0KICBtYXJnaW4tbGVmdDogLTAuNzVyZW07DQogIG1hcmdpbi1yaWdodDogLTAuNzVyZW07DQp9DQoNCi5zZWN0aW9uIHsNCiAgcGFkZGluZy10b3A6IDFyZW07DQogIHBhZGRpbmctYm90dG9tOiAxcmVtOw0KfQ0KDQouc2VjdGlvbi5uby1wYWQgew0KICBwYWRkaW5nOiAwOw0KfQ0KDQouc2VjdGlvbi5uby1wYWQtYm90IHsNCiAgcGFkZGluZy1ib3R0b206IDA7DQp9DQoNCi5zZWN0aW9uLm5vLXBhZC10b3Agew0KICBwYWRkaW5nLXRvcDogMDsNCn0NCg0KLnJvdyB7DQogIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICBtYXJnaW4tcmlnaHQ6IGF1dG87DQogIG1hcmdpbi1ib3R0b206IDIwcHg7DQp9DQoNCi5yb3c6YWZ0ZXIgew0KICBjb250ZW50OiAiIjsNCiAgZGlzcGxheTogdGFibGU7DQogIGNsZWFyOiBib3RoOw0KfQ0KDQoucm93IC5jb2wgew0KICBmbG9hdDogbGVmdDsNCiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIHBhZGRpbmc6IDAgMC43NXJlbTsNCiAgbWluLWhlaWdodDogMXB4Ow0KfQ0KDQoucm93IC5jb2xbY2xhc3MqPSJwdXNoLSJdLCAucm93IC5jb2xbY2xhc3MqPSJwdWxsLSJdIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KDQoucm93IC5jb2wuczEgew0KICB3aWR0aDogOC4zMzMzMzMzMzMzJTsNCiAgbWFyZ2luLWxlZnQ6IGF1dG87DQogIGxlZnQ6IGF1dG87DQogIHJpZ2h0OiBhdXRvOw0KfQ0KDQoucm93IC5jb2wuczIgew0KICB3aWR0aDogMTYuNjY2NjY2NjY2NyU7DQogIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICBsZWZ0OiBhdXRvOw0KICByaWdodDogYXV0bzsNCn0NCg0KLnJvdyAuY29sLnMzIHsNCiAgd2lkdGg6IDI1JTsNCiAgbWFyZ2luLWxlZnQ6IGF1dG87DQogIGxlZnQ6IGF1dG87DQogIHJpZ2h0OiBhdXRvOw0KfQ0KDQoucm93IC5jb2wuczQgew0KICB3aWR0aDogMzMuMzMzMzMzMzMzMyU7DQogIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICBsZWZ0OiBhdXRvOw0KICByaWdodDogYXV0bzsNCn0NCg0KLnJvdyAuY29sLnM1IHsNCiAgd2lkdGg6IDQxLjY2NjY2NjY2NjclOw0KICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgbGVmdDogYXV0bzsNCiAgcmlnaHQ6IGF1dG87DQp9DQoNCi5yb3cgLmNvbC5zNiB7DQogIHdpZHRoOiA1MCU7DQogIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICBsZWZ0OiBhdXRvOw0KICByaWdodDogYXV0bzsNCn0NCg0KLnJvdyAuY29sLnM3IHsNCiAgd2lkdGg6IDU4LjMzMzMzMzMzMzMlOw0KICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgbGVmdDogYXV0bzsNCiAgcmlnaHQ6IGF1dG87DQp9DQoNCi5yb3cgLmNvbC5zOCB7DQogIHdpZHRoOiA2Ni42NjY2NjY2NjY3JTsNCiAgbWFyZ2luLWxlZnQ6IGF1dG87DQogIGxlZnQ6IGF1dG87DQogIHJpZ2h0OiBhdXRvOw0KfQ0KDQoucm93IC5jb2wuczkgew0KICB3aWR0aDogNzUlOw0KICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgbGVmdDogYXV0bzsNCiAgcmlnaHQ6IGF1dG87DQp9DQoNCi5yb3cgLmNvbC5zMTAgew0KICB3aWR0aDogODMuMzMzMzMzMzMzMyU7DQogIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICBsZWZ0OiBhdXRvOw0KICByaWdodDogYXV0bzsNCn0NCg0KLnJvdyAuY29sLnMxMSB7DQogIHdpZHRoOiA5MS42NjY2NjY2NjY3JTsNCiAgbWFyZ2luLWxlZnQ6IGF1dG87DQogIGxlZnQ6IGF1dG87DQogIHJpZ2h0OiBhdXRvOw0KfQ0KDQoucm93IC5jb2wuczEyIHsNCiAgd2lkdGg6IDEwMCU7DQogIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICBsZWZ0OiBhdXRvOw0KICByaWdodDogYXV0bzsNCn0NCg0KLnJvdyAuY29sLm9mZnNldC1zMSB7DQogIG1hcmdpbi1sZWZ0OiA4LjMzMzMzMzMzMzMlOw0KfQ0KDQoucm93IC5jb2wucHVsbC1zMSB7DQogIHJpZ2h0OiA4LjMzMzMzMzMzMzMlOw0KfQ0KDQoucm93IC5jb2wucHVzaC1zMSB7DQogIGxlZnQ6IDguMzMzMzMzMzMzMyU7DQp9DQoNCi5yb3cgLmNvbC5vZmZzZXQtczIgew0KICBtYXJnaW4tbGVmdDogMTYuNjY2NjY2NjY2NyU7DQp9DQoNCi5yb3cgLmNvbC5wdWxsLXMyIHsNCiAgcmlnaHQ6IDE2LjY2NjY2NjY2NjclOw0KfQ0KDQoucm93IC5jb2wucHVzaC1zMiB7DQogIGxlZnQ6IDE2LjY2NjY2NjY2NjclOw0KfQ0KDQoucm93IC5jb2wub2Zmc2V0LXMzIHsNCiAgbWFyZ2luLWxlZnQ6IDI1JTsNCn0NCg0KLnJvdyAuY29sLnB1bGwtczMgew0KICByaWdodDogMjUlOw0KfQ0KDQoucm93IC5jb2wucHVzaC1zMyB7DQogIGxlZnQ6IDI1JTsNCn0NCg0KLnJvdyAuY29sLm9mZnNldC1zNCB7DQogIG1hcmdpbi1sZWZ0OiAzMy4zMzMzMzMzMzMzJTsNCn0NCg0KLnJvdyAuY29sLnB1bGwtczQgew0KICByaWdodDogMzMuMzMzMzMzMzMzMyU7DQp9DQoNCi5yb3cgLmNvbC5wdXNoLXM0IHsNCiAgbGVmdDogMzMuMzMzMzMzMzMzMyU7DQp9DQoNCi5yb3cgLmNvbC5vZmZzZXQtczUgew0KICBtYXJnaW4tbGVmdDogNDEuNjY2NjY2NjY2NyU7DQp9DQoNCi5yb3cgLmNvbC5wdWxsLXM1IHsNCiAgcmlnaHQ6IDQxLjY2NjY2NjY2NjclOw0KfQ0KDQoucm93IC5jb2wucHVzaC1zNSB7DQogIGxlZnQ6IDQxLjY2NjY2NjY2NjclOw0KfQ0KDQoucm93IC5jb2wub2Zmc2V0LXM2IHsNCiAgbWFyZ2luLWxlZnQ6IDUwJTsNCn0NCg0KLnJvdyAuY29sLnB1bGwtczYgew0KICByaWdodDogNTAlOw0KfQ0KDQoucm93IC5jb2wucHVzaC1zNiB7DQogIGxlZnQ6IDUwJTsNCn0NCg0KLnJvdyAuY29sLm9mZnNldC1zNyB7DQogIG1hcmdpbi1sZWZ0OiA1OC4zMzMzMzMzMzMzJTsNCn0NCg0KLnJvdyAuY29sLnB1bGwtczcgew0KICByaWdodDogNTguMzMzMzMzMzMzMyU7DQp9DQoNCi5yb3cgLmNvbC5wdXNoLXM3IHsNCiAgbGVmdDogNTguMzMzMzMzMzMzMyU7DQp9DQoNCi5yb3cgLmNvbC5vZmZzZXQtczggew0KICBtYXJnaW4tbGVmdDogNjYuNjY2NjY2NjY2NyU7DQp9DQoNCi5yb3cgLmNvbC5wdWxsLXM4IHsNCiAgcmlnaHQ6IDY2LjY2NjY2NjY2NjclOw0KfQ0KDQoucm93IC5jb2wucHVzaC1zOCB7DQogIGxlZnQ6IDY2LjY2NjY2NjY2NjclOw0KfQ0KDQoucm93IC5jb2wub2Zmc2V0LXM5IHsNCiAgbWFyZ2luLWxlZnQ6IDc1JTsNCn0NCg0KLnJvdyAuY29sLnB1bGwtczkgew0KICByaWdodDogNzUlOw0KfQ0KDQoucm93IC5jb2wucHVzaC1zOSB7DQogIGxlZnQ6IDc1JTsNCn0NCg0KLnJvdyAuY29sLm9mZnNldC1zMTAgew0KICBtYXJnaW4tbGVmdDogODMuMzMzMzMzMzMzMyU7DQp9DQoNCi5yb3cgLmNvbC5wdWxsLXMxMCB7DQogIHJpZ2h0OiA4My4zMzMzMzMzMzMzJTsNCn0NCg0KLnJvdyAuY29sLnB1c2gtczEwIHsNCiAgbGVmdDogODMuMzMzMzMzMzMzMyU7DQp9DQoNCi5yb3cgLmNvbC5vZmZzZXQtczExIHsNCiAgbWFyZ2luLWxlZnQ6IDkxLjY2NjY2NjY2NjclOw0KfQ0KDQoucm93IC5jb2wucHVsbC1zMTEgew0KICByaWdodDogOTEuNjY2NjY2NjY2NyU7DQp9DQoNCi5yb3cgLmNvbC5wdXNoLXMxMSB7DQogIGxlZnQ6IDkxLjY2NjY2NjY2NjclOw0KfQ0KDQoucm93IC5jb2wub2Zmc2V0LXMxMiB7DQogIG1hcmdpbi1sZWZ0OiAxMDAlOw0KfQ0KDQoucm93IC5jb2wucHVsbC1zMTIgew0KICByaWdodDogMTAwJTsNCn0NCg0KLnJvdyAuY29sLnB1c2gtczEyIHsNCiAgbGVmdDogMTAwJTsNCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDFweCkgew0KICAucm93IC5jb2wubTEgew0KICAgIHdpZHRoOiA4LjMzMzMzMzMzMzMlOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLm0yIHsNCiAgICB3aWR0aDogMTYuNjY2NjY2NjY2NyU7DQogICAgbWFyZ2luLWxlZnQ6IGF1dG87DQogICAgbGVmdDogYXV0bzsNCiAgICByaWdodDogYXV0bzsNCiAgfQ0KICAucm93IC5jb2wubTMgew0KICAgIHdpZHRoOiAyNSU7DQogICAgbWFyZ2luLWxlZnQ6IGF1dG87DQogICAgbGVmdDogYXV0bzsNCiAgICByaWdodDogYXV0bzsNCiAgfQ0KICAucm93IC5jb2wubTQgew0KICAgIHdpZHRoOiAzMy4zMzMzMzMzMzMzJTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5tNSB7DQogICAgd2lkdGg6IDQxLjY2NjY2NjY2NjclOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLm02IHsNCiAgICB3aWR0aDogNTAlOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLm03IHsNCiAgICB3aWR0aDogNTguMzMzMzMzMzMzMyU7DQogICAgbWFyZ2luLWxlZnQ6IGF1dG87DQogICAgbGVmdDogYXV0bzsNCiAgICByaWdodDogYXV0bzsNCiAgfQ0KICAucm93IC5jb2wubTggew0KICAgIHdpZHRoOiA2Ni42NjY2NjY2NjY3JTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5tOSB7DQogICAgd2lkdGg6IDc1JTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5tMTAgew0KICAgIHdpZHRoOiA4My4zMzMzMzMzMzMzJTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5tMTEgew0KICAgIHdpZHRoOiA5MS42NjY2NjY2NjY3JTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5tMTIgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC1tMSB7DQogICAgbWFyZ2luLWxlZnQ6IDguMzMzMzMzMzMzMyU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwtbTEgew0KICAgIHJpZ2h0OiA4LjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLW0xIHsNCiAgICBsZWZ0OiA4LjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQtbTIgew0KICAgIG1hcmdpbi1sZWZ0OiAxNi42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC1tMiB7DQogICAgcmlnaHQ6IDE2LjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLW0yIHsNCiAgICBsZWZ0OiAxNi42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LW0zIHsNCiAgICBtYXJnaW4tbGVmdDogMjUlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLW0zIHsNCiAgICByaWdodDogMjUlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLW0zIHsNCiAgICBsZWZ0OiAyNSU7DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC1tNCB7DQogICAgbWFyZ2luLWxlZnQ6IDMzLjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLW00IHsNCiAgICByaWdodDogMzMuMzMzMzMzMzMzMyU7DQogIH0NCiAgLnJvdyAuY29sLnB1c2gtbTQgew0KICAgIGxlZnQ6IDMzLjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQtbTUgew0KICAgIG1hcmdpbi1sZWZ0OiA0MS42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC1tNSB7DQogICAgcmlnaHQ6IDQxLjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLW01IHsNCiAgICBsZWZ0OiA0MS42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LW02IHsNCiAgICBtYXJnaW4tbGVmdDogNTAlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLW02IHsNCiAgICByaWdodDogNTAlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLW02IHsNCiAgICBsZWZ0OiA1MCU7DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC1tNyB7DQogICAgbWFyZ2luLWxlZnQ6IDU4LjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLW03IHsNCiAgICByaWdodDogNTguMzMzMzMzMzMzMyU7DQogIH0NCiAgLnJvdyAuY29sLnB1c2gtbTcgew0KICAgIGxlZnQ6IDU4LjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQtbTggew0KICAgIG1hcmdpbi1sZWZ0OiA2Ni42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC1tOCB7DQogICAgcmlnaHQ6IDY2LjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLW04IHsNCiAgICBsZWZ0OiA2Ni42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LW05IHsNCiAgICBtYXJnaW4tbGVmdDogNzUlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLW05IHsNCiAgICByaWdodDogNzUlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLW05IHsNCiAgICBsZWZ0OiA3NSU7DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC1tMTAgew0KICAgIG1hcmdpbi1sZWZ0OiA4My4zMzMzMzMzMzMzJTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC1tMTAgew0KICAgIHJpZ2h0OiA4My4zMzMzMzMzMzMzJTsNCiAgfQ0KICAucm93IC5jb2wucHVzaC1tMTAgew0KICAgIGxlZnQ6IDgzLjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQtbTExIHsNCiAgICBtYXJnaW4tbGVmdDogOTEuNjY2NjY2NjY2NyU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwtbTExIHsNCiAgICByaWdodDogOTEuNjY2NjY2NjY2NyU7DQogIH0NCiAgLnJvdyAuY29sLnB1c2gtbTExIHsNCiAgICBsZWZ0OiA5MS42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LW0xMiB7DQogICAgbWFyZ2luLWxlZnQ6IDEwMCU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwtbTEyIHsNCiAgICByaWdodDogMTAwJTsNCiAgfQ0KICAucm93IC5jb2wucHVzaC1tMTIgew0KICAgIGxlZnQ6IDEwMCU7DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA5OTNweCkgew0KICAucm93IC5jb2wubDEgew0KICAgIHdpZHRoOiA4LjMzMzMzMzMzMzMlOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLmwyIHsNCiAgICB3aWR0aDogMTYuNjY2NjY2NjY2NyU7DQogICAgbWFyZ2luLWxlZnQ6IGF1dG87DQogICAgbGVmdDogYXV0bzsNCiAgICByaWdodDogYXV0bzsNCiAgfQ0KICAucm93IC5jb2wubDMgew0KICAgIHdpZHRoOiAyNSU7DQogICAgbWFyZ2luLWxlZnQ6IGF1dG87DQogICAgbGVmdDogYXV0bzsNCiAgICByaWdodDogYXV0bzsNCiAgfQ0KICAucm93IC5jb2wubDQgew0KICAgIHdpZHRoOiAzMy4zMzMzMzMzMzMzJTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5sNSB7DQogICAgd2lkdGg6IDQxLjY2NjY2NjY2NjclOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLmw2IHsNCiAgICB3aWR0aDogNTAlOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLmw3IHsNCiAgICB3aWR0aDogNTguMzMzMzMzMzMzMyU7DQogICAgbWFyZ2luLWxlZnQ6IGF1dG87DQogICAgbGVmdDogYXV0bzsNCiAgICByaWdodDogYXV0bzsNCiAgfQ0KICAucm93IC5jb2wubDggew0KICAgIHdpZHRoOiA2Ni42NjY2NjY2NjY3JTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5sOSB7DQogICAgd2lkdGg6IDc1JTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5sMTAgew0KICAgIHdpZHRoOiA4My4zMzMzMzMzMzMzJTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5sMTEgew0KICAgIHdpZHRoOiA5MS42NjY2NjY2NjY3JTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5sMTIgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC1sMSB7DQogICAgbWFyZ2luLWxlZnQ6IDguMzMzMzMzMzMzMyU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwtbDEgew0KICAgIHJpZ2h0OiA4LjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLWwxIHsNCiAgICBsZWZ0OiA4LjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQtbDIgew0KICAgIG1hcmdpbi1sZWZ0OiAxNi42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC1sMiB7DQogICAgcmlnaHQ6IDE2LjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLWwyIHsNCiAgICBsZWZ0OiAxNi42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LWwzIHsNCiAgICBtYXJnaW4tbGVmdDogMjUlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLWwzIHsNCiAgICByaWdodDogMjUlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLWwzIHsNCiAgICBsZWZ0OiAyNSU7DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC1sNCB7DQogICAgbWFyZ2luLWxlZnQ6IDMzLjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLWw0IHsNCiAgICByaWdodDogMzMuMzMzMzMzMzMzMyU7DQogIH0NCiAgLnJvdyAuY29sLnB1c2gtbDQgew0KICAgIGxlZnQ6IDMzLjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQtbDUgew0KICAgIG1hcmdpbi1sZWZ0OiA0MS42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC1sNSB7DQogICAgcmlnaHQ6IDQxLjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLWw1IHsNCiAgICBsZWZ0OiA0MS42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LWw2IHsNCiAgICBtYXJnaW4tbGVmdDogNTAlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLWw2IHsNCiAgICByaWdodDogNTAlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLWw2IHsNCiAgICBsZWZ0OiA1MCU7DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC1sNyB7DQogICAgbWFyZ2luLWxlZnQ6IDU4LjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLWw3IHsNCiAgICByaWdodDogNTguMzMzMzMzMzMzMyU7DQogIH0NCiAgLnJvdyAuY29sLnB1c2gtbDcgew0KICAgIGxlZnQ6IDU4LjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQtbDggew0KICAgIG1hcmdpbi1sZWZ0OiA2Ni42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC1sOCB7DQogICAgcmlnaHQ6IDY2LjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLWw4IHsNCiAgICBsZWZ0OiA2Ni42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LWw5IHsNCiAgICBtYXJnaW4tbGVmdDogNzUlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLWw5IHsNCiAgICByaWdodDogNzUlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLWw5IHsNCiAgICBsZWZ0OiA3NSU7DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC1sMTAgew0KICAgIG1hcmdpbi1sZWZ0OiA4My4zMzMzMzMzMzMzJTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC1sMTAgew0KICAgIHJpZ2h0OiA4My4zMzMzMzMzMzMzJTsNCiAgfQ0KICAucm93IC5jb2wucHVzaC1sMTAgew0KICAgIGxlZnQ6IDgzLjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQtbDExIHsNCiAgICBtYXJnaW4tbGVmdDogOTEuNjY2NjY2NjY2NyU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwtbDExIHsNCiAgICByaWdodDogOTEuNjY2NjY2NjY2NyU7DQogIH0NCiAgLnJvdyAuY29sLnB1c2gtbDExIHsNCiAgICBsZWZ0OiA5MS42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LWwxMiB7DQogICAgbWFyZ2luLWxlZnQ6IDEwMCU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwtbDEyIHsNCiAgICByaWdodDogMTAwJTsNCiAgfQ0KICAucm93IC5jb2wucHVzaC1sMTIgew0KICAgIGxlZnQ6IDEwMCU7DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMjAxcHgpIHsNCiAgLnJvdyAuY29sLnhsMSB7DQogICAgd2lkdGg6IDguMzMzMzMzMzMzMyU7DQogICAgbWFyZ2luLWxlZnQ6IGF1dG87DQogICAgbGVmdDogYXV0bzsNCiAgICByaWdodDogYXV0bzsNCiAgfQ0KICAucm93IC5jb2wueGwyIHsNCiAgICB3aWR0aDogMTYuNjY2NjY2NjY2NyU7DQogICAgbWFyZ2luLWxlZnQ6IGF1dG87DQogICAgbGVmdDogYXV0bzsNCiAgICByaWdodDogYXV0bzsNCiAgfQ0KICAucm93IC5jb2wueGwzIHsNCiAgICB3aWR0aDogMjUlOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLnhsNCB7DQogICAgd2lkdGg6IDMzLjMzMzMzMzMzMzMlOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLnhsNSB7DQogICAgd2lkdGg6IDQxLjY2NjY2NjY2NjclOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLnhsNiB7DQogICAgd2lkdGg6IDUwJTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC54bDcgew0KICAgIHdpZHRoOiA1OC4zMzMzMzMzMzMzJTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC54bDggew0KICAgIHdpZHRoOiA2Ni42NjY2NjY2NjY3JTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC54bDkgew0KICAgIHdpZHRoOiA3NSU7DQogICAgbWFyZ2luLWxlZnQ6IGF1dG87DQogICAgbGVmdDogYXV0bzsNCiAgICByaWdodDogYXV0bzsNCiAgfQ0KICAucm93IC5jb2wueGwxMCB7DQogICAgd2lkdGg6IDgzLjMzMzMzMzMzMzMlOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGxlZnQ6IGF1dG87DQogICAgcmlnaHQ6IGF1dG87DQogIH0NCiAgLnJvdyAuY29sLnhsMTEgew0KICAgIHdpZHRoOiA5MS42NjY2NjY2NjY3JTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC54bDEyIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICBsZWZ0OiBhdXRvOw0KICAgIHJpZ2h0OiBhdXRvOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQteGwxIHsNCiAgICBtYXJnaW4tbGVmdDogOC4zMzMzMzMzMzMzJTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC14bDEgew0KICAgIHJpZ2h0OiA4LjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLXhsMSB7DQogICAgbGVmdDogOC4zMzMzMzMzMzMzJTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LXhsMiB7DQogICAgbWFyZ2luLWxlZnQ6IDE2LjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLXhsMiB7DQogICAgcmlnaHQ6IDE2LjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLXhsMiB7DQogICAgbGVmdDogMTYuNjY2NjY2NjY2NyU7DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC14bDMgew0KICAgIG1hcmdpbi1sZWZ0OiAyNSU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwteGwzIHsNCiAgICByaWdodDogMjUlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLXhsMyB7DQogICAgbGVmdDogMjUlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQteGw0IHsNCiAgICBtYXJnaW4tbGVmdDogMzMuMzMzMzMzMzMzMyU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwteGw0IHsNCiAgICByaWdodDogMzMuMzMzMzMzMzMzMyU7DQogIH0NCiAgLnJvdyAuY29sLnB1c2gteGw0IHsNCiAgICBsZWZ0OiAzMy4zMzMzMzMzMzMzJTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LXhsNSB7DQogICAgbWFyZ2luLWxlZnQ6IDQxLjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLXhsNSB7DQogICAgcmlnaHQ6IDQxLjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLXhsNSB7DQogICAgbGVmdDogNDEuNjY2NjY2NjY2NyU7DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC14bDYgew0KICAgIG1hcmdpbi1sZWZ0OiA1MCU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwteGw2IHsNCiAgICByaWdodDogNTAlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLXhsNiB7DQogICAgbGVmdDogNTAlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQteGw3IHsNCiAgICBtYXJnaW4tbGVmdDogNTguMzMzMzMzMzMzMyU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwteGw3IHsNCiAgICByaWdodDogNTguMzMzMzMzMzMzMyU7DQogIH0NCiAgLnJvdyAuY29sLnB1c2gteGw3IHsNCiAgICBsZWZ0OiA1OC4zMzMzMzMzMzMzJTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LXhsOCB7DQogICAgbWFyZ2luLWxlZnQ6IDY2LjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLXhsOCB7DQogICAgcmlnaHQ6IDY2LjY2NjY2NjY2NjclOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLXhsOCB7DQogICAgbGVmdDogNjYuNjY2NjY2NjY2NyU7DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC14bDkgew0KICAgIG1hcmdpbi1sZWZ0OiA3NSU7DQogIH0NCiAgLnJvdyAuY29sLnB1bGwteGw5IHsNCiAgICByaWdodDogNzUlOw0KICB9DQogIC5yb3cgLmNvbC5wdXNoLXhsOSB7DQogICAgbGVmdDogNzUlOw0KICB9DQogIC5yb3cgLmNvbC5vZmZzZXQteGwxMCB7DQogICAgbWFyZ2luLWxlZnQ6IDgzLjMzMzMzMzMzMzMlOw0KICB9DQogIC5yb3cgLmNvbC5wdWxsLXhsMTAgew0KICAgIHJpZ2h0OiA4My4zMzMzMzMzMzMzJTsNCiAgfQ0KICAucm93IC5jb2wucHVzaC14bDEwIHsNCiAgICBsZWZ0OiA4My4zMzMzMzMzMzMzJTsNCiAgfQ0KICAucm93IC5jb2wub2Zmc2V0LXhsMTEgew0KICAgIG1hcmdpbi1sZWZ0OiA5MS42NjY2NjY2NjY3JTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC14bDExIHsNCiAgICByaWdodDogOTEuNjY2NjY2NjY2NyU7DQogIH0NCiAgLnJvdyAuY29sLnB1c2gteGwxMSB7DQogICAgbGVmdDogOTEuNjY2NjY2NjY2NyU7DQogIH0NCiAgLnJvdyAuY29sLm9mZnNldC14bDEyIHsNCiAgICBtYXJnaW4tbGVmdDogMTAwJTsNCiAgfQ0KICAucm93IC5jb2wucHVsbC14bDEyIHsNCiAgICByaWdodDogMTAwJTsNCiAgfQ0KICAucm93IC5jb2wucHVzaC14bDEyIHsNCiAgICBsZWZ0OiAxMDAlOw0KICB9DQp9DQoNCm5hdiB7DQogIGNvbG9yOiAjZmZmOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWU2ZTczOw0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiA1NnB4Ow0KICBsaW5lLWhlaWdodDogNTZweDsNCn0NCg0KbmF2Lm5hdi1leHRlbmRlZCB7DQogIGhlaWdodDogYXV0bzsNCn0NCg0KbmF2Lm5hdi1leHRlbmRlZCAubmF2LXdyYXBwZXIgew0KICBtaW4taGVpZ2h0OiA1NnB4Ow0KICBoZWlnaHQ6IGF1dG87DQp9DQoNCm5hdi5uYXYtZXh0ZW5kZWQgLm5hdi1jb250ZW50IHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBsaW5lLWhlaWdodDogbm9ybWFsOw0KfQ0KDQpuYXYgYSB7DQogIGNvbG9yOiAjZmZmOw0KfQ0KDQpuYXYgaSwNCm5hdiBbY2xhc3NePSJtZGktIl0sIG5hdiBbY2xhc3MqPSJtZGktIl0sDQpuYXYgaS5tYXRlcmlhbC1pY29ucyB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBmb250LXNpemU6IDI0cHg7DQogIGhlaWdodDogNTZweDsNCiAgbGluZS1oZWlnaHQ6IDU2cHg7DQp9DQoNCm5hdiAubmF2LXdyYXBwZXIgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIGhlaWdodDogMTAwJTsNCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA5OTNweCkgew0KICBuYXYgYS5zaWRlbmF2LXRyaWdnZXIgew0KICAgIGRpc3BsYXk6IG5vbmU7DQogIH0NCn0NCg0KbmF2IC5zaWRlbmF2LXRyaWdnZXIgew0KICBmbG9hdDogbGVmdDsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICB6LWluZGV4OiAxOw0KICBoZWlnaHQ6IDU2cHg7DQogIG1hcmdpbjogMCAxOHB4Ow0KfQ0KDQpuYXYgLnNpZGVuYXYtdHJpZ2dlciBpIHsNCiAgaGVpZ2h0OiA1NnB4Ow0KICBsaW5lLWhlaWdodDogNTZweDsNCn0NCg0KbmF2IC5icmFuZC1sb2dvIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBjb2xvcjogI2ZmZjsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBmb250LXNpemU6IDIuMXJlbTsNCiAgcGFkZGluZzogMDsNCn0NCg0KbmF2IC5icmFuZC1sb2dvLmNlbnRlciB7DQogIGxlZnQ6IDUwJTsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7DQogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk5MnB4KSB7DQogIG5hdiAuYnJhbmQtbG9nbyB7DQogICAgbGVmdDogNTAlOw0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICB9DQogIG5hdiAuYnJhbmQtbG9nby5sZWZ0LCBuYXYgLmJyYW5kLWxvZ28ucmlnaHQgew0KICAgIHBhZGRpbmc6IDA7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IG5vbmU7DQogICAgICAgICAgICB0cmFuc2Zvcm06IG5vbmU7DQogIH0NCiAgbmF2IC5icmFuZC1sb2dvLmxlZnQgew0KICAgIGxlZnQ6IDAuNXJlbTsNCiAgfQ0KICBuYXYgLmJyYW5kLWxvZ28ucmlnaHQgew0KICAgIHJpZ2h0OiAwLjVyZW07DQogICAgbGVmdDogYXV0bzsNCiAgfQ0KfQ0KDQpuYXYgLmJyYW5kLWxvZ28ucmlnaHQgew0KICByaWdodDogMC41cmVtOw0KICBwYWRkaW5nOiAwOw0KfQ0KDQpuYXYgLmJyYW5kLWxvZ28gaSwNCm5hdiAuYnJhbmQtbG9nbyBbY2xhc3NePSJtZGktIl0sIG5hdiAuYnJhbmQtbG9nbyBbY2xhc3MqPSJtZGktIl0sDQpuYXYgLmJyYW5kLWxvZ28gaS5tYXRlcmlhbC1pY29ucyB7DQogIGZsb2F0OiBsZWZ0Ow0KICBtYXJnaW4tcmlnaHQ6IDE1cHg7DQp9DQoNCm5hdiAubmF2LXRpdGxlIHsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBmb250LXNpemU6IDMycHg7DQogIHBhZGRpbmc6IDI4cHggMDsNCn0NCg0KbmF2IHVsIHsNCiAgbWFyZ2luOiAwOw0KfQ0KDQpuYXYgdWwgbGkgew0KICAtd2Via2l0LXRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjNzOw0KICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zczsNCiAgZmxvYXQ6IGxlZnQ7DQogIHBhZGRpbmc6IDA7DQp9DQoNCm5hdiB1bCBsaS5hY3RpdmUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7DQp9DQoNCm5hdiB1bCBhIHsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zczsNCiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3M7DQogIGZvbnQtc2l6ZTogMXJlbTsNCiAgY29sb3I6ICNmZmY7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBwYWRkaW5nOiAwIDE1cHg7DQogIGN1cnNvcjogcG9pbnRlcjsNCn0NCg0KbmF2IHVsIGEuYnRuLCBuYXYgdWwgYS5idG4tbGFyZ2UsIG5hdiB1bCBhLmJ0bi1zbWFsbCwgbmF2IHVsIGEuYnRuLWxhcmdlLCBuYXYgdWwgYS5idG4tZmxhdCwgbmF2IHVsIGEuYnRuLWZsb2F0aW5nIHsNCiAgbWFyZ2luLXRvcDogLTJweDsNCiAgbWFyZ2luLWxlZnQ6IDE1cHg7DQogIG1hcmdpbi1yaWdodDogMTVweDsNCn0NCg0KbmF2IHVsIGEuYnRuID4gLm1hdGVyaWFsLWljb25zLCBuYXYgdWwgYS5idG4tbGFyZ2UgPiAubWF0ZXJpYWwtaWNvbnMsIG5hdiB1bCBhLmJ0bi1zbWFsbCA+IC5tYXRlcmlhbC1pY29ucywgbmF2IHVsIGEuYnRuLWxhcmdlID4gLm1hdGVyaWFsLWljb25zLCBuYXYgdWwgYS5idG4tZmxhdCA+IC5tYXRlcmlhbC1pY29ucywgbmF2IHVsIGEuYnRuLWZsb2F0aW5nID4gLm1hdGVyaWFsLWljb25zIHsNCiAgaGVpZ2h0OiBpbmhlcml0Ow0KICBsaW5lLWhlaWdodDogaW5oZXJpdDsNCn0NCg0KbmF2IHVsIGE6aG92ZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7DQp9DQoNCm5hdiB1bC5sZWZ0IHsNCiAgZmxvYXQ6IGxlZnQ7DQp9DQoNCm5hdiBmb3JtIHsNCiAgaGVpZ2h0OiAxMDAlOw0KfQ0KDQpuYXYgLmlucHV0LWZpZWxkIHsNCiAgbWFyZ2luOiAwOw0KICBoZWlnaHQ6IDEwMCU7DQp9DQoNCm5hdiAuaW5wdXQtZmllbGQgaW5wdXQgew0KICBoZWlnaHQ6IDEwMCU7DQogIGZvbnQtc2l6ZTogMS4ycmVtOw0KICBib3JkZXI6IG5vbmU7DQogIHBhZGRpbmctbGVmdDogMnJlbTsNCn0NCg0KbmF2IC5pbnB1dC1maWVsZCBpbnB1dDpmb2N1cywgbmF2IC5pbnB1dC1maWVsZCBpbnB1dFt0eXBlPXRleHRdOnZhbGlkLCBuYXYgLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9cGFzc3dvcmRdOnZhbGlkLCBuYXYgLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9ZW1haWxdOnZhbGlkLCBuYXYgLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9dXJsXTp2YWxpZCwgbmF2IC5pbnB1dC1maWVsZCBpbnB1dFt0eXBlPWRhdGVdOnZhbGlkIHsNCiAgYm9yZGVyOiBub25lOw0KICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmU7DQogICAgICAgICAgYm94LXNoYWRvdzogbm9uZTsNCn0NCg0KbmF2IC5pbnB1dC1maWVsZCBsYWJlbCB7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCn0NCg0KbmF2IC5pbnB1dC1maWVsZCBsYWJlbCBpIHsNCiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBjb2xvciAuM3M7DQogIHRyYW5zaXRpb246IGNvbG9yIC4zczsNCn0NCg0KbmF2IC5pbnB1dC1maWVsZCBsYWJlbC5hY3RpdmUgaSB7DQogIGNvbG9yOiAjZmZmOw0KfQ0KDQoubmF2YmFyLWZpeGVkIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBoZWlnaHQ6IDU2cHg7DQogIHotaW5kZXg6IDk5NzsNCn0NCg0KLm5hdmJhci1maXhlZCBuYXYgew0KICBwb3NpdGlvbjogZml4ZWQ7DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAxcHgpIHsNCiAgbmF2Lm5hdi1leHRlbmRlZCAubmF2LXdyYXBwZXIgew0KICAgIG1pbi1oZWlnaHQ6IDY0cHg7DQogIH0NCiAgbmF2LCBuYXYgLm5hdi13cmFwcGVyIGksIG5hdiBhLnNpZGVuYXYtdHJpZ2dlciwgbmF2IGEuc2lkZW5hdi10cmlnZ2VyIGkgew0KICAgIGhlaWdodDogNjRweDsNCiAgICBsaW5lLWhlaWdodDogNjRweDsNCiAgfQ0KICAubmF2YmFyLWZpeGVkIHsNCiAgICBoZWlnaHQ6IDY0cHg7DQogIH0NCn0NCg0KYSB7DQogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCg0KaHRtbCB7DQogIGxpbmUtaGVpZ2h0OiAxLjU7DQogIGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsIFJvYm90bywgT3h5Z2VuLVNhbnMsIFVidW50dSwgQ2FudGFyZWxsLCAiSGVsdmV0aWNhIE5ldWUiLCBzYW5zLXNlcmlmOw0KICBmb250LXdlaWdodDogbm9ybWFsOw0KICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTsNCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAwKSB7DQogIGh0bWwgew0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk5MnB4KSB7DQogIGh0bWwgew0KICAgIGZvbnQtc2l6ZTogMTQuNXB4Ow0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTIwMHB4KSB7DQogIGh0bWwgew0KICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgfQ0KfQ0KDQpoMSwgaDIsIGgzLCBoNCwgaDUsIGg2IHsNCiAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgbGluZS1oZWlnaHQ6IDEuMzsNCn0NCg0KaDEgYSwgaDIgYSwgaDMgYSwgaDQgYSwgaDUgYSwgaDYgYSB7DQogIGZvbnQtd2VpZ2h0OiBpbmhlcml0Ow0KfQ0KDQpoMSB7DQogIGZvbnQtc2l6ZTogNC4ycmVtOw0KICBsaW5lLWhlaWdodDogMTEwJTsNCiAgbWFyZ2luOiAyLjhyZW0gMCAxLjY4cmVtIDA7DQp9DQoNCmgyIHsNCiAgZm9udC1zaXplOiAzLjU2cmVtOw0KICBsaW5lLWhlaWdodDogMTEwJTsNCiAgbWFyZ2luOiAyLjM3MzMzMzMzMzNyZW0gMCAxLjQyNHJlbSAwOw0KfQ0KDQpoMyB7DQogIGZvbnQtc2l6ZTogMi45MnJlbTsNCiAgbGluZS1oZWlnaHQ6IDExMCU7DQogIG1hcmdpbjogMS45NDY2NjY2NjY3cmVtIDAgMS4xNjhyZW0gMDsNCn0NCg0KaDQgew0KICBmb250LXNpemU6IDIuMjhyZW07DQogIGxpbmUtaGVpZ2h0OiAxMTAlOw0KICBtYXJnaW46IDEuNTJyZW0gMCAwLjkxMnJlbSAwOw0KfQ0KDQpoNSB7DQogIGZvbnQtc2l6ZTogMS42NHJlbTsNCiAgbGluZS1oZWlnaHQ6IDExMCU7DQogIG1hcmdpbjogMS4wOTMzMzMzMzMzcmVtIDAgMC42NTZyZW0gMDsNCn0NCg0KaDYgew0KICBmb250LXNpemU6IDEuMTVyZW07DQogIGxpbmUtaGVpZ2h0OiAxMTAlOw0KICBtYXJnaW46IDAuNzY2NjY2NjY2N3JlbSAwIDAuNDZyZW0gMDsNCn0NCg0KZW0gew0KICBmb250LXN0eWxlOiBpdGFsaWM7DQp9DQoNCnN0cm9uZyB7DQogIGZvbnQtd2VpZ2h0OiA1MDA7DQp9DQoNCnNtYWxsIHsNCiAgZm9udC1zaXplOiA3NSU7DQp9DQoNCi5saWdodCB7DQogIGZvbnQtd2VpZ2h0OiAzMDA7DQp9DQoNCi50aGluIHsNCiAgZm9udC13ZWlnaHQ6IDIwMDsNCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAzNjBweCkgew0KICAuZmxvdy10ZXh0IHsNCiAgICBmb250LXNpemU6IDEuMnJlbTsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDM5MHB4KSB7DQogIC5mbG93LXRleHQgew0KICAgIGZvbnQtc2l6ZTogMS4yMjRyZW07DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA0MjBweCkgew0KICAuZmxvdy10ZXh0IHsNCiAgICBmb250LXNpemU6IDEuMjQ4cmVtOw0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNDUwcHgpIHsNCiAgLmZsb3ctdGV4dCB7DQogICAgZm9udC1zaXplOiAxLjI3MnJlbTsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDQ4MHB4KSB7DQogIC5mbG93LXRleHQgew0KICAgIGZvbnQtc2l6ZTogMS4yOTZyZW07DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA1MTBweCkgew0KICAuZmxvdy10ZXh0IHsNCiAgICBmb250LXNpemU6IDEuMzJyZW07DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA1NDBweCkgew0KICAuZmxvdy10ZXh0IHsNCiAgICBmb250LXNpemU6IDEuMzQ0cmVtOw0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNTcwcHgpIHsNCiAgLmZsb3ctdGV4dCB7DQogICAgZm9udC1zaXplOiAxLjM2OHJlbTsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMHB4KSB7DQogIC5mbG93LXRleHQgew0KICAgIGZvbnQtc2l6ZTogMS4zOTJyZW07DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MzBweCkgew0KICAuZmxvdy10ZXh0IHsNCiAgICBmb250LXNpemU6IDEuNDE2cmVtOw0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjYwcHgpIHsNCiAgLmZsb3ctdGV4dCB7DQogICAgZm9udC1zaXplOiAxLjQ0cmVtOw0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjkwcHgpIHsNCiAgLmZsb3ctdGV4dCB7DQogICAgZm9udC1zaXplOiAxLjQ2NHJlbTsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDcyMHB4KSB7DQogIC5mbG93LXRleHQgew0KICAgIGZvbnQtc2l6ZTogMS40ODhyZW07DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA3NTBweCkgew0KICAuZmxvdy10ZXh0IHsNCiAgICBmb250LXNpemU6IDEuNTEycmVtOw0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNzgwcHgpIHsNCiAgLmZsb3ctdGV4dCB7DQogICAgZm9udC1zaXplOiAxLjUzNnJlbTsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDgxMHB4KSB7DQogIC5mbG93LXRleHQgew0KICAgIGZvbnQtc2l6ZTogMS41NnJlbTsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDg0MHB4KSB7DQogIC5mbG93LXRleHQgew0KICAgIGZvbnQtc2l6ZTogMS41ODRyZW07DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA4NzBweCkgew0KICAuZmxvdy10ZXh0IHsNCiAgICBmb250LXNpemU6IDEuNjA4cmVtOw0KICB9DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogOTAwcHgpIHsNCiAgLmZsb3ctdGV4dCB7DQogICAgZm9udC1zaXplOiAxLjYzMnJlbTsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDkzMHB4KSB7DQogIC5mbG93LXRleHQgew0KICAgIGZvbnQtc2l6ZTogMS42NTZyZW07DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA5NjBweCkgew0KICAuZmxvdy10ZXh0IHsNCiAgICBmb250LXNpemU6IDEuNjhyZW07DQogIH0NCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAzNjBweCkgew0KICAuZmxvdy10ZXh0IHsNCiAgICBmb250LXNpemU6IDEuMnJlbTsNCiAgfQ0KfQ0KDQouc2NhbGUtdHJhbnNpdGlvbiB7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC41MywgMC4wMSwgMC4zNiwgMS42MykgIWltcG9ydGFudDsNCiAgdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC41MywgMC4wMSwgMC4zNiwgMS42MykgIWltcG9ydGFudDsNCiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgY3ViaWMtYmV6aWVyKDAuNTMsIDAuMDEsIDAuMzYsIDEuNjMpICFpbXBvcnRhbnQ7DQogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjUzLCAwLjAxLCAwLjM2LCAxLjYzKSwgLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC41MywgMC4wMSwgMC4zNiwgMS42MykgIWltcG9ydGFudDsNCn0NCg0KLnNjYWxlLXRyYW5zaXRpb24uc2NhbGUtb3V0IHsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDApOw0KICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gLjJzICFpbXBvcnRhbnQ7DQogIHRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIC4ycyAhaW1wb3J0YW50Ow0KICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjJzICFpbXBvcnRhbnQ7DQogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAuMnMsIC13ZWJraXQtdHJhbnNmb3JtIC4ycyAhaW1wb3J0YW50Ow0KfQ0KDQouc2NhbGUtdHJhbnNpdGlvbi5zY2FsZS1pbiB7DQogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgxKTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpOw0KfQ0KDQouY2FyZC1wYW5lbCB7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7DQogIHRyYW5zaXRpb246IC13ZWJraXQtYm94LXNoYWRvdyAuMjVzOw0KICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IC4yNXM7DQogIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjI1cywgLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7DQogIHBhZGRpbmc6IDI0cHg7DQogIG1hcmdpbjogMC41cmVtIDAgMXJlbSAwOw0KICBib3JkZXItcmFkaXVzOiAycHg7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQp9DQoNCi5jYXJkIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBtYXJnaW46IDAuNXJlbSAwIDFyZW0gMDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LWJveC1zaGFkb3cgLjI1czsNCiAgdHJhbnNpdGlvbjogLXdlYmtpdC1ib3gtc2hhZG93IC4yNXM7DQogIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjI1czsNCiAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAuMjVzLCAtd2Via2l0LWJveC1zaGFkb3cgLjI1czsNCiAgYm9yZGVyLXJhZGl1czogMnB4Ow0KfQ0KDQouY2FyZCAuY2FyZC10aXRsZSB7DQogIGZvbnQtc2l6ZTogMjRweDsNCiAgZm9udC13ZWlnaHQ6IDMwMDsNCn0NCg0KLmNhcmQgLmNhcmQtdGl0bGUuYWN0aXZhdG9yIHsNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KDQouY2FyZC5zbWFsbCwgLmNhcmQubWVkaXVtLCAuY2FyZC5sYXJnZSB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCg0KLmNhcmQuc21hbGwgLmNhcmQtaW1hZ2UsIC5jYXJkLm1lZGl1bSAuY2FyZC1pbWFnZSwgLmNhcmQubGFyZ2UgLmNhcmQtaW1hZ2Ugew0KICBtYXgtaGVpZ2h0OiA2MCU7DQogIG92ZXJmbG93OiBoaWRkZW47DQp9DQoNCi5jYXJkLnNtYWxsIC5jYXJkLWltYWdlICsgLmNhcmQtY29udGVudCwgLmNhcmQubWVkaXVtIC5jYXJkLWltYWdlICsgLmNhcmQtY29udGVudCwgLmNhcmQubGFyZ2UgLmNhcmQtaW1hZ2UgKyAuY2FyZC1jb250ZW50IHsNCiAgbWF4LWhlaWdodDogNDAlOw0KfQ0KDQouY2FyZC5zbWFsbCAuY2FyZC1jb250ZW50LCAuY2FyZC5tZWRpdW0gLmNhcmQtY29udGVudCwgLmNhcmQubGFyZ2UgLmNhcmQtY29udGVudCB7DQogIG1heC1oZWlnaHQ6IDEwMCU7DQogIG92ZXJmbG93OiBoaWRkZW47DQp9DQoNCi5jYXJkLnNtYWxsIC5jYXJkLWFjdGlvbiwgLmNhcmQubWVkaXVtIC5jYXJkLWFjdGlvbiwgLmNhcmQubGFyZ2UgLmNhcmQtYWN0aW9uIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBib3R0b206IDA7DQogIGxlZnQ6IDA7DQogIHJpZ2h0OiAwOw0KfQ0KDQouY2FyZC5zbWFsbCB7DQogIGhlaWdodDogMzAwcHg7DQp9DQoNCi5jYXJkLm1lZGl1bSB7DQogIGhlaWdodDogNDAwcHg7DQp9DQoNCi5jYXJkLmxhcmdlIHsNCiAgaGVpZ2h0OiA1MDBweDsNCn0NCg0KLmNhcmQuaG9yaXpvbnRhbCB7DQogIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogIGRpc3BsYXk6IC1tcy1mbGV4Ym94Ow0KICBkaXNwbGF5OiBmbGV4Ow0KfQ0KDQouY2FyZC5ob3Jpem9udGFsLnNtYWxsIC5jYXJkLWltYWdlLCAuY2FyZC5ob3Jpem9udGFsLm1lZGl1bSAuY2FyZC1pbWFnZSwgLmNhcmQuaG9yaXpvbnRhbC5sYXJnZSAuY2FyZC1pbWFnZSB7DQogIGhlaWdodDogMTAwJTsNCiAgbWF4LWhlaWdodDogbm9uZTsNCiAgb3ZlcmZsb3c6IHZpc2libGU7DQp9DQoNCi5jYXJkLmhvcml6b250YWwuc21hbGwgLmNhcmQtaW1hZ2UgaW1nLCAuY2FyZC5ob3Jpem9udGFsLm1lZGl1bSAuY2FyZC1pbWFnZSBpbWcsIC5jYXJkLmhvcml6b250YWwubGFyZ2UgLmNhcmQtaW1hZ2UgaW1nIHsNCiAgaGVpZ2h0OiAxMDAlOw0KfQ0KDQouY2FyZC5ob3Jpem9udGFsIC5jYXJkLWltYWdlIHsNCiAgbWF4LXdpZHRoOiA1MCU7DQp9DQoNCi5jYXJkLmhvcml6b250YWwgLmNhcmQtaW1hZ2UgaW1nIHsNCiAgYm9yZGVyLXJhZGl1czogMnB4IDAgMCAycHg7DQogIG1heC13aWR0aDogMTAwJTsNCiAgd2lkdGg6IGF1dG87DQp9DQoNCi5jYXJkLmhvcml6b250YWwgLmNhcmQtc3RhY2tlZCB7DQogIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogIGRpc3BsYXk6IC1tcy1mbGV4Ym94Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsOw0KICAtd2Via2l0LWJveC1kaXJlY3Rpb246IG5vcm1hbDsNCiAgLXdlYmtpdC1mbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgLW1zLWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgLXdlYmtpdC1ib3gtZmxleDogMTsNCiAgLXdlYmtpdC1mbGV4OiAxOw0KICAgICAgLW1zLWZsZXg6IDE7DQogICAgICAgICAgZmxleDogMTsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KDQouY2FyZC5ob3Jpem9udGFsIC5jYXJkLXN0YWNrZWQgLmNhcmQtY29udGVudCB7DQogIC13ZWJraXQtYm94LWZsZXg6IDE7DQogIC13ZWJraXQtZmxleC1ncm93OiAxOw0KICAgICAgLW1zLWZsZXgtcG9zaXRpdmU6IDE7DQogICAgICAgICAgZmxleC1ncm93OiAxOw0KfQ0KDQouY2FyZC5zdGlja3ktYWN0aW9uIC5jYXJkLWFjdGlvbiB7DQogIHotaW5kZXg6IDI7DQp9DQoNCi5jYXJkLnN0aWNreS1hY3Rpb24gLmNhcmQtcmV2ZWFsIHsNCiAgei1pbmRleDogMTsNCiAgcGFkZGluZy1ib3R0b206IDY0cHg7DQp9DQoNCi5jYXJkIC5jYXJkLWltYWdlIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KDQouY2FyZCAuY2FyZC1pbWFnZSBpbWcgew0KICBkaXNwbGF5OiBibG9jazsNCiAgYm9yZGVyLXJhZGl1czogMnB4IDJweCAwIDA7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgbGVmdDogMDsNCiAgcmlnaHQ6IDA7DQogIHRvcDogMDsNCiAgYm90dG9tOiAwOw0KICB3aWR0aDogMTAwJTsNCn0NCg0KLmNhcmQgLmNhcmQtaW1hZ2UgLmNhcmQtdGl0bGUgew0KICBjb2xvcjogI2ZmZjsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBib3R0b206IDA7DQogIGxlZnQ6IDA7DQogIG1heC13aWR0aDogMTAwJTsNCiAgcGFkZGluZzogMjRweDsNCn0NCg0KLmNhcmQgLmNhcmQtY29udGVudCB7DQogIHBhZGRpbmc6IDI0cHg7DQogIGJvcmRlci1yYWRpdXM6IDAgMCAycHggMnB4Ow0KfQ0KDQouY2FyZCAuY2FyZC1jb250ZW50IHAgew0KICBtYXJnaW46IDA7DQp9DQoNCi5jYXJkIC5jYXJkLWNvbnRlbnQgLmNhcmQtdGl0bGUgew0KICBkaXNwbGF5OiBibG9jazsNCiAgbGluZS1oZWlnaHQ6IDMycHg7DQogIG1hcmdpbi1ib3R0b206IDhweDsNCn0NCg0KLmNhcmQgLmNhcmQtY29udGVudCAuY2FyZC10aXRsZSBpIHsNCiAgbGluZS1oZWlnaHQ6IDMycHg7DQp9DQoNCi5jYXJkIC5jYXJkLWFjdGlvbiB7DQogIGJhY2tncm91bmQtY29sb3I6IGluaGVyaXQ7DQogIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDE2MCwgMTYwLCAxNjAsIDAuMik7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgcGFkZGluZzogMTZweCAyNHB4Ow0KfQ0KDQouY2FyZCAuY2FyZC1hY3Rpb246bGFzdC1jaGlsZCB7DQogIGJvcmRlci1yYWRpdXM6IDAgMCAycHggMnB4Ow0KfQ0KDQouY2FyZCAuY2FyZC1hY3Rpb24gYTpub3QoLmJ0bik6bm90KC5idG4tbGFyZ2UpOm5vdCguYnRuLXNtYWxsKTpub3QoLmJ0bi1sYXJnZSk6bm90KC5idG4tZmxvYXRpbmcpIHsNCiAgY29sb3I6ICNmZmFiNDA7DQogIG1hcmdpbi1yaWdodDogMjRweDsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBjb2xvciAuM3MgZWFzZTsNCiAgdHJhbnNpdGlvbjogY29sb3IgLjNzIGVhc2U7DQogIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQp9DQoNCi5jYXJkIC5jYXJkLWFjdGlvbiBhOm5vdCguYnRuKTpub3QoLmJ0bi1sYXJnZSk6bm90KC5idG4tc21hbGwpOm5vdCguYnRuLWxhcmdlKTpub3QoLmJ0bi1mbG9hdGluZyk6aG92ZXIgew0KICBjb2xvcjogI2ZmZDhhNjsNCn0NCg0KLmNhcmQgLmNhcmQtcmV2ZWFsIHsNCiAgcGFkZGluZzogMjRweDsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICB3aWR0aDogMTAwJTsNCiAgb3ZlcmZsb3cteTogYXV0bzsNCiAgbGVmdDogMDsNCiAgdG9wOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIHotaW5kZXg6IDM7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi5jYXJkIC5jYXJkLXJldmVhbCAuY2FyZC10aXRsZSB7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgZGlzcGxheTogYmxvY2s7DQp9DQoNCiN0b2FzdC1jb250YWluZXIgew0KICBkaXNwbGF5OiBibG9jazsNCiAgcG9zaXRpb246IGZpeGVkOw0KICB6LWluZGV4OiAxMDAwMDsNCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MDBweCkgew0KICAjdG9hc3QtY29udGFpbmVyIHsNCiAgICBtaW4td2lkdGg6IDEwMCU7DQogICAgYm90dG9tOiAwJTsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMXB4KSBhbmQgKG1heC13aWR0aDogOTkycHgpIHsNCiAgI3RvYXN0LWNvbnRhaW5lciB7DQogICAgbGVmdDogNSU7DQogICAgYm90dG9tOiA3JTsNCiAgICBtYXgtd2lkdGg6IDkwJTsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk5M3B4KSB7DQogICN0b2FzdC1jb250YWluZXIgew0KICAgIHRvcDogMTAlOw0KICAgIHJpZ2h0OiA3JTsNCiAgICBtYXgtd2lkdGg6IDg2JTsNCiAgfQ0KfQ0KDQoudG9hc3Qgew0KICBib3JkZXItcmFkaXVzOiAycHg7DQogIHRvcDogMzVweDsNCiAgd2lkdGg6IGF1dG87DQogIG1hcmdpbi10b3A6IDEwcHg7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgbWF4LXdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IGF1dG87DQogIG1pbi1oZWlnaHQ6IDQ4cHg7DQogIGxpbmUtaGVpZ2h0OiAxLjVlbTsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzMyMzIzMjsNCiAgcGFkZGluZzogMTBweCAyNXB4Ow0KICBmb250LXNpemU6IDEuMXJlbTsNCiAgZm9udC13ZWlnaHQ6IDMwMDsNCiAgY29sb3I6ICNmZmY7DQogIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogIGRpc3BsYXk6IC1tcy1mbGV4Ym94Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOw0KICAtd2Via2l0LWFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogIC13ZWJraXQtYm94LXBhY2s6IGp1c3RpZnk7DQogIC13ZWJraXQtanVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgLW1zLWZsZXgtcGFjazoganVzdGlmeTsNCiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogIGN1cnNvcjogZGVmYXVsdDsNCn0NCg0KLnRvYXN0IC50b2FzdC1hY3Rpb24gew0KICBjb2xvcjogI2VlZmY0MTsNCiAgZm9udC13ZWlnaHQ6IDUwMDsNCiAgbWFyZ2luLXJpZ2h0OiAtMjVweDsNCiAgbWFyZ2luLWxlZnQ6IDNyZW07DQp9DQoNCi50b2FzdC5yb3VuZGVkIHsNCiAgYm9yZGVyLXJhZGl1czogMjRweDsNCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MDBweCkgew0KICAudG9hc3Qgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGJvcmRlci1yYWRpdXM6IDA7DQogIH0NCn0NCg0KLnRhYnMgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIG92ZXJmbG93LXg6IGF1dG87DQogIG92ZXJmbG93LXk6IGhpZGRlbjsNCiAgaGVpZ2h0OiA0OHB4Ow0KICB3aWR0aDogMTAwJTsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgbWFyZ2luOiAwIGF1dG87DQogIHdoaXRlLXNwYWNlOiBub3dyYXA7DQp9DQoNCi50YWJzLnRhYnMtdHJhbnNwYXJlbnQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCn0NCg0KLnRhYnMudGFicy10cmFuc3BhcmVudCAudGFiIGEsDQoudGFicy50YWJzLXRyYW5zcGFyZW50IC50YWIuZGlzYWJsZWQgYSwNCi50YWJzLnRhYnMtdHJhbnNwYXJlbnQgLnRhYi5kaXNhYmxlZCBhOmhvdmVyIHsNCiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsNCn0NCg0KLnRhYnMudGFicy10cmFuc3BhcmVudCAudGFiIGE6aG92ZXIsDQoudGFicy50YWJzLXRyYW5zcGFyZW50IC50YWIgYS5hY3RpdmUgew0KICBjb2xvcjogI2ZmZjsNCn0NCg0KLnRhYnMudGFicy10cmFuc3BhcmVudCAuaW5kaWNhdG9yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCn0NCg0KLnRhYnMudGFicy1maXhlZC13aWR0aCB7DQogIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogIGRpc3BsYXk6IC1tcy1mbGV4Ym94Ow0KICBkaXNwbGF5OiBmbGV4Ow0KfQ0KDQoudGFicy50YWJzLWZpeGVkLXdpZHRoIC50YWIgew0KICAtd2Via2l0LWJveC1mbGV4OiAxOw0KICAtd2Via2l0LWZsZXgtZ3JvdzogMTsNCiAgICAgIC1tcy1mbGV4LXBvc2l0aXZlOiAxOw0KICAgICAgICAgIGZsZXgtZ3JvdzogMTsNCn0NCg0KLnRhYnMgLnRhYiB7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBsaW5lLWhlaWdodDogNDhweDsNCiAgaGVpZ2h0OiA0OHB4Ow0KICBwYWRkaW5nOiAwOw0KICBtYXJnaW46IDA7DQogIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQp9DQoNCi50YWJzIC50YWIgYSB7DQogIGNvbG9yOiByZ2JhKDIzOCwgMTEwLCAxMTUsIDAuNyk7DQogIGRpc3BsYXk6IGJsb2NrOw0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBwYWRkaW5nOiAwIDI0cHg7DQogIGZvbnQtc2l6ZTogMTRweDsNCiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIC13ZWJraXQtdHJhbnNpdGlvbjogY29sb3IgLjI4cyBlYXNlLCBiYWNrZ3JvdW5kLWNvbG9yIC4yOHMgZWFzZTsNCiAgdHJhbnNpdGlvbjogY29sb3IgLjI4cyBlYXNlLCBiYWNrZ3JvdW5kLWNvbG9yIC4yOHMgZWFzZTsNCn0NCg0KLnRhYnMgLnRhYiBhOmZvY3VzLCAudGFicyAudGFiIGE6Zm9jdXMuYWN0aXZlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDYsIDE3OCwgMTgxLCAwLjIpOw0KICBvdXRsaW5lOiBub25lOw0KfQ0KDQoudGFicyAudGFiIGE6aG92ZXIsIC50YWJzIC50YWIgYS5hY3RpdmUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgY29sb3I6ICNlZTZlNzM7DQp9DQoNCi50YWJzIC50YWIuZGlzYWJsZWQgYSwNCi50YWJzIC50YWIuZGlzYWJsZWQgYTpob3ZlciB7DQogIGNvbG9yOiByZ2JhKDIzOCwgMTEwLCAxMTUsIDAuNCk7DQogIGN1cnNvcjogZGVmYXVsdDsNCn0NCg0KLnRhYnMgLmluZGljYXRvciB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgYm90dG9tOiAwOw0KICBoZWlnaHQ6IDJweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y2YjJiNTsNCiAgd2lsbC1jaGFuZ2U6IGxlZnQsIHJpZ2h0Ow0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk5MnB4KSB7DQogIC50YWJzIHsNCiAgICBkaXNwbGF5OiAtd2Via2l0LWJveDsNCiAgICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogICAgZGlzcGxheTogLW1zLWZsZXhib3g7DQogICAgZGlzcGxheTogZmxleDsNCiAgfQ0KICAudGFicyAudGFiIHsNCiAgICAtd2Via2l0LWJveC1mbGV4OiAxOw0KICAgIC13ZWJraXQtZmxleC1ncm93OiAxOw0KICAgICAgICAtbXMtZmxleC1wb3NpdGl2ZTogMTsNCiAgICAgICAgICAgIGZsZXgtZ3JvdzogMTsNCiAgfQ0KICAudGFicyAudGFiIGEgew0KICAgIHBhZGRpbmc6IDAgMTJweDsNCiAgfQ0KfQ0KDQoubWF0ZXJpYWwtdG9vbHRpcCB7DQogIHBhZGRpbmc6IDEwcHggOHB4Ow0KICBmb250LXNpemU6IDFyZW07DQogIHotaW5kZXg6IDIwMDA7DQogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Ow0KICBib3JkZXItcmFkaXVzOiAycHg7DQogIGNvbG9yOiAjZmZmOw0KICBtaW4taGVpZ2h0OiAzNnB4Ow0KICBsaW5lLWhlaWdodDogMTIwJTsNCiAgb3BhY2l0eTogMDsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIG1heC13aWR0aDogY2FsYygxMDAlIC0gNHB4KTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgbGVmdDogMDsNCiAgdG9wOiAwOw0KICBwb2ludGVyLWV2ZW50czogbm9uZTsNCiAgdmlzaWJpbGl0eTogaGlkZGVuOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzIzMjMyOw0KfQ0KDQouYmFja2Ryb3Agew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIG9wYWNpdHk6IDA7DQogIGhlaWdodDogN3B4Ow0KICB3aWR0aDogMTRweDsNCiAgYm9yZGVyLXJhZGl1czogMCAwIDUwJSA1MCU7DQogIGJhY2tncm91bmQtY29sb3I6ICMzMjMyMzI7DQogIHotaW5kZXg6IC0xOw0KICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDUwJSAwJTsNCiAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiA1MCUgMCU7DQogIHZpc2liaWxpdHk6IGhpZGRlbjsNCn0NCg0KLmJ0biwgLmJ0bi1sYXJnZSwgLmJ0bi1zbWFsbCwNCi5idG4tZmxhdCB7DQogIGJvcmRlcjogbm9uZTsNCiAgYm9yZGVyLXJhZGl1czogMnB4Ow0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIGhlaWdodDogMzZweDsNCiAgbGluZS1oZWlnaHQ6IDM2cHg7DQogIHBhZGRpbmc6IDAgMTZweDsNCiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsNCn0NCg0KLmJ0bi5kaXNhYmxlZCwgLmRpc2FibGVkLmJ0bi1sYXJnZSwgLmRpc2FibGVkLmJ0bi1zbWFsbCwNCi5idG4tZmxvYXRpbmcuZGlzYWJsZWQsDQouYnRuLWxhcmdlLmRpc2FibGVkLA0KLmJ0bi1zbWFsbC5kaXNhYmxlZCwNCi5idG4tZmxhdC5kaXNhYmxlZCwNCi5idG46ZGlzYWJsZWQsDQouYnRuLWxhcmdlOmRpc2FibGVkLA0KLmJ0bi1zbWFsbDpkaXNhYmxlZCwNCi5idG4tZmxvYXRpbmc6ZGlzYWJsZWQsDQouYnRuLWxhcmdlOmRpc2FibGVkLA0KLmJ0bi1zbWFsbDpkaXNhYmxlZCwNCi5idG4tZmxhdDpkaXNhYmxlZCwNCi5idG5bZGlzYWJsZWRdLA0KW2Rpc2FibGVkXS5idG4tbGFyZ2UsDQpbZGlzYWJsZWRdLmJ0bi1zbWFsbCwNCi5idG4tZmxvYXRpbmdbZGlzYWJsZWRdLA0KLmJ0bi1sYXJnZVtkaXNhYmxlZF0sDQouYnRuLXNtYWxsW2Rpc2FibGVkXSwNCi5idG4tZmxhdFtkaXNhYmxlZF0gew0KICBwb2ludGVyLWV2ZW50czogbm9uZTsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0RGREZERiAhaW1wb3J0YW50Ow0KICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmU7DQogICAgICAgICAgYm94LXNoYWRvdzogbm9uZTsNCiAgY29sb3I6ICM5RjlGOUYgIWltcG9ydGFudDsNCiAgY3Vyc29yOiBkZWZhdWx0Ow0KfQ0KDQouYnRuLmRpc2FibGVkOmhvdmVyLCAuZGlzYWJsZWQuYnRuLWxhcmdlOmhvdmVyLCAuZGlzYWJsZWQuYnRuLXNtYWxsOmhvdmVyLA0KLmJ0bi1mbG9hdGluZy5kaXNhYmxlZDpob3ZlciwNCi5idG4tbGFyZ2UuZGlzYWJsZWQ6aG92ZXIsDQouYnRuLXNtYWxsLmRpc2FibGVkOmhvdmVyLA0KLmJ0bi1mbGF0LmRpc2FibGVkOmhvdmVyLA0KLmJ0bjpkaXNhYmxlZDpob3ZlciwNCi5idG4tbGFyZ2U6ZGlzYWJsZWQ6aG92ZXIsDQouYnRuLXNtYWxsOmRpc2FibGVkOmhvdmVyLA0KLmJ0bi1mbG9hdGluZzpkaXNhYmxlZDpob3ZlciwNCi5idG4tbGFyZ2U6ZGlzYWJsZWQ6aG92ZXIsDQouYnRuLXNtYWxsOmRpc2FibGVkOmhvdmVyLA0KLmJ0bi1mbGF0OmRpc2FibGVkOmhvdmVyLA0KLmJ0bltkaXNhYmxlZF06aG92ZXIsDQpbZGlzYWJsZWRdLmJ0bi1sYXJnZTpob3ZlciwNCltkaXNhYmxlZF0uYnRuLXNtYWxsOmhvdmVyLA0KLmJ0bi1mbG9hdGluZ1tkaXNhYmxlZF06aG92ZXIsDQouYnRuLWxhcmdlW2Rpc2FibGVkXTpob3ZlciwNCi5idG4tc21hbGxbZGlzYWJsZWRdOmhvdmVyLA0KLmJ0bi1mbGF0W2Rpc2FibGVkXTpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6ICNERkRGREYgIWltcG9ydGFudDsNCiAgY29sb3I6ICM5RjlGOUYgIWltcG9ydGFudDsNCn0NCg0KLmJ0biwgLmJ0bi1sYXJnZSwgLmJ0bi1zbWFsbCwNCi5idG4tZmxvYXRpbmcsDQouYnRuLWxhcmdlLA0KLmJ0bi1zbWFsbCwNCi5idG4tZmxhdCB7DQogIGZvbnQtc2l6ZTogMTRweDsNCiAgb3V0bGluZTogMDsNCn0NCg0KLmJ0biBpLCAuYnRuLWxhcmdlIGksIC5idG4tc21hbGwgaSwNCi5idG4tZmxvYXRpbmcgaSwNCi5idG4tbGFyZ2UgaSwNCi5idG4tc21hbGwgaSwNCi5idG4tZmxhdCBpIHsNCiAgZm9udC1zaXplOiAxLjNyZW07DQogIGxpbmUtaGVpZ2h0OiBpbmhlcml0Ow0KfQ0KDQouYnRuOmZvY3VzLCAuYnRuLWxhcmdlOmZvY3VzLCAuYnRuLXNtYWxsOmZvY3VzLA0KLmJ0bi1mbG9hdGluZzpmb2N1cyB7DQogIGJhY2tncm91bmQtY29sb3I6ICMxZDdkNzQ7DQp9DQoNCi5idG4sIC5idG4tbGFyZ2UsIC5idG4tc21hbGwgew0KICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQogIGNvbG9yOiAjZmZmOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGxldHRlci1zcGFjaW5nOiAuNXB4Ow0KICAtd2Via2l0LXRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjJzIGVhc2Utb3V0Ow0KICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4ycyBlYXNlLW91dDsNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KDQouYnRuOmhvdmVyLCAuYnRuLWxhcmdlOmhvdmVyLCAuYnRuLXNtYWxsOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzJiYmJhZDsNCn0NCg0KLmJ0bi1mbG9hdGluZyB7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgY29sb3I6ICNmZmY7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgei1pbmRleDogMTsNCiAgd2lkdGg6IDQwcHg7DQogIGhlaWdodDogNDBweDsNCiAgbGluZS1oZWlnaHQ6IDQwcHg7DQogIHBhZGRpbmc6IDA7DQogIGJhY2tncm91bmQtY29sb3I6ICMyNmE2OWE7DQogIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zczsNCiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3M7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCn0NCg0KLmJ0bi1mbG9hdGluZzpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6ICMyNmE2OWE7DQp9DQoNCi5idG4tZmxvYXRpbmc6YmVmb3JlIHsNCiAgYm9yZGVyLXJhZGl1czogMDsNCn0NCg0KLmJ0bi1mbG9hdGluZy5idG4tbGFyZ2Ugew0KICB3aWR0aDogNTZweDsNCiAgaGVpZ2h0OiA1NnB4Ow0KICBwYWRkaW5nOiAwOw0KfQ0KDQouYnRuLWZsb2F0aW5nLmJ0bi1sYXJnZS5oYWxmd2F5LWZhYiB7DQogIGJvdHRvbTogLTI4cHg7DQp9DQoNCi5idG4tZmxvYXRpbmcuYnRuLWxhcmdlIGkgew0KICBsaW5lLWhlaWdodDogNTZweDsNCn0NCg0KLmJ0bi1mbG9hdGluZy5idG4tc21hbGwgew0KICB3aWR0aDogMzIuNHB4Ow0KICBoZWlnaHQ6IDMyLjRweDsNCn0NCg0KLmJ0bi1mbG9hdGluZy5idG4tc21hbGwuaGFsZndheS1mYWIgew0KICBib3R0b206IC0xNi4ycHg7DQp9DQoNCi5idG4tZmxvYXRpbmcuYnRuLXNtYWxsIGkgew0KICBsaW5lLWhlaWdodDogMzIuNHB4Ow0KfQ0KDQouYnRuLWZsb2F0aW5nLmhhbGZ3YXktZmFiIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICByaWdodDogMjRweDsNCiAgYm90dG9tOiAtMjBweDsNCn0NCg0KLmJ0bi1mbG9hdGluZy5oYWxmd2F5LWZhYi5sZWZ0IHsNCiAgcmlnaHQ6IGF1dG87DQogIGxlZnQ6IDI0cHg7DQp9DQoNCi5idG4tZmxvYXRpbmcgaSB7DQogIHdpZHRoOiBpbmhlcml0Ow0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgY29sb3I6ICNmZmY7DQogIGZvbnQtc2l6ZTogMS42cmVtOw0KICBsaW5lLWhlaWdodDogNDBweDsNCn0NCg0KYnV0dG9uLmJ0bi1mbG9hdGluZyB7DQogIGJvcmRlcjogbm9uZTsNCn0NCg0KLmZpeGVkLWFjdGlvbi1idG4gew0KICBwb3NpdGlvbjogZml4ZWQ7DQogIHJpZ2h0OiAyM3B4Ow0KICBib3R0b206IDIzcHg7DQogIHBhZGRpbmctdG9wOiAxNXB4Ow0KICBtYXJnaW4tYm90dG9tOiAwOw0KICB6LWluZGV4OiA5OTc7DQp9DQoNCi5maXhlZC1hY3Rpb24tYnRuLmFjdGl2ZSB1bCB7DQogIHZpc2liaWxpdHk6IHZpc2libGU7DQp9DQoNCi5maXhlZC1hY3Rpb24tYnRuLmRpcmVjdGlvbi1sZWZ0LCAuZml4ZWQtYWN0aW9uLWJ0bi5kaXJlY3Rpb24tcmlnaHQgew0KICBwYWRkaW5nOiAwIDAgMCAxNXB4Ow0KfQ0KDQouZml4ZWQtYWN0aW9uLWJ0bi5kaXJlY3Rpb24tbGVmdCB1bCwgLmZpeGVkLWFjdGlvbi1idG4uZGlyZWN0aW9uLXJpZ2h0IHVsIHsNCiAgdGV4dC1hbGlnbjogcmlnaHQ7DQogIHJpZ2h0OiA2NHB4Ow0KICB0b3A6IDUwJTsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOw0KICBoZWlnaHQ6IDEwMCU7DQogIGxlZnQ6IGF1dG87DQogIC8qd2lkdGggMTAwJSBvbmx5IGdvZXMgdG8gd2lkdGggb2YgYnV0dG9uIGNvbnRhaW5lciAqLw0KICB3aWR0aDogNTAwcHg7DQp9DQoNCi5maXhlZC1hY3Rpb24tYnRuLmRpcmVjdGlvbi1sZWZ0IHVsIGxpLCAuZml4ZWQtYWN0aW9uLWJ0bi5kaXJlY3Rpb24tcmlnaHQgdWwgbGkgew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIG1hcmdpbjogNy41cHggMTVweCAwIDA7DQp9DQoNCi5maXhlZC1hY3Rpb24tYnRuLmRpcmVjdGlvbi1yaWdodCB7DQogIHBhZGRpbmc6IDAgMTVweCAwIDA7DQp9DQoNCi5maXhlZC1hY3Rpb24tYnRuLmRpcmVjdGlvbi1yaWdodCB1bCB7DQogIHRleHQtYWxpZ246IGxlZnQ7DQogIGRpcmVjdGlvbjogcnRsOw0KICBsZWZ0OiA2NHB4Ow0KICByaWdodDogYXV0bzsNCn0NCg0KLmZpeGVkLWFjdGlvbi1idG4uZGlyZWN0aW9uLXJpZ2h0IHVsIGxpIHsNCiAgbWFyZ2luOiA3LjVweCAwIDAgMTVweDsNCn0NCg0KLmZpeGVkLWFjdGlvbi1idG4uZGlyZWN0aW9uLWJvdHRvbSB7DQogIHBhZGRpbmc6IDAgMCAxNXB4IDA7DQp9DQoNCi5maXhlZC1hY3Rpb24tYnRuLmRpcmVjdGlvbi1ib3R0b20gdWwgew0KICB0b3A6IDY0cHg7DQogIGJvdHRvbTogYXV0bzsNCiAgZGlzcGxheTogLXdlYmtpdC1ib3g7DQogIGRpc3BsYXk6IC13ZWJraXQtZmxleDsNCiAgZGlzcGxheTogLW1zLWZsZXhib3g7DQogIGRpc3BsYXk6IGZsZXg7DQogIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7DQogIC13ZWJraXQtYm94LWRpcmVjdGlvbjogcmV2ZXJzZTsNCiAgLXdlYmtpdC1mbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7DQogICAgICAtbXMtZmxleC1kaXJlY3Rpb246IGNvbHVtbi1yZXZlcnNlOw0KICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW4tcmV2ZXJzZTsNCn0NCg0KLmZpeGVkLWFjdGlvbi1idG4uZGlyZWN0aW9uLWJvdHRvbSB1bCBsaSB7DQogIG1hcmdpbjogMTVweCAwIDAgMDsNCn0NCg0KLmZpeGVkLWFjdGlvbi1idG4udG9vbGJhciB7DQogIHBhZGRpbmc6IDA7DQogIGhlaWdodDogNTZweDsNCn0NCg0KLmZpeGVkLWFjdGlvbi1idG4udG9vbGJhci5hY3RpdmUgPiBhIGkgew0KICBvcGFjaXR5OiAwOw0KfQ0KDQouZml4ZWQtYWN0aW9uLWJ0bi50b29sYmFyIHVsIHsNCiAgZGlzcGxheTogLXdlYmtpdC1ib3g7DQogIGRpc3BsYXk6IC13ZWJraXQtZmxleDsNCiAgZGlzcGxheTogLW1zLWZsZXhib3g7DQogIGRpc3BsYXk6IGZsZXg7DQogIHRvcDogMDsNCiAgYm90dG9tOiAwOw0KICB6LWluZGV4OiAxOw0KfQ0KDQouZml4ZWQtYWN0aW9uLWJ0bi50b29sYmFyIHVsIGxpIHsNCiAgLXdlYmtpdC1ib3gtZmxleDogMTsNCiAgLXdlYmtpdC1mbGV4OiAxOw0KICAgICAgLW1zLWZsZXg6IDE7DQogICAgICAgICAgZmxleDogMTsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBtYXJnaW46IDA7DQogIGhlaWdodDogMTAwJTsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBub25lOw0KICB0cmFuc2l0aW9uOiBub25lOw0KfQ0KDQouZml4ZWQtYWN0aW9uLWJ0bi50b29sYmFyIHVsIGxpIGEgew0KICBkaXNwbGF5OiBibG9jazsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOw0KICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7DQogIGNvbG9yOiAjZmZmOw0KICBsaW5lLWhlaWdodDogNTZweDsNCiAgei1pbmRleDogMTsNCn0NCg0KLmZpeGVkLWFjdGlvbi1idG4udG9vbGJhciB1bCBsaSBhIGkgew0KICBsaW5lLWhlaWdodDogaW5oZXJpdDsNCn0NCg0KLmZpeGVkLWFjdGlvbi1idG4gdWwgew0KICBsZWZ0OiAwOw0KICByaWdodDogMDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGJvdHRvbTogNjRweDsNCiAgbWFyZ2luOiAwOw0KICB2aXNpYmlsaXR5OiBoaWRkZW47DQp9DQoNCi5maXhlZC1hY3Rpb24tYnRuIHVsIGxpIHsNCiAgbWFyZ2luLWJvdHRvbTogMTVweDsNCn0NCg0KLmZpeGVkLWFjdGlvbi1idG4gdWwgYS5idG4tZmxvYXRpbmcgew0KICBvcGFjaXR5OiAwOw0KfQ0KDQouZml4ZWQtYWN0aW9uLWJ0biAuZmFiLWJhY2tkcm9wIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0b3A6IDA7DQogIGxlZnQ6IDA7DQogIHotaW5kZXg6IC0xOw0KICB3aWR0aDogNDBweDsNCiAgaGVpZ2h0OiA0MHB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOw0KICBib3JkZXItcmFkaXVzOiA1MCU7DQogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwKTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApOw0KfQ0KDQouYnRuLWZsYXQgew0KICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmU7DQogICAgICAgICAgYm94LXNoYWRvdzogbm9uZTsNCiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQogIGNvbG9yOiAjMzQzNDM0Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuMnM7DQogIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjJzOw0KfQ0KDQouYnRuLWZsYXQ6Zm9jdXMsIC5idG4tZmxhdDpob3ZlciB7DQogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZTsNCiAgICAgICAgICBib3gtc2hhZG93OiBub25lOw0KfQ0KDQouYnRuLWZsYXQ6Zm9jdXMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7DQp9DQoNCi5idG4tZmxhdC5kaXNhYmxlZCwgLmJ0bi1mbGF0LmJ0bi1mbGF0W2Rpc2FibGVkXSB7DQogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7DQogIGNvbG9yOiAjYjNiMmIyICFpbXBvcnRhbnQ7DQogIGN1cnNvcjogZGVmYXVsdDsNCn0NCg0KLmJ0bi1sYXJnZSB7DQogIGhlaWdodDogNTRweDsNCiAgbGluZS1oZWlnaHQ6IDU0cHg7DQogIGZvbnQtc2l6ZTogMTVweDsNCiAgcGFkZGluZzogMCAyOHB4Ow0KfQ0KDQouYnRuLWxhcmdlIGkgew0KICBmb250LXNpemU6IDEuNnJlbTsNCn0NCg0KLmJ0bi1zbWFsbCB7DQogIGhlaWdodDogMzIuNHB4Ow0KICBsaW5lLWhlaWdodDogMzIuNHB4Ow0KICBmb250LXNpemU6IDEzcHg7DQp9DQoNCi5idG4tc21hbGwgaSB7DQogIGZvbnQtc2l6ZTogMS4ycmVtOw0KfQ0KDQouYnRuLWJsb2NrIHsNCiAgZGlzcGxheTogYmxvY2s7DQp9DQoNCi5kcm9wZG93bi1jb250ZW50IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgbWFyZ2luOiAwOw0KICBkaXNwbGF5OiBub25lOw0KICBtaW4td2lkdGg6IDEwMHB4Ow0KICBvdmVyZmxvdy15OiBhdXRvOw0KICBvcGFjaXR5OiAwOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGxlZnQ6IDA7DQogIHRvcDogMDsNCiAgei1pbmRleDogOTk5OTsNCiAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAwIDA7DQogICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMCAwOw0KfQ0KDQouZHJvcGRvd24tY29udGVudDpmb2N1cyB7DQogIG91dGxpbmU6IDA7DQp9DQoNCi5kcm9wZG93bi1jb250ZW50IGxpIHsNCiAgY2xlYXI6IGJvdGg7DQogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODcpOw0KICBjdXJzb3I6IHBvaW50ZXI7DQogIG1pbi1oZWlnaHQ6IDUwcHg7DQogIGxpbmUtaGVpZ2h0OiAxLjVyZW07DQogIHdpZHRoOiAxMDAlOw0KICB0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KDQouZHJvcGRvd24tY29udGVudCBsaTpob3ZlciwgLmRyb3Bkb3duLWNvbnRlbnQgbGkuYWN0aXZlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsNCn0NCg0KLmRyb3Bkb3duLWNvbnRlbnQgbGk6Zm9jdXMgew0KICBvdXRsaW5lOiBub25lOw0KfQ0KDQouZHJvcGRvd24tY29udGVudCBsaS5kaXZpZGVyIHsNCiAgbWluLWhlaWdodDogMDsNCiAgaGVpZ2h0OiAxcHg7DQp9DQoNCi5kcm9wZG93bi1jb250ZW50IGxpID4gYSwgLmRyb3Bkb3duLWNvbnRlbnQgbGkgPiBzcGFuIHsNCiAgZm9udC1zaXplOiAxNnB4Ow0KICBjb2xvcjogIzI2YTY5YTsNCiAgZGlzcGxheTogYmxvY2s7DQogIGxpbmUtaGVpZ2h0OiAyMnB4Ow0KICBwYWRkaW5nOiAxNHB4IDE2cHg7DQp9DQoNCi5kcm9wZG93bi1jb250ZW50IGxpID4gc3BhbiA+IGxhYmVsIHsNCiAgdG9wOiAxcHg7DQogIGxlZnQ6IDA7DQogIGhlaWdodDogMThweDsNCn0NCg0KLmRyb3Bkb3duLWNvbnRlbnQgbGkgPiBhID4gaSB7DQogIGhlaWdodDogaW5oZXJpdDsNCiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7DQogIGZsb2F0OiBsZWZ0Ow0KICBtYXJnaW46IDAgMjRweCAwIDA7DQogIHdpZHRoOiAyNHB4Ow0KfQ0KDQpib2R5LmtleWJvYXJkLWZvY3VzZWQgLmRyb3Bkb3duLWNvbnRlbnQgbGk6Zm9jdXMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGFkYWRhOw0KfQ0KDQouaW5wdXQtZmllbGQuY29sIC5kcm9wZG93bi1jb250ZW50IFt0eXBlPSJjaGVja2JveCJdICsgbGFiZWwgew0KICB0b3A6IDFweDsNCiAgbGVmdDogMDsNCiAgaGVpZ2h0OiAxOHB4Ow0KICAtd2Via2l0LXRyYW5zZm9ybTogbm9uZTsNCiAgICAgICAgICB0cmFuc2Zvcm06IG5vbmU7DQp9DQoNCi5kcm9wZG93bi10cmlnZ2VyIHsNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KDQovKiENCiAqIFdhdmVzIHYwLjYuMA0KICogaHR0cDovL2ZpYW4ubXkuaWQvV2F2ZXMNCiAqDQogKiBDb3B5cmlnaHQgMjAxNCBBbGZpYW5hIEUuIFNpYnVlYSBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UNCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9maWFucy9XYXZlcy9ibG9iL21hc3Rlci9MSUNFTlNFDQogKi8NCi53YXZlcy1lZmZlY3Qgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOw0KICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50Ow0KICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KICB6LWluZGV4OiAxOw0KICAtd2Via2l0LXRyYW5zaXRpb246IC4zcyBlYXNlLW91dDsNCiAgdHJhbnNpdGlvbjogLjNzIGVhc2Utb3V0Ow0KfQ0KDQoud2F2ZXMtZWZmZWN0IC53YXZlcy1yaXBwbGUgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgd2lkdGg6IDIwcHg7DQogIGhlaWdodDogMjBweDsNCiAgbWFyZ2luLXRvcDogLTEwcHg7DQogIG1hcmdpbi1sZWZ0OiAtMTBweDsNCiAgb3BhY2l0eTogMDsNCiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjIpOw0KICAtd2Via2l0LXRyYW5zaXRpb246IGFsbCAwLjdzIGVhc2Utb3V0Ow0KICB0cmFuc2l0aW9uOiBhbGwgMC43cyBlYXNlLW91dDsNCiAgLXdlYmtpdC10cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5LCAtd2Via2l0LXRyYW5zZm9ybTsNCiAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogb3BhY2l0eSwgLXdlYmtpdC10cmFuc2Zvcm07DQogIHRyYW5zaXRpb24tcHJvcGVydHk6IHRyYW5zZm9ybSwgb3BhY2l0eTsNCiAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogdHJhbnNmb3JtLCBvcGFjaXR5LCAtd2Via2l0LXRyYW5zZm9ybTsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDApOw0KICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7DQogIHBvaW50ZXItZXZlbnRzOiBub25lOw0KfQ0KDQoud2F2ZXMtZWZmZWN0LndhdmVzLWxpZ2h0IC53YXZlcy1yaXBwbGUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNDUpOw0KfQ0KDQoud2F2ZXMtZWZmZWN0LndhdmVzLXJlZCAud2F2ZXMtcmlwcGxlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDQsIDY3LCA1NCwgMC43KTsNCn0NCg0KLndhdmVzLWVmZmVjdC53YXZlcy15ZWxsb3cgLndhdmVzLXJpcHBsZSB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyMzUsIDU5LCAwLjcpOw0KfQ0KDQoud2F2ZXMtZWZmZWN0LndhdmVzLW9yYW5nZSAud2F2ZXMtcmlwcGxlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDE1MiwgMCwgMC43KTsNCn0NCg0KLndhdmVzLWVmZmVjdC53YXZlcy1wdXJwbGUgLndhdmVzLXJpcHBsZSB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTU2LCAzOSwgMTc2LCAwLjcpOw0KfQ0KDQoud2F2ZXMtZWZmZWN0LndhdmVzLWdyZWVuIC53YXZlcy1yaXBwbGUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDc2LCAxNzUsIDgwLCAwLjcpOw0KfQ0KDQoud2F2ZXMtZWZmZWN0LndhdmVzLXRlYWwgLndhdmVzLXJpcHBsZSB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMTUwLCAxMzYsIDAuNyk7DQp9DQoNCi53YXZlcy1lZmZlY3QgaW5wdXRbdHlwZT0iYnV0dG9uIl0sIC53YXZlcy1lZmZlY3QgaW5wdXRbdHlwZT0icmVzZXQiXSwgLndhdmVzLWVmZmVjdCBpbnB1dFt0eXBlPSJzdWJtaXQiXSB7DQogIGJvcmRlcjogMDsNCiAgZm9udC1zdHlsZTogbm9ybWFsOw0KICBmb250LXNpemU6IGluaGVyaXQ7DQogIHRleHQtdHJhbnNmb3JtOiBpbmhlcml0Ow0KICBiYWNrZ3JvdW5kOiBub25lOw0KfQ0KDQoud2F2ZXMtZWZmZWN0IGltZyB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgei1pbmRleDogLTE7DQp9DQoNCi53YXZlcy1ub3RyYW5zaXRpb24gew0KICAtd2Via2l0LXRyYW5zaXRpb246IG5vbmUgIWltcG9ydGFudDsNCiAgdHJhbnNpdGlvbjogbm9uZSAhaW1wb3J0YW50Ow0KfQ0KDQoud2F2ZXMtY2lyY2xlIHsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAtd2Via2l0LW1hc2staW1hZ2U6IC13ZWJraXQtcmFkaWFsLWdyYWRpZW50KGNpcmNsZSwgd2hpdGUgMTAwJSwgYmxhY2sgMTAwJSk7DQp9DQoNCi53YXZlcy1pbnB1dC13cmFwcGVyIHsNCiAgYm9yZGVyLXJhZGl1czogMC4yZW07DQogIHZlcnRpY2FsLWFsaWduOiBib3R0b207DQp9DQoNCi53YXZlcy1pbnB1dC13cmFwcGVyIC53YXZlcy1idXR0b24taW5wdXQgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgei1pbmRleDogMTsNCn0NCg0KLndhdmVzLWNpcmNsZSB7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgd2lkdGg6IDIuNWVtOw0KICBoZWlnaHQ6IDIuNWVtOw0KICBsaW5lLWhlaWdodDogMi41ZW07DQogIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgLXdlYmtpdC1tYXNrLWltYWdlOiBub25lOw0KfQ0KDQoud2F2ZXMtYmxvY2sgew0KICBkaXNwbGF5OiBibG9jazsNCn0NCg0KLyogRmlyZWZveCBCdWc6IGxpbmsgbm90IHRyaWdnZXJlZCAqLw0KLndhdmVzLWVmZmVjdCAud2F2ZXMtcmlwcGxlIHsNCiAgei1pbmRleDogLTE7DQp9DQoNCi5tb2RhbCB7DQogIGRpc3BsYXk6IG5vbmU7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgbGVmdDogMDsNCiAgcmlnaHQ6IDA7DQogIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7DQogIHBhZGRpbmc6IDA7DQogIG1heC1oZWlnaHQ6IDcwJTsNCiAgd2lkdGg6IDU1JTsNCiAgbWFyZ2luOiBhdXRvOw0KICBvdmVyZmxvdy15OiBhdXRvOw0KICBib3JkZXItcmFkaXVzOiAycHg7DQogIHdpbGwtY2hhbmdlOiB0b3AsIG9wYWNpdHk7DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogOTkycHgpIHsNCiAgLm1vZGFsIHsNCiAgICB3aWR0aDogODAlOw0KICB9DQp9DQoNCi5tb2RhbCBoMSwgLm1vZGFsIGgyLCAubW9kYWwgaDMsIC5tb2RhbCBoNCB7DQogIG1hcmdpbi10b3A6IDA7DQp9DQoNCi5tb2RhbCAubW9kYWwtY29udGVudCB7DQogIHBhZGRpbmc6IDI0cHg7DQp9DQoNCi5tb2RhbCAubW9kYWwtY2xvc2Ugew0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoNCi5tb2RhbCAubW9kYWwtZm9vdGVyIHsNCiAgYm9yZGVyLXJhZGl1czogMCAwIDJweCAycHg7DQogIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7DQogIHBhZGRpbmc6IDRweCA2cHg7DQogIGhlaWdodDogNTZweDsNCiAgd2lkdGg6IDEwMCU7DQogIHRleHQtYWxpZ246IHJpZ2h0Ow0KfQ0KDQoubW9kYWwgLm1vZGFsLWZvb3RlciAuYnRuLCAubW9kYWwgLm1vZGFsLWZvb3RlciAuYnRuLWxhcmdlLCAubW9kYWwgLm1vZGFsLWZvb3RlciAuYnRuLXNtYWxsLCAubW9kYWwgLm1vZGFsLWZvb3RlciAuYnRuLWZsYXQgew0KICBtYXJnaW46IDZweCAwOw0KfQ0KDQoubW9kYWwtb3ZlcmxheSB7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgei1pbmRleDogOTk5Ow0KICB0b3A6IC0yNSU7DQogIGxlZnQ6IDA7DQogIGJvdHRvbTogMDsNCiAgcmlnaHQ6IDA7DQogIGhlaWdodDogMTI1JTsNCiAgd2lkdGg6IDEwMCU7DQogIGJhY2tncm91bmQ6ICMwMDA7DQogIGRpc3BsYXk6IG5vbmU7DQogIHdpbGwtY2hhbmdlOiBvcGFjaXR5Ow0KfQ0KDQoubW9kYWwubW9kYWwtZml4ZWQtZm9vdGVyIHsNCiAgcGFkZGluZzogMDsNCiAgaGVpZ2h0OiA3MCU7DQp9DQoNCi5tb2RhbC5tb2RhbC1maXhlZC1mb290ZXIgLm1vZGFsLWNvbnRlbnQgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGhlaWdodDogY2FsYygxMDAlIC0gNTZweCk7DQogIG1heC1oZWlnaHQ6IDEwMCU7DQogIHdpZHRoOiAxMDAlOw0KICBvdmVyZmxvdy15OiBhdXRvOw0KfQ0KDQoubW9kYWwubW9kYWwtZml4ZWQtZm9vdGVyIC5tb2RhbC1mb290ZXIgew0KICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGJvdHRvbTogMDsNCn0NCg0KLm1vZGFsLmJvdHRvbS1zaGVldCB7DQogIHRvcDogYXV0bzsNCiAgYm90dG9tOiAtMTAwJTsNCiAgbWFyZ2luOiAwOw0KICB3aWR0aDogMTAwJTsNCiAgbWF4LWhlaWdodDogNDUlOw0KICBib3JkZXItcmFkaXVzOiAwOw0KICB3aWxsLWNoYW5nZTogYm90dG9tLCBvcGFjaXR5Ow0KfQ0KDQouY29sbGFwc2libGUgew0KICBib3JkZXItdG9wOiAxcHggc29saWQgI2RkZDsNCiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2RkZDsNCiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZGRkOw0KICBtYXJnaW46IDAuNXJlbSAwIDFyZW0gMDsNCn0NCg0KLmNvbGxhcHNpYmxlLWhlYWRlciB7DQogIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogIGRpc3BsYXk6IC1tcy1mbGV4Ym94Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQogIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7DQogIGxpbmUtaGVpZ2h0OiAxLjU7DQogIHBhZGRpbmc6IDFyZW07DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkOw0KfQ0KDQouY29sbGFwc2libGUtaGVhZGVyOmZvY3VzIHsNCiAgb3V0bGluZTogMDsNCn0NCg0KLmNvbGxhcHNpYmxlLWhlYWRlciBpIHsNCiAgd2lkdGg6IDJyZW07DQogIGZvbnQtc2l6ZTogMS42cmVtOw0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgbWFyZ2luLXJpZ2h0OiAxcmVtOw0KfQ0KDQoua2V5Ym9hcmQtZm9jdXNlZCAuY29sbGFwc2libGUtaGVhZGVyOmZvY3VzIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsNCn0NCg0KLmNvbGxhcHNpYmxlLWJvZHkgew0KICBkaXNwbGF5OiBub25lOw0KICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsNCiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIHBhZGRpbmc6IDJyZW07DQp9DQoNCi5zaWRlbmF2IC5jb2xsYXBzaWJsZSwNCi5zaWRlbmF2LmZpeGVkIC5jb2xsYXBzaWJsZSB7DQogIGJvcmRlcjogbm9uZTsNCiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOw0KICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7DQp9DQoNCi5zaWRlbmF2IC5jb2xsYXBzaWJsZSBsaSwNCi5zaWRlbmF2LmZpeGVkIC5jb2xsYXBzaWJsZSBsaSB7DQogIHBhZGRpbmc6IDA7DQp9DQoNCi5zaWRlbmF2IC5jb2xsYXBzaWJsZS1oZWFkZXIsDQouc2lkZW5hdi5maXhlZCAuY29sbGFwc2libGUtaGVhZGVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQogIGJvcmRlcjogbm9uZTsNCiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7DQogIGhlaWdodDogaW5oZXJpdDsNCiAgcGFkZGluZzogMCAxNnB4Ow0KfQ0KDQouc2lkZW5hdiAuY29sbGFwc2libGUtaGVhZGVyOmhvdmVyLA0KLnNpZGVuYXYuZml4ZWQgLmNvbGxhcHNpYmxlLWhlYWRlcjpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wNSk7DQp9DQoNCi5zaWRlbmF2IC5jb2xsYXBzaWJsZS1oZWFkZXIgaSwNCi5zaWRlbmF2LmZpeGVkIC5jb2xsYXBzaWJsZS1oZWFkZXIgaSB7DQogIGxpbmUtaGVpZ2h0OiBpbmhlcml0Ow0KfQ0KDQouc2lkZW5hdiAuY29sbGFwc2libGUtYm9keSwNCi5zaWRlbmF2LmZpeGVkIC5jb2xsYXBzaWJsZS1ib2R5IHsNCiAgYm9yZGVyOiAwOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KfQ0KDQouc2lkZW5hdiAuY29sbGFwc2libGUtYm9keSBsaSBhLA0KLnNpZGVuYXYuZml4ZWQgLmNvbGxhcHNpYmxlLWJvZHkgbGkgYSB7DQogIHBhZGRpbmc6IDAgMjMuNXB4IDAgMzFweDsNCn0NCg0KLmNvbGxhcHNpYmxlLnBvcG91dCB7DQogIGJvcmRlcjogbm9uZTsNCiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOw0KICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7DQp9DQoNCi5jb2xsYXBzaWJsZS5wb3BvdXQgPiBsaSB7DQogIC13ZWJraXQtYm94LXNoYWRvdzogMCAycHggNXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE2KSwgMCAycHggMTBweCAwIHJnYmEoMCwgMCwgMCwgMC4xMik7DQogICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE2KSwgMCAycHggMTBweCAwIHJnYmEoMCwgMCwgMCwgMC4xMik7DQogIG1hcmdpbjogMCAyNHB4Ow0KICAtd2Via2l0LXRyYW5zaXRpb246IG1hcmdpbiAwLjM1cyBjdWJpYy1iZXppZXIoMC4yNSwgMC40NiwgMC40NSwgMC45NCk7DQogIHRyYW5zaXRpb246IG1hcmdpbiAwLjM1cyBjdWJpYy1iZXppZXIoMC4yNSwgMC40NiwgMC40NSwgMC45NCk7DQp9DQoNCi5jb2xsYXBzaWJsZS5wb3BvdXQgPiBsaS5hY3RpdmUgew0KICAtd2Via2l0LWJveC1zaGFkb3c6IDAgNXB4IDExcHggMCByZ2JhKDAsIDAsIDAsIDAuMTgpLCAwIDRweCAxNXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE1KTsNCiAgICAgICAgICBib3gtc2hhZG93OiAwIDVweCAxMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE4KSwgMCA0cHggMTVweCAwIHJnYmEoMCwgMCwgMCwgMC4xNSk7DQogIG1hcmdpbjogMTZweCAwOw0KfQ0KDQouY2hpcCB7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgaGVpZ2h0OiAzMnB4Ow0KICBmb250LXNpemU6IDEzcHg7DQogIGZvbnQtd2VpZ2h0OiA1MDA7DQogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNik7DQogIGxpbmUtaGVpZ2h0OiAzMnB4Ow0KICBwYWRkaW5nOiAwIDEycHg7DQogIGJvcmRlci1yYWRpdXM6IDE2cHg7DQogIGJhY2tncm91bmQtY29sb3I6ICNlNGU0ZTQ7DQogIG1hcmdpbi1ib3R0b206IDVweDsNCiAgbWFyZ2luLXJpZ2h0OiA1cHg7DQp9DQoNCi5jaGlwOmZvY3VzIHsNCiAgb3V0bGluZTogbm9uZTsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsNCiAgY29sb3I6ICNmZmY7DQp9DQoNCi5jaGlwID4gaW1nIHsNCiAgZmxvYXQ6IGxlZnQ7DQogIG1hcmdpbjogMCA4cHggMCAtMTJweDsNCiAgaGVpZ2h0OiAzMnB4Ow0KICB3aWR0aDogMzJweDsNCiAgYm9yZGVyLXJhZGl1czogNTAlOw0KfQ0KDQouY2hpcCAuY2xvc2Ugew0KICBjdXJzb3I6IHBvaW50ZXI7DQogIGZsb2F0OiByaWdodDsNCiAgZm9udC1zaXplOiAxNnB4Ow0KICBsaW5lLWhlaWdodDogMzJweDsNCiAgcGFkZGluZy1sZWZ0OiA4cHg7DQp9DQoNCi5jaGlwcyB7DQogIGJvcmRlcjogbm9uZTsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM5ZTllOWU7DQogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZTsNCiAgICAgICAgICBib3gtc2hhZG93OiBub25lOw0KICBtYXJnaW46IDAgMCA4cHggMDsNCiAgbWluLWhlaWdodDogNDVweDsNCiAgb3V0bGluZTogbm9uZTsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBhbGwgLjNzOw0KICB0cmFuc2l0aW9uOiBhbGwgLjNzOw0KfQ0KDQouY2hpcHMuZm9jdXMgew0KICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzI2YTY5YTsNCiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDFweCAwIDAgIzI2YTY5YTsNCiAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCAwIDAgIzI2YTY5YTsNCn0NCg0KLmNoaXBzOmhvdmVyIHsNCiAgY3Vyc29yOiB0ZXh0Ow0KfQ0KDQouY2hpcHMgLmlucHV0IHsNCiAgYmFja2dyb3VuZDogbm9uZTsNCiAgYm9yZGVyOiAwOw0KICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjYpOw0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIGZvbnQtc2l6ZTogMTZweDsNCiAgaGVpZ2h0OiAzcmVtOw0KICBsaW5lLWhlaWdodDogMzJweDsNCiAgb3V0bGluZTogMDsNCiAgbWFyZ2luOiAwOw0KICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7DQogIHdpZHRoOiAxMjBweCAhaW1wb3J0YW50Ow0KfQ0KDQouY2hpcHMgLmlucHV0OmZvY3VzIHsNCiAgYm9yZGVyOiAwICFpbXBvcnRhbnQ7DQogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsNCn0NCg0KLmNoaXBzIC5hdXRvY29tcGxldGUtY29udGVudCB7DQogIG1hcmdpbi10b3A6IDA7DQogIG1hcmdpbi1ib3R0b206IDA7DQp9DQoNCi5wcmVmaXggfiAuY2hpcHMgew0KICBtYXJnaW4tbGVmdDogM3JlbTsNCiAgd2lkdGg6IDkyJTsNCiAgd2lkdGg6IGNhbGMoMTAwJSAtIDNyZW0pOw0KfQ0KDQouY2hpcHM6ZW1wdHkgfiBsYWJlbCB7DQogIGZvbnQtc2l6ZTogMC44cmVtOw0KICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTQwJSk7DQogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xNDAlKTsNCn0NCg0KLm1hdGVyaWFsYm94ZWQgew0KICBkaXNwbGF5OiBibG9jazsNCiAgY3Vyc29yOiAtd2Via2l0LXpvb20taW47DQogIGN1cnNvcjogem9vbS1pbjsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgLjRzOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IC40czsNCiAgLXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47DQp9DQoNCi5tYXRlcmlhbGJveGVkOmhvdmVyOm5vdCguYWN0aXZlKSB7DQogIG9wYWNpdHk6IC44Ow0KfQ0KDQoubWF0ZXJpYWxib3hlZC5hY3RpdmUgew0KICBjdXJzb3I6IC13ZWJraXQtem9vbS1vdXQ7DQogIGN1cnNvcjogem9vbS1vdXQ7DQp9DQoNCiNtYXRlcmlhbGJveC1vdmVybGF5IHsNCiAgcG9zaXRpb246IGZpeGVkOw0KICB0b3A6IDA7DQogIHJpZ2h0OiAwOw0KICBib3R0b206IDA7DQogIGxlZnQ6IDA7DQogIGJhY2tncm91bmQtY29sb3I6ICMyOTI5Mjk7DQogIHotaW5kZXg6IDEwMDA7DQogIHdpbGwtY2hhbmdlOiBvcGFjaXR5Ow0KfQ0KDQoubWF0ZXJpYWxib3gtY2FwdGlvbiB7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgZGlzcGxheTogbm9uZTsNCiAgY29sb3I6ICNmZmY7DQogIGxpbmUtaGVpZ2h0OiA1MHB4Ow0KICBib3R0b206IDA7DQogIGxlZnQ6IDA7DQogIHdpZHRoOiAxMDAlOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIHBhZGRpbmc6IDAlIDE1JTsNCiAgaGVpZ2h0OiA1MHB4Ow0KICB6LWluZGV4OiAxMDAwOw0KICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsNCn0NCg0Kc2VsZWN0OmZvY3VzIHsNCiAgb3V0bGluZTogMXB4IHNvbGlkICNjOWYzZWY7DQp9DQoNCmJ1dHRvbjpmb2N1cyB7DQogIG91dGxpbmU6IG5vbmU7DQogIGJhY2tncm91bmQtY29sb3I6ICMyYWI3YTk7DQp9DQoNCmxhYmVsIHsNCiAgZm9udC1zaXplOiAwLjhyZW07DQogIGNvbG9yOiAjOWU5ZTllOw0KfQ0KDQovKiBUZXh0IElucHV0cyArIFRleHRhcmVhDQogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLw0KLyogU3R5bGUgUGxhY2Vob2xkZXJzICovDQo6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIgew0KICBjb2xvcjogI2QxZDFkMTsNCn0NCjo6LW1vei1wbGFjZWhvbGRlciB7DQogIGNvbG9yOiAjZDFkMWQxOw0KfQ0KOi1tcy1pbnB1dC1wbGFjZWhvbGRlciB7DQogIGNvbG9yOiAjZDFkMWQxOw0KfQ0KOjpwbGFjZWhvbGRlciB7DQogIGNvbG9yOiAjZDFkMWQxOw0KfQ0KDQovKiBUZXh0IGlucHV0cyAqLw0KaW5wdXQ6bm90KFt0eXBlXSksDQppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9cGFzc3dvcmRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCksDQppbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpLA0KaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpLA0KaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCksDQppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpLA0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWEgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgYm9yZGVyOiBub25lOw0KICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzllOWU5ZTsNCiAgYm9yZGVyLXJhZGl1czogMDsNCiAgb3V0bGluZTogbm9uZTsNCiAgaGVpZ2h0OiAzcmVtOw0KICB3aWR0aDogMTAwJTsNCiAgZm9udC1zaXplOiAxNnB4Ow0KICBtYXJnaW46IDAgMCA4cHggMDsNCiAgcGFkZGluZzogMDsNCiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOw0KICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7DQogIC13ZWJraXQtYm94LXNpemluZzogY29udGVudC1ib3g7DQogICAgICAgICAgYm94LXNpemluZzogY29udGVudC1ib3g7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogYm9yZGVyIC4zcywgLXdlYmtpdC1ib3gtc2hhZG93IC4zczsNCiAgdHJhbnNpdGlvbjogYm9yZGVyIC4zcywgLXdlYmtpdC1ib3gtc2hhZG93IC4zczsNCiAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAuM3MsIGJvcmRlciAuM3M7DQogIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjNzLCBib3JkZXIgLjNzLCAtd2Via2l0LWJveC1zaGFkb3cgLjNzOw0KfQ0KDQppbnB1dDpub3QoW3R5cGVdKTpkaXNhYmxlZCwgaW5wdXQ6bm90KFt0eXBlXSlbcmVhZG9ubHk9InJlYWRvbmx5Il0sDQppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCwNCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdLA0KaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkLA0KaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdLA0KaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkLA0KaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdLA0KaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCwNCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0sDQppbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCwNCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdLA0KaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQsDQppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSwNCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCwNCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSwNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCwNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSwNCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6ZGlzYWJsZWQsDQppbnB1dFt0eXBlPXRlbF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdLA0KaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCwNCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0sDQppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkLA0KaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSwNCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhOmRpc2FibGVkLA0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWFbcmVhZG9ubHk9InJlYWRvbmx5Il0gew0KICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQyKTsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCByZ2JhKDAsIDAsIDAsIDAuNDIpOw0KfQ0KDQppbnB1dDpub3QoW3R5cGVdKTpkaXNhYmxlZCArIGxhYmVsLA0KaW5wdXQ6bm90KFt0eXBlXSlbcmVhZG9ubHk9InJlYWRvbmx5Il0gKyBsYWJlbCwNCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsDQppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSArIGxhYmVsLA0KaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsDQppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0gKyBsYWJlbCwNCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCArIGxhYmVsLA0KaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsDQppbnB1dFt0eXBlPXVybF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsDQppbnB1dFt0eXBlPXVybF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsDQppbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCArIGxhYmVsLA0KaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0gKyBsYWJlbCwNCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsDQppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KVtyZWFkb25seT0icmVhZG9ubHkiXSArIGxhYmVsLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsDQppbnB1dFt0eXBlPWRhdGV0aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdClbcmVhZG9ubHk9InJlYWRvbmx5Il0gKyBsYWJlbCwNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpkaXNhYmxlZCArIGxhYmVsLA0KaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsDQppbnB1dFt0eXBlPXRlbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsDQppbnB1dFt0eXBlPXRlbF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsDQppbnB1dFt0eXBlPW51bWJlcl06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsDQppbnB1dFt0eXBlPW51bWJlcl06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsDQppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpOmRpc2FibGVkICsgbGFiZWwsDQppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpW3JlYWRvbmx5PSJyZWFkb25seSJdICsgbGFiZWwsDQp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYTpkaXNhYmxlZCArIGxhYmVsLA0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWFbcmVhZG9ubHk9InJlYWRvbmx5Il0gKyBsYWJlbCB7DQogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNDIpOw0KfQ0KDQppbnB1dDpub3QoW3R5cGVdKTpmb2N1czpub3QoW3JlYWRvbmx5XSksDQppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSksDQppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pLA0KaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSwNCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pLA0KaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pLA0KaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSwNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSksDQppbnB1dFt0eXBlPXRlbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSwNCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pLA0KaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSksDQp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYTpmb2N1czpub3QoW3JlYWRvbmx5XSkgew0KICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzI2YTY5YTsNCiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDFweCAwIDAgIzI2YTY5YTsNCiAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCAwIDAgIzI2YTY5YTsNCn0NCg0KaW5wdXQ6bm90KFt0eXBlXSk6Zm9jdXM6bm90KFtyZWFkb25seV0pICsgbGFiZWwsDQppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSkgKyBsYWJlbCwNCmlucHV0W3R5cGU9cGFzc3dvcmRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSkgKyBsYWJlbCwNCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSkgKyBsYWJlbCwNCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pICsgbGFiZWwsDQppbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSkgKyBsYWJlbCwNCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSArIGxhYmVsLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSArIGxhYmVsLA0KaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSArIGxhYmVsLA0KaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1czpub3QoW3JlYWRvbmx5XSkgKyBsYWJlbCwNCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXM6bm90KFtyZWFkb25seV0pICsgbGFiZWwsDQppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzOm5vdChbcmVhZG9ubHldKSArIGxhYmVsLA0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWE6Zm9jdXM6bm90KFtyZWFkb25seV0pICsgbGFiZWwgew0KICBjb2xvcjogIzI2YTY5YTsNCn0NCg0KaW5wdXQ6bm90KFt0eXBlXSk6Zm9jdXMudmFsaWQgfiBsYWJlbCwNCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkIH4gbGFiZWwsDQppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiBsYWJlbCwNCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IGxhYmVsLA0KaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IGxhYmVsLA0KaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiBsYWJlbCwNCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkIH4gbGFiZWwsDQppbnB1dFt0eXBlPWRhdGV0aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiBsYWJlbCwNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IGxhYmVsLA0KaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IGxhYmVsLA0KaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IGxhYmVsLA0KaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IGxhYmVsLA0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWE6Zm9jdXMudmFsaWQgfiBsYWJlbCB7DQogIGNvbG9yOiAjNENBRjUwOw0KfQ0KDQppbnB1dDpub3QoW3R5cGVdKTpmb2N1cy5pbnZhbGlkIH4gbGFiZWwsDQppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gbGFiZWwsDQppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IGxhYmVsLA0KaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgfiBsYWJlbCwNCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IGxhYmVsLA0KaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IGxhYmVsLA0KaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IGxhYmVsLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgfiBsYWJlbCwNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gbGFiZWwsDQppbnB1dFt0eXBlPXRlbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgfiBsYWJlbCwNCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IGxhYmVsLA0KaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gbGFiZWwsDQp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYTpmb2N1cy5pbnZhbGlkIH4gbGFiZWwgew0KICBjb2xvcjogI0Y0NDMzNjsNCn0NCg0KaW5wdXQ6bm90KFt0eXBlXSkudmFsaWRhdGUgKyBsYWJlbCwNCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkYXRlICsgbGFiZWwsDQppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWRhdGUgKyBsYWJlbCwNCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLA0KaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLA0KaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWRhdGUgKyBsYWJlbCwNCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkYXRlICsgbGFiZWwsDQppbnB1dFt0eXBlPWRhdGV0aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWRhdGUgKyBsYWJlbCwNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLA0KaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLA0KaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLA0KaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZGF0ZSArIGxhYmVsLA0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWEudmFsaWRhdGUgKyBsYWJlbCB7DQogIHdpZHRoOiAxMDAlOw0KfQ0KDQovKiBWYWxpZGF0aW9uIFNhc3MgUGxhY2Vob2xkZXJzICovDQppbnB1dC52YWxpZDpub3QoW3R5cGVdKSwgaW5wdXQudmFsaWQ6bm90KFt0eXBlXSk6Zm9jdXMsDQppbnB1dFt0eXBlPXRleHRdLnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9dGV4dF0udmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLA0KaW5wdXRbdHlwZT1wYXNzd29yZF0udmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpLA0KaW5wdXRbdHlwZT1wYXNzd29yZF0udmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLA0KaW5wdXRbdHlwZT1lbWFpbF0udmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpLA0KaW5wdXRbdHlwZT1lbWFpbF0udmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLA0KaW5wdXRbdHlwZT11cmxdLnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9dXJsXS52YWxpZDpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMsDQppbnB1dFt0eXBlPXRpbWVdLnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9dGltZV0udmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLA0KaW5wdXRbdHlwZT1kYXRlXS52YWxpZDpub3QoLmJyb3dzZXItZGVmYXVsdCksDQppbnB1dFt0eXBlPWRhdGVdLnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cywNCmlucHV0W3R5cGU9ZGF0ZXRpbWVdLnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9ZGF0ZXRpbWVdLnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cywNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdLnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdLnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cywNCmlucHV0W3R5cGU9dGVsXS52YWxpZDpub3QoLmJyb3dzZXItZGVmYXVsdCksDQppbnB1dFt0eXBlPXRlbF0udmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLA0KaW5wdXRbdHlwZT1udW1iZXJdLnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9bnVtYmVyXS52YWxpZDpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMsDQppbnB1dFt0eXBlPXNlYXJjaF0udmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpLA0KaW5wdXRbdHlwZT1zZWFyY2hdLnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cywNCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhLnZhbGlkLA0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWEudmFsaWQ6Zm9jdXMsIC5zZWxlY3Qtd3JhcHBlci52YWxpZCA+IGlucHV0LnNlbGVjdC1kcm9wZG93biB7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNENBRjUwOw0KICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMXB4IDAgMCAjNENBRjUwOw0KICAgICAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDAgMCAjNENBRjUwOw0KfQ0KDQppbnB1dC5pbnZhbGlkOm5vdChbdHlwZV0pLCBpbnB1dC5pbnZhbGlkOm5vdChbdHlwZV0pOmZvY3VzLA0KaW5wdXRbdHlwZT10ZXh0XS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9dGV4dF0uaW52YWxpZDpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMsDQppbnB1dFt0eXBlPXBhc3N3b3JkXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9cGFzc3dvcmRdLmludmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLA0KaW5wdXRbdHlwZT1lbWFpbF0uaW52YWxpZDpub3QoLmJyb3dzZXItZGVmYXVsdCksDQppbnB1dFt0eXBlPWVtYWlsXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cywNCmlucHV0W3R5cGU9dXJsXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9dXJsXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cywNCmlucHV0W3R5cGU9dGltZV0uaW52YWxpZDpub3QoLmJyb3dzZXItZGVmYXVsdCksDQppbnB1dFt0eXBlPXRpbWVdLmludmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLA0KaW5wdXRbdHlwZT1kYXRlXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9ZGF0ZV0uaW52YWxpZDpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMsDQppbnB1dFt0eXBlPWRhdGV0aW1lXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9ZGF0ZXRpbWVdLmludmFsaWQ6bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLA0KaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF0uaW52YWxpZDpub3QoLmJyb3dzZXItZGVmYXVsdCksDQppbnB1dFt0eXBlPWRhdGV0aW1lLWxvY2FsXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cywNCmlucHV0W3R5cGU9dGVsXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9dGVsXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cywNCmlucHV0W3R5cGU9bnVtYmVyXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9bnVtYmVyXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cywNCmlucHV0W3R5cGU9c2VhcmNoXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KSwNCmlucHV0W3R5cGU9c2VhcmNoXS5pbnZhbGlkOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cywNCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhLmludmFsaWQsDQp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYS5pbnZhbGlkOmZvY3VzLCAuc2VsZWN0LXdyYXBwZXIuaW52YWxpZCA+IGlucHV0LnNlbGVjdC1kcm9wZG93biwNCi5zZWxlY3Qtd3JhcHBlci5pbnZhbGlkID4gaW5wdXQuc2VsZWN0LWRyb3Bkb3duOmZvY3VzIHsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNGNDQzMzY7DQogIC13ZWJraXQtYm94LXNoYWRvdzogMCAxcHggMCAwICNGNDQzMzY7DQogICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggMCAwICNGNDQzMzY7DQp9DQoNCmlucHV0Om5vdChbdHlwZV0pLnZhbGlkIH4gLmhlbHBlci10ZXh0W2RhdGEtc3VjY2Vzc10sDQppbnB1dDpub3QoW3R5cGVdKTpmb2N1cy52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLXN1Y2Nlc3NdLA0KaW5wdXQ6bm90KFt0eXBlXSkuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0Om5vdChbdHlwZV0pOmZvY3VzLmludmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1lcnJvcl0sDQppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLXN1Y2Nlc3NdLA0KaW5wdXRbdHlwZT10ZXh0XTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1lcnJvcl0sDQppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gLmhlbHBlci10ZXh0W2RhdGEtZXJyb3JdLA0KaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkIH4gLmhlbHBlci10ZXh0W2RhdGEtc3VjY2Vzc10sDQppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9cGFzc3dvcmRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkIH4gLmhlbHBlci10ZXh0W2RhdGEtZXJyb3JdLA0KaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1lcnJvcl0sDQppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLXN1Y2Nlc3NdLA0KaW5wdXRbdHlwZT1lbWFpbF06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1lcnJvcl0sDQppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkIH4gLmhlbHBlci10ZXh0W2RhdGEtc3VjY2Vzc10sDQppbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLXN1Y2Nlc3NdLA0KaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1lcnJvcl0sDQppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLXN1Y2Nlc3NdLA0KaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1lcnJvcl0sDQppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gLmhlbHBlci10ZXh0W2RhdGEtZXJyb3JdLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkIH4gLmhlbHBlci10ZXh0W2RhdGEtc3VjY2Vzc10sDQppbnB1dFt0eXBlPWRhdGV0aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkIH4gLmhlbHBlci10ZXh0W2RhdGEtZXJyb3JdLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1lcnJvcl0sDQppbnB1dFt0eXBlPWRhdGV0aW1lLWxvY2FsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLXN1Y2Nlc3NdLA0KaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpLmludmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1lcnJvcl0sDQppbnB1dFt0eXBlPWRhdGV0aW1lLWxvY2FsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhLnZhbGlkIH4gLmhlbHBlci10ZXh0W2RhdGEtc3VjY2Vzc10sDQp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYTpmb2N1cy52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLXN1Y2Nlc3NdLA0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWEuaW52YWxpZCB+IC5oZWxwZXItdGV4dFtkYXRhLWVycm9yXSwNCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhOmZvY3VzLmludmFsaWQgfiAuaGVscGVyLXRleHRbZGF0YS1lcnJvcl0sIC5zZWxlY3Qtd3JhcHBlci52YWxpZCAuaGVscGVyLXRleHRbZGF0YS1zdWNjZXNzXSwNCi5zZWxlY3Qtd3JhcHBlci5pbnZhbGlkIH4gLmhlbHBlci10ZXh0W2RhdGEtZXJyb3JdIHsNCiAgY29sb3I6IHRyYW5zcGFyZW50Ow0KICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOw0KICBwb2ludGVyLWV2ZW50czogbm9uZTsNCn0NCg0KaW5wdXQ6bm90KFt0eXBlXSkudmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dDpub3QoW3R5cGVdKTpmb2N1cy52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0W3R5cGU9dGV4dF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT10ZXh0XTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPXBhc3N3b3JkXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPXVybF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1kYXRldGltZS1sb2NhbF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMudmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPW51bWJlcl06bm90KC5icm93c2VyLWRlZmF1bHQpLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdCkudmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPXNlYXJjaF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWEudmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQp0ZXh0YXJlYS5tYXRlcmlhbGl6ZS10ZXh0YXJlYTpmb2N1cy52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwgLnNlbGVjdC13cmFwcGVyLnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyIHsNCiAgY29udGVudDogYXR0cihkYXRhLXN1Y2Nlc3MpOw0KICBjb2xvcjogIzRDQUY1MDsNCn0NCg0KaW5wdXQ6bm90KFt0eXBlXSkuaW52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0Om5vdChbdHlwZV0pOmZvY3VzLmludmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT10ZXh0XTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0W3R5cGU9cGFzc3dvcmRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0W3R5cGU9ZW1haWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT11cmxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT10aW1lXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1kYXRlXTpub3QoLmJyb3dzZXItZGVmYXVsdCk6Zm9jdXMuaW52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0W3R5cGU9ZGF0ZXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpOmZvY3VzLmludmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsDQppbnB1dFt0eXBlPWRhdGV0aW1lLWxvY2FsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkuaW52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCmlucHV0W3R5cGU9ZGF0ZXRpbWUtbG9jYWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT10ZWxdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1udW1iZXJdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KS5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KaW5wdXRbdHlwZT1zZWFyY2hdOm5vdCguYnJvd3Nlci1kZWZhdWx0KTpmb2N1cy5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyLA0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWEuaW52YWxpZCB+IC5oZWxwZXItdGV4dDphZnRlciwNCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhOmZvY3VzLmludmFsaWQgfiAuaGVscGVyLXRleHQ6YWZ0ZXIsIC5zZWxlY3Qtd3JhcHBlci5pbnZhbGlkIH4gLmhlbHBlci10ZXh0OmFmdGVyIHsNCiAgY29udGVudDogYXR0cihkYXRhLWVycm9yKTsNCiAgY29sb3I6ICNGNDQzMzY7DQp9DQoNCmlucHV0Om5vdChbdHlwZV0pICsgbGFiZWw6YWZ0ZXIsDQppbnB1dFt0eXBlPXRleHRdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSArIGxhYmVsOmFmdGVyLA0KaW5wdXRbdHlwZT1wYXNzd29yZF06bm90KC5icm93c2VyLWRlZmF1bHQpICsgbGFiZWw6YWZ0ZXIsDQppbnB1dFt0eXBlPWVtYWlsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwNCmlucHV0W3R5cGU9dXJsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwNCmlucHV0W3R5cGU9dGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpICsgbGFiZWw6YWZ0ZXIsDQppbnB1dFt0eXBlPWRhdGVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSArIGxhYmVsOmFmdGVyLA0KaW5wdXRbdHlwZT1kYXRldGltZV06bm90KC5icm93c2VyLWRlZmF1bHQpICsgbGFiZWw6YWZ0ZXIsDQppbnB1dFt0eXBlPWRhdGV0aW1lLWxvY2FsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwNCmlucHV0W3R5cGU9dGVsXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwNCmlucHV0W3R5cGU9bnVtYmVyXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwNCmlucHV0W3R5cGU9c2VhcmNoXTpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbDphZnRlciwNCnRleHRhcmVhLm1hdGVyaWFsaXplLXRleHRhcmVhICsgbGFiZWw6YWZ0ZXIsIC5zZWxlY3Qtd3JhcHBlciArIGxhYmVsOmFmdGVyIHsNCiAgZGlzcGxheTogYmxvY2s7DQogIGNvbnRlbnQ6ICIiOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMTAwJTsNCiAgbGVmdDogMDsNCiAgb3BhY2l0eTogMDsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiAuMnMgb3BhY2l0eSBlYXNlLW91dCwgLjJzIGNvbG9yIGVhc2Utb3V0Ow0KICB0cmFuc2l0aW9uOiAuMnMgb3BhY2l0eSBlYXNlLW91dCwgLjJzIGNvbG9yIGVhc2Utb3V0Ow0KfQ0KDQouaW5wdXQtZmllbGQgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIG1hcmdpbi10b3A6IDFyZW07DQogIG1hcmdpbi1ib3R0b206IDFyZW07DQp9DQoNCi5pbnB1dC1maWVsZC5pbmxpbmUgew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogIG1hcmdpbi1sZWZ0OiA1cHg7DQp9DQoNCi5pbnB1dC1maWVsZC5pbmxpbmUgaW5wdXQsDQouaW5wdXQtZmllbGQuaW5saW5lIC5zZWxlY3QtZHJvcGRvd24gew0KICBtYXJnaW4tYm90dG9tOiAxcmVtOw0KfQ0KDQouaW5wdXQtZmllbGQuY29sIGxhYmVsIHsNCiAgbGVmdDogMC43NXJlbTsNCn0NCg0KLmlucHV0LWZpZWxkLmNvbCAucHJlZml4IH4gbGFiZWwsDQouaW5wdXQtZmllbGQuY29sIC5wcmVmaXggfiAudmFsaWRhdGUgfiBsYWJlbCB7DQogIHdpZHRoOiBjYWxjKDEwMCUgLSAzcmVtIC0gMS41cmVtKTsNCn0NCg0KLmlucHV0LWZpZWxkID4gbGFiZWwgew0KICBjb2xvcjogIzllOWU5ZTsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0b3A6IDA7DQogIGxlZnQ6IDA7DQogIGZvbnQtc2l6ZTogMXJlbTsNCiAgY3Vyc29yOiB0ZXh0Ow0KICAtd2Via2l0LXRyYW5zaXRpb246IGNvbG9yIC4ycyBlYXNlLW91dCwgLXdlYmtpdC10cmFuc2Zvcm0gLjJzIGVhc2Utb3V0Ow0KICB0cmFuc2l0aW9uOiBjb2xvciAuMnMgZWFzZS1vdXQsIC13ZWJraXQtdHJhbnNmb3JtIC4ycyBlYXNlLW91dDsNCiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIC4ycyBlYXNlLW91dCwgY29sb3IgLjJzIGVhc2Utb3V0Ow0KICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjJzIGVhc2Utb3V0LCBjb2xvciAuMnMgZWFzZS1vdXQsIC13ZWJraXQtdHJhbnNmb3JtIC4ycyBlYXNlLW91dDsNCiAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAwJSAxMDAlOw0KICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAlIDEwMCU7DQogIHRleHQtYWxpZ246IGluaXRpYWw7DQogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEycHgpOw0KICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMnB4KTsNCn0NCg0KLmlucHV0LWZpZWxkID4gbGFiZWw6bm90KC5sYWJlbC1pY29uKS5hY3RpdmUgew0KICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTRweCkgc2NhbGUoMC44KTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTE0cHgpIHNjYWxlKDAuOCk7DQogIC13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMCAwOw0KICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDsNCn0NCg0KLmlucHV0LWZpZWxkID4gaW5wdXRbdHlwZV06LXdlYmtpdC1hdXRvZmlsbDpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbCwNCi5pbnB1dC1maWVsZCA+IGlucHV0W3R5cGU9ZGF0ZV06bm90KC5icm93c2VyLWRlZmF1bHQpICsgbGFiZWwsDQouaW5wdXQtZmllbGQgPiBpbnB1dFt0eXBlPXRpbWVdOm5vdCguYnJvd3Nlci1kZWZhdWx0KSArIGxhYmVsIHsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTE0cHgpIHNjYWxlKDAuOCk7DQogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xNHB4KSBzY2FsZSgwLjgpOw0KICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDAgMDsNCiAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7DQp9DQoNCi5pbnB1dC1maWVsZCAuaGVscGVyLXRleHQgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIG1pbi1oZWlnaHQ6IDE4cHg7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBmb250LXNpemU6IDEycHg7DQogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNTQpOw0KfQ0KDQouaW5wdXQtZmllbGQgLmhlbHBlci10ZXh0OjphZnRlciB7DQogIG9wYWNpdHk6IDE7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAwOw0KICBsZWZ0OiAwOw0KfQ0KDQouaW5wdXQtZmllbGQgLnByZWZpeCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgd2lkdGg6IDNyZW07DQogIGZvbnQtc2l6ZTogMnJlbTsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBjb2xvciAuMnM7DQogIHRyYW5zaXRpb246IGNvbG9yIC4yczsNCiAgdG9wOiAwLjVyZW07DQp9DQoNCi5pbnB1dC1maWVsZCAucHJlZml4LmFjdGl2ZSB7DQogIGNvbG9yOiAjMjZhNjlhOw0KfQ0KDQouaW5wdXQtZmllbGQgLnByZWZpeCB+IGlucHV0LA0KLmlucHV0LWZpZWxkIC5wcmVmaXggfiB0ZXh0YXJlYSwNCi5pbnB1dC1maWVsZCAucHJlZml4IH4gbGFiZWwsDQouaW5wdXQtZmllbGQgLnByZWZpeCB+IC52YWxpZGF0ZSB+IGxhYmVsLA0KLmlucHV0LWZpZWxkIC5wcmVmaXggfiAuaGVscGVyLXRleHQsDQouaW5wdXQtZmllbGQgLnByZWZpeCB+IC5hdXRvY29tcGxldGUtY29udGVudCB7DQogIG1hcmdpbi1sZWZ0OiAzcmVtOw0KICB3aWR0aDogOTIlOw0KICB3aWR0aDogY2FsYygxMDAlIC0gM3JlbSk7DQp9DQoNCi5pbnB1dC1maWVsZCAucHJlZml4IH4gbGFiZWwgew0KICBtYXJnaW4tbGVmdDogM3JlbTsNCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgew0KICAuaW5wdXQtZmllbGQgLnByZWZpeCB+IGlucHV0IHsNCiAgICB3aWR0aDogODYlOw0KICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAzcmVtKTsNCiAgfQ0KfQ0KDQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7DQogIC5pbnB1dC1maWVsZCAucHJlZml4IH4gaW5wdXQgew0KICAgIHdpZHRoOiA4MCU7DQogICAgd2lkdGg6IGNhbGMoMTAwJSAtIDNyZW0pOw0KICB9DQp9DQoNCi8qIFNlYXJjaCBGaWVsZCAqLw0KLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9c2VhcmNoXSB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBsaW5lLWhlaWdodDogaW5oZXJpdDsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiAuM3MgYmFja2dyb3VuZC1jb2xvcjsNCiAgdHJhbnNpdGlvbjogLjNzIGJhY2tncm91bmQtY29sb3I7DQp9DQoNCi5uYXYtd3JhcHBlciAuaW5wdXQtZmllbGQgaW5wdXRbdHlwZT1zZWFyY2hdIHsNCiAgaGVpZ2h0OiBpbmhlcml0Ow0KICBwYWRkaW5nLWxlZnQ6IDRyZW07DQogIHdpZHRoOiBjYWxjKDEwMCUgLSA0cmVtKTsNCiAgYm9yZGVyOiAwOw0KICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmU7DQogICAgICAgICAgYm94LXNoYWRvdzogbm9uZTsNCn0NCg0KLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9c2VhcmNoXTpmb2N1czpub3QoLmJyb3dzZXItZGVmYXVsdCkgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICBib3JkZXI6IDA7DQogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZTsNCiAgICAgICAgICBib3gtc2hhZG93OiBub25lOw0KICBjb2xvcjogIzQ0NDsNCn0NCg0KLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9c2VhcmNoXTpmb2N1czpub3QoLmJyb3dzZXItZGVmYXVsdCkgKyBsYWJlbCBpLA0KLmlucHV0LWZpZWxkIGlucHV0W3R5cGU9c2VhcmNoXTpmb2N1czpub3QoLmJyb3dzZXItZGVmYXVsdCkgfiAubWRpLW5hdmlnYXRpb24tY2xvc2UsDQouaW5wdXQtZmllbGQgaW5wdXRbdHlwZT1zZWFyY2hdOmZvY3VzOm5vdCguYnJvd3Nlci1kZWZhdWx0KSB+IC5tYXRlcmlhbC1pY29ucyB7DQogIGNvbG9yOiAjNDQ0Ow0KfQ0KDQouaW5wdXQtZmllbGQgaW5wdXRbdHlwZT1zZWFyY2hdICsgLmxhYmVsLWljb24gew0KICAtd2Via2l0LXRyYW5zZm9ybTogbm9uZTsNCiAgICAgICAgICB0cmFuc2Zvcm06IG5vbmU7DQogIGxlZnQ6IDFyZW07DQp9DQoNCi5pbnB1dC1maWVsZCBpbnB1dFt0eXBlPXNlYXJjaF0gfiAubWRpLW5hdmlnYXRpb24tY2xvc2UsDQouaW5wdXQtZmllbGQgaW5wdXRbdHlwZT1zZWFyY2hdIH4gLm1hdGVyaWFsLWljb25zIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0b3A6IDA7DQogIHJpZ2h0OiAxcmVtOw0KICBjb2xvcjogdHJhbnNwYXJlbnQ7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgZm9udC1zaXplOiAycmVtOw0KICAtd2Via2l0LXRyYW5zaXRpb246IC4zcyBjb2xvcjsNCiAgdHJhbnNpdGlvbjogLjNzIGNvbG9yOw0KfQ0KDQovKiBUZXh0YXJlYSAqLw0KdGV4dGFyZWEgew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAzcmVtOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCn0NCg0KdGV4dGFyZWEubWF0ZXJpYWxpemUtdGV4dGFyZWEgew0KICBsaW5lLWhlaWdodDogbm9ybWFsOw0KICBvdmVyZmxvdy15OiBoaWRkZW47DQogIC8qIHByZXZlbnRzIHNjcm9sbCBiYXIgZmxhc2ggKi8NCiAgcGFkZGluZzogLjhyZW0gMCAuOHJlbSAwOw0KICAvKiBwcmV2ZW50cyB0ZXh0IGp1bXAgb24gRW50ZXIga2V5cHJlc3MgKi8NCiAgcmVzaXplOiBub25lOw0KICBtaW4taGVpZ2h0OiAzcmVtOw0KICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCn0NCg0KLmhpZGRlbmRpdiB7DQogIHZpc2liaWxpdHk6IGhpZGRlbjsNCiAgd2hpdGUtc3BhY2U6IHByZS13cmFwOw0KICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7DQogIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7DQogIC8qIGZ1dHVyZSB2ZXJzaW9uIG9mIGRlcHJlY2F0ZWQgJ3dvcmQtd3JhcCcgKi8NCiAgcGFkZGluZy10b3A6IDEuMnJlbTsNCiAgLyogcHJldmVudHMgdGV4dCBqdW1wIG9uIEVudGVyIGtleXByZXNzICovDQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAwOw0KICB6LWluZGV4OiAtMTsNCn0NCg0KLyogQXV0b2NvbXBsZXRlICovDQouYXV0b2NvbXBsZXRlLWNvbnRlbnQgbGkgLmhpZ2hsaWdodCB7DQogIGNvbG9yOiAjNDQ0Ow0KfQ0KDQouYXV0b2NvbXBsZXRlLWNvbnRlbnQgbGkgaW1nIHsNCiAgaGVpZ2h0OiA0MHB4Ow0KICB3aWR0aDogNDBweDsNCiAgbWFyZ2luOiA1cHggMTVweDsNCn0NCg0KLyogQ2hhcmFjdGVyIENvdW50ZXIgKi8NCi5jaGFyYWN0ZXItY291bnRlciB7DQogIG1pbi1oZWlnaHQ6IDE4cHg7DQp9DQoNCi8qIFJhZGlvIEJ1dHRvbnMNCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovDQpbdHlwZT0icmFkaW8iXTpub3QoOmNoZWNrZWQpLA0KW3R5cGU9InJhZGlvIl06Y2hlY2tlZCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgb3BhY2l0eTogMDsNCiAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQoNClt0eXBlPSJyYWRpbyJdOm5vdCg6Y2hlY2tlZCkgKyBzcGFuLA0KW3R5cGU9InJhZGlvIl06Y2hlY2tlZCArIHNwYW4gew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIHBhZGRpbmctbGVmdDogMzVweDsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIGhlaWdodDogMjVweDsNCiAgbGluZS1oZWlnaHQ6IDI1cHg7DQogIGZvbnQtc2l6ZTogMXJlbTsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiAuMjhzIGVhc2U7DQogIHRyYW5zaXRpb246IC4yOHMgZWFzZTsNCiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsNCiAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsNCiAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsNCiAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTsNCn0NCg0KW3R5cGU9InJhZGlvIl0gKyBzcGFuOmJlZm9yZSwNClt0eXBlPSJyYWRpbyJdICsgc3BhbjphZnRlciB7DQogIGNvbnRlbnQ6ICcnOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGxlZnQ6IDA7DQogIHRvcDogMDsNCiAgbWFyZ2luOiA0cHg7DQogIHdpZHRoOiAxNnB4Ow0KICBoZWlnaHQ6IDE2cHg7DQogIHotaW5kZXg6IDA7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogLjI4cyBlYXNlOw0KICB0cmFuc2l0aW9uOiAuMjhzIGVhc2U7DQp9DQoNCi8qIFVuY2hlY2tlZCBzdHlsZXMgKi8NClt0eXBlPSJyYWRpbyJdOm5vdCg6Y2hlY2tlZCkgKyBzcGFuOmJlZm9yZSwNClt0eXBlPSJyYWRpbyJdOm5vdCg6Y2hlY2tlZCkgKyBzcGFuOmFmdGVyLA0KW3R5cGU9InJhZGlvIl06Y2hlY2tlZCArIHNwYW46YmVmb3JlLA0KW3R5cGU9InJhZGlvIl06Y2hlY2tlZCArIHNwYW46YWZ0ZXIsDQpbdHlwZT0icmFkaW8iXS53aXRoLWdhcDpjaGVja2VkICsgc3BhbjpiZWZvcmUsDQpbdHlwZT0icmFkaW8iXS53aXRoLWdhcDpjaGVja2VkICsgc3BhbjphZnRlciB7DQogIGJvcmRlci1yYWRpdXM6IDUwJTsNCn0NCg0KW3R5cGU9InJhZGlvIl06bm90KDpjaGVja2VkKSArIHNwYW46YmVmb3JlLA0KW3R5cGU9InJhZGlvIl06bm90KDpjaGVja2VkKSArIHNwYW46YWZ0ZXIgew0KICBib3JkZXI6IDJweCBzb2xpZCAjNWE1YTVhOw0KfQ0KDQpbdHlwZT0icmFkaW8iXTpub3QoOmNoZWNrZWQpICsgc3BhbjphZnRlciB7DQogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwKTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApOw0KfQ0KDQovKiBDaGVja2VkIHN0eWxlcyAqLw0KW3R5cGU9InJhZGlvIl06Y2hlY2tlZCArIHNwYW46YmVmb3JlIHsNCiAgYm9yZGVyOiAycHggc29saWQgdHJhbnNwYXJlbnQ7DQp9DQoNClt0eXBlPSJyYWRpbyJdOmNoZWNrZWQgKyBzcGFuOmFmdGVyLA0KW3R5cGU9InJhZGlvIl0ud2l0aC1nYXA6Y2hlY2tlZCArIHNwYW46YmVmb3JlLA0KW3R5cGU9InJhZGlvIl0ud2l0aC1nYXA6Y2hlY2tlZCArIHNwYW46YWZ0ZXIgew0KICBib3JkZXI6IDJweCBzb2xpZCAjMjZhNjlhOw0KfQ0KDQpbdHlwZT0icmFkaW8iXTpjaGVja2VkICsgc3BhbjphZnRlciwNClt0eXBlPSJyYWRpbyJdLndpdGgtZ2FwOmNoZWNrZWQgKyBzcGFuOmFmdGVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsNCn0NCg0KW3R5cGU9InJhZGlvIl06Y2hlY2tlZCArIHNwYW46YWZ0ZXIgew0KICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMS4wMik7DQogICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjAyKTsNCn0NCg0KLyogUmFkaW8gV2l0aCBnYXAgKi8NClt0eXBlPSJyYWRpbyJdLndpdGgtZ2FwOmNoZWNrZWQgKyBzcGFuOmFmdGVyIHsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDAuNSk7DQogICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjUpOw0KfQ0KDQovKiBGb2N1c2VkIHN0eWxlcyAqLw0KW3R5cGU9InJhZGlvIl0udGFiYmVkOmZvY3VzICsgc3BhbjpiZWZvcmUgew0KICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMCAwIDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpOw0KICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpOw0KfQ0KDQovKiBEaXNhYmxlZCBSYWRpbyBXaXRoIGdhcCAqLw0KW3R5cGU9InJhZGlvIl0ud2l0aC1nYXA6ZGlzYWJsZWQ6Y2hlY2tlZCArIHNwYW46YmVmb3JlIHsNCiAgYm9yZGVyOiAycHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjQyKTsNCn0NCg0KW3R5cGU9InJhZGlvIl0ud2l0aC1nYXA6ZGlzYWJsZWQ6Y2hlY2tlZCArIHNwYW46YWZ0ZXIgew0KICBib3JkZXI6IG5vbmU7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40Mik7DQp9DQoNCi8qIERpc2FibGVkIHN0eWxlICovDQpbdHlwZT0icmFkaW8iXTpkaXNhYmxlZDpub3QoOmNoZWNrZWQpICsgc3BhbjpiZWZvcmUsDQpbdHlwZT0icmFkaW8iXTpkaXNhYmxlZDpjaGVja2VkICsgc3BhbjpiZWZvcmUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNDIpOw0KfQ0KDQpbdHlwZT0icmFkaW8iXTpkaXNhYmxlZCArIHNwYW4gew0KICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQyKTsNCn0NCg0KW3R5cGU9InJhZGlvIl06ZGlzYWJsZWQ6bm90KDpjaGVja2VkKSArIHNwYW46YmVmb3JlIHsNCiAgYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNDIpOw0KfQ0KDQpbdHlwZT0icmFkaW8iXTpkaXNhYmxlZDpjaGVja2VkICsgc3BhbjphZnRlciB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40Mik7DQogIGJvcmRlci1jb2xvcjogIzk0OTQ5NDsNCn0NCg0KLyogQ2hlY2tib3hlcw0KICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCi8qIFJlbW92ZSBkZWZhdWx0IGNoZWNrYm94ICovDQpbdHlwZT0iY2hlY2tib3giXTpub3QoOmNoZWNrZWQpLA0KW3R5cGU9ImNoZWNrYm94Il06Y2hlY2tlZCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgb3BhY2l0eTogMDsNCiAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQoNClt0eXBlPSJjaGVja2JveCJdIHsNCiAgLyogY2hlY2tib3ggYXNwZWN0ICovDQp9DQoNClt0eXBlPSJjaGVja2JveCJdICsgc3Bhbjpub3QoLmxldmVyKSB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgcGFkZGluZy1sZWZ0OiAzNXB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgaGVpZ2h0OiAyNXB4Ow0KICBsaW5lLWhlaWdodDogMjVweDsNCiAgZm9udC1zaXplOiAxcmVtOw0KICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOw0KfQ0KDQpbdHlwZT0iY2hlY2tib3giXSArIHNwYW46bm90KC5sZXZlcik6YmVmb3JlLA0KW3R5cGU9ImNoZWNrYm94Il06bm90KC5maWxsZWQtaW4pICsgc3Bhbjpub3QoLmxldmVyKTphZnRlciB7DQogIGNvbnRlbnQ6ICcnOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgd2lkdGg6IDE4cHg7DQogIGhlaWdodDogMThweDsNCiAgei1pbmRleDogMDsNCiAgYm9yZGVyOiAycHggc29saWQgIzVhNWE1YTsNCiAgYm9yZGVyLXJhZGl1czogMXB4Ow0KICBtYXJnaW4tdG9wOiAzcHg7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogLjJzOw0KICB0cmFuc2l0aW9uOiAuMnM7DQp9DQoNClt0eXBlPSJjaGVja2JveCJdOm5vdCguZmlsbGVkLWluKSArIHNwYW46bm90KC5sZXZlcik6YWZ0ZXIgew0KICBib3JkZXI6IDA7DQogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwKTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApOw0KfQ0KDQpbdHlwZT0iY2hlY2tib3giXTpub3QoOmNoZWNrZWQpOmRpc2FibGVkICsgc3Bhbjpub3QoLmxldmVyKTpiZWZvcmUgew0KICBib3JkZXI6IG5vbmU7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40Mik7DQp9DQoNClt0eXBlPSJjaGVja2JveCJdLnRhYmJlZDpmb2N1cyArIHNwYW46bm90KC5sZXZlcik6YWZ0ZXIgew0KICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMSk7DQogICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTsNCiAgYm9yZGVyOiAwOw0KICBib3JkZXItcmFkaXVzOiA1MCU7DQogIC13ZWJraXQtYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKTsNCn0NCg0KW3R5cGU9ImNoZWNrYm94Il06Y2hlY2tlZCArIHNwYW46bm90KC5sZXZlcik6YmVmb3JlIHsNCiAgdG9wOiAtNHB4Ow0KICBsZWZ0OiAtNXB4Ow0KICB3aWR0aDogMTJweDsNCiAgaGVpZ2h0OiAyMnB4Ow0KICBib3JkZXItdG9wOiAycHggc29saWQgdHJhbnNwYXJlbnQ7DQogIGJvcmRlci1sZWZ0OiAycHggc29saWQgdHJhbnNwYXJlbnQ7DQogIGJvcmRlci1yaWdodDogMnB4IHNvbGlkICMyNmE2OWE7DQogIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMjZhNjlhOw0KICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDQwZGVnKTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0MGRlZyk7DQogIC13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOw0KICAgICAgICAgIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsNCiAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAxMDAlIDEwMCU7DQogICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMTAwJSAxMDAlOw0KfQ0KDQpbdHlwZT0iY2hlY2tib3giXTpjaGVja2VkOmRpc2FibGVkICsgc3BhbjpiZWZvcmUgew0KICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNDIpOw0KICBib3JkZXItYm90dG9tOiAycHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjQyKTsNCn0NCg0KLyogSW5kZXRlcm1pbmF0ZSBjaGVja2JveCAqLw0KW3R5cGU9ImNoZWNrYm94Il06aW5kZXRlcm1pbmF0ZSArIHNwYW46bm90KC5sZXZlcik6YmVmb3JlIHsNCiAgdG9wOiAtMTFweDsNCiAgbGVmdDogLTEycHg7DQogIHdpZHRoOiAxMHB4Ow0KICBoZWlnaHQ6IDIycHg7DQogIGJvcmRlci10b3A6IG5vbmU7DQogIGJvcmRlci1sZWZ0OiBub25lOw0KICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCAjMjZhNjlhOw0KICBib3JkZXItYm90dG9tOiBub25lOw0KICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7DQogIC13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOw0KICAgICAgICAgIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsNCiAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAxMDAlIDEwMCU7DQogICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMTAwJSAxMDAlOw0KfQ0KDQpbdHlwZT0iY2hlY2tib3giXTppbmRldGVybWluYXRlOmRpc2FibGVkICsgc3Bhbjpub3QoLmxldmVyKTpiZWZvcmUgew0KICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNDIpOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCn0NCg0KW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluICsgc3Bhbjpub3QoLmxldmVyKTphZnRlciB7DQogIGJvcmRlci1yYWRpdXM6IDJweDsNCn0NCg0KW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluICsgc3Bhbjpub3QoLmxldmVyKTpiZWZvcmUsDQpbdHlwZT0iY2hlY2tib3giXS5maWxsZWQtaW4gKyBzcGFuOm5vdCgubGV2ZXIpOmFmdGVyIHsNCiAgY29udGVudDogJyc7DQogIGxlZnQ6IDA7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgLyogLjFzIGRlbGF5IGlzIGZvciBjaGVjayBhbmltYXRpb24gKi8NCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBib3JkZXIgLjI1cywgYmFja2dyb3VuZC1jb2xvciAuMjVzLCB3aWR0aCAuMjBzIC4xcywgaGVpZ2h0IC4yMHMgLjFzLCB0b3AgLjIwcyAuMXMsIGxlZnQgLjIwcyAuMXM7DQogIHRyYW5zaXRpb246IGJvcmRlciAuMjVzLCBiYWNrZ3JvdW5kLWNvbG9yIC4yNXMsIHdpZHRoIC4yMHMgLjFzLCBoZWlnaHQgLjIwcyAuMXMsIHRvcCAuMjBzIC4xcywgbGVmdCAuMjBzIC4xczsNCiAgei1pbmRleDogMTsNCn0NCg0KW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluOm5vdCg6Y2hlY2tlZCkgKyBzcGFuOm5vdCgubGV2ZXIpOmJlZm9yZSB7DQogIHdpZHRoOiAwOw0KICBoZWlnaHQ6IDA7DQogIGJvcmRlcjogM3B4IHNvbGlkIHRyYW5zcGFyZW50Ow0KICBsZWZ0OiA2cHg7DQogIHRvcDogMTBweDsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZVooMzdkZWcpOw0KICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlWigzN2RlZyk7DQogIC13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMTAwJSAxMDAlOw0KICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDEwMCUgMTAwJTsNCn0NCg0KW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluOm5vdCg6Y2hlY2tlZCkgKyBzcGFuOm5vdCgubGV2ZXIpOmFmdGVyIHsNCiAgaGVpZ2h0OiAyMHB4Ow0KICB3aWR0aDogMjBweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQogIGJvcmRlcjogMnB4IHNvbGlkICM1YTVhNWE7DQogIHRvcDogMHB4Ow0KICB6LWluZGV4OiAwOw0KfQ0KDQpbdHlwZT0iY2hlY2tib3giXS5maWxsZWQtaW46Y2hlY2tlZCArIHNwYW46bm90KC5sZXZlcik6YmVmb3JlIHsNCiAgdG9wOiAwOw0KICBsZWZ0OiAxcHg7DQogIHdpZHRoOiA4cHg7DQogIGhlaWdodDogMTNweDsNCiAgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHRyYW5zcGFyZW50Ow0KICBib3JkZXItbGVmdDogMnB4IHNvbGlkIHRyYW5zcGFyZW50Ow0KICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCAjZmZmOw0KICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2ZmZjsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZVooMzdkZWcpOw0KICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlWigzN2RlZyk7DQogIC13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMTAwJSAxMDAlOw0KICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDEwMCUgMTAwJTsNCn0NCg0KW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluOmNoZWNrZWQgKyBzcGFuOm5vdCgubGV2ZXIpOmFmdGVyIHsNCiAgdG9wOiAwOw0KICB3aWR0aDogMjBweDsNCiAgaGVpZ2h0OiAyMHB4Ow0KICBib3JkZXI6IDJweCBzb2xpZCAjMjZhNjlhOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOw0KICB6LWluZGV4OiAwOw0KfQ0KDQpbdHlwZT0iY2hlY2tib3giXS5maWxsZWQtaW4udGFiYmVkOmZvY3VzICsgc3Bhbjpub3QoLmxldmVyKTphZnRlciB7DQogIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgYm9yZGVyLWNvbG9yOiAjNWE1YTVhOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7DQp9DQoNClt0eXBlPSJjaGVja2JveCJdLmZpbGxlZC1pbi50YWJiZWQ6Y2hlY2tlZDpmb2N1cyArIHNwYW46bm90KC5sZXZlcik6YWZ0ZXIgew0KICBib3JkZXItcmFkaXVzOiAycHg7DQogIGJhY2tncm91bmQtY29sb3I6ICMyNmE2OWE7DQogIGJvcmRlci1jb2xvcjogIzI2YTY5YTsNCn0NCg0KW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluOmRpc2FibGVkOm5vdCg6Y2hlY2tlZCkgKyBzcGFuOm5vdCgubGV2ZXIpOmJlZm9yZSB7DQogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Ow0KICBib3JkZXI6IDJweCBzb2xpZCB0cmFuc3BhcmVudDsNCn0NCg0KW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluOmRpc2FibGVkOm5vdCg6Y2hlY2tlZCkgKyBzcGFuOm5vdCgubGV2ZXIpOmFmdGVyIHsNCiAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzk0OTQ5NDsNCn0NCg0KW3R5cGU9ImNoZWNrYm94Il0uZmlsbGVkLWluOmRpc2FibGVkOmNoZWNrZWQgKyBzcGFuOm5vdCgubGV2ZXIpOmJlZm9yZSB7DQogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Ow0KfQ0KDQpbdHlwZT0iY2hlY2tib3giXS5maWxsZWQtaW46ZGlzYWJsZWQ6Y2hlY2tlZCArIHNwYW46bm90KC5sZXZlcik6YWZ0ZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTQ5NDk0Ow0KICBib3JkZXItY29sb3I6ICM5NDk0OTQ7DQp9DQoNCi8qIFN3aXRjaA0KICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCi5zd2l0Y2gsDQouc3dpdGNoICogew0KICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50Ow0KICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOw0KfQ0KDQouc3dpdGNoIGxhYmVsIHsNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KDQouc3dpdGNoIGxhYmVsIGlucHV0W3R5cGU9Y2hlY2tib3hdIHsNCiAgb3BhY2l0eTogMDsNCiAgd2lkdGg6IDA7DQogIGhlaWdodDogMDsNCn0NCg0KLnN3aXRjaCBsYWJlbCBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkICsgLmxldmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzg0YzdjMTsNCn0NCg0KLnN3aXRjaCBsYWJlbCBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkICsgLmxldmVyOmJlZm9yZSwgLnN3aXRjaCBsYWJlbCBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkICsgLmxldmVyOmFmdGVyIHsNCiAgbGVmdDogMThweDsNCn0NCg0KLnN3aXRjaCBsYWJlbCBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkICsgLmxldmVyOmFmdGVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsNCn0NCg0KLnN3aXRjaCBsYWJlbCAubGV2ZXIgew0KICBjb250ZW50OiAiIjsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIHdpZHRoOiAzNnB4Ow0KICBoZWlnaHQ6IDE0cHg7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4zOCk7DQogIGJvcmRlci1yYWRpdXM6IDE1cHg7DQogIG1hcmdpbi1yaWdodDogMTBweDsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuM3MgZWFzZTsNCiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjNzIGVhc2U7DQogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogIG1hcmdpbjogMCAxNnB4Ow0KfQ0KDQouc3dpdGNoIGxhYmVsIC5sZXZlcjpiZWZvcmUsIC5zd2l0Y2ggbGFiZWwgLmxldmVyOmFmdGVyIHsNCiAgY29udGVudDogIiI7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICB3aWR0aDogMjBweDsNCiAgaGVpZ2h0OiAyMHB4Ow0KICBib3JkZXItcmFkaXVzOiA1MCU7DQogIGxlZnQ6IDA7DQogIHRvcDogLTNweDsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBsZWZ0IDAuM3MgZWFzZSwgYmFja2dyb3VuZCAuM3MgZWFzZSwgLXdlYmtpdC1ib3gtc2hhZG93IDAuMXMgZWFzZSwgLXdlYmtpdC10cmFuc2Zvcm0gLjFzIGVhc2U7DQogIHRyYW5zaXRpb246IGxlZnQgMC4zcyBlYXNlLCBiYWNrZ3JvdW5kIC4zcyBlYXNlLCAtd2Via2l0LWJveC1zaGFkb3cgMC4xcyBlYXNlLCAtd2Via2l0LXRyYW5zZm9ybSAuMXMgZWFzZTsNCiAgdHJhbnNpdGlvbjogbGVmdCAwLjNzIGVhc2UsIGJhY2tncm91bmQgLjNzIGVhc2UsIGJveC1zaGFkb3cgMC4xcyBlYXNlLCB0cmFuc2Zvcm0gLjFzIGVhc2U7DQogIHRyYW5zaXRpb246IGxlZnQgMC4zcyBlYXNlLCBiYWNrZ3JvdW5kIC4zcyBlYXNlLCBib3gtc2hhZG93IDAuMXMgZWFzZSwgdHJhbnNmb3JtIC4xcyBlYXNlLCAtd2Via2l0LWJveC1zaGFkb3cgMC4xcyBlYXNlLCAtd2Via2l0LXRyYW5zZm9ybSAuMXMgZWFzZTsNCn0NCg0KLnN3aXRjaCBsYWJlbCAubGV2ZXI6YmVmb3JlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzOCwgMTY2LCAxNTQsIDAuMTUpOw0KfQ0KDQouc3dpdGNoIGxhYmVsIC5sZXZlcjphZnRlciB7DQogIGJhY2tncm91bmQtY29sb3I6ICNGMUYxRjE7DQogIC13ZWJraXQtYm94LXNoYWRvdzogMHB4IDNweCAxcHggLTJweCByZ2JhKDAsIDAsIDAsIDAuMiksIDBweCAycHggMnB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwcHggMXB4IDVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjEyKTsNCiAgICAgICAgICBib3gtc2hhZG93OiAwcHggM3B4IDFweCAtMnB4IHJnYmEoMCwgMCwgMCwgMC4yKSwgMHB4IDJweCAycHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xNCksIDBweCAxcHggNXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTIpOw0KfQ0KDQppbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkOm5vdCg6ZGlzYWJsZWQpIH4gLmxldmVyOmFjdGl2ZTo6YmVmb3JlLA0KaW5wdXRbdHlwZT1jaGVja2JveF06Y2hlY2tlZDpub3QoOmRpc2FibGVkKS50YWJiZWQ6Zm9jdXMgfiAubGV2ZXI6OmJlZm9yZSB7DQogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgyLjQpOw0KICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMi40KTsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzOCwgMTY2LCAxNTQsIDAuMTUpOw0KfQ0KDQppbnB1dFt0eXBlPWNoZWNrYm94XTpub3QoOmRpc2FibGVkKSB+IC5sZXZlcjphY3RpdmU6YmVmb3JlLA0KaW5wdXRbdHlwZT1jaGVja2JveF06bm90KDpkaXNhYmxlZCkudGFiYmVkOmZvY3VzIH4gLmxldmVyOjpiZWZvcmUgew0KICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMi40KTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDIuNCk7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wOCk7DQp9DQoNCi5zd2l0Y2ggaW5wdXRbdHlwZT1jaGVja2JveF1bZGlzYWJsZWRdICsgLmxldmVyIHsNCiAgY3Vyc29yOiBkZWZhdWx0Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMTIpOw0KfQ0KDQouc3dpdGNoIGxhYmVsIGlucHV0W3R5cGU9Y2hlY2tib3hdW2Rpc2FibGVkXSArIC5sZXZlcjphZnRlciwNCi5zd2l0Y2ggbGFiZWwgaW5wdXRbdHlwZT1jaGVja2JveF1bZGlzYWJsZWRdOmNoZWNrZWQgKyAubGV2ZXI6YWZ0ZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTQ5NDk0Ow0KfQ0KDQovKiBTZWxlY3QgRmllbGQNCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovDQpzZWxlY3Qgew0KICBkaXNwbGF5OiBub25lOw0KfQ0KDQpzZWxlY3QuYnJvd3Nlci1kZWZhdWx0IHsNCiAgZGlzcGxheTogYmxvY2s7DQp9DQoNCnNlbGVjdCB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KTsNCiAgd2lkdGg6IDEwMCU7DQogIHBhZGRpbmc6IDVweDsNCiAgYm9yZGVyOiAxcHggc29saWQgI2YyZjJmMjsNCiAgYm9yZGVyLXJhZGl1czogMnB4Ow0KICBoZWlnaHQ6IDNyZW07DQp9DQoNCi5zZWxlY3QtbGFiZWwgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQp9DQoNCi5zZWxlY3Qtd3JhcHBlciB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCg0KLnNlbGVjdC13cmFwcGVyLnZhbGlkICsgbGFiZWwsDQouc2VsZWN0LXdyYXBwZXIuaW52YWxpZCArIGxhYmVsIHsNCiAgd2lkdGg6IDEwMCU7DQogIHBvaW50ZXItZXZlbnRzOiBub25lOw0KfQ0KDQouc2VsZWN0LXdyYXBwZXIgaW5wdXQuc2VsZWN0LWRyb3Bkb3duIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBjdXJzb3I6IHBvaW50ZXI7DQogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Ow0KICBib3JkZXI6IG5vbmU7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjOWU5ZTllOw0KICBvdXRsaW5lOiBub25lOw0KICBoZWlnaHQ6IDNyZW07DQogIGxpbmUtaGVpZ2h0OiAzcmVtOw0KICB3aWR0aDogMTAwJTsNCiAgZm9udC1zaXplOiAxNnB4Ow0KICBtYXJnaW46IDAgMCA4cHggMDsNCiAgcGFkZGluZzogMDsNCiAgZGlzcGxheTogYmxvY2s7DQogIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7DQogICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7DQogICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7DQogICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7DQogIHotaW5kZXg6IDE7DQp9DQoNCi5zZWxlY3Qtd3JhcHBlciBpbnB1dC5zZWxlY3QtZHJvcGRvd246Zm9jdXMgew0KICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzI2YTY5YTsNCn0NCg0KLnNlbGVjdC13cmFwcGVyIC5jYXJldCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgcmlnaHQ6IDA7DQogIHRvcDogMDsNCiAgYm90dG9tOiAwOw0KICBtYXJnaW46IGF1dG8gMDsNCiAgei1pbmRleDogMDsNCiAgZmlsbDogcmdiYSgwLCAwLCAwLCAwLjg3KTsNCn0NCg0KLnNlbGVjdC13cmFwcGVyICsgbGFiZWwgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogLTI2cHg7DQogIGZvbnQtc2l6ZTogMC44cmVtOw0KfQ0KDQpzZWxlY3Q6ZGlzYWJsZWQgew0KICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQyKTsNCn0NCg0KLnNlbGVjdC13cmFwcGVyLmRpc2FibGVkICsgbGFiZWwgew0KICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQyKTsNCn0NCg0KLnNlbGVjdC13cmFwcGVyLmRpc2FibGVkIC5jYXJldCB7DQogIGZpbGw6IHJnYmEoMCwgMCwgMCwgMC40Mik7DQp9DQoNCi5zZWxlY3Qtd3JhcHBlciBpbnB1dC5zZWxlY3QtZHJvcGRvd246ZGlzYWJsZWQgew0KICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQyKTsNCiAgY3Vyc29yOiBkZWZhdWx0Ow0KICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOw0KfQ0KDQouc2VsZWN0LXdyYXBwZXIgaSB7DQogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7DQp9DQoNCi5zZWxlY3QtZHJvcGRvd24gbGkuZGlzYWJsZWQsDQouc2VsZWN0LWRyb3Bkb3duIGxpLmRpc2FibGVkID4gc3BhbiwNCi5zZWxlY3QtZHJvcGRvd24gbGkub3B0Z3JvdXAgew0KICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjMpOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCn0NCg0KYm9keS5rZXlib2FyZC1mb2N1c2VkIC5zZWxlY3QtZHJvcGRvd24uZHJvcGRvd24tY29udGVudCBsaTpmb2N1cyB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wOCk7DQp9DQoNCi5zZWxlY3QtZHJvcGRvd24uZHJvcGRvd24tY29udGVudCBsaTpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wOCk7DQp9DQoNCi5zZWxlY3QtZHJvcGRvd24uZHJvcGRvd24tY29udGVudCBsaS5zZWxlY3RlZCB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wMyk7DQp9DQoNCi5wcmVmaXggfiAuc2VsZWN0LXdyYXBwZXIgew0KICBtYXJnaW4tbGVmdDogM3JlbTsNCiAgd2lkdGg6IDkyJTsNCiAgd2lkdGg6IGNhbGMoMTAwJSAtIDNyZW0pOw0KfQ0KDQoucHJlZml4IH4gbGFiZWwgew0KICBtYXJnaW4tbGVmdDogM3JlbTsNCn0NCg0KLnNlbGVjdC1kcm9wZG93biBsaSBpbWcgew0KICBoZWlnaHQ6IDQwcHg7DQogIHdpZHRoOiA0MHB4Ow0KICBtYXJnaW46IDVweCAxNXB4Ow0KICBmbG9hdDogcmlnaHQ7DQp9DQoNCi5zZWxlY3QtZHJvcGRvd24gbGkub3B0Z3JvdXAgew0KICBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsNCn0NCg0KLnNlbGVjdC1kcm9wZG93biBsaS5vcHRncm91cC5zZWxlY3RlZCA+IHNwYW4gew0KICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjcpOw0KfQ0KDQouc2VsZWN0LWRyb3Bkb3duIGxpLm9wdGdyb3VwID4gc3BhbiB7DQogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7DQp9DQoNCi5zZWxlY3QtZHJvcGRvd24gbGkub3B0Z3JvdXAgfiBsaS5vcHRncm91cC1vcHRpb24gew0KICBwYWRkaW5nLWxlZnQ6IDFyZW07DQp9DQoNCi8qIEZpbGUgSW5wdXQNCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovDQouZmlsZS1maWVsZCB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCg0KLmZpbGUtZmllbGQgLmZpbGUtcGF0aC13cmFwcGVyIHsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgcGFkZGluZy1sZWZ0OiAxMHB4Ow0KfQ0KDQouZmlsZS1maWVsZCBpbnB1dC5maWxlLXBhdGggew0KICB3aWR0aDogMTAwJTsNCn0NCg0KLmZpbGUtZmllbGQgLmJ0biwgLmZpbGUtZmllbGQgLmJ0bi1sYXJnZSwgLmZpbGUtZmllbGQgLmJ0bi1zbWFsbCB7DQogIGZsb2F0OiBsZWZ0Ow0KICBoZWlnaHQ6IDNyZW07DQogIGxpbmUtaGVpZ2h0OiAzcmVtOw0KfQ0KDQouZmlsZS1maWVsZCBzcGFuIHsNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KDQouZmlsZS1maWVsZCBpbnB1dFt0eXBlPWZpbGVdIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0b3A6IDA7DQogIHJpZ2h0OiAwOw0KICBsZWZ0OiAwOw0KICBib3R0b206IDA7DQogIHdpZHRoOiAxMDAlOw0KICBtYXJnaW46IDA7DQogIHBhZGRpbmc6IDA7DQogIGZvbnQtc2l6ZTogMjBweDsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBvcGFjaXR5OiAwOw0KICBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MCk7DQp9DQoNCi5maWxlLWZpZWxkIGlucHV0W3R5cGU9ZmlsZV06Oi13ZWJraXQtZmlsZS11cGxvYWQtYnV0dG9uIHsNCiAgZGlzcGxheTogbm9uZTsNCn0NCg0KLyogUmFuZ2UNCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovDQoucmFuZ2UtZmllbGQgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCmlucHV0W3R5cGU9cmFuZ2VdLA0KaW5wdXRbdHlwZT1yYW5nZV0gKyAudGh1bWIgew0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoNCmlucHV0W3R5cGU9cmFuZ2VdIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgYm9yZGVyOiBub25lOw0KICBvdXRsaW5lOiBub25lOw0KICB3aWR0aDogMTAwJTsNCiAgbWFyZ2luOiAxNXB4IDA7DQogIHBhZGRpbmc6IDA7DQp9DQoNCmlucHV0W3R5cGU9cmFuZ2VdOmZvY3VzIHsNCiAgb3V0bGluZTogbm9uZTsNCn0NCg0KaW5wdXRbdHlwZT1yYW5nZV0gKyAudGh1bWIgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMTBweDsNCiAgbGVmdDogMDsNCiAgYm9yZGVyOiBub25lOw0KICBoZWlnaHQ6IDA7DQogIHdpZHRoOiAwOw0KICBib3JkZXItcmFkaXVzOiA1MCU7DQogIGJhY2tncm91bmQtY29sb3I6ICMyNmE2OWE7DQogIG1hcmdpbi1sZWZ0OiA3cHg7DQogIC13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogNTAlIDUwJTsNCiAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiA1MCUgNTAlOw0KICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC00NWRlZyk7DQogICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKTsNCn0NCg0KaW5wdXRbdHlwZT1yYW5nZV0gKyAudGh1bWIgLnZhbHVlIHsNCiAgZGlzcGxheTogYmxvY2s7DQogIHdpZHRoOiAzMHB4Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGNvbG9yOiAjMjZhNjlhOw0KICBmb250LXNpemU6IDA7DQogIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpOw0KICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTsNCn0NCg0KaW5wdXRbdHlwZT1yYW5nZV0gKyAudGh1bWIuYWN0aXZlIHsNCiAgYm9yZGVyLXJhZGl1czogNTAlIDUwJSA1MCUgMDsNCn0NCg0KaW5wdXRbdHlwZT1yYW5nZV0gKyAudGh1bWIuYWN0aXZlIC52YWx1ZSB7DQogIGNvbG9yOiAjZmZmOw0KICBtYXJnaW4tbGVmdDogLTFweDsNCiAgbWFyZ2luLXRvcDogOHB4Ow0KICBmb250LXNpemU6IDEwcHg7DQp9DQoNCmlucHV0W3R5cGU9cmFuZ2VdIHsNCiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOw0KfQ0KDQppbnB1dFt0eXBlPXJhbmdlXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sgew0KICBoZWlnaHQ6IDNweDsNCiAgYmFja2dyb3VuZDogI2MyYzBjMjsNCiAgYm9yZGVyOiBub25lOw0KfQ0KDQppbnB1dFt0eXBlPXJhbmdlXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIgew0KICBib3JkZXI6IG5vbmU7DQogIGhlaWdodDogMTRweDsNCiAgd2lkdGg6IDE0cHg7DQogIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgYmFja2dyb3VuZDogIzI2YTY5YTsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LWJveC1zaGFkb3cgLjNzOw0KICB0cmFuc2l0aW9uOiAtd2Via2l0LWJveC1zaGFkb3cgLjNzOw0KICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IC4zczsNCiAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAuM3MsIC13ZWJraXQtYm94LXNoYWRvdyAuM3M7DQogIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsNCiAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiA1MCUgNTAlOw0KICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDUwJSA1MCU7DQogIG1hcmdpbjogLTVweCAwIDAgMDsNCn0NCg0KLmtleWJvYXJkLWZvY3VzZWQgaW5wdXRbdHlwZT1yYW5nZV06Zm9jdXM6bm90KC5hY3RpdmUpOjotd2Via2l0LXNsaWRlci10aHVtYiB7DQogIC13ZWJraXQtYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDM4LCAxNjYsIDE1NCwgMC4yNik7DQogICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDM4LCAxNjYsIDE1NCwgMC4yNik7DQp9DQoNCmlucHV0W3R5cGU9cmFuZ2VdIHsNCiAgLyogZml4IGZvciBGRiB1bmFibGUgdG8gYXBwbHkgZm9jdXMgc3R5bGUgYnVnICAqLw0KICBib3JkZXI6IDFweCBzb2xpZCB3aGl0ZTsNCiAgLypyZXF1aXJlZCBmb3IgcHJvcGVyIHRyYWNrIHNpemluZyBpbiBGRiovDQp9DQoNCmlucHV0W3R5cGU9cmFuZ2VdOjotbW96LXJhbmdlLXRyYWNrIHsNCiAgaGVpZ2h0OiAzcHg7DQogIGJhY2tncm91bmQ6ICNjMmMwYzI7DQogIGJvcmRlcjogbm9uZTsNCn0NCg0KaW5wdXRbdHlwZT1yYW5nZV06Oi1tb3otZm9jdXMtaW5uZXIgew0KICBib3JkZXI6IDA7DQp9DQoNCmlucHV0W3R5cGU9cmFuZ2VdOjotbW96LXJhbmdlLXRodW1iIHsNCiAgYm9yZGVyOiBub25lOw0KICBoZWlnaHQ6IDE0cHg7DQogIHdpZHRoOiAxNHB4Ow0KICBib3JkZXItcmFkaXVzOiA1MCU7DQogIGJhY2tncm91bmQ6ICMyNmE2OWE7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC1ib3gtc2hhZG93IC4zczsNCiAgdHJhbnNpdGlvbjogLXdlYmtpdC1ib3gtc2hhZG93IC4zczsNCiAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAuM3M7DQogIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjNzLCAtd2Via2l0LWJveC1zaGFkb3cgLjNzOw0KICBtYXJnaW4tdG9wOiAtNXB4Ow0KfQ0KDQppbnB1dFt0eXBlPXJhbmdlXTotbW96LWZvY3VzcmluZyB7DQogIG91dGxpbmU6IDFweCBzb2xpZCAjZmZmOw0KICBvdXRsaW5lLW9mZnNldDogLTFweDsNCn0NCg0KLmtleWJvYXJkLWZvY3VzZWQgaW5wdXRbdHlwZT1yYW5nZV06Zm9jdXM6bm90KC5hY3RpdmUpOjotbW96LXJhbmdlLXRodW1iIHsNCiAgYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDM4LCAxNjYsIDE1NCwgMC4yNik7DQp9DQoNCmlucHV0W3R5cGU9cmFuZ2VdOjotbXMtdHJhY2sgew0KICBoZWlnaHQ6IDNweDsNCiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7DQogIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7DQogIGJvcmRlci13aWR0aDogNnB4IDA7DQogIC8qcmVtb3ZlIGRlZmF1bHQgdGljayBtYXJrcyovDQogIGNvbG9yOiB0cmFuc3BhcmVudDsNCn0NCg0KaW5wdXRbdHlwZT1yYW5nZV06Oi1tcy1maWxsLWxvd2VyIHsNCiAgYmFja2dyb3VuZDogIzc3NzsNCn0NCg0KaW5wdXRbdHlwZT1yYW5nZV06Oi1tcy1maWxsLXVwcGVyIHsNCiAgYmFja2dyb3VuZDogI2RkZDsNCn0NCg0KaW5wdXRbdHlwZT1yYW5nZV06Oi1tcy10aHVtYiB7DQogIGJvcmRlcjogbm9uZTsNCiAgaGVpZ2h0OiAxNHB4Ow0KICB3aWR0aDogMTRweDsNCiAgYm9yZGVyLXJhZGl1czogNTAlOw0KICBiYWNrZ3JvdW5kOiAjMjZhNjlhOw0KICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtYm94LXNoYWRvdyAuM3M7DQogIHRyYW5zaXRpb246IC13ZWJraXQtYm94LXNoYWRvdyAuM3M7DQogIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjNzOw0KICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IC4zcywgLXdlYmtpdC1ib3gtc2hhZG93IC4zczsNCn0NCg0KLmtleWJvYXJkLWZvY3VzZWQgaW5wdXRbdHlwZT1yYW5nZV06Zm9jdXM6bm90KC5hY3RpdmUpOjotbXMtdGh1bWIgew0KICBib3gtc2hhZG93OiAwIDAgMCAxMHB4IHJnYmEoMzgsIDE2NiwgMTU0LCAwLjI2KTsNCn0NCg0KLyoqKioqKioqKioqKioqKg0KICAgIE5hdiBMaXN0DQoqKioqKioqKioqKioqKiovDQoudGFibGUtb2YtY29udGVudHMuZml4ZWQgew0KICBwb3NpdGlvbjogZml4ZWQ7DQp9DQoNCi50YWJsZS1vZi1jb250ZW50cyBsaSB7DQogIHBhZGRpbmc6IDJweCAwOw0KfQ0KDQoudGFibGUtb2YtY29udGVudHMgYSB7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgZm9udC13ZWlnaHQ6IDMwMDsNCiAgY29sb3I6ICM3NTc1NzU7DQogIHBhZGRpbmctbGVmdDogMTZweDsNCiAgaGVpZ2h0OiAxLjVyZW07DQogIGxpbmUtaGVpZ2h0OiAxLjVyZW07DQogIGxldHRlci1zcGFjaW5nOiAuNDsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KfQ0KDQoudGFibGUtb2YtY29udGVudHMgYTpob3ZlciB7DQogIGNvbG9yOiAjYThhOGE4Ow0KICBwYWRkaW5nLWxlZnQ6IDE1cHg7DQogIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2VlNmU3MzsNCn0NCg0KLnRhYmxlLW9mLWNvbnRlbnRzIGEuYWN0aXZlIHsNCiAgZm9udC13ZWlnaHQ6IDUwMDsNCiAgcGFkZGluZy1sZWZ0OiAxNHB4Ow0KICBib3JkZXItbGVmdDogMnB4IHNvbGlkICNlZTZlNzM7DQp9DQoNCi5zaWRlbmF2IHsNCiAgcG9zaXRpb246IGZpeGVkOw0KICB3aWR0aDogMzAwcHg7DQogIGxlZnQ6IDA7DQogIHRvcDogMDsNCiAgbWFyZ2luOiAwOw0KICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSk7DQogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDAlKTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBoZWlnaHQ6IGNhbGMoMTAwJSArIDYwcHgpOw0KICBoZWlnaHQ6IC1tb3otY2FsYygxMDAlKTsNCiAgcGFkZGluZy1ib3R0b206IDYwcHg7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogIHotaW5kZXg6IDk5OTsNCiAgb3ZlcmZsb3cteTogYXV0bzsNCiAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTsNCiAgLXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47DQogICAgICAgICAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOw0KICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTA1JSk7DQogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDUlKTsNCn0NCg0KLnNpZGVuYXYucmlnaHQtYWxpZ25lZCB7DQogIHJpZ2h0OiAwOw0KICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDUlKTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTA1JSk7DQogIGxlZnQ6IGF1dG87DQogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDEwMCUpOw0KICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsNCn0NCg0KLnNpZGVuYXYgLmNvbGxhcHNpYmxlIHsNCiAgbWFyZ2luOiAwOw0KfQ0KDQouc2lkZW5hdiBsaSB7DQogIGZsb2F0OiBub25lOw0KICBsaW5lLWhlaWdodDogNDhweDsNCn0NCg0KLnNpZGVuYXYgbGkuYWN0aXZlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjA1KTsNCn0NCg0KLnNpZGVuYXYgbGkgPiBhIHsNCiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44Nyk7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBmb250LXNpemU6IDE0cHg7DQogIGZvbnQtd2VpZ2h0OiA1MDA7DQogIGhlaWdodDogNDhweDsNCiAgbGluZS1oZWlnaHQ6IDQ4cHg7DQogIHBhZGRpbmc6IDAgMzJweDsNCn0NCg0KLnNpZGVuYXYgbGkgPiBhOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjA1KTsNCn0NCg0KLnNpZGVuYXYgbGkgPiBhLmJ0biwgLnNpZGVuYXYgbGkgPiBhLmJ0bi1sYXJnZSwgLnNpZGVuYXYgbGkgPiBhLmJ0bi1zbWFsbCwgLnNpZGVuYXYgbGkgPiBhLmJ0bi1sYXJnZSwgLnNpZGVuYXYgbGkgPiBhLmJ0bi1mbGF0LCAuc2lkZW5hdiBsaSA+IGEuYnRuLWZsb2F0aW5nIHsNCiAgbWFyZ2luOiAxMHB4IDE1cHg7DQp9DQoNCi5zaWRlbmF2IGxpID4gYS5idG4sIC5zaWRlbmF2IGxpID4gYS5idG4tbGFyZ2UsIC5zaWRlbmF2IGxpID4gYS5idG4tc21hbGwsIC5zaWRlbmF2IGxpID4gYS5idG4tbGFyZ2UsIC5zaWRlbmF2IGxpID4gYS5idG4tZmxvYXRpbmcgew0KICBjb2xvcjogI2ZmZjsNCn0NCg0KLnNpZGVuYXYgbGkgPiBhLmJ0bi1mbGF0IHsNCiAgY29sb3I6ICMzNDM0MzQ7DQp9DQoNCi5zaWRlbmF2IGxpID4gYS5idG46aG92ZXIsIC5zaWRlbmF2IGxpID4gYS5idG4tbGFyZ2U6aG92ZXIsIC5zaWRlbmF2IGxpID4gYS5idG4tc21hbGw6aG92ZXIsIC5zaWRlbmF2IGxpID4gYS5idG4tbGFyZ2U6aG92ZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmJiYmFkOw0KfQ0KDQouc2lkZW5hdiBsaSA+IGEuYnRuLWZsb2F0aW5nOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsNCn0NCg0KLnNpZGVuYXYgbGkgPiBhID4gaSwNCi5zaWRlbmF2IGxpID4gYSA+IFtjbGFzc149Im1kaS0iXSwgLnNpZGVuYXYgbGkgPiBhIGxpID4gYSA+IFtjbGFzcyo9Im1kaS0iXSwNCi5zaWRlbmF2IGxpID4gYSA+IGkubWF0ZXJpYWwtaWNvbnMgew0KICBmbG9hdDogbGVmdDsNCiAgaGVpZ2h0OiA0OHB4Ow0KICBsaW5lLWhlaWdodDogNDhweDsNCiAgbWFyZ2luOiAwIDMycHggMCAwOw0KICB3aWR0aDogMjRweDsNCiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41NCk7DQp9DQoNCi5zaWRlbmF2IC5kaXZpZGVyIHsNCiAgbWFyZ2luOiA4cHggMCAwIDA7DQp9DQoNCi5zaWRlbmF2IC5zdWJoZWFkZXIgew0KICBjdXJzb3I6IGluaXRpYWw7DQogIHBvaW50ZXItZXZlbnRzOiBub25lOw0KICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjU0KTsNCiAgZm9udC1zaXplOiAxNHB4Ow0KICBmb250LXdlaWdodDogNTAwOw0KICBsaW5lLWhlaWdodDogNDhweDsNCn0NCg0KLnNpZGVuYXYgLnN1YmhlYWRlcjpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Ow0KfQ0KDQouc2lkZW5hdiAudXNlci12aWV3IHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBwYWRkaW5nOiAzMnB4IDMycHggMDsNCiAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KfQ0KDQouc2lkZW5hdiAudXNlci12aWV3ID4gYSB7DQogIGhlaWdodDogYXV0bzsNCiAgcGFkZGluZzogMDsNCn0NCg0KLnNpZGVuYXYgLnVzZXItdmlldyA+IGE6aG92ZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCn0NCg0KLnNpZGVuYXYgLnVzZXItdmlldyAuYmFja2dyb3VuZCB7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAwOw0KICByaWdodDogMDsNCiAgYm90dG9tOiAwOw0KICBsZWZ0OiAwOw0KICB6LWluZGV4OiAtMTsNCn0NCg0KLnNpZGVuYXYgLnVzZXItdmlldyAuY2lyY2xlLCAuc2lkZW5hdiAudXNlci12aWV3IC5uYW1lLCAuc2lkZW5hdiAudXNlci12aWV3IC5lbWFpbCB7DQogIGRpc3BsYXk6IGJsb2NrOw0KfQ0KDQouc2lkZW5hdiAudXNlci12aWV3IC5jaXJjbGUgew0KICBoZWlnaHQ6IDY0cHg7DQogIHdpZHRoOiA2NHB4Ow0KfQ0KDQouc2lkZW5hdiAudXNlci12aWV3IC5uYW1lLA0KLnNpZGVuYXYgLnVzZXItdmlldyAuZW1haWwgew0KICBmb250LXNpemU6IDE0cHg7DQogIGxpbmUtaGVpZ2h0OiAyNHB4Ow0KfQ0KDQouc2lkZW5hdiAudXNlci12aWV3IC5uYW1lIHsNCiAgbWFyZ2luLXRvcDogMTZweDsNCiAgZm9udC13ZWlnaHQ6IDUwMDsNCn0NCg0KLnNpZGVuYXYgLnVzZXItdmlldyAuZW1haWwgew0KICBwYWRkaW5nLWJvdHRvbTogMTZweDsNCiAgZm9udC13ZWlnaHQ6IDQwMDsNCn0NCg0KLmRyYWctdGFyZ2V0IHsNCiAgaGVpZ2h0OiAxMDAlOw0KICB3aWR0aDogMTBweDsNCiAgcG9zaXRpb246IGZpeGVkOw0KICB0b3A6IDA7DQogIHotaW5kZXg6IDk5ODsNCn0NCg0KLmRyYWctdGFyZ2V0LnJpZ2h0LWFsaWduZWQgew0KICByaWdodDogMDsNCn0NCg0KLnNpZGVuYXYuc2lkZW5hdi1maXhlZCB7DQogIGxlZnQ6IDA7DQogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOw0KICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsNCiAgcG9zaXRpb246IGZpeGVkOw0KfQ0KDQouc2lkZW5hdi5zaWRlbmF2LWZpeGVkLnJpZ2h0LWFsaWduZWQgew0KICByaWdodDogMDsNCiAgbGVmdDogYXV0bzsNCn0NCg0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgew0KICAuc2lkZW5hdi5zaWRlbmF2LWZpeGVkIHsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTA1JSk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwNSUpOw0KICB9DQogIC5zaWRlbmF2LnNpZGVuYXYtZml4ZWQucmlnaHQtYWxpZ25lZCB7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTA1JSk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTA1JSk7DQogIH0NCiAgLnNpZGVuYXYgPiBhIHsNCiAgICBwYWRkaW5nOiAwIDE2cHg7DQogIH0NCiAgLnNpZGVuYXYgLnVzZXItdmlldyB7DQogICAgcGFkZGluZzogMTZweCAxNnB4IDA7DQogIH0NCn0NCg0KLnNpZGVuYXYgLmNvbGxhcHNpYmxlLWJvZHkgPiB1bDpub3QoLmNvbGxhcHNpYmxlKSA+IGxpLmFjdGl2ZSwNCi5zaWRlbmF2LnNpZGVuYXYtZml4ZWQgLmNvbGxhcHNpYmxlLWJvZHkgPiB1bDpub3QoLmNvbGxhcHNpYmxlKSA+IGxpLmFjdGl2ZSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNlZTZlNzM7DQp9DQoNCi5zaWRlbmF2IC5jb2xsYXBzaWJsZS1ib2R5ID4gdWw6bm90KC5jb2xsYXBzaWJsZSkgPiBsaS5hY3RpdmUgYSwNCi5zaWRlbmF2LnNpZGVuYXYtZml4ZWQgLmNvbGxhcHNpYmxlLWJvZHkgPiB1bDpub3QoLmNvbGxhcHNpYmxlKSA+IGxpLmFjdGl2ZSBhIHsNCiAgY29sb3I6ICNmZmY7DQp9DQoNCi5zaWRlbmF2IC5jb2xsYXBzaWJsZS1ib2R5IHsNCiAgcGFkZGluZzogMDsNCn0NCg0KLnNpZGVuYXYtb3ZlcmxheSB7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgdG9wOiAwOw0KICBsZWZ0OiAwOw0KICByaWdodDogMDsNCiAgb3BhY2l0eTogMDsNCiAgaGVpZ2h0OiAxMjB2aDsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpOw0KICB6LWluZGV4OiA5OTc7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi8qDQogICAgQGxpY2Vuc2UNCiAgICBDb3B5cmlnaHQgKGMpIDIwMTQgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLg0KICAgIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQNCiAgICBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dA0KICAgIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dA0KICAgIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvDQogICAgc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHQNCiAqLw0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqLw0KLyogU1RZTEVTIEZPUiBUSEUgU1BJTk5FUiAqLw0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqLw0KLyoNCiAqIENvbnN0YW50czoNCiAqICAgICAgU1RST0tFV0lEVEggPSAzcHgNCiAqICAgICAgQVJDU0laRSAgICAgPSAyNzAgZGVncmVlcyAoYW1vdW50IG9mIGNpcmNsZSB0aGUgYXJjIHRha2VzIHVwKQ0KICogICAgICBBUkNUSU1FICAgICA9IDEzMzNtcyAodGltZSBpdCB0YWtlcyB0byBleHBhbmQgYW5kIGNvbnRyYWN0IGFyYykNCiAqICAgICAgQVJDU1RBUlRST1QgPSAyMTYgZGVncmVlcyAoaG93IG11Y2ggdGhlIHN0YXJ0IGxvY2F0aW9uIG9mIHRoZSBhcmMNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGQgcm90YXRlIGVhY2ggdGltZSwgMjE2IGdpdmVzIHVzIGENCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1IHBvaW50ZWQgc3RhciBzaGFwZSAoaXQncyAzNjAvNSAqIDMpLg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvciBhIDcgcG9pbnRlZCBzdGFyLCB3ZSBtaWdodCBkbw0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDM2MC83ICogMyA9IDE1NC4yODYpDQogKiAgICAgIENPTlRBSU5FUldJRFRIID0gMjhweA0KICogICAgICBTSFJJTktfVElNRSA9IDQwMG1zDQogKi8NCi5wcmVsb2FkZXItd3JhcHBlciB7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICB3aWR0aDogNTBweDsNCiAgaGVpZ2h0OiA1MHB4Ow0KfQ0KDQoucHJlbG9hZGVyLXdyYXBwZXIuc21hbGwgew0KICB3aWR0aDogMzZweDsNCiAgaGVpZ2h0OiAzNnB4Ow0KfQ0KDQoucHJlbG9hZGVyLXdyYXBwZXIuYmlnIHsNCiAgd2lkdGg6IDY0cHg7DQogIGhlaWdodDogNjRweDsNCn0NCg0KLnByZWxvYWRlci13cmFwcGVyLmFjdGl2ZSB7DQogIC8qIGR1cmF0aW9uOiAzNjAgKiBBUkNUSU1FIC8gKEFSQ1NUQVJUUk9UICsgKDM2MC1BUkNTSVpFKSkgKi8NCiAgLXdlYmtpdC1hbmltYXRpb246IGNvbnRhaW5lci1yb3RhdGUgMTU2OG1zIGxpbmVhciBpbmZpbml0ZTsNCiAgYW5pbWF0aW9uOiBjb250YWluZXItcm90YXRlIDE1NjhtcyBsaW5lYXIgaW5maW5pdGU7DQp9DQoNCkAtd2Via2l0LWtleWZyYW1lcyBjb250YWluZXItcm90YXRlIHsNCiAgdG8gew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCiAgfQ0KfQ0KDQpAa2V5ZnJhbWVzIGNvbnRhaW5lci1yb3RhdGUgew0KICB0byB7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCiAgfQ0KfQ0KDQouc3Bpbm5lci1sYXllciB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCiAgb3BhY2l0eTogMDsNCiAgYm9yZGVyLWNvbG9yOiAjMjZhNjlhOw0KfQ0KDQouc3Bpbm5lci1ibHVlLA0KLnNwaW5uZXItYmx1ZS1vbmx5IHsNCiAgYm9yZGVyLWNvbG9yOiAjNDI4NWY0Ow0KfQ0KDQouc3Bpbm5lci1yZWQsDQouc3Bpbm5lci1yZWQtb25seSB7DQogIGJvcmRlci1jb2xvcjogI2RiNDQzNzsNCn0NCg0KLnNwaW5uZXIteWVsbG93LA0KLnNwaW5uZXIteWVsbG93LW9ubHkgew0KICBib3JkZXItY29sb3I6ICNmNGI0MDA7DQp9DQoNCi5zcGlubmVyLWdyZWVuLA0KLnNwaW5uZXItZ3JlZW4tb25seSB7DQogIGJvcmRlci1jb2xvcjogIzBmOWQ1ODsNCn0NCg0KLyoqDQogKiBJTVBPUlRBTlQgTk9URSBBQk9VVCBDU1MgQU5JTUFUSU9OIFBST1BFUlRJRVMgKGtlYW51bGVlKToNCiAqDQogKiBpT1MgU2FmYXJpICh0ZXN0ZWQgb24gaU9TIDguMSkgZG9lcyBub3QgaGFuZGxlIGFuaW1hdGlvbi1kZWxheSB2ZXJ5IHdlbGwgLSBpdCBkb2Vzbid0DQogKiBndWFyYW50ZWUgdGhhdCB0aGUgYW5pbWF0aW9uIHdpbGwgc3RhcnQgX2V4YWN0bHlfIGFmdGVyIHRoYXQgdmFsdWUuIFNvIHdlIGF2b2lkIHVzaW5nDQogKiBhbmltYXRpb24tZGVsYXkgYW5kIGluc3RlYWQgc2V0IGN1c3RvbSBrZXlmcmFtZXMgZm9yIGVhY2ggY29sb3IgKGFzIHJlZHVuZGFudCBhcyBpdA0KICogc2VlbXMpLg0KICoNCiAqIFdlIHdyaXRlIG91dCBlYWNoIGFuaW1hdGlvbiBpbiBmdWxsIChpbnN0ZWFkIG9mIHNlcGFyYXRpbmcgYW5pbWF0aW9uLW5hbWUsDQogKiBhbmltYXRpb24tZHVyYXRpb24sIGV0Yy4pIGJlY2F1c2UgdW5kZXIgdGhlIHBvbHlmaWxsLCBTYWZhcmkgZG9lcyBub3QgcmVjb2duaXplIHRob3NlDQogKiBzcGVjaWZpYyBwcm9wZXJ0aWVzIHByb3Blcmx5LCB0cmVhdHMgdGhlbSBhcyAtd2Via2l0LWFuaW1hdGlvbiwgYW5kIG92ZXJyaWRlcyB0aGUNCiAqIG90aGVyIGFuaW1hdGlvbiBydWxlcy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Qb2x5bWVyL3BsYXRmb3JtL2lzc3Vlcy81My4NCiAqLw0KLmFjdGl2ZSAuc3Bpbm5lci1sYXllci5zcGlubmVyLWJsdWUgew0KICAvKiBkdXJhdGlvbnM6IDQgKiBBUkNUSU1FICovDQogIC13ZWJraXQtYW5pbWF0aW9uOiBmaWxsLXVuZmlsbC1yb3RhdGUgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aCwgYmx1ZS1mYWRlLWluLW91dCA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoOw0KICBhbmltYXRpb246IGZpbGwtdW5maWxsLXJvdGF0ZSA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoLCBibHVlLWZhZGUtaW4tb3V0IDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGg7DQp9DQoNCi5hY3RpdmUgLnNwaW5uZXItbGF5ZXIuc3Bpbm5lci1yZWQgew0KICAvKiBkdXJhdGlvbnM6IDQgKiBBUkNUSU1FICovDQogIC13ZWJraXQtYW5pbWF0aW9uOiBmaWxsLXVuZmlsbC1yb3RhdGUgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aCwgcmVkLWZhZGUtaW4tb3V0IDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGg7DQogIGFuaW1hdGlvbjogZmlsbC11bmZpbGwtcm90YXRlIDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGgsIHJlZC1mYWRlLWluLW91dCA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoOw0KfQ0KDQouYWN0aXZlIC5zcGlubmVyLWxheWVyLnNwaW5uZXIteWVsbG93IHsNCiAgLyogZHVyYXRpb25zOiA0ICogQVJDVElNRSAqLw0KICAtd2Via2l0LWFuaW1hdGlvbjogZmlsbC11bmZpbGwtcm90YXRlIDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGgsIHllbGxvdy1mYWRlLWluLW91dCA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoOw0KICBhbmltYXRpb246IGZpbGwtdW5maWxsLXJvdGF0ZSA1MzMybXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoLCB5ZWxsb3ctZmFkZS1pbi1vdXQgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aDsNCn0NCg0KLmFjdGl2ZSAuc3Bpbm5lci1sYXllci5zcGlubmVyLWdyZWVuIHsNCiAgLyogZHVyYXRpb25zOiA0ICogQVJDVElNRSAqLw0KICAtd2Via2l0LWFuaW1hdGlvbjogZmlsbC11bmZpbGwtcm90YXRlIDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGgsIGdyZWVuLWZhZGUtaW4tb3V0IDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGg7DQogIGFuaW1hdGlvbjogZmlsbC11bmZpbGwtcm90YXRlIDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGgsIGdyZWVuLWZhZGUtaW4tb3V0IDUzMzJtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGg7DQp9DQoNCi5hY3RpdmUgLnNwaW5uZXItbGF5ZXIsDQouYWN0aXZlIC5zcGlubmVyLWxheWVyLnNwaW5uZXItYmx1ZS1vbmx5LA0KLmFjdGl2ZSAuc3Bpbm5lci1sYXllci5zcGlubmVyLXJlZC1vbmx5LA0KLmFjdGl2ZSAuc3Bpbm5lci1sYXllci5zcGlubmVyLXllbGxvdy1vbmx5LA0KLmFjdGl2ZSAuc3Bpbm5lci1sYXllci5zcGlubmVyLWdyZWVuLW9ubHkgew0KICAvKiBkdXJhdGlvbnM6IDQgKiBBUkNUSU1FICovDQogIG9wYWNpdHk6IDE7DQogIC13ZWJraXQtYW5pbWF0aW9uOiBmaWxsLXVuZmlsbC1yb3RhdGUgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aDsNCiAgYW5pbWF0aW9uOiBmaWxsLXVuZmlsbC1yb3RhdGUgNTMzMm1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aDsNCn0NCg0KQC13ZWJraXQta2V5ZnJhbWVzIGZpbGwtdW5maWxsLXJvdGF0ZSB7DQogIDEyLjUlIHsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDEzNWRlZyk7DQogIH0NCiAgLyogMC41ICogQVJDU0laRSAqLw0KICAyNSUgew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMjcwZGVnKTsNCiAgfQ0KICAvKiAxICAgKiBBUkNTSVpFICovDQogIDM3LjUlIHsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDQwNWRlZyk7DQogIH0NCiAgLyogMS41ICogQVJDU0laRSAqLw0KICA1MCUgew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNTQwZGVnKTsNCiAgfQ0KICAvKiAyICAgKiBBUkNTSVpFICovDQogIDYyLjUlIHsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDY3NWRlZyk7DQogIH0NCiAgLyogMi41ICogQVJDU0laRSAqLw0KICA3NSUgew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoODEwZGVnKTsNCiAgfQ0KICAvKiAzICAgKiBBUkNTSVpFICovDQogIDg3LjUlIHsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDk0NWRlZyk7DQogIH0NCiAgLyogMy41ICogQVJDU0laRSAqLw0KICB0byB7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgxMDgwZGVnKTsNCiAgfQ0KICAvKiA0ICAgKiBBUkNTSVpFICovDQp9DQoNCkBrZXlmcmFtZXMgZmlsbC11bmZpbGwtcm90YXRlIHsNCiAgMTIuNSUgew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMTM1ZGVnKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDEzNWRlZyk7DQogIH0NCiAgLyogMC41ICogQVJDU0laRSAqLw0KICAyNSUgew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMjcwZGVnKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDI3MGRlZyk7DQogIH0NCiAgLyogMSAgICogQVJDU0laRSAqLw0KICAzNy41JSB7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg0MDVkZWcpOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoNDA1ZGVnKTsNCiAgfQ0KICAvKiAxLjUgKiBBUkNTSVpFICovDQogIDUwJSB7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg1NDBkZWcpOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoNTQwZGVnKTsNCiAgfQ0KICAvKiAyICAgKiBBUkNTSVpFICovDQogIDYyLjUlIHsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDY3NWRlZyk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg2NzVkZWcpOw0KICB9DQogIC8qIDIuNSAqIEFSQ1NJWkUgKi8NCiAgNzUlIHsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDgxMGRlZyk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg4MTBkZWcpOw0KICB9DQogIC8qIDMgICAqIEFSQ1NJWkUgKi8NCiAgODcuNSUgew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoOTQ1ZGVnKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDk0NWRlZyk7DQogIH0NCiAgLyogMy41ICogQVJDU0laRSAqLw0KICB0byB7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgxMDgwZGVnKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDEwODBkZWcpOw0KICB9DQogIC8qIDQgICAqIEFSQ1NJWkUgKi8NCn0NCg0KQC13ZWJraXQta2V5ZnJhbWVzIGJsdWUtZmFkZS1pbi1vdXQgew0KICBmcm9tIHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIDI1JSB7DQogICAgb3BhY2l0eTogMTsNCiAgfQ0KICAyNiUgew0KICAgIG9wYWNpdHk6IDA7DQogIH0NCiAgODklIHsNCiAgICBvcGFjaXR5OiAwOw0KICB9DQogIDkwJSB7DQogICAgb3BhY2l0eTogMTsNCiAgfQ0KICAxMDAlIHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQp9DQoNCkBrZXlmcmFtZXMgYmx1ZS1mYWRlLWluLW91dCB7DQogIGZyb20gew0KICAgIG9wYWNpdHk6IDE7DQogIH0NCiAgMjUlIHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIDI2JSB7DQogICAgb3BhY2l0eTogMDsNCiAgfQ0KICA4OSUgew0KICAgIG9wYWNpdHk6IDA7DQogIH0NCiAgOTAlIHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIDEwMCUgew0KICAgIG9wYWNpdHk6IDE7DQogIH0NCn0NCg0KQC13ZWJraXQta2V5ZnJhbWVzIHJlZC1mYWRlLWluLW91dCB7DQogIGZyb20gew0KICAgIG9wYWNpdHk6IDA7DQogIH0NCiAgMTUlIHsNCiAgICBvcGFjaXR5OiAwOw0KICB9DQogIDI1JSB7DQogICAgb3BhY2l0eTogMTsNCiAgfQ0KICA1MCUgew0KICAgIG9wYWNpdHk6IDE7DQogIH0NCiAgNTElIHsNCiAgICBvcGFjaXR5OiAwOw0KICB9DQp9DQoNCkBrZXlmcmFtZXMgcmVkLWZhZGUtaW4tb3V0IHsNCiAgZnJvbSB7DQogICAgb3BhY2l0eTogMDsNCiAgfQ0KICAxNSUgew0KICAgIG9wYWNpdHk6IDA7DQogIH0NCiAgMjUlIHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIDUwJSB7DQogICAgb3BhY2l0eTogMTsNCiAgfQ0KICA1MSUgew0KICAgIG9wYWNpdHk6IDA7DQogIH0NCn0NCg0KQC13ZWJraXQta2V5ZnJhbWVzIHllbGxvdy1mYWRlLWluLW91dCB7DQogIGZyb20gew0KICAgIG9wYWNpdHk6IDA7DQogIH0NCiAgNDAlIHsNCiAgICBvcGFjaXR5OiAwOw0KICB9DQogIDUwJSB7DQogICAgb3BhY2l0eTogMTsNCiAgfQ0KICA3NSUgew0KICAgIG9wYWNpdHk6IDE7DQogIH0NCiAgNzYlIHsNCiAgICBvcGFjaXR5OiAwOw0KICB9DQp9DQoNCkBrZXlmcmFtZXMgeWVsbG93LWZhZGUtaW4tb3V0IHsNCiAgZnJvbSB7DQogICAgb3BhY2l0eTogMDsNCiAgfQ0KICA0MCUgew0KICAgIG9wYWNpdHk6IDA7DQogIH0NCiAgNTAlIHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIDc1JSB7DQogICAgb3BhY2l0eTogMTsNCiAgfQ0KICA3NiUgew0KICAgIG9wYWNpdHk6IDA7DQogIH0NCn0NCg0KQC13ZWJraXQta2V5ZnJhbWVzIGdyZWVuLWZhZGUtaW4tb3V0IHsNCiAgZnJvbSB7DQogICAgb3BhY2l0eTogMDsNCiAgfQ0KICA2NSUgew0KICAgIG9wYWNpdHk6IDA7DQogIH0NCiAgNzUlIHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIDkwJSB7DQogICAgb3BhY2l0eTogMTsNCiAgfQ0KICAxMDAlIHsNCiAgICBvcGFjaXR5OiAwOw0KICB9DQp9DQoNCkBrZXlmcmFtZXMgZ3JlZW4tZmFkZS1pbi1vdXQgew0KICBmcm9tIHsNCiAgICBvcGFjaXR5OiAwOw0KICB9DQogIDY1JSB7DQogICAgb3BhY2l0eTogMDsNCiAgfQ0KICA3NSUgew0KICAgIG9wYWNpdHk6IDE7DQogIH0NCiAgOTAlIHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIDEwMCUgew0KICAgIG9wYWNpdHk6IDA7DQogIH0NCn0NCg0KLyoqDQogKiBQYXRjaCB0aGUgZ2FwIHRoYXQgYXBwZWFyIGJldHdlZW4gdGhlIHR3byBhZGphY2VudCBkaXYuY2lyY2xlLWNsaXBwZXIgd2hpbGUgdGhlDQogKiBzcGlubmVyIGlzIHJvdGF0aW5nIChhcHBlYXJzIG9uIENocm9tZSAzOCwgU2FmYXJpIDcuMSwgYW5kIElFIDExKS4NCiAqLw0KLmdhcC1wYXRjaCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAwOw0KICBsZWZ0OiA0NSU7DQogIHdpZHRoOiAxMCU7DQogIGhlaWdodDogMTAwJTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgYm9yZGVyLWNvbG9yOiBpbmhlcml0Ow0KfQ0KDQouZ2FwLXBhdGNoIC5jaXJjbGUgew0KICB3aWR0aDogMTAwMCU7DQogIGxlZnQ6IC00NTAlOw0KfQ0KDQouY2lyY2xlLWNsaXBwZXIgew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgd2lkdGg6IDUwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KICBib3JkZXItY29sb3I6IGluaGVyaXQ7DQp9DQoNCi5jaXJjbGUtY2xpcHBlciAuY2lyY2xlIHsNCiAgd2lkdGg6IDIwMCU7DQogIGhlaWdodDogMTAwJTsNCiAgYm9yZGVyLXdpZHRoOiAzcHg7DQogIC8qIFNUUk9LRVdJRFRIICovDQogIGJvcmRlci1zdHlsZTogc29saWQ7DQogIGJvcmRlci1jb2xvcjogaW5oZXJpdDsNCiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsNCiAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAtd2Via2l0LWFuaW1hdGlvbjogbm9uZTsNCiAgYW5pbWF0aW9uOiBub25lOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMDsNCiAgcmlnaHQ6IDA7DQogIGJvdHRvbTogMDsNCn0NCg0KLmNpcmNsZS1jbGlwcGVyLmxlZnQgLmNpcmNsZSB7DQogIGxlZnQ6IDA7DQogIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgxMjlkZWcpOw0KICB0cmFuc2Zvcm06IHJvdGF0ZSgxMjlkZWcpOw0KfQ0KDQouY2lyY2xlLWNsaXBwZXIucmlnaHQgLmNpcmNsZSB7DQogIGxlZnQ6IC0xMDAlOw0KICBib3JkZXItbGVmdC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgtMTI5ZGVnKTsNCiAgdHJhbnNmb3JtOiByb3RhdGUoLTEyOWRlZyk7DQp9DQoNCi5hY3RpdmUgLmNpcmNsZS1jbGlwcGVyLmxlZnQgLmNpcmNsZSB7DQogIC8qIGR1cmF0aW9uOiBBUkNUSU1FICovDQogIC13ZWJraXQtYW5pbWF0aW9uOiBsZWZ0LXNwaW4gMTMzM21zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aDsNCiAgYW5pbWF0aW9uOiBsZWZ0LXNwaW4gMTMzM21zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSkgaW5maW5pdGUgYm90aDsNCn0NCg0KLmFjdGl2ZSAuY2lyY2xlLWNsaXBwZXIucmlnaHQgLmNpcmNsZSB7DQogIC8qIGR1cmF0aW9uOiBBUkNUSU1FICovDQogIC13ZWJraXQtYW5pbWF0aW9uOiByaWdodC1zcGluIDEzMzNtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGluZmluaXRlIGJvdGg7DQogIGFuaW1hdGlvbjogcmlnaHQtc3BpbiAxMzMzbXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSBpbmZpbml0ZSBib3RoOw0KfQ0KDQpALXdlYmtpdC1rZXlmcmFtZXMgbGVmdC1zcGluIHsNCiAgZnJvbSB7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgxMzBkZWcpOw0KICB9DQogIDUwJSB7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgtNWRlZyk7DQogIH0NCiAgdG8gew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMTMwZGVnKTsNCiAgfQ0KfQ0KDQpAa2V5ZnJhbWVzIGxlZnQtc3BpbiB7DQogIGZyb20gew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMTMwZGVnKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDEzMGRlZyk7DQogIH0NCiAgNTAlIHsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC01ZGVnKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKC01ZGVnKTsNCiAgfQ0KICB0byB7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgxMzBkZWcpOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMTMwZGVnKTsNCiAgfQ0KfQ0KDQpALXdlYmtpdC1rZXlmcmFtZXMgcmlnaHQtc3BpbiB7DQogIGZyb20gew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoLTEzMGRlZyk7DQogIH0NCiAgNTAlIHsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDVkZWcpOw0KICB9DQogIHRvIHsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC0xMzBkZWcpOw0KICB9DQp9DQoNCkBrZXlmcmFtZXMgcmlnaHQtc3BpbiB7DQogIGZyb20gew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoLTEzMGRlZyk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtMTMwZGVnKTsNCiAgfQ0KICA1MCUgew0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNWRlZyk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg1ZGVnKTsNCiAgfQ0KICB0byB7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgtMTMwZGVnKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKC0xMzBkZWcpOw0KICB9DQp9DQoNCiNzcGlubmVyQ29udGFpbmVyLmNvb2xkb3duIHsNCiAgLyogZHVyYXRpb246IFNIUklOS19USU1FICovDQogIC13ZWJraXQtYW5pbWF0aW9uOiBjb250YWluZXItcm90YXRlIDE1NjhtcyBsaW5lYXIgaW5maW5pdGUsIGZhZGUtb3V0IDQwMG1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7DQogIGFuaW1hdGlvbjogY29udGFpbmVyLXJvdGF0ZSAxNTY4bXMgbGluZWFyIGluZmluaXRlLCBmYWRlLW91dCA0MDBtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOw0KfQ0KDQpALXdlYmtpdC1rZXlmcmFtZXMgZmFkZS1vdXQgew0KICBmcm9tIHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIHRvIHsNCiAgICBvcGFjaXR5OiAwOw0KICB9DQp9DQoNCkBrZXlmcmFtZXMgZmFkZS1vdXQgew0KICBmcm9tIHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIHRvIHsNCiAgICBvcGFjaXR5OiAwOw0KICB9DQp9DQoNCi5zbGlkZXIgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIGhlaWdodDogNDAwcHg7DQogIHdpZHRoOiAxMDAlOw0KfQ0KDQouc2xpZGVyLmZ1bGxzY3JlZW4gew0KICBoZWlnaHQ6IDEwMCU7DQogIHdpZHRoOiAxMDAlOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgcmlnaHQ6IDA7DQogIGJvdHRvbTogMDsNCn0NCg0KLnNsaWRlci5mdWxsc2NyZWVuIHVsLnNsaWRlcyB7DQogIGhlaWdodDogMTAwJTsNCn0NCg0KLnNsaWRlci5mdWxsc2NyZWVuIHVsLmluZGljYXRvcnMgew0KICB6LWluZGV4OiAyOw0KICBib3R0b206IDMwcHg7DQp9DQoNCi5zbGlkZXIgLnNsaWRlcyB7DQogIGJhY2tncm91bmQtY29sb3I6ICM5ZTllOWU7DQogIG1hcmdpbjogMDsNCiAgaGVpZ2h0OiA0MDBweDsNCn0NCg0KLnNsaWRlciAuc2xpZGVzIGxpIHsNCiAgb3BhY2l0eTogMDsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0b3A6IDA7DQogIGxlZnQ6IDA7DQogIHotaW5kZXg6IDE7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IGluaGVyaXQ7DQogIG92ZXJmbG93OiBoaWRkZW47DQp9DQoNCi5zbGlkZXIgLnNsaWRlcyBsaSBpbWcgew0KICBoZWlnaHQ6IDEwMCU7DQogIHdpZHRoOiAxMDAlOw0KICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOw0KICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7DQp9DQoNCi5zbGlkZXIgLnNsaWRlcyBsaSAuY2FwdGlvbiB7DQogIGNvbG9yOiAjZmZmOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMTUlOw0KICBsZWZ0OiAxNSU7DQogIHdpZHRoOiA3MCU7DQogIG9wYWNpdHk6IDA7DQp9DQoNCi5zbGlkZXIgLnNsaWRlcyBsaSAuY2FwdGlvbiBwIHsNCiAgY29sb3I6ICNlMGUwZTA7DQp9DQoNCi5zbGlkZXIgLnNsaWRlcyBsaS5hY3RpdmUgew0KICB6LWluZGV4OiAyOw0KfQ0KDQouc2xpZGVyIC5pbmRpY2F0b3JzIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGxlZnQ6IDA7DQogIHJpZ2h0OiAwOw0KICBib3R0b206IDA7DQogIG1hcmdpbjogMDsNCn0NCg0KLnNsaWRlciAuaW5kaWNhdG9ycyAuaW5kaWNhdG9yLWl0ZW0gew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBoZWlnaHQ6IDE2cHg7DQogIHdpZHRoOiAxNnB4Ow0KICBtYXJnaW46IDAgMTJweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2UwZTBlMDsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zczsNCiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3M7DQogIGJvcmRlci1yYWRpdXM6IDUwJTsNCn0NCg0KLnNsaWRlciAuaW5kaWNhdG9ycyAuaW5kaWNhdG9yLWl0ZW0uYWN0aXZlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzRDQUY1MDsNCn0NCg0KLmNhcm91c2VsIHsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiA0MDBweDsNCiAgLXdlYmtpdC1wZXJzcGVjdGl2ZTogNTAwcHg7DQogICAgICAgICAgcGVyc3BlY3RpdmU6IDUwMHB4Ow0KICAtd2Via2l0LXRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7DQogICAgICAgICAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDsNCiAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAwJSA1MCU7DQogICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMCUgNTAlOw0KfQ0KDQouY2Fyb3VzZWwuY2Fyb3VzZWwtc2xpZGVyIHsNCiAgdG9wOiAwOw0KICBsZWZ0OiAwOw0KfQ0KDQouY2Fyb3VzZWwuY2Fyb3VzZWwtc2xpZGVyIC5jYXJvdXNlbC1maXhlZC1pdGVtIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBsZWZ0OiAwOw0KICByaWdodDogMDsNCiAgYm90dG9tOiAyMHB4Ow0KICB6LWluZGV4OiAxOw0KfQ0KDQouY2Fyb3VzZWwuY2Fyb3VzZWwtc2xpZGVyIC5jYXJvdXNlbC1maXhlZC1pdGVtLndpdGgtaW5kaWNhdG9ycyB7DQogIGJvdHRvbTogNjhweDsNCn0NCg0KLmNhcm91c2VsLmNhcm91c2VsLXNsaWRlciAuY2Fyb3VzZWwtaXRlbSB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIG1pbi1oZWlnaHQ6IDQwMHB4Ow0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCn0NCg0KLmNhcm91c2VsLmNhcm91c2VsLXNsaWRlciAuY2Fyb3VzZWwtaXRlbSBoMiB7DQogIGZvbnQtc2l6ZTogMjRweDsNCiAgZm9udC13ZWlnaHQ6IDUwMDsNCiAgbGluZS1oZWlnaHQ6IDMycHg7DQp9DQoNCi5jYXJvdXNlbC5jYXJvdXNlbC1zbGlkZXIgLmNhcm91c2VsLWl0ZW0gcCB7DQogIGZvbnQtc2l6ZTogMTVweDsNCn0NCg0KLmNhcm91c2VsIC5jYXJvdXNlbC1pdGVtIHsNCiAgdmlzaWJpbGl0eTogaGlkZGVuOw0KICB3aWR0aDogMjAwcHg7DQogIGhlaWdodDogMjAwcHg7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAwOw0KICBsZWZ0OiAwOw0KfQ0KDQouY2Fyb3VzZWwgLmNhcm91c2VsLWl0ZW0gPiBpbWcgew0KICB3aWR0aDogMTAwJTsNCn0NCg0KLmNhcm91c2VsIC5pbmRpY2F0b3JzIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGxlZnQ6IDA7DQogIHJpZ2h0OiAwOw0KICBib3R0b206IDA7DQogIG1hcmdpbjogMDsNCn0NCg0KLmNhcm91c2VsIC5pbmRpY2F0b3JzIC5pbmRpY2F0b3ItaXRlbSB7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBjdXJzb3I6IHBvaW50ZXI7DQogIGhlaWdodDogOHB4Ow0KICB3aWR0aDogOHB4Ow0KICBtYXJnaW46IDI0cHggNHB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3M7DQogIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjNzOw0KICBib3JkZXItcmFkaXVzOiA1MCU7DQp9DQoNCi5jYXJvdXNlbCAuaW5kaWNhdG9ycyAuaW5kaWNhdG9yLWl0ZW0uYWN0aXZlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCn0NCg0KLmNhcm91c2VsLnNjcm9sbGluZyAuY2Fyb3VzZWwtaXRlbSAubWF0ZXJpYWxib3hlZCwNCi5jYXJvdXNlbCAuY2Fyb3VzZWwtaXRlbTpub3QoLmFjdGl2ZSkgLm1hdGVyaWFsYm94ZWQgew0KICBwb2ludGVyLWV2ZW50czogbm9uZTsNCn0NCg0KLnRhcC10YXJnZXQtd3JhcHBlciB7DQogIHdpZHRoOiA4MDBweDsNCiAgaGVpZ2h0OiA4MDBweDsNCiAgcG9zaXRpb246IGZpeGVkOw0KICB6LWluZGV4OiAxMDAwOw0KICB2aXNpYmlsaXR5OiBoaWRkZW47DQogIC13ZWJraXQtdHJhbnNpdGlvbjogdmlzaWJpbGl0eSAwcyAuM3M7DQogIHRyYW5zaXRpb246IHZpc2liaWxpdHkgMHMgLjNzOw0KfQ0KDQoudGFwLXRhcmdldC13cmFwcGVyLm9wZW4gew0KICB2aXNpYmlsaXR5OiB2aXNpYmxlOw0KICAtd2Via2l0LXRyYW5zaXRpb246IHZpc2liaWxpdHkgMHM7DQogIHRyYW5zaXRpb246IHZpc2liaWxpdHkgMHM7DQp9DQoNCi50YXAtdGFyZ2V0LXdyYXBwZXIub3BlbiAudGFwLXRhcmdldCB7DQogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgxKTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpOw0KICBvcGFjaXR5OiAuOTU7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKSwgLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSk7DQogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSksIC13ZWJraXQtdHJhbnNmb3JtIDAuM3MgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpOw0KICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSksIG9wYWNpdHkgMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSk7DQogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKSwgb3BhY2l0eSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKSwgLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSk7DQp9DQoNCi50YXAtdGFyZ2V0LXdyYXBwZXIub3BlbiAudGFwLXRhcmdldC13YXZlOjpiZWZvcmUgew0KICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMSk7DQogICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTsNCn0NCg0KLnRhcC10YXJnZXQtd3JhcHBlci5vcGVuIC50YXAtdGFyZ2V0LXdhdmU6OmFmdGVyIHsNCiAgdmlzaWJpbGl0eTogdmlzaWJsZTsNCiAgLXdlYmtpdC1hbmltYXRpb246IHB1bHNlLWFuaW1hdGlvbiAxcyBjdWJpYy1iZXppZXIoMC4yNCwgMCwgMC4zOCwgMSkgaW5maW5pdGU7DQogICAgICAgICAgYW5pbWF0aW9uOiBwdWxzZS1hbmltYXRpb24gMXMgY3ViaWMtYmV6aWVyKDAuMjQsIDAsIDAuMzgsIDEpIGluZmluaXRlOw0KICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgLjNzLA0KIHZpc2liaWxpdHkgMHMgMXMsDQogLXdlYmtpdC10cmFuc2Zvcm0gLjNzOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4zcywNCiB2aXNpYmlsaXR5IDBzIDFzLA0KIC13ZWJraXQtdHJhbnNmb3JtIC4zczsNCiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuM3MsDQogdHJhbnNmb3JtIC4zcywNCiB2aXNpYmlsaXR5IDBzIDFzOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4zcywNCiB0cmFuc2Zvcm0gLjNzLA0KIHZpc2liaWxpdHkgMHMgMXMsDQogLXdlYmtpdC10cmFuc2Zvcm0gLjNzOw0KfQ0KDQoudGFwLXRhcmdldCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgZm9udC1zaXplOiAxcmVtOw0KICBib3JkZXItcmFkaXVzOiA1MCU7DQogIGJhY2tncm91bmQtY29sb3I6ICNlZTZlNzM7DQogIC13ZWJraXQtYm94LXNoYWRvdzogMCAyMHB4IDIwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDEwcHggNTBweCAwIHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgMzBweCAxMHB4IC0yMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgICAgICAgICBib3gtc2hhZG93OiAwIDIwcHggMjBweCAwIHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgMTBweCA1MHB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAzMHB4IDEwcHggLTIwcHggcmdiYSgwLCAwLCAwLCAwLjIpOw0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBvcGFjaXR5OiAwOw0KICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMCk7DQogICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwKTsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3MgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpLCAtd2Via2l0LXRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKTsNCiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKSwgLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSk7DQogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKSwgb3BhY2l0eSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKTsNCiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpLCBvcGFjaXR5IDAuM3MgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpLCAtd2Via2l0LXRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKTsNCn0NCg0KLnRhcC10YXJnZXQtY29udGVudCB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgZGlzcGxheTogdGFibGUtY2VsbDsNCn0NCg0KLnRhcC10YXJnZXQtd2F2ZSB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgYm9yZGVyLXJhZGl1czogNTAlOw0KICB6LWluZGV4OiAxMDAwMTsNCn0NCg0KLnRhcC10YXJnZXQtd2F2ZTo6YmVmb3JlLCAudGFwLXRhcmdldC13YXZlOjphZnRlciB7DQogIGNvbnRlbnQ6ICcnOw0KICBkaXNwbGF5OiBibG9jazsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBib3JkZXItcmFkaXVzOiA1MCU7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7DQp9DQoNCi50YXAtdGFyZ2V0LXdhdmU6OmJlZm9yZSB7DQogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwKTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApOw0KICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIC4zczsNCiAgdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gLjNzOw0KICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjNzOw0KICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjNzLCAtd2Via2l0LXRyYW5zZm9ybSAuM3M7DQp9DQoNCi50YXAtdGFyZ2V0LXdhdmU6OmFmdGVyIHsNCiAgdmlzaWJpbGl0eTogaGlkZGVuOw0KICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgLjNzLA0KIHZpc2liaWxpdHkgMHMsDQogLXdlYmtpdC10cmFuc2Zvcm0gLjNzOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4zcywNCiB2aXNpYmlsaXR5IDBzLA0KIC13ZWJraXQtdHJhbnNmb3JtIC4zczsNCiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuM3MsDQogdHJhbnNmb3JtIC4zcywNCiB2aXNpYmlsaXR5IDBzOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4zcywNCiB0cmFuc2Zvcm0gLjNzLA0KIHZpc2liaWxpdHkgMHMsDQogLXdlYmtpdC10cmFuc2Zvcm0gLjNzOw0KICB6LWluZGV4OiAtMTsNCn0NCg0KLnRhcC10YXJnZXQtb3JpZ2luIHsNCiAgdG9wOiA1MCU7DQogIGxlZnQ6IDUwJTsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsNCiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsNCiAgei1pbmRleDogMTAwMDI7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50Ow0KfQ0KDQoudGFwLXRhcmdldC1vcmlnaW46bm90KC5idG4pOm5vdCguYnRuLWxhcmdlKTpub3QoLmJ0bi1zbWFsbCksIC50YXAtdGFyZ2V0LW9yaWdpbjpub3QoLmJ0bik6bm90KC5idG4tbGFyZ2UpOm5vdCguYnRuLXNtYWxsKTpob3ZlciB7DQogIGJhY2tncm91bmQ6IG5vbmU7DQp9DQoNCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNjAwcHgpIHsNCiAgLnRhcC10YXJnZXQsIC50YXAtdGFyZ2V0LXdyYXBwZXIgew0KICAgIHdpZHRoOiA2MDBweDsNCiAgICBoZWlnaHQ6IDYwMHB4Ow0KICB9DQp9DQoNCi5wdWxzZSB7DQogIG92ZXJmbG93OiB2aXNpYmxlOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi5wdWxzZTo6YmVmb3JlIHsNCiAgY29udGVudDogJyc7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgYmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDsNCiAgYm9yZGVyLXJhZGl1czogaW5oZXJpdDsNCiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IC4zcywgLXdlYmtpdC10cmFuc2Zvcm0gLjNzOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4zcywgLXdlYmtpdC10cmFuc2Zvcm0gLjNzOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4zcywgdHJhbnNmb3JtIC4zczsNCiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuM3MsIHRyYW5zZm9ybSAuM3MsIC13ZWJraXQtdHJhbnNmb3JtIC4zczsNCiAgLXdlYmtpdC1hbmltYXRpb246IHB1bHNlLWFuaW1hdGlvbiAxcyBjdWJpYy1iZXppZXIoMC4yNCwgMCwgMC4zOCwgMSkgaW5maW5pdGU7DQogICAgICAgICAgYW5pbWF0aW9uOiBwdWxzZS1hbmltYXRpb24gMXMgY3ViaWMtYmV6aWVyKDAuMjQsIDAsIDAuMzgsIDEpIGluZmluaXRlOw0KICB6LWluZGV4OiAtMTsNCn0NCg0KQC13ZWJraXQta2V5ZnJhbWVzIHB1bHNlLWFuaW1hdGlvbiB7DQogIDAlIHsNCiAgICBvcGFjaXR5OiAxOw0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgxKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7DQogIH0NCiAgNTAlIHsNCiAgICBvcGFjaXR5OiAwOw0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgxLjUpOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjUpOw0KICB9DQogIDEwMCUgew0KICAgIG9wYWNpdHk6IDA7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEuNSk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuNSk7DQogIH0NCn0NCg0KQGtleWZyYW1lcyBwdWxzZS1hbmltYXRpb24gew0KICAwJSB7DQogICAgb3BhY2l0eTogMTsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMSk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpOw0KICB9DQogIDUwJSB7DQogICAgb3BhY2l0eTogMDsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMS41KTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS41KTsNCiAgfQ0KICAxMDAlIHsNCiAgICBvcGFjaXR5OiAwOw0KICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgxLjUpOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjUpOw0KICB9DQp9DQoNCi8qIE1vZGFsICovDQouZGF0ZXBpY2tlci1tb2RhbCB7DQogIG1heC13aWR0aDogMzI1cHg7DQogIG1pbi13aWR0aDogMzAwcHg7DQogIG1heC1oZWlnaHQ6IG5vbmU7DQp9DQoNCi5kYXRlcGlja2VyLWNvbnRhaW5lci5tb2RhbC1jb250ZW50IHsNCiAgZGlzcGxheTogLXdlYmtpdC1ib3g7DQogIGRpc3BsYXk6IC13ZWJraXQtZmxleDsNCiAgZGlzcGxheTogLW1zLWZsZXhib3g7DQogIGRpc3BsYXk6IGZsZXg7DQogIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7DQogIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsOw0KICAtd2Via2l0LWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAtbXMtZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICBwYWRkaW5nOiAwOw0KfQ0KDQouZGF0ZXBpY2tlci1jb250cm9scyB7DQogIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogIGRpc3BsYXk6IC1tcy1mbGV4Ym94Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICAtd2Via2l0LWJveC1wYWNrOiBqdXN0aWZ5Ow0KICAtd2Via2l0LWp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICAgIC1tcy1mbGV4LXBhY2s6IGp1c3RpZnk7DQogICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICB3aWR0aDogMjgwcHg7DQogIG1hcmdpbjogMCBhdXRvOw0KfQ0KDQouZGF0ZXBpY2tlci1jb250cm9scyAuc2VsZWN0cy1jb250YWluZXIgew0KICBkaXNwbGF5OiAtd2Via2l0LWJveDsNCiAgZGlzcGxheTogLXdlYmtpdC1mbGV4Ow0KICBkaXNwbGF5OiAtbXMtZmxleGJveDsNCiAgZGlzcGxheTogZmxleDsNCn0NCg0KLmRhdGVwaWNrZXItY29udHJvbHMgLnNlbGVjdC13cmFwcGVyIGlucHV0IHsNCiAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBtYXJnaW46IDA7DQp9DQoNCi5kYXRlcGlja2VyLWNvbnRyb2xzIC5zZWxlY3Qtd3JhcHBlciBpbnB1dDpmb2N1cyB7DQogIGJvcmRlci1ib3R0b206IG5vbmU7DQp9DQoNCi5kYXRlcGlja2VyLWNvbnRyb2xzIC5zZWxlY3Qtd3JhcHBlciAuY2FyZXQgew0KICBkaXNwbGF5OiBub25lOw0KfQ0KDQouZGF0ZXBpY2tlci1jb250cm9scyAuc2VsZWN0LXllYXIgaW5wdXQgew0KICB3aWR0aDogNTBweDsNCn0NCg0KLmRhdGVwaWNrZXItY29udHJvbHMgLnNlbGVjdC1tb250aCBpbnB1dCB7DQogIHdpZHRoOiA3MHB4Ow0KfQ0KDQoubW9udGgtcHJldiwgLm1vbnRoLW5leHQgew0KICBtYXJnaW4tdG9wOiA0cHg7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQogIGJvcmRlcjogbm9uZTsNCn0NCg0KLyogRGF0ZSBEaXNwbGF5ICovDQouZGF0ZXBpY2tlci1kYXRlLWRpc3BsYXkgew0KICAtd2Via2l0LWJveC1mbGV4OiAxOw0KICAtd2Via2l0LWZsZXg6IDEgYXV0bzsNCiAgICAgIC1tcy1mbGV4OiAxIGF1dG87DQogICAgICAgICAgZmxleDogMSBhdXRvOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjZhNjlhOw0KICBjb2xvcjogI2ZmZjsNCiAgcGFkZGluZzogMjBweCAyMnB4Ow0KICBmb250LXdlaWdodDogNTAwOw0KfQ0KDQouZGF0ZXBpY2tlci1kYXRlLWRpc3BsYXkgLnllYXItdGV4dCB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBmb250LXNpemU6IDEuNXJlbTsNCiAgbGluZS1oZWlnaHQ6IDI1cHg7DQogIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyk7DQp9DQoNCi5kYXRlcGlja2VyLWRhdGUtZGlzcGxheSAuZGF0ZS10ZXh0IHsNCiAgZGlzcGxheTogYmxvY2s7DQogIGZvbnQtc2l6ZTogMi44cmVtOw0KICBsaW5lLWhlaWdodDogNDdweDsNCiAgZm9udC13ZWlnaHQ6IDUwMDsNCn0NCg0KLyogQ2FsZW5kYXIgKi8NCi5kYXRlcGlja2VyLWNhbGVuZGFyLWNvbnRhaW5lciB7DQogIC13ZWJraXQtYm94LWZsZXg6IDIuNTsNCiAgLXdlYmtpdC1mbGV4OiAyLjUgYXV0bzsNCiAgICAgIC1tcy1mbGV4OiAyLjUgYXV0bzsNCiAgICAgICAgICBmbGV4OiAyLjUgYXV0bzsNCn0NCg0KLmRhdGVwaWNrZXItdGFibGUgew0KICB3aWR0aDogMjgwcHg7DQogIGZvbnQtc2l6ZTogMXJlbTsNCiAgbWFyZ2luOiAwIGF1dG87DQp9DQoNCi5kYXRlcGlja2VyLXRhYmxlIHRoZWFkIHsNCiAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCn0NCg0KLmRhdGVwaWNrZXItdGFibGUgdGggew0KICBwYWRkaW5nOiAxMHB4IDVweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KDQouZGF0ZXBpY2tlci10YWJsZSB0ciB7DQogIGJvcmRlcjogbm9uZTsNCn0NCg0KLmRhdGVwaWNrZXItdGFibGUgYWJiciB7DQogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgY29sb3I6ICM5OTk7DQp9DQoNCi5kYXRlcGlja2VyLXRhYmxlIHRkIHsNCiAgYm9yZGVyLXJhZGl1czogNTAlOw0KICBwYWRkaW5nOiAwOw0KfQ0KDQouZGF0ZXBpY2tlci10YWJsZSB0ZC5pcy10b2RheSB7DQogIGNvbG9yOiAjMjZhNjlhOw0KfQ0KDQouZGF0ZXBpY2tlci10YWJsZSB0ZC5pcy1zZWxlY3RlZCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMyNmE2OWE7DQogIGNvbG9yOiAjZmZmOw0KfQ0KDQouZGF0ZXBpY2tlci10YWJsZSB0ZC5pcy1vdXRzaWRlLWN1cnJlbnQtbW9udGgsIC5kYXRlcGlja2VyLXRhYmxlIHRkLmlzLWRpc2FibGVkIHsNCiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4zKTsNCiAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQoNCi5kYXRlcGlja2VyLWRheS1idXR0b24gew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgYm9yZGVyOiBub25lOw0KICBsaW5lLWhlaWdodDogMzhweDsNCiAgZGlzcGxheTogYmxvY2s7DQogIHdpZHRoOiAxMDAlOw0KICBib3JkZXItcmFkaXVzOiA1MCU7DQogIHBhZGRpbmc6IDAgNXB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQogIGNvbG9yOiBpbmhlcml0Ow0KfQ0KDQouZGF0ZXBpY2tlci1kYXktYnV0dG9uOmZvY3VzIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg0MywgMTYxLCAxNTAsIDAuMjUpOw0KfQ0KDQovKiBGb290ZXIgKi8NCi5kYXRlcGlja2VyLWZvb3RlciB7DQogIHdpZHRoOiAyODBweDsNCiAgbWFyZ2luOiAwIGF1dG87DQogIHBhZGRpbmctYm90dG9tOiA1cHg7DQogIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogIGRpc3BsYXk6IC1tcy1mbGV4Ym94Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICAtd2Via2l0LWJveC1wYWNrOiBqdXN0aWZ5Ow0KICAtd2Via2l0LWp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICAgIC1tcy1mbGV4LXBhY2s6IGp1c3RpZnk7DQogICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KfQ0KDQouZGF0ZXBpY2tlci1jYW5jZWwsDQouZGF0ZXBpY2tlci1jbGVhciwNCi5kYXRlcGlja2VyLXRvZGF5LA0KLmRhdGVwaWNrZXItZG9uZSB7DQogIGNvbG9yOiAjMjZhNjlhOw0KICBwYWRkaW5nOiAwIDFyZW07DQp9DQoNCi5kYXRlcGlja2VyLWNsZWFyIHsNCiAgY29sb3I6ICNGNDQzMzY7DQp9DQoNCi8qIE1lZGlhIFF1ZXJpZXMgKi8NCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAxcHgpIHsNCiAgLmRhdGVwaWNrZXItbW9kYWwgew0KICAgIG1heC13aWR0aDogNjI1cHg7DQogIH0NCiAgLmRhdGVwaWNrZXItY29udGFpbmVyLm1vZGFsLWNvbnRlbnQgew0KICAgIC13ZWJraXQtYm94LW9yaWVudDogaG9yaXpvbnRhbDsNCiAgICAtd2Via2l0LWJveC1kaXJlY3Rpb246IG5vcm1hbDsNCiAgICAtd2Via2l0LWZsZXgtZGlyZWN0aW9uOiByb3c7DQogICAgICAgIC1tcy1mbGV4LWRpcmVjdGlvbjogcm93Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdzsNCiAgfQ0KICAuZGF0ZXBpY2tlci1kYXRlLWRpc3BsYXkgew0KICAgIC13ZWJraXQtYm94LWZsZXg6IDA7DQogICAgLXdlYmtpdC1mbGV4OiAwIDEgMjcwcHg7DQogICAgICAgIC1tcy1mbGV4OiAwIDEgMjcwcHg7DQogICAgICAgICAgICBmbGV4OiAwIDEgMjcwcHg7DQogIH0NCiAgLmRhdGVwaWNrZXItY29udHJvbHMsDQogIC5kYXRlcGlja2VyLXRhYmxlLA0KICAuZGF0ZXBpY2tlci1mb290ZXIgew0KICAgIHdpZHRoOiAzMjBweDsNCiAgfQ0KICAuZGF0ZXBpY2tlci1kYXktYnV0dG9uIHsNCiAgICBsaW5lLWhlaWdodDogNDRweDsNCiAgfQ0KfQ0KDQovKiBUaW1lcGlja2VyIENvbnRhaW5lcnMgKi8NCi50aW1lcGlja2VyLW1vZGFsIHsNCiAgbWF4LXdpZHRoOiAzMjVweDsNCiAgbWF4LWhlaWdodDogbm9uZTsNCn0NCg0KLnRpbWVwaWNrZXItY29udGFpbmVyLm1vZGFsLWNvbnRlbnQgew0KICBkaXNwbGF5OiAtd2Via2l0LWJveDsNCiAgZGlzcGxheTogLXdlYmtpdC1mbGV4Ow0KICBkaXNwbGF5OiAtbXMtZmxleGJveDsNCiAgZGlzcGxheTogZmxleDsNCiAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDsNCiAgLXdlYmtpdC1ib3gtZGlyZWN0aW9uOiBub3JtYWw7DQogIC13ZWJraXQtZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogIHBhZGRpbmc6IDA7DQp9DQoNCi50ZXh0LXByaW1hcnkgew0KICBjb2xvcjogd2hpdGU7DQp9DQoNCi8qIENsb2NrIERpZ2l0YWwgRGlzcGxheSAqLw0KLnRpbWVwaWNrZXItZGlnaXRhbC1kaXNwbGF5IHsNCiAgLXdlYmtpdC1ib3gtZmxleDogMTsNCiAgLXdlYmtpdC1mbGV4OiAxIGF1dG87DQogICAgICAtbXMtZmxleDogMSBhdXRvOw0KICAgICAgICAgIGZsZXg6IDEgYXV0bzsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY5YTsNCiAgcGFkZGluZzogMTBweDsNCiAgZm9udC13ZWlnaHQ6IDMwMDsNCn0NCg0KLnRpbWVwaWNrZXItdGV4dC1jb250YWluZXIgew0KICBmb250LXNpemU6IDRyZW07DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNik7DQogIGZvbnQtd2VpZ2h0OiA0MDA7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsNCiAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsNCiAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsNCiAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTsNCn0NCg0KLnRpbWVwaWNrZXItc3Bhbi1ob3VycywNCi50aW1lcGlja2VyLXNwYW4tbWludXRlcywNCi50aW1lcGlja2VyLXNwYW4tYW0tcG0gZGl2IHsNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KDQoudGltZXBpY2tlci1zcGFuLWhvdXJzIHsNCiAgbWFyZ2luLXJpZ2h0OiAzcHg7DQp9DQoNCi50aW1lcGlja2VyLXNwYW4tbWludXRlcyB7DQogIG1hcmdpbi1sZWZ0OiAzcHg7DQp9DQoNCi50aW1lcGlja2VyLWRpc3BsYXktYW0tcG0gew0KICBmb250LXNpemU6IDEuM3JlbTsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICByaWdodDogMXJlbTsNCiAgYm90dG9tOiAxcmVtOw0KICBmb250LXdlaWdodDogNDAwOw0KfQ0KDQovKiBBbmFsb2cgQ2xvY2sgRGlzcGxheSAqLw0KLnRpbWVwaWNrZXItYW5hbG9nLWRpc3BsYXkgew0KICAtd2Via2l0LWJveC1mbGV4OiAyLjU7DQogIC13ZWJraXQtZmxleDogMi41IGF1dG87DQogICAgICAtbXMtZmxleDogMi41IGF1dG87DQogICAgICAgICAgZmxleDogMi41IGF1dG87DQp9DQoNCi50aW1lcGlja2VyLXBsYXRlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsNCiAgYm9yZGVyLXJhZGl1czogNTAlOw0KICB3aWR0aDogMjcwcHg7DQogIGhlaWdodDogMjcwcHg7DQogIG92ZXJmbG93OiB2aXNpYmxlOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIG1hcmdpbjogYXV0bzsNCiAgbWFyZ2luLXRvcDogMjVweDsNCiAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOw0KfQ0KDQoudGltZXBpY2tlci1jYW52YXMsDQoudGltZXBpY2tlci1kaWFsIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBsZWZ0OiAwOw0KICByaWdodDogMDsNCiAgdG9wOiAwOw0KICBib3R0b206IDA7DQp9DQoNCi50aW1lcGlja2VyLW1pbnV0ZXMgew0KICB2aXNpYmlsaXR5OiBoaWRkZW47DQp9DQoNCi50aW1lcGlja2VyLXRpY2sgew0KICBib3JkZXItcmFkaXVzOiA1MCU7DQogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODcpOw0KICBsaW5lLWhlaWdodDogNDBweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICB3aWR0aDogNDBweDsNCiAgaGVpZ2h0OiA0MHB4Ow0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgZm9udC1zaXplOiAxNXB4Ow0KfQ0KDQoudGltZXBpY2tlci10aWNrLmFjdGl2ZSwNCi50aW1lcGlja2VyLXRpY2s6aG92ZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDM4LCAxNjYsIDE1NCwgMC4yNSk7DQp9DQoNCi50aW1lcGlja2VyLWRpYWwgew0KICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMzUwbXMsIC13ZWJraXQtdHJhbnNmb3JtIDM1MG1zOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IDM1MG1zLCAtd2Via2l0LXRyYW5zZm9ybSAzNTBtczsNCiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDM1MG1zLCBvcGFjaXR5IDM1MG1zOw0KICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMzUwbXMsIG9wYWNpdHkgMzUwbXMsIC13ZWJraXQtdHJhbnNmb3JtIDM1MG1zOw0KfQ0KDQoudGltZXBpY2tlci1kaWFsLW91dCB7DQogIG9wYWNpdHk6IDA7DQp9DQoNCi50aW1lcGlja2VyLWRpYWwtb3V0LnRpbWVwaWNrZXItaG91cnMgew0KICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMS4xLCAxLjEpOw0KICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xLCAxLjEpOw0KfQ0KDQoudGltZXBpY2tlci1kaWFsLW91dC50aW1lcGlja2VyLW1pbnV0ZXMgew0KICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMC44LCAwLjgpOw0KICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC44LCAwLjgpOw0KfQ0KDQoudGltZXBpY2tlci1jYW52YXMgew0KICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMTc1bXM7DQogIHRyYW5zaXRpb246IG9wYWNpdHkgMTc1bXM7DQp9DQoNCi50aW1lcGlja2VyLWNhbnZhcyBsaW5lIHsNCiAgc3Ryb2tlOiAjMjZhNjlhOw0KICBzdHJva2Utd2lkdGg6IDQ7DQogIHN0cm9rZS1saW5lY2FwOiByb3VuZDsNCn0NCg0KLnRpbWVwaWNrZXItY2FudmFzLW91dCB7DQogIG9wYWNpdHk6IDAuMjU7DQp9DQoNCi50aW1lcGlja2VyLWNhbnZhcy1iZWFyaW5nIHsNCiAgc3Ryb2tlOiBub25lOw0KICBmaWxsOiAjMjZhNjlhOw0KfQ0KDQoudGltZXBpY2tlci1jYW52YXMtYmcgew0KICBzdHJva2U6IG5vbmU7DQogIGZpbGw6ICMyNmE2OWE7DQp9DQoNCi8qIEZvb3RlciAqLw0KLnRpbWVwaWNrZXItZm9vdGVyIHsNCiAgbWFyZ2luOiAwIGF1dG87DQogIHBhZGRpbmc6IDVweCAxcmVtOw0KICBkaXNwbGF5OiAtd2Via2l0LWJveDsNCiAgZGlzcGxheTogLXdlYmtpdC1mbGV4Ow0KICBkaXNwbGF5OiAtbXMtZmxleGJveDsNCiAgZGlzcGxheTogZmxleDsNCiAgLXdlYmtpdC1ib3gtcGFjazoganVzdGlmeTsNCiAgLXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAtbXMtZmxleC1wYWNrOiBqdXN0aWZ5Ow0KICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCn0NCg0KLnRpbWVwaWNrZXItY2xlYXIgew0KICBjb2xvcjogI0Y0NDMzNjsNCn0NCg0KLnRpbWVwaWNrZXItY2xvc2Ugew0KICBjb2xvcjogIzI2YTY5YTsNCn0NCg0KLnRpbWVwaWNrZXItY2xlYXIsDQoudGltZXBpY2tlci1jbG9zZSB7DQogIHBhZGRpbmc6IDAgMjBweDsNCn0NCg0KLyogTWVkaWEgUXVlcmllcyAqLw0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDFweCkgew0KICAudGltZXBpY2tlci1tb2RhbCB7DQogICAgbWF4LXdpZHRoOiA2MDBweDsNCiAgfQ0KICAudGltZXBpY2tlci1jb250YWluZXIubW9kYWwtY29udGVudCB7DQogICAgLXdlYmtpdC1ib3gtb3JpZW50OiBob3Jpem9udGFsOw0KICAgIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsOw0KICAgIC13ZWJraXQtZmxleC1kaXJlY3Rpb246IHJvdzsNCiAgICAgICAgLW1zLWZsZXgtZGlyZWN0aW9uOiByb3c7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93Ow0KICB9DQogIC50aW1lcGlja2VyLXRleHQtY29udGFpbmVyIHsNCiAgICB0b3A6IDMyJTsNCiAgfQ0KICAudGltZXBpY2tlci1kaXNwbGF5LWFtLXBtIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgcmlnaHQ6IGF1dG87DQogICAgYm90dG9tOiBhdXRvOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBtYXJnaW4tdG9wOiAxLjJyZW07DQogIH0NCn0=" type="text/css" rel="stylesheet" media="screen,projection"/>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4130856901233503"
     crossorigin="anonymous"></script>
</head>
<body>
<nav class="teal lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="https://minakun.com/" class="brand-logo">みなくん</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="https://minakun.com/notice">お知らせ</a></li>
        <li><a href="https://minakun.com/video">最新動画</a></li>
      </ul>

      <ul id="nav-mobile" class="sidenav">
        <li><a href="https://minakun.com/notice">お知らせ</a></li>
        <li><a href="https://minakun.com/video">最新動画</a></li>
      </ul>
      <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    </div>
  </nav>
<div class="container">
<h2>ホーム</h2>
<button class="btn btn-large cyan lighten-3 waves-effect" onclick="location.href='https://youtube.com/@MinakunVtuber';"><span style="color: black;">YouTube</span></button>
<button class="btn btn-large cyan lighten-3 waves-effect" onclick="location.href='https://twitter.com/MinakunVtuber';"><span style="color: black;">twitter</span></button>
<h3>お知らせ</h3>
<p>お知らせはありません。</p>
<h3>最新の動画</h3>
<p>準備中です。</p>

</div>
<footer class="page-footer pink accent-2">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">みなくん</h5>
          <p class="grey-text text-lighten-4">みなくんは、中学二年生であり、かなりの底辺のVTuberです。いつか有名になることを目指して今も努力を続けています。</p>


        </div>
        <div class="col l3 s12">
          <h5 class="white-text">情報など</h5>
          <ul>
            <li><a class="white-text" href="https://blog.minakun.com/">みなくんのブログ</a></li>
            <li><a class="white-text" href="#!">準備中</a></li>
            <li><a class="white-text" href="#!">準備中</a></li>
            <li><a class="white-text" href="#!">準備中</a></li>
          </ul>
        </div>
        <div class="col l3 s12">
          <h5 class="white-text">リンク集</h5>
          <ul>
            <li><a class="white-text" href="https://youtube.com/@MinakunVtuber">YouTube</a></li>
            <li><a class="white-text" href="https://twitter.com/MinakunVtuber">twitter</a></li>
            <li><a class="white-text" href="#!">準備中</a></li>
            <li><a class="white-text" href="#!">準備中</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
      ©2022 <a class="orange-text text-lighten-3" href="https://minakun.com">Minakun</a> All rights reserved.
      </div>
    </div>
  </footer>
  <!--  Scripts-->
  <script src="data:text/javascript;base64,LyohIGpRdWVyeSB2Mi4xLjEgfCAoYykgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZSAqLw0KIWZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YS5kb2N1bWVudD9iKGEsITApOmZ1bmN0aW9uKGEpe2lmKCFhLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpO3JldHVybiBiKGEpfTpiKGEpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9Yy5zbGljZSxlPWMuY29uY2F0LGY9Yy5wdXNoLGc9Yy5pbmRleE9mLGg9e30saT1oLnRvU3RyaW5nLGo9aC5oYXNPd25Qcm9wZXJ0eSxrPXt9LGw9YS5kb2N1bWVudCxtPSIyLjEuMSIsbj1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgbi5mbi5pbml0KGEsYil9LG89L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLHA9L14tbXMtLyxxPS8tKFtcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOiIiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/MD5hP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXTpkLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1uLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYi5jb250ZXh0PXRoaXMuY29udGV4dCxifSxlYWNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZWFjaCh0aGlzLGEsYil9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi5tYXAodGhpcyxmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwoYixjLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoLGM9K2ErKDA+YT9iOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhjPj0wJiZiPmM/W3RoaXNbY11dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oYT1hcmd1bWVudHNbaF0pKWZvcihiIGluIGEpYz1nW2JdLGQ9YVtiXSxnIT09ZCYmKGomJmQmJihuLmlzUGxhaW5PYmplY3QoZCl8fChlPW4uaXNBcnJheShkKSkpPyhlPyhlPSExLGY9YyYmbi5pc0FycmF5KGMpP2M6W10pOmY9YyYmbi5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1uLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5LGlzV2luZG93OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hJiZhPT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4hbi5pc0FycmF5KGEpJiZhLXBhcnNlRmxvYXQoYSk+PTB9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIm9iamVjdCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSk/ITE6YS5jb25zdHJ1Y3RvciYmIWouY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpPyExOiEwfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2ZvcihiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YSsiIjoib2JqZWN0Ij09dHlwZW9mIGF8fCJmdW5jdGlvbiI9PXR5cGVvZiBhP2hbaS5jYWxsKGEpXXx8Im9iamVjdCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYz1ldmFsO2E9bi50cmltKGEpLGEmJigxPT09YS5pbmRleE9mKCJ1c2Ugc3RyaWN0Iik/KGI9bC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxiLnRleHQ9YSxsLmhlYWQuYXBwZW5kQ2hpbGQoYikucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSk6YyhhKSl9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHAsIm1zLSIpLnJlcGxhY2UocSxyKX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPTAsZj1hLmxlbmd0aCxnPXMoYSk7aWYoYyl7aWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgaWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWs7cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IiI6KGErIiIpLnJlcGxhY2UobywiIil9LG1ha2VBcnJheTpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fFtdO3JldHVybiBudWxsIT1hJiYocyhPYmplY3QoYSkpP24ubWVyZ2UoYywic3RyaW5nIj09dHlwZW9mIGE/W2FdOmEpOmYuY2FsbChjLGEpKSxjfSxpbkFycmF5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbnVsbD09Yj8tMTpnLmNhbGwoYixhLGMpfSxtZXJnZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7Yz5kO2QrKylhW2UrK109YltkXTtyZXR1cm4gYS5sZW5ndGg9ZSxhfSxncmVwOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aCxoPSFjO2c+ZjtmKyspZD0hYihhW2ZdLGYpLGQhPT1oJiZlLnB1c2goYVtmXSk7cmV0dXJuIGV9LG1hcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZj0wLGc9YS5sZW5ndGgsaD1zKGEpLGk9W107aWYoaClmb3IoO2c+ZjtmKyspZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7ZWxzZSBmb3IoZiBpbiBhKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO3JldHVybiBlLmFwcGx5KFtdLGkpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGY7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBiJiYoYz1hW2JdLGI9YSxhPWMpLG4uaXNGdW5jdGlvbihhKT8oZT1kLmNhbGwoYXJndW1lbnRzLDIpLGY9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShifHx0aGlzLGUuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGYuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxuLmd1aWQrKyxmKTp2b2lkIDB9LG5vdzpEYXRlLm5vdyxzdXBwb3J0Omt9KSxuLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtoWyJbb2JqZWN0ICIrYisiXSJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHMoYSl7dmFyIGI9YS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuImZ1bmN0aW9uIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6MT09PWEubm9kZVR5cGUmJmI/ITA6ImFycmF5Ij09PWN8fDA9PT1ifHwibnVtYmVyIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIistbmV3IERhdGUsdj1hLmRvY3VtZW50LHc9MCx4PTAseT1nYigpLHo9Z2IoKSxBPWdiKCksQj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGw9ITApLDB9LEM9InVuZGVmaW5lZCIsRD0xPDwzMSxFPXt9Lmhhc093blByb3BlcnR5LEY9W10sRz1GLnBvcCxIPUYucHVzaCxJPUYucHVzaCxKPUYuc2xpY2UsSz1GLmluZGV4T2Z8fGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5sZW5ndGg7Yz5iO2IrKylpZih0aGlzW2JdPT09YSlyZXR1cm4gYjtyZXR1cm4tMX0sTD0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLE09IltcXHgyMFxcdFxcclxcblxcZl0iLE49Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIixPPU4ucmVwbGFjZSgidyIsIncjIiksUD0iXFxbIitNKyIqKCIrTisiKSg/OiIrTSsiKihbKl4kfCF+XT89KSIrTSsiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiK08rIikpfCkiK00rIipcXF0iLFE9IjooIitOKyIpKD86XFwoKCgnKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitQKyIpKil8LiopXFwpfCkiLFI9bmV3IFJlZ0V4cCgiXiIrTSsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitNKyIrJCIsImciKSxTPW5ldyBSZWdFeHAoIl4iK00rIiosIitNKyIqIiksVD1uZXcgUmVnRXhwKCJeIitNKyIqKFs+K35dfCIrTSsiKSIrTSsiKiIpLFU9bmV3IFJlZ0V4cCgiPSIrTSsiKihbXlxcXSdcIl0qPykiK00rIipcXF0iLCJnIiksVj1uZXcgUmVnRXhwKFEpLFc9bmV3IFJlZ0V4cCgiXiIrTysiJCIpLFg9e0lEOm5ldyBSZWdFeHAoIl4jKCIrTisiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitOKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitOLnJlcGxhY2UoInciLCJ3KiIpKyIpIiksQVRUUjpuZXcgUmVnRXhwKCJeIitQKSxQU0VVRE86bmV3IFJlZ0V4cCgiXiIrUSksQ0hJTEQ6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitNKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitNKyIqKD86KFsrLV18KSIrTSsiKihcXGQrKXwpKSIrTSsiKlxcKXwpIiwiaSIpLGJvb2w6bmV3IFJlZ0V4cCgiXig/OiIrTCsiKSQiLCJpIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoIl4iK00rIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrTSsiKigoPzotXFxkKT9cXGQqKSIrTSsiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sWT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFo9L15oXGQkL2ksJD0vXltee10rXHtccypcW25hdGl2ZSBcdy8sXz0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGFiPS9bK35dLyxiYj0vJ3xcXC9nLGNiPW5ldyBSZWdFeHAoIlxcXFwoW1xcZGEtZl17MSw2fSIrTSsiP3woIitNKyIpfC4pIiwiaWciKSxkYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9IjB4IitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX07dHJ5e0kuYXBwbHkoRj1KLmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLEZbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZWIpe0k9e2FwcGx5OkYubGVuZ3RoP2Z1bmN0aW9uKGEsYil7SC5hcHBseShhLEouY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGZiKGEsYixkLGUpe3ZhciBmLGgsaixrLGwsbyxyLHMsdyx4O2lmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLGQ9ZHx8W10sIWF8fCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gZDtpZigxIT09KGs9Yi5ub2RlVHlwZSkmJjkhPT1rKXJldHVybltdO2lmKHAmJiFlKXtpZihmPV8uZXhlYyhhKSlpZihqPWZbMV0pe2lmKDk9PT1rKXtpZihoPWIuZ2V0RWxlbWVudEJ5SWQoaiksIWh8fCFoLnBhcmVudE5vZGUpcmV0dXJuIGQ7aWYoaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2UgaWYoYi5vd25lckRvY3VtZW50JiYoaD1iLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaikpJiZ0KGIsaCkmJmguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNle2lmKGZbMl0pcmV0dXJuIEkuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChqPWZbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSS5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShqKSksZH1pZihjLnFzYSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYocz1yPXUsdz1iLHg9OT09PWsmJmEsMT09PWsmJiJvYmplY3QiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtvPWcoYSksKHI9Yi5nZXRBdHRyaWJ1dGUoImlkIikpP3M9ci5yZXBsYWNlKGJiLCJcXCQmIik6Yi5zZXRBdHRyaWJ1dGUoImlkIixzKSxzPSJbaWQ9JyIrcysiJ10gIixsPW8ubGVuZ3RoO3doaWxlKGwtLSlvW2xdPXMrcWIob1tsXSk7dz1hYi50ZXN0KGEpJiZvYihiLnBhcmVudE5vZGUpfHxiLHg9by5qb2luKCIsIil9aWYoeCl0cnl7cmV0dXJuIEkuYXBwbHkoZCx3LnF1ZXJ5U2VsZWN0b3JBbGwoeCkpLGR9Y2F0Y2goeSl7fWZpbmFsbHl7cnx8Yi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUiwiJDEiKSxiLGQsZSl9ZnVuY3Rpb24gZ2IoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjKyIgIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrIiAiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhiKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWIoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYihhLGIpe3ZhciBjPWEuc3BsaXQoInwiKSxlPWEubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBrYihhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8RCktKH5hLnNvdXJjZUluZGV4fHxEKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbGIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PWN8fCJidXR0b24iPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5iKGEpe3JldHVybiBoYihmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixoYihmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIG9iKGEpe3JldHVybiBhJiZ0eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PUMmJmF9Yz1mYi5zdXBwb3J0PXt9LGY9ZmIuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiPyJIVE1MIiE9PWIubm9kZU5hbWU6ITF9LG09ZmIuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZT1hP2Eub3duZXJEb2N1bWVudHx8YTp2LGc9ZS5kZWZhdWx0VmlldztyZXR1cm4gZSE9PW4mJjk9PT1lLm5vZGVUeXBlJiZlLmRvY3VtZW50RWxlbWVudD8obj1lLG89ZS5kb2N1bWVudEVsZW1lbnQscD0hZihlKSxnJiZnIT09Zy50b3AmJihnLmFkZEV2ZW50TGlzdGVuZXI/Zy5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7bSgpfSwhMSk6Zy5hdHRhY2hFdmVudCYmZy5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7bSgpfSkpLGMuYXR0cmlidXRlcz1pYihmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKGUuY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPSQudGVzdChlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpJiZpYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2EnPjwvZGl2PjxkaXYgY2xhc3M9J2EgaSc+PC9kaXY+IixhLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJpIiwyPT09YS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RofSksYy5nZXRCeUlkPWliKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIWUuZ2V0RWxlbWVudHNCeU5hbWV8fCFlLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQhPT1DJiZwKXt2YXIgYz1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjJiZjLnBhcmVudE5vZGU/W2NdOltdfX0sZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJpZCIpPT09Yn19KTooZGVsZXRlIGQuZmluZC5JRCxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2IsZGIpO3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlIT09QyYmYS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBjJiZjLnZhbHVlPT09Yn19KSxkLmZpbmQuVEFHPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdHlwZW9mIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1DP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6dm9pZCAwfTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT0wLGY9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTtpZigiKiI9PT1hKXt3aGlsZShjPWZbZSsrXSkxPT09Yy5ub2RlVHlwZSYmZC5wdXNoKGMpO3JldHVybiBkfXJldHVybiBmfSxkLmZpbmQuQ0xBU1M9Yy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihhLGIpe3JldHVybiB0eXBlb2YgYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09QyYmcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPSQudGVzdChlLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGliKGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPSI8c2VsZWN0IG1zYWxsb3djbGlwPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixhLnF1ZXJ5U2VsZWN0b3JBbGwoIlttc2FsbG93Y2xpcF49JyddIikubGVuZ3RoJiZxLnB1c2goIlsqXiRdPSIrTSsiKig/OicnfFwiXCIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RofHxxLnB1c2goIlxcWyIrTSsiKig/OnZhbHVlfCIrTCsiKSIpLGEucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGh8fHEucHVzaCgiOmNoZWNrZWQiKX0pLGliKGZ1bmN0aW9uKGEpe3ZhciBiPWUuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrTSsiKlsqXiR8IX5dPz0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPSQudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmaWIoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiZGl2Iikscy5jYWxsKGEsIltzIT0nJ106eCIpLHIucHVzaCgiIT0iLFEpfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oInwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oInwiKSksYj0kLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHwkLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1lfHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PWV8fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/Sy5jYWxsKGssYSktSy5jYWxsKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZj1hLnBhcmVudE5vZGUsZz1iLnBhcmVudE5vZGUsaD1bYV0saT1bYl07aWYoIWZ8fCFnKXJldHVybiBhPT09ZT8tMTpiPT09ZT8xOmY/LTE6Zz8xOms/Sy5jYWxsKGssYSktSy5jYWxsKGssYik6MDtpZihmPT09ZylyZXR1cm4ga2IoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSlpLnVuc2hpZnQoYyk7d2hpbGUoaFtkXT09PWlbZF0pZCsrO3JldHVybiBkP2tiKGhbZF0saVtkXSk6aFtkXT09PXY/LTE6aVtkXT09PXY/MTowfSxlKTpufSxmYi5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZiKGEsbnVsbCxudWxsLGIpfSxmYi5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoVSwiPSckMSddIiksISghYy5tYXRjaGVzU2VsZWN0b3J8fCFwfHxyJiZyLnRlc3QoYil8fHEmJnEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZiKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZiLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmIuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkUuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZiLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIithKX0sZmIudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWZiLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz0iIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZigic3RyaW5nIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYi5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYixtYXRjaDpYLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoY2IsZGIpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKGNiLGRiKSwifj0iPT09YVsyXSYmKGFbM109IiAiK2FbM10rIiAiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8ZmIuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooImV2ZW4iPT09YVszXXx8Im9kZCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8Im9kZCI9PT1hWzNdKSk6YVszXSYmZmIuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFguQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8IiI6YyYmVi50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKCIpIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYixkYikudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthKyIgIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoIihefCIrTSsiKSIrYSsiKCIrTSsifCQpIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdCgic3RyaW5nIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8dHlwZW9mIGEuZ2V0QXR0cmlidXRlIT09QyYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZmIuYXR0cihkLGEpO3JldHVybiBudWxsPT1lPyIhPSI9PT1iOmI/KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoO2lmKHEpe2lmKGYpe3doaWxlKHApe2w9Yjt3aGlsZShsPWxbcF0paWYoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKXJldHVybiExO289cD0ib25seSI9PT1hJiYhbyYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihvPVtnP3EuZmlyc3RDaGlsZDpxLmxhc3RDaGlsZF0sZyYmcyl7az1xW3VdfHwocVt1XT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLG09alswXT09PXcmJmpbMl0sbD1uJiZxLmNoaWxkTm9kZXNbbl07d2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoMT09PWwubm9kZVR5cGUmJisrbSYmbD09PWIpe2tbYV09W3csbixtXTticmVha319ZWxzZSBpZihzJiYoaj0oYlt1XXx8KGJbdV09e30pKVthXSkmJmpbMF09PT13KW09alsxXTtlbHNlIHdoaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKChoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpJiYrK20mJihzJiYoKGxbdV18fChsW3VdPXt9KSlbYV09W3csbV0pLGw9PT1iKSlicmVhaztyZXR1cm4gbS09ZSxtPT09ZHx8bSVkPT09MCYmbS9kPj0wfX19LFBTRVVETzpmdW5jdGlvbihhLGIpe3ZhciBjLGU9ZC5wc2V1ZG9zW2FdfHxkLnNldEZpbHRlcnNbYS50b0xvd2VyQ2FzZSgpXXx8ZmIuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIithKTtyZXR1cm4gZVt1XT9lKGIpOmUubGVuZ3RoPjE/KGM9W2EsYSwiIixiXSxkLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9oYihmdW5jdGlvbihhLGMpe3ZhciBkLGY9ZShhLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWQ9Sy5jYWxsKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmhiKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShSLCIkMSIpKTtyZXR1cm4gZFt1XT9oYihmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSwhYy5wb3AoKX19KSxoYXM6aGIoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBmYihhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmhiKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4oYi50ZXh0Q29udGVudHx8Yi5pbm5lclRleHR8fGUoYikpLmluZGV4T2YoYSk+LTF9fSksbGFuZzpoYihmdW5jdGlvbihhKXtyZXR1cm4gVy50ZXN0KGF8fCIiKXx8ZmIuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrYSksYT1hLnJlcGxhY2UoY2IsZGIpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8Yi5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYSsiLSIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PWImJiEhYS5jaGVja2VkfHwib3B0aW9uIj09PWImJiEhYS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsYS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWQucHNldWRvcy5lbXB0eShhKX0saGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBaLnRlc3QoYS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybiBZLnRlc3QoYS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PWImJiJidXR0b24iPT09YS50eXBlfHwiYnV0dG9uIj09PWJ9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuImlucHV0Ij09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmInRleHQiPT09YS50eXBlJiYobnVsbD09KGI9YS5nZXRBdHRyaWJ1dGUoInR5cGUiKSl8fCJ0ZXh0Ij09PWIudG9Mb3dlckNhc2UoKSl9LGZpcnN0Om5iKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpuYihmdW5jdGlvbihhLGIpe3JldHVybltiLTFdfSksZXE6bmIoZnVuY3Rpb24oYSxiLGMpe3JldHVyblswPmM/YytiOmNdfSksZXZlbjpuYihmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLG9kZDpuYihmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLGx0Om5iKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOy0tZD49MDspYS5wdXNoKGQpO3JldHVybiBhfSksZ3Q6bmIoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7KytkPGI7KWEucHVzaChkKTtyZXR1cm4gYX0pfX0sZC5wc2V1ZG9zLm50aD1kLnBzZXVkb3MuZXE7Zm9yKGIgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pZC5wc2V1ZG9zW2JdPWxiKGIpO2ZvcihiIGlue3N1Ym1pdDohMCxyZXNldDohMH0pZC5wc2V1ZG9zW2JdPW1iKGIpO2Z1bmN0aW9uIHBiKCl7fXBiLnByb3RvdHlwZT1kLmZpbHRlcnM9ZC5wc2V1ZG9zLGQuc2V0RmlsdGVycz1uZXcgcGIsZz1mYi50b2tlbml6ZT1mdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnLGgsaSxqLGs9elthKyIgIl07aWYoaylyZXR1cm4gYj8wOmsuc2xpY2UoMCk7aD1hLGk9W10saj1kLnByZUZpbHRlcjt3aGlsZShoKXsoIWN8fChlPVMuZXhlYyhoKSkpJiYoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1ULmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFIsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1YW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/ZmIuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBxYihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHJiKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJiJwYXJlbnROb2RlIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGo9W3csZl07aWYoZyl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZSkmJmEoYixjLGcpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXtpZihpPWJbdV18fChiW3VdPXt9KSwoaD1pW2RdKSYmaFswXT09PXcmJmhbMV09PT1mKXJldHVybiBqWzJdPWhbMl07aWYoaVtkXT1qLGpbMl09YShiLGMsZykpcmV0dXJuITB9fX1mdW5jdGlvbiBzYihhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB0YihhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtlPmQ7ZCsrKWZiKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB1YihhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtpPmg7aCsrKShmPWFbaF0pJiYoIWN8fGMoZixkLGUpKSYmKGcucHVzaChmKSxqJiZiLnB1c2goaCkpO3JldHVybiBnfWZ1bmN0aW9uIHZiKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXZiKGQpKSxlJiYhZVt1XSYmKGU9dmIoZSxmKSksaGIoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dGIoYnx8IioiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6dWIocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXViKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9LLmNhbGwoZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXViKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpJLmFwcGx5KGcscil9KX1mdW5jdGlvbiB3YihhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlWyIgIl0saT1nPzE6MCxrPXJiKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1yYihmdW5jdGlvbihhKXtyZXR1cm4gSy5jYWxsKGIsYSk+LTF9LGgsITApLG09W2Z1bmN0aW9uKGEsYyxkKXtyZXR1cm4hZyYmKGR8fGMhPT1qKXx8KChiPWMpLm5vZGVUeXBlP2soYSxjLGQpOmwoYSxjLGQpKX1dO2Y+aTtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bcmIoc2IobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7Zj5lO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHZiKGk+MSYmc2IobSksaT4xJiZxYihhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWFbaS0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKFIsIiQxIiksYyxlPmkmJndiKGEuc2xpY2UoaSxlKSksZj5lJiZ3YihhPWEuc2xpY2UoZSkpLGY+ZSYmcWIoYSkpfW0ucHVzaChjKX1yZXR1cm4gc2IobSl9ZnVuY3Rpb24geGIoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbSxvLHA9MCxxPSIwIixyPWYmJltdLHM9W10sdD1qLHU9Znx8ZSYmZC5maW5kLlRBRygiKiIsayksdj13Kz1udWxsPT10PzE6TWF0aC5yYW5kb20oKXx8LjEseD11Lmxlbmd0aDtmb3IoayYmKGo9ZyE9PW4mJmcpO3EhPT14JiZudWxsIT0obD11W3FdKTtxKyspe2lmKGUmJmwpe209MDt3aGlsZShvPWFbbSsrXSlpZihvKGwsZyxoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXYpfWMmJigobD0hbyYmbCkmJnAtLSxmJiZyLnB1c2gobCkpfWlmKHArPXEsYyYmcSE9PXApe209MDt3aGlsZShvPWJbbSsrXSlvKHIscyxnLGgpO2lmKGYpe2lmKHA+MCl3aGlsZShxLS0pcltxXXx8c1txXXx8KHNbcV09Ry5jYWxsKGkpKTtzPXViKHMpfUkuYXBwbHkoaSxzKSxrJiYhZiYmcy5sZW5ndGg+MCYmcCtiLmxlbmd0aD4xJiZmYi51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz12LGo9dCkscn07cmV0dXJuIGM/aGIoZik6Zn1yZXR1cm4gaD1mYi5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthKyIgIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9d2IoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHhiKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1mYi5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGUsZil7dmFyIGksaixrLGwsbSxuPSJmdW5jdGlvbiI9PXR5cGVvZiBhJiZhLG89IWYmJmcoYT1uLnNlbGVjdG9yfHxhKTtpZihlPWV8fFtdLDE9PT1vLmxlbmd0aCl7aWYoaj1vWzBdPW9bMF0uc2xpY2UoMCksai5sZW5ndGg+MiYmIklEIj09PShrPWpbMF0pLnR5cGUmJmMuZ2V0QnlJZCYmOT09PWIubm9kZVR5cGUmJnAmJmQucmVsYXRpdmVbalsxXS50eXBlXSl7aWYoYj0oZC5maW5kLklEKGsubWF0Y2hlc1swXS5yZXBsYWNlKGNiLGRiKSxiKXx8W10pWzBdLCFiKXJldHVybiBlO24mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGouc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWk9WC5uZWVkc0NvbnRleHQudGVzdChhKT8wOmoubGVuZ3RoO3doaWxlKGktLSl7aWYoaz1qW2ldLGQucmVsYXRpdmVbbD1rLnR5cGVdKWJyZWFrO2lmKChtPWQuZmluZFtsXSkmJihmPW0oay5tYXRjaGVzWzBdLnJlcGxhY2UoY2IsZGIpLGFiLnRlc3QoalswXS50eXBlKSYmb2IoYi5wYXJlbnROb2RlKXx8YikpKXtpZihqLnNwbGljZShpLDEpLGE9Zi5sZW5ndGgmJnFiKGopLCFhKXJldHVybiBJLmFwcGx5KGUsZiksZTticmVha319fXJldHVybihufHxoKGEsbykpKGYsYiwhcCxlLGFiLnRlc3QoYSkmJm9iKGIucGFyZW50Tm9kZSl8fGIpLGV9LGMuc29ydFN0YWJsZT11LnNwbGl0KCIiKS5zb3J0KEIpLmpvaW4oIiIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1pYihmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudCgiZGl2IikpfSksaWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8amIoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YS5nZXRBdHRyaWJ1dGUoYiwidHlwZSI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmaWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8aW5wdXQvPiIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8amIoInZhbHVlIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fCJpbnB1dCIhPT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dm9pZCAwOmEuZGVmYXVsdFZhbHVlfSksaWIoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGpiKEwsZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDphW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGZifShhKTtuLmZpbmQ9dCxuLmV4cHI9dC5zZWxlY3RvcnMsbi5leHByWyI6Il09bi5leHByLnBzZXVkb3Msbi51bmlxdWU9dC51bmlxdWVTb3J0LG4udGV4dD10LmdldFRleHQsbi5pc1hNTERvYz10LmlzWE1MLG4uY29udGFpbnM9dC5jb250YWluczt2YXIgdT1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHY9L148KFx3KylccypcLz8+KD86PFwvXDE+fCkkLyx3PS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24geChhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKXtpZih3LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBnLmNhbGwoYixhKT49MCE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPXRoaXMubGVuZ3RoLGQ9W10sZT10aGlzO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2M+YjtiKyspaWYobi5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7Yz5iO2IrKyluLmZpbmQoYSxlW2JdLGQpO3JldHVybiBkPXRoaXMucHVzaFN0YWNrKGM+MT9uLnVuaXF1ZShkKTpkKSxkLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrYTphLGR9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeCh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeCh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheCh0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmdS50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgeSx6PS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sQT1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2lmKCFhKXJldHVybiB0aGlzO2lmKCJzdHJpbmciPT10eXBlb2YgYSl7aWYoYz0iPCI9PT1hWzBdJiYiPiI9PT1hW2EubGVuZ3RoLTFdJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOnouZXhlYyhhKSwhY3x8IWNbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHx5KS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihjWzFdKXtpZihiPWIgaW5zdGFuY2VvZiBuP2JbMF06YixuLm1lcmdlKHRoaXMsbi5wYXJzZUhUTUwoY1sxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8YjpsLCEwKSksdi50ZXN0KGNbMV0pJiZuLmlzUGxhaW5PYmplY3QoYikpZm9yKGMgaW4gYiluLmlzRnVuY3Rpb24odGhpc1tjXSk/dGhpc1tjXShiW2NdKTp0aGlzLmF0dHIoYyxiW2NdKTtyZXR1cm4gdGhpc31yZXR1cm4gZD1sLmdldEVsZW1lbnRCeUlkKGNbMl0pLGQmJmQucGFyZW50Tm9kZSYmKHRoaXMubGVuZ3RoPTEsdGhpc1swXT1kKSx0aGlzLmNvbnRleHQ9bCx0aGlzLnNlbGVjdG9yPWEsdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpcy5jb250ZXh0PXRoaXNbMF09YSx0aGlzLmxlbmd0aD0xLHRoaXMpOm4uaXNGdW5jdGlvbihhKT8idW5kZWZpbmVkIiE9dHlwZW9mIHkucmVhZHk/eS5yZWFkeShhKTphKG4pOih2b2lkIDAhPT1hLnNlbGVjdG9yJiYodGhpcy5zZWxlY3Rvcj1hLnNlbGVjdG9yLHRoaXMuY29udGV4dD1hLmNvbnRleHQpLG4ubWFrZUFycmF5KGEsdGhpcykpfTtBLnByb3RvdHlwZT1uLmZuLHk9bihsKTt2YXIgQj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxDPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O24uZXh0ZW5kKHtkaXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9dm9pZCAwIT09Yzt3aGlsZSgoYT1hW2JdKSYmOSE9PWEubm9kZVR5cGUpaWYoMT09PWEubm9kZVR5cGUpe2lmKGUmJm4oYSkuaXMoYykpYnJlYWs7ZC5wdXNoKGEpfXJldHVybiBkfSxzaWJsaW5nOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2E7YT1hLm5leHRTaWJsaW5nKTE9PT1hLm5vZGVUeXBlJiZhIT09YiYmYy5wdXNoKGEpO3JldHVybiBjfX0pLG4uZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oYSl7dmFyIGI9bihhLHRoaXMpLGM9Yi5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7Yz5hO2ErKylpZihuLmNvbnRhaW5zKHRoaXMsYlthXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dS50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlKGYpOmYpfSxpbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gYT8ic3RyaW5nIj09dHlwZW9mIGE/Zy5jYWxsKG4oYSksdGhpc1swXSk6Zy5jYWxsKHRoaXMsYS5qcXVlcnk/YVswXTphKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLnVuaXF1ZShuLm1lcmdlKHRoaXMuZ2V0KCksbihhLGIpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChudWxsPT1hP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGEpKX19KTtmdW5jdGlvbiBEKGEsYil7d2hpbGUoKGE9YVtiXSkmJjEhPT1hLm5vZGVUeXBlKTtyZXR1cm4gYX1uLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJjExIT09Yi5ub2RlVHlwZT9iOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRChhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSwicHJldmlvdXNTaWJsaW5nIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZygoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fG4ubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPW4ubWFwKHRoaXMsYixjKTtyZXR1cm4iVW50aWwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJiJzdHJpbmciPT10eXBlb2YgZCYmKGU9bi5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKENbYV18fG4udW5pcXVlKGUpLEIudGVzdChhKSYmZS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBFPS9cUysvZyxGPXt9O2Z1bmN0aW9uIEcoYSl7dmFyIGI9RlthXT17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRSl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT0ic3RyaW5nIj09dHlwZW9mIGE/RlthXXx8RyhhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmLGcsaD1bXSxpPSFhLm9uY2UmJltdLGo9ZnVuY3Rpb24obCl7Zm9yKGI9YS5tZW1vcnkmJmwsYz0hMCxnPWV8fDAsZT0wLGY9aC5sZW5ndGgsZD0hMDtoJiZmPmc7ZysrKWlmKGhbZ10uYXBwbHkobFswXSxsWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlKXtiPSExO2JyZWFrfWQ9ITEsaCYmKGk/aS5sZW5ndGgmJmooaS5zaGlmdCgpKTpiP2g9W106ay5kaXNhYmxlKCkpfSxrPXthZGQ6ZnVuY3Rpb24oKXtpZihoKXt2YXIgYz1oLmxlbmd0aDshZnVuY3Rpb24gZyhiKXtuLmVhY2goYixmdW5jdGlvbihiLGMpe3ZhciBkPW4udHlwZShjKTsiZnVuY3Rpb24iPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmInN0cmluZyIhPT1kJiZnKGMpfSl9KGFyZ3VtZW50cyksZD9mPWgubGVuZ3RoOmImJihlPWMsaihiKSl9cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBoJiZuLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9bi5pbkFycmF5KGIsaCxjKSk+LTEpaC5zcGxpY2UoYywxKSxkJiYoZj49YyYmZi0tLGc+PWMmJmctLSl9KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bi5pbkFycmF5KGEsaCk+LTE6ISghaHx8IWgubGVuZ3RoKX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gaD1bXSxmPTAsdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBoPWk9Yj12b2lkIDAsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4haH0sbG9jazpmdW5jdGlvbigpe3JldHVybiBpPXZvaWQgMCxifHxrLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4haX0sZmlyZVdpdGg6ZnVuY3Rpb24oYSxiKXtyZXR1cm4haHx8YyYmIWl8fChiPWJ8fFtdLGI9W2EsYi5zbGljZT9iLnNsaWNlKCk6Yl0sZD9pLnB1c2goYik6aihiKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBrLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhY319O3JldHVybiBrfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5kb25lKGMucmVzb2x2ZSkuZmFpbChjLnJlamVjdCkucHJvZ3Jlc3MoYy5ub3RpZnkpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1kLmNhbGwoYXJndW1lbnRzKSxlPWMubGVuZ3RoLGY9MSE9PWV8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2U6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihlKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZC5jYWxsKGFyZ3VtZW50cyk6ZSxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGU+MSlmb3IoaT1uZXcgQXJyYXkoZSksaj1uZXcgQXJyYXkoZSksaz1uZXcgQXJyYXkoZSk7ZT5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5kb25lKGgoYixrLGMpKS5mYWlsKGcucmVqZWN0KS5wcm9ncmVzcyhoKGIsaixpKSk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEg7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEgucmVzb2x2ZVdpdGgobCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGwpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG4obCkub2ZmKCJyZWFkeSIpKSkpfX0pO2Z1bmN0aW9uIEkoKXtsLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEksITEpLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsSSwhMSksbi5yZWFkeSgpfW4ucmVhZHkucHJvbWlzZT1mdW5jdGlvbihiKXtyZXR1cm4gSHx8KEg9bi5EZWZlcnJlZCgpLCJjb21wbGV0ZSI9PT1sLnJlYWR5U3RhdGU/c2V0VGltZW91dChuLnJlYWR5KToobC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixJLCExKSxhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLEksITEpKSksSC5wcm9taXNlKGIpfSxuLnJlYWR5LnByb21pc2UoKTt2YXIgSj1uLmFjY2Vzcz1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKCJvYmplY3QiPT09bi50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpbi5hY2Nlc3MoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsbi5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG4oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn07bi5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gSygpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmNhY2hlPXt9LDAse2dldDpmdW5jdGlvbigpe3JldHVybnt9fX0pLHRoaXMuZXhwYW5kbz1uLmV4cGFuZG8rTWF0aC5yYW5kb20oKX1LLnVpZD0xLEsuYWNjZXB0cz1uLmFjY2VwdERhdGEsSy5wcm90b3R5cGU9e2tleTpmdW5jdGlvbihhKXtpZighSy5hY2NlcHRzKGEpKXJldHVybiAwO3ZhciBiPXt9LGM9YVt0aGlzLmV4cGFuZG9dO2lmKCFjKXtjPUsudWlkKys7dHJ5e2JbdGhpcy5leHBhbmRvXT17dmFsdWU6Y30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSxiKX1jYXRjaChkKXtiW3RoaXMuZXhwYW5kb109YyxuLmV4dGVuZChhLGIpfX1yZXR1cm4gdGhpcy5jYWNoZVtjXXx8KHRoaXMuY2FjaGVbY109e30pLGN9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmtleShhKSxmPXRoaXMuY2FjaGVbZV07aWYoInN0cmluZyI9PXR5cGVvZiBiKWZbYl09YztlbHNlIGlmKG4uaXNFbXB0eU9iamVjdChmKSluLmV4dGVuZCh0aGlzLmNhY2hlW2VdLGIpO2Vsc2UgZm9yKGQgaW4gYilmW2RdPWJbZF07cmV0dXJuIGZ9LGdldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY2FjaGVbdGhpcy5rZXkoYSldO3JldHVybiB2b2lkIDA9PT1iP2M6Y1tiXX0sYWNjZXNzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmInN0cmluZyI9PXR5cGVvZiBiJiZ2b2lkIDA9PT1jPyhkPXRoaXMuZ2V0KGEsYiksdm9pZCAwIT09ZD9kOnRoaXMuZ2V0KGEsbi5jYW1lbENhc2UoYikpKToodGhpcy5zZXQoYSxiLGMpLHZvaWQgMCE9PWM/YzpiKX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpcy5rZXkoYSksZz10aGlzLmNhY2hlW2ZdO2lmKHZvaWQgMD09PWIpdGhpcy5jYWNoZVtmXT17fTtlbHNle24uaXNBcnJheShiKT9kPWIuY29uY2F0KGIubWFwKG4uY2FtZWxDYXNlKSk6KGU9bi5jYW1lbENhc2UoYiksYiBpbiBnP2Q9W2IsZV06KGQ9ZSxkPWQgaW4gZz9bZF06ZC5tYXRjaChFKXx8W10pKSxjPWQubGVuZ3RoO3doaWxlKGMtLSlkZWxldGUgZ1tkW2NdXX19LGhhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIW4uaXNFbXB0eU9iamVjdCh0aGlzLmNhY2hlW2FbdGhpcy5leHBhbmRvXV18fHt9KX0sZGlzY2FyZDpmdW5jdGlvbihhKXthW3RoaXMuZXhwYW5kb10mJmRlbGV0ZSB0aGlzLmNhY2hlW2FbdGhpcy5leHBhbmRvXV19fTt2YXIgTD1uZXcgSyxNPW5ldyBLLE49L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7dmFyIGQ7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpaWYoZD0iZGF0YS0iK2IucmVwbGFjZShPLCItJDEiKS50b0xvd2VyQ2FzZSgpLGM9YS5nZXRBdHRyaWJ1dGUoZCksInN0cmluZyI9PXR5cGVvZiBjKXt0cnl7Yz0idHJ1ZSI9PT1jPyEwOiJmYWxzZSI9PT1jPyExOiJudWxsIj09PWM/bnVsbDorYysiIj09PWM/K2M6Ti50ZXN0KGMpP24ucGFyc2VKU09OKGMpOmN9Y2F0Y2goZSl7fU0uc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfW4uZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBNLmhhc0RhdGEoYSl8fEwuaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE0uYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe00ucmVtb3ZlKGEsYikNCn0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBMLmFjY2VzcyhhLGIsYyl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7TC5yZW1vdmUoYSxiKX19KSxuLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXNbMF0sZz1mJiZmLmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09YSl7aWYodGhpcy5sZW5ndGgmJihlPU0uZ2V0KGYpLDE9PT1mLm5vZGVUeXBlJiYhTC5nZXQoZiwiaGFzRGF0YUF0dHJzIikpKXtjPWcubGVuZ3RoO3doaWxlKGMtLSlnW2NdJiYoZD1nW2NdLm5hbWUsMD09PWQuaW5kZXhPZigiZGF0YS0iKSYmKGQ9bi5jYW1lbENhc2UoZC5zbGljZSg1KSksUChmLGQsZVtkXSkpKTtMLnNldChmLCJoYXNEYXRhQXR0cnMiLCEwKX1yZXR1cm4gZX1yZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7TS5zZXQodGhpcyxhKX0pOkoodGhpcyxmdW5jdGlvbihiKXt2YXIgYyxkPW4uY2FtZWxDYXNlKGEpO2lmKGYmJnZvaWQgMD09PWIpe2lmKGM9TS5nZXQoZixhKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9TS5nZXQoZixkKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9UChmLGQsdm9pZCAwKSx2b2lkIDAhPT1jKXJldHVybiBjfWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9TS5nZXQodGhpcyxkKTtNLnNldCh0aGlzLGQsYiksLTEhPT1hLmluZGV4T2YoIi0iKSYmdm9pZCAwIT09YyYmTS5zZXQodGhpcyxhLGIpfSl9LG51bGwsYixhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe00ucmVtb3ZlKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBhPyhiPShifHwiZngiKSsicXVldWUiLGQ9TC5nZXQoYSxiKSxjJiYoIWR8fG4uaXNBcnJheShjKT9kPUwuYWNjZXNzKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07ImlucHJvZ3Jlc3MiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKCJmeCI9PT1iJiZjLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iKyJxdWV1ZUhvb2tzIjtyZXR1cm4gTC5nZXQoYSxjKXx8TC5hY2Nlc3MoYSxjLHtlbXB0eTpuLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtMLnJlbW92ZShhLFtiKyJxdWV1ZSIsY10pfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPSJmeCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksImZ4Ij09PWEmJiJpbnByb2dyZXNzIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9OyJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHwiZngiO3doaWxlKGctLSljPUwuZ2V0KGZbZ10sYSsicXVldWVIb29rcyIpLGMmJmMuZW1wdHkmJihkKyssYy5lbXB0eS5hZGQoaCkpO3JldHVybiBoKCksZS5wcm9taXNlKGIpfX0pO3ZhciBRPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLFI9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxTPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSwibm9uZSI9PT1uLmNzcyhhLCJkaXNwbGF5Iil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX0sVD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaTshZnVuY3Rpb24oKXt2YXIgYT1sLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxiPWEuYXBwZW5kQ2hpbGQobC5jcmVhdGVFbGVtZW50KCJkaXYiKSksYz1sLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7Yy5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGMuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpLGMuc2V0QXR0cmlidXRlKCJuYW1lIiwidCIpLGIuYXBwZW5kQ2hpbGQoYyksay5jaGVja0Nsb25lPWIuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGIuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixrLm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIFU9InVuZGVmaW5lZCI7ay5mb2N1c2luQnViYmxlcz0ib25mb2N1c2luImluIGE7dmFyIFY9L15rZXkvLFc9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51KXxjbGljay8sWD0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sWT0vXihbXi5dKikoPzpcLiguKyl8KSQvO2Z1bmN0aW9uIFooKXtyZXR1cm4hMH1mdW5jdGlvbiAkKCl7cmV0dXJuITF9ZnVuY3Rpb24gXygpe3RyeXtyZXR1cm4gbC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319bi5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmdldChhKTtpZihyKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxjLmd1aWR8fChjLmd1aWQ9bi5ndWlkKyspLChpPXIuZXZlbnRzKXx8KGk9ci5ldmVudHM9e30pLChnPXIuaGFuZGxlKXx8KGc9ci5oYW5kbGU9ZnVuY3Rpb24oYil7cmV0dXJuIHR5cGVvZiBuIT09VSYmbi5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/bi5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8IiIpLm1hdGNoKEUpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWg9WS5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyYmKGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxrPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKCIuIil9LGYpLChtPWlbb10pfHwobT1pW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGwuc2V0dXAmJmwuc2V0dXAuY2FsbChhLGQscCxnKSE9PSExfHxhLmFkZEV2ZW50TGlzdGVuZXImJmEuYWRkRXZlbnRMaXN0ZW5lcihvLGcsITEpKSxsLmFkZCYmKGwuYWRkLmNhbGwoYSxrKSxrLmhhbmRsZXIuZ3VpZHx8KGsuaGFuZGxlci5ndWlkPWMuZ3VpZCkpLGU/bS5zcGxpY2UobS5kZWxlZ2F0ZUNvdW50KyssMCxrKTptLnB1c2goayksbi5ldmVudC5nbG9iYWxbb109ITApfX0scmVtb3ZlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPUwuaGFzRGF0YShhKSYmTC5nZXQoYSk7aWYociYmKGk9ci5ldmVudHMpKXtiPShifHwiIikubWF0Y2goRSl8fFsiIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paWYoaD1ZLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxvKXtsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxtPWlbb118fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrcC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcSE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoIioqIiE9PWR8fCFrLnNlbGVjdG9yKXx8KG0uc3BsaWNlKGYsMSksay5zZWxlY3RvciYmbS5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxrKSk7ZyYmIW0ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEscCxyLmhhbmRsZSkhPT0hMXx8bi5yZW1vdmVFdmVudChhLG8sci5oYW5kbGUpLGRlbGV0ZSBpW29dKX1lbHNlIGZvcihvIGluIGkpbi5ldmVudC5yZW1vdmUoYSxvK2Jbal0sYyxkLCEwKTtuLmlzRW1wdHlPYmplY3QoaSkmJihkZWxldGUgci5oYW5kbGUsTC5yZW1vdmUoYSwiZXZlbnRzIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZixnLGgsaSxrLG0sbyxwPVtkfHxsXSxxPWouY2FsbChiLCJ0eXBlIik/Yi50eXBlOmIscj1qLmNhbGwoYiwibmFtZXNwYWNlIik/Yi5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtpZihnPWg9ZD1kfHxsLDMhPT1kLm5vZGVUeXBlJiY4IT09ZC5ub2RlVHlwZSYmIVgudGVzdChxK24uZXZlbnQudHJpZ2dlcmVkKSYmKHEuaW5kZXhPZigiLiIpPj0wJiYocj1xLnNwbGl0KCIuIikscT1yLnNoaWZ0KCksci5zb3J0KCkpLGs9cS5pbmRleE9mKCI6Iik8MCYmIm9uIitxLGI9YltuLmV4cGFuZG9dP2I6bmV3IG4uRXZlbnQocSwib2JqZWN0Ij09dHlwZW9mIGImJmIpLGIuaXNUcmlnZ2VyPWU/MjozLGIubmFtZXNwYWNlPXIuam9pbigiLiIpLGIubmFtZXNwYWNlX3JlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Iuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1kKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxvPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZXx8IW8udHJpZ2dlcnx8by50cmlnZ2VyLmFwcGx5KGQsYykhPT0hMSkpe2lmKCFlJiYhby5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZCkpe2ZvcihpPW8uZGVsZWdhdGVUeXBlfHxxLFgudGVzdChpK3EpfHwoZz1nLnBhcmVudE5vZGUpO2c7Zz1nLnBhcmVudE5vZGUpcC5wdXNoKGcpLGg9ZztoPT09KGQub3duZXJEb2N1bWVudHx8bCkmJnAucHVzaChoLmRlZmF1bHRWaWV3fHxoLnBhcmVudFdpbmRvd3x8YSl9Zj0wO3doaWxlKChnPXBbZisrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPWY+MT9pOm8uYmluZFR5cGV8fHEsbT0oTC5nZXQoZywiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZMLmdldChnLCJoYW5kbGUiKSxtJiZtLmFwcGx5KGcsYyksbT1rJiZnW2tdLG0mJm0uYXBwbHkmJm4uYWNjZXB0RGF0YShnKSYmKGIucmVzdWx0PW0uYXBwbHkoZyxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO3JldHVybiBiLnR5cGU9cSxlfHxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxvLl9kZWZhdWx0JiZvLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYykhPT0hMXx8IW4uYWNjZXB0RGF0YShkKXx8ayYmbi5pc0Z1bmN0aW9uKGRbcV0pJiYhbi5pc1dpbmRvdyhkKSYmKGg9ZFtrXSxoJiYoZFtrXT1udWxsKSxuLmV2ZW50LnRyaWdnZXJlZD1xLGRbcV0oKSxuLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsaCYmKGRba109aCkpLGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGUsZixnLGg9W10saT1kLmNhbGwoYXJndW1lbnRzKSxqPShMLmdldCh0aGlzLCJldmVudHMiKXx8e30pW2EudHlwZV18fFtdLGs9bi5ldmVudC5zcGVjaWFsW2EudHlwZV18fHt9O2lmKGlbMF09YSxhLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpIT09ITEpe2g9bi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYSxqKSxiPTA7d2hpbGUoKGY9aFtiKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS5jdXJyZW50VGFyZ2V0PWYuZWxlbSxjPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tjKytdKSYmIWEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkoIWEubmFtZXNwYWNlX3JlfHxhLm5hbWVzcGFjZV9yZS50ZXN0KGcubmFtZXNwYWNlKSkmJihhLmhhbmRsZU9iaj1nLGEuZGF0YT1nLmRhdGEsZT0oKG4uZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZSYmKGEucmVzdWx0PWUpPT09ITEmJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGEpLGEucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPVtdLGg9Yi5kZWxlZ2F0ZUNvdW50LGk9YS50YXJnZXQ7aWYoaCYmaS5ub2RlVHlwZSYmKCFhLmJ1dHRvbnx8ImNsaWNrIiE9PWEudHlwZSkpZm9yKDtpIT09dGhpcztpPWkucGFyZW50Tm9kZXx8dGhpcylpZihpLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1hLnR5cGUpe2ZvcihkPVtdLGM9MDtoPmM7YysrKWY9YltjXSxlPWYuc2VsZWN0b3IrIiAiLHZvaWQgMD09PWRbZV0mJihkW2VdPWYubmVlZHNDb250ZXh0P24oZSx0aGlzKS5pbmRleChpKT49MDpuLmZpbmQoZSx0aGlzLG51bGwsW2ldKS5sZW5ndGgpLGRbZV0mJmQucHVzaChmKTtkLmxlbmd0aCYmZy5wdXNoKHtlbGVtOmksaGFuZGxlcnM6ZH0pfXJldHVybiBoPGIubGVuZ3RoJiZnLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpiLnNsaWNlKGgpfSksZ30scHJvcHM6ImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIuc3BsaXQoIiAiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6ImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWEud2hpY2gmJihhLndoaWNoPW51bGwhPWIuY2hhckNvZGU/Yi5jaGFyQ29kZTpiLmtleUNvZGUpLGF9fSxtb3VzZUhvb2tzOntwcm9wczoiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50Ii5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPWIuYnV0dG9uO3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihjPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGwsZD1jLmRvY3VtZW50RWxlbWVudCxlPWMuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZCYmZC5zY3JvbGxMZWZ0fHxlJiZlLnNjcm9sbExlZnR8fDApLShkJiZkLmNsaWVudExlZnR8fGUmJmUuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGQmJmQuc2Nyb2xsVG9wfHxlJiZlLnNjcm9sbFRvcHx8MCktKGQmJmQuY2xpZW50VG9wfHxlJiZlLmNsaWVudFRvcHx8MCkpLGEud2hpY2h8fHZvaWQgMD09PWZ8fChhLndoaWNoPTEmZj8xOjImZj8zOjQmZj8yOjApLGF9fSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtuLmV4cGFuZG9dKXJldHVybiBhO3ZhciBiLGMsZCxlPWEudHlwZSxmPWEsZz10aGlzLmZpeEhvb2tzW2VdO2d8fCh0aGlzLmZpeEhvb2tzW2VdPWc9Vy50ZXN0KGUpP3RoaXMubW91c2VIb29rczpWLnRlc3QoZSk/dGhpcy5rZXlIb29rczp7fSksZD1nLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KGcucHJvcHMpOnRoaXMucHJvcHMsYT1uZXcgbi5FdmVudChmKSxiPWQubGVuZ3RoO3doaWxlKGItLSljPWRbYl0sYVtjXT1mW2NdO3JldHVybiBhLnRhcmdldHx8KGEudGFyZ2V0PWwpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGcuZmlsdGVyP2cuZmlsdGVyKGEsZik6YX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMhPT1fKCkmJnRoaXMuZm9jdXM/KHRoaXMuZm9jdXMoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1fKCkmJnRoaXMuYmx1cj8odGhpcy5ibHVyKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOiJmb2N1c291dCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuImNoZWNrYm94Ij09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmbi5ub2RlTmFtZSh0aGlzLCJpbnB1dCIpPyh0aGlzLmNsaWNrKCksITEpOnZvaWQgMH0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYS50YXJnZXQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7ZD9uLmV2ZW50LnRyaWdnZXIoZSxudWxsLGIpOm4uZXZlbnQuZGlzcGF0Y2guY2FsbChiLGUpLGUuaXNEZWZhdWx0UHJldmVudGVkKCkmJmMucHJldmVudERlZmF1bHQoKX19LG4ucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9LG4uRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4uRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP1o6JCk6dGhpcy50eXBlPWEsYiYmbi5leHRlbmQodGhpcyxiKSx0aGlzLnRpbWVTdGFtcD1hJiZhLnRpbWVTdGFtcHx8bi5ub3coKSx2b2lkKHRoaXNbbi5leHBhbmRvXT0hMCkpOm5ldyBuLkV2ZW50KGEsYil9LG4uRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6JCxpc1Byb3BhZ2F0aW9uU3RvcHBlZDokLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiQscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9WixhJiZhLnByZXZlbnREZWZhdWx0JiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPVosYSYmYS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPVosYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybighZXx8ZSE9PWQmJiFuLmNvbnRhaW5zKGQsZSkpJiYoYS50eXBlPWYub3JpZ1R5cGUsYz1mLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEudHlwZT1iKSxjfX19KSxrLmZvY3VzaW5CdWJibGVzfHxuLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7bi5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG4uZXZlbnQuZml4KGEpLCEwKX07bi5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPUwuYWNjZXNzKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksTC5hY2Nlc3MoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpLTE7ZT9MLmFjY2VzcyhkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLEwucmVtb3ZlKGQsYikpfX19KSxuLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7InN0cmluZyIhPXR5cGVvZiBiJiYoYz1jfHxiLGI9dm9pZCAwKTtmb3IoZyBpbiBhKXRoaXMub24oZyxiLGMsYVtnXSxlKTtyZXR1cm4gdGhpc31pZihudWxsPT1jJiZudWxsPT1kPyhkPWIsYz1iPXZvaWQgMCk6bnVsbD09ZCYmKCJzdHJpbmciPT10eXBlb2YgYj8oZD1jLGM9dm9pZCAwKTooZD1jLGM9YixiPXZvaWQgMCkpLGQ9PT0hMSlkPSQ7ZWxzZSBpZighZClyZXR1cm4gdGhpcztyZXR1cm4gMT09PWUmJihmPWQsZD1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5ndWlkPWYuZ3VpZHx8KGYuZ3VpZD1uLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYSxkLGMsYil9KX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuKGI9PT0hMXx8ImZ1bmN0aW9uIj09dHlwZW9mIGIpJiYoYz1iLGI9dm9pZCAwKSxjPT09ITEmJihjPSQpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIGFiPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksYmI9LzwoW1x3Ol0rKS8sY2I9Lzx8JiM/XHcrOy8sZGI9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxlYj0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxmYj0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksZ2I9L150cnVlXC8oLiopLyxoYj0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csaWI9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtpYi5vcHRncm91cD1pYi5vcHRpb24saWIudGJvZHk9aWIudGZvb3Q9aWIuY29sZ3JvdXA9aWIuY2FwdGlvbj1pYi50aGVhZCxpYi50aD1pYi50ZDtmdW5jdGlvbiBqYihhLGIpe3JldHVybiBuLm5vZGVOYW1lKGEsInRhYmxlIikmJm4ubm9kZU5hbWUoMTEhPT1iLm5vZGVUeXBlP2I6Yi5maXJzdENoaWxkLCJ0ciIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IilbMF18fGEuYXBwZW5kQ2hpbGQoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRib2R5IikpOmF9ZnVuY3Rpb24ga2IoYSl7cmV0dXJuIGEudHlwZT0obnVsbCE9PWEuZ2V0QXR0cmlidXRlKCJ0eXBlIikpKyIvIithLnR5cGUsYX1mdW5jdGlvbiBsYihhKXt2YXIgYj1nYi5leGVjKGEudHlwZSk7cmV0dXJuIGI/YS50eXBlPWJbMV06YS5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKSxhfWZ1bmN0aW9uIG1iKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKUwuc2V0KGFbY10sImdsb2JhbEV2YWwiLCFifHxMLmdldChiW2NdLCJnbG9iYWxFdmFsIikpfWZ1bmN0aW9uIG5iKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksajtpZigxPT09Yi5ub2RlVHlwZSl7aWYoTC5oYXNEYXRhKGEpJiYoZj1MLmFjY2VzcyhhKSxnPUwuc2V0KGIsZiksaj1mLmV2ZW50cykpe2RlbGV0ZSBnLmhhbmRsZSxnLmV2ZW50cz17fTtmb3IoZSBpbiBqKWZvcihjPTAsZD1qW2VdLmxlbmd0aDtkPmM7YysrKW4uZXZlbnQuYWRkKGIsZSxqW2VdW2NdKX1NLmhhc0RhdGEoYSkmJihoPU0uYWNjZXNzKGEpLGk9bi5leHRlbmQoe30saCksTS5zZXQoYixpKSl9fWZ1bmN0aW9uIG9iKGEsYil7dmFyIGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fCIqIik6YS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOltdO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sYyk6Y31mdW5jdGlvbiBwYihhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsiaW5wdXQiPT09YyYmVC50ZXN0KGEudHlwZSk/Yi5jaGVja2VkPWEuY2hlY2tlZDooImlucHV0Ij09PWN8fCJ0ZXh0YXJlYSI9PT1jKSYmKGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1uLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jbG9uZU5vZGUoITApLGk9bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoIShrLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZz1vYihoKSxmPW9iKGEpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspcGIoZltkXSxnW2RdKTtpZihiKWlmKGMpZm9yKGY9Znx8b2IoYSksZz1nfHxvYihoKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKW5iKGZbZF0sZ1tkXSk7ZWxzZSBuYihhLGgpO3JldHVybiBnPW9iKGgsInNjcmlwdCIpLGcubGVuZ3RoPjAmJm1iKGcsIWkmJm9iKGEsInNjcmlwdCIpKSxofSxidWlsZEZyYWdtZW50OmZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZSxmLGcsaCxpLGosaz1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxsPVtdLG09MCxvPWEubGVuZ3RoO28+bTttKyspaWYoZT1hW21dLGV8fDA9PT1lKWlmKCJvYmplY3QiPT09bi50eXBlKGUpKW4ubWVyZ2UobCxlLm5vZGVUeXBlP1tlXTplKTtlbHNlIGlmKGNiLnRlc3QoZSkpe2Y9Znx8ay5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxnPShiYi5leGVjKGUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLGg9aWJbZ118fGliLl9kZWZhdWx0LGYuaW5uZXJIVE1MPWhbMV0rZS5yZXBsYWNlKGFiLCI8JDE+PC8kMj4iKStoWzJdLGo9aFswXTt3aGlsZShqLS0pZj1mLmxhc3RDaGlsZDtuLm1lcmdlKGwsZi5jaGlsZE5vZGVzKSxmPWsuZmlyc3RDaGlsZCxmLnRleHRDb250ZW50PSIifWVsc2UgbC5wdXNoKGIuY3JlYXRlVGV4dE5vZGUoZSkpO2sudGV4dENvbnRlbnQ9IiIsbT0wO3doaWxlKGU9bFttKytdKWlmKCghZHx8LTE9PT1uLmluQXJyYXkoZSxkKSkmJihpPW4uY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpLGY9b2Ioay5hcHBlbmRDaGlsZChlKSwic2NyaXB0IiksaSYmbWIoZiksYykpe2o9MDt3aGlsZShlPWZbaisrXSlmYi50ZXN0KGUudHlwZXx8IiIpJiZjLnB1c2goZSl9cmV0dXJuIGt9LGNsZWFuRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkLGUsZj1uLmV2ZW50LnNwZWNpYWwsZz0wO3ZvaWQgMCE9PShjPWFbZ10pO2crKyl7aWYobi5hY2NlcHREYXRhKGMpJiYoZT1jW0wuZXhwYW5kb10sZSYmKGI9TC5jYWNoZVtlXSkpKXtpZihiLmV2ZW50cylmb3IoZCBpbiBiLmV2ZW50cylmW2RdP24uZXZlbnQucmVtb3ZlKGMsZCk6bi5yZW1vdmVFdmVudChjLGQsYi5oYW5kbGUpO0wuY2FjaGVbZV0mJmRlbGV0ZSBMLmNhY2hlW2VdfWRlbGV0ZSBNLmNhY2hlW2NbTS5leHBhbmRvXV19fX0pLG4uZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/bi50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7KDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKSYmKHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWpiKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9amIodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD1hP24uZmlsdGVyKGEsdGhpcyk6dGhpcyxlPTA7bnVsbCE9KGM9ZFtlXSk7ZSsrKWJ8fDEhPT1jLm5vZGVUeXBlfHxuLmNsZWFuRGF0YShvYihjKSksYy5wYXJlbnROb2RlJiYoYiYmbi5jb250YWlucyhjLm93bmVyRG9jdW1lbnQsYykmJm1iKG9iKGMsInNjcmlwdCIpKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYykpO3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKTE9PT1hLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEob2IoYSwhMSkpLGEudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGw9PWE/ITE6YSxiPW51bGw9PWI/YTpiLHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2xvbmUodGhpcyxhLGIpfSl9LGh0bWw6ZnVuY3Rpb24oYSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdfHx7fSxjPTAsZD10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1hJiYxPT09Yi5ub2RlVHlwZSlyZXR1cm4gYi5pbm5lckhUTUw7aWYoInN0cmluZyI9PXR5cGVvZiBhJiYhZGIudGVzdChhKSYmIWliWyhiYi5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1hLnJlcGxhY2UoYWIsIjwkMT48LyQyPiIpO3RyeXtmb3IoO2Q+YztjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKG9iKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihiKXthPXRoaXMucGFyZW50Tm9kZSxuLmNsZWFuRGF0YShvYih0aGlzKSksYSYmYS5yZXBsYWNlQ2hpbGQoYix0aGlzKX0pLGEmJihhLmxlbmd0aHx8YS5ub2RlVHlwZSk/dGhpczp0aGlzLnJlbW92ZSgpfSxkZXRhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVtb3ZlKGEsITApfSxkb21NYW5pcDpmdW5jdGlvbihhLGIpe2E9ZS5hcHBseShbXSxhKTt2YXIgYyxkLGYsZyxoLGksaj0wLGw9dGhpcy5sZW5ndGgsbT10aGlzLG89bC0xLHA9YVswXSxxPW4uaXNGdW5jdGlvbihwKTtpZihxfHxsPjEmJiJzdHJpbmciPT10eXBlb2YgcCYmIWsuY2hlY2tDbG9uZSYmZWIudGVzdChwKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPW0uZXEoYyk7cSYmKGFbMF09cC5jYWxsKHRoaXMsYyxkLmh0bWwoKSkpLGQuZG9tTWFuaXAoYSxiKX0pO2lmKGwmJihjPW4uYnVpbGRGcmFnbWVudChhLHRoaXNbMF0ub3duZXJEb2N1bWVudCwhMSx0aGlzKSxkPWMuZmlyc3RDaGlsZCwxPT09Yy5jaGlsZE5vZGVzLmxlbmd0aCYmKGM9ZCksZCkpe2ZvcihmPW4ubWFwKG9iKGMsInNjcmlwdCIpLGtiKSxnPWYubGVuZ3RoO2w+ajtqKyspaD1jLGohPT1vJiYoaD1uLmNsb25lKGgsITAsITApLGcmJm4ubWVyZ2UoZixvYihoLCJzY3JpcHQiKSkpLGIuY2FsbCh0aGlzW2pdLGgsaik7aWYoZylmb3IoaT1mW2YubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsbi5tYXAoZixsYiksaj0wO2c+ajtqKyspaD1mW2pdLGZiLnRlc3QoaC50eXBlfHwiIikmJiFMLmFjY2VzcyhoLCJnbG9iYWxFdmFsIikmJm4uY29udGFpbnMoaSxoKSYmKGguc3JjP24uX2V2YWxVcmwmJm4uX2V2YWxVcmwoaC5zcmMpOm4uZ2xvYmFsRXZhbChoLnRleHRDb250ZW50LnJlcGxhY2UoaGIsIiIpKSl9cmV0dXJuIHRoaXN9fSksbi5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPVtdLGU9bihhKSxnPWUubGVuZ3RoLTEsaD0wO2c+PWg7aCsrKWM9aD09PWc/dGhpczp0aGlzLmNsb25lKCEwKSxuKGVbaF0pW2JdKGMpLGYuYXBwbHkoZCxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZCl9fSk7dmFyIHFiLHJiPXt9O2Z1bmN0aW9uIHNiKGIsYyl7dmFyIGQsZT1uKGMuY3JlYXRlRWxlbWVudChiKSkuYXBwZW5kVG8oYy5ib2R5KSxmPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUmJihkPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoZVswXSkpP2QuZGlzcGxheTpuLmNzcyhlWzBdLCJkaXNwbGF5Iik7cmV0dXJuIGUuZGV0YWNoKCksZn1mdW5jdGlvbiB0YihhKXt2YXIgYj1sLGM9cmJbYV07cmV0dXJuIGN8fChjPXNiKGEsYiksIm5vbmUiIT09YyYmY3x8KHFiPShxYnx8bigiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpKS5hcHBlbmRUbyhiLmRvY3VtZW50RWxlbWVudCksYj1xYlswXS5jb250ZW50RG9jdW1lbnQsYi53cml0ZSgpLGIuY2xvc2UoKSxjPXNiKGEsYikscWIuZGV0YWNoKCkpLHJiW2FdPWMpLGN9dmFyIHViPS9ebWFyZ2luLyx2Yj1uZXcgUmVnRXhwKCJeKCIrUSsiKSg/IXB4KVthLXolXSskIiwiaSIpLHdiPWZ1bmN0aW9uKGEpe3JldHVybiBhLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpfTtmdW5jdGlvbiB4YihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fHdiKGEpLGMmJihnPWMuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXSksYyYmKCIiIT09Z3x8bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPW4uc3R5bGUoYSxiKSksdmIudGVzdChnKSYmdWIudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwIT09Zz9nKyIiOmd9ZnVuY3Rpb24geWIoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19IWZ1bmN0aW9uKCl7dmFyIGIsYyxkPWwuZG9jdW1lbnRFbGVtZW50LGU9bC5jcmVhdGVFbGVtZW50KCJkaXYiKSxmPWwuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoZi5zdHlsZSl7Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGYuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIixrLmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxlLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixlLmFwcGVuZENoaWxkKGYpO2Z1bmN0aW9uIGcoKXtmLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlIixmLmlubmVySFRNTD0iIixkLmFwcGVuZENoaWxkKGUpO3ZhciBnPWEuZ2V0Q29tcHV0ZWRTdHlsZShmLG51bGwpO2I9IjElIiE9PWcudG9wLGM9IjRweCI9PT1nLndpZHRoLGQucmVtb3ZlQ2hpbGQoZSl9YS5nZXRDb21wdXRlZFN0eWxlJiZuLmV4dGVuZChrLHtwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoKSxifSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1jJiZnKCksY30scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3ZhciBiLGM9Zi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyZXR1cm4gYy5zdHlsZS5jc3NUZXh0PWYuc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowIixjLnN0eWxlLm1hcmdpblJpZ2h0PWMuc3R5bGUud2lkdGg9IjAiLGYuc3R5bGUud2lkdGg9IjFweCIsZC5hcHBlbmRDaGlsZChlKSxiPSFwYXJzZUZsb2F0KGEuZ2V0Q29tcHV0ZWRTdHlsZShjLG51bGwpLm1hcmdpblJpZ2h0KSxkLnJlbW92ZUNoaWxkKGUpLGJ9fSl9fSgpLG4uc3dhcD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07dmFyIHpiPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxBYj1uZXcgUmVnRXhwKCJeKCIrUSsiKSguKikkIiwiaSIpLEJiPW5ldyBSZWdFeHAoIl4oWystXSk9KCIrUSsiKSIsImkiKSxDYj17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sRGI9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LEViPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl07ZnVuY3Rpb24gRmIoYSxiKXtpZihiIGluIGEpcmV0dXJuIGI7dmFyIGM9YlswXS50b1VwcGVyQ2FzZSgpK2Iuc2xpY2UoMSksZD1iLGU9RWIubGVuZ3RoO3doaWxlKGUtLSlpZihiPUViW2VdK2MsYiBpbiBhKXJldHVybiBiO3JldHVybiBkfWZ1bmN0aW9uIEdiKGEsYixjKXt2YXIgZD1BYi5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHwicHgiKTpifWZ1bmN0aW9uIEhiKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PWI/MTowLGc9MDs0PmY7Zis9MikibWFyZ2luIj09PWMmJihnKz1uLmNzcyhhLGMrUltmXSwhMCxlKSksZD8oImNvbnRlbnQiPT09YyYmKGctPW4uY3NzKGEsInBhZGRpbmciK1JbZl0sITAsZSkpLCJtYXJnaW4iIT09YyYmKGctPW4uY3NzKGEsImJvcmRlciIrUltmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPW4uY3NzKGEsInBhZGRpbmciK1JbZl0sITAsZSksInBhZGRpbmciIT09YyYmKGcrPW4uY3NzKGEsImJvcmRlciIrUltmXSsiV2lkdGgiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gSWIoYSxiLGMpe3ZhciBkPSEwLGU9IndpZHRoIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPXdiKGEpLGc9ImJvcmRlci1ib3giPT09bi5jc3MoYSwiYm94U2l6aW5nIiwhMSxmKTtpZigwPj1lfHxudWxsPT1lKXtpZihlPXhiKGEsYixmKSwoMD5lfHxudWxsPT1lKSYmKGU9YS5zdHlsZVtiXSksdmIudGVzdChlKSlyZXR1cm4gZTtkPWcmJihrLmJveFNpemluZ1JlbGlhYmxlKCl8fGU9PT1hLnN0eWxlW2JdKSxlPXBhcnNlRmxvYXQoZSl8fDB9cmV0dXJuIGUrSGIoYSxiLGN8fChnPyJib3JkZXIiOiJjb250ZW50IiksZCxmKSsicHgifWZ1bmN0aW9uIEpiKGEsYil7Zm9yKHZhciBjLGQsZSxmPVtdLGc9MCxoPWEubGVuZ3RoO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihmW2ddPUwuZ2V0KGQsIm9sZGRpc3BsYXkiKSxjPWQuc3R5bGUuZGlzcGxheSxiPyhmW2ddfHwibm9uZSIhPT1jfHwoZC5zdHlsZS5kaXNwbGF5PSIiKSwiIj09PWQuc3R5bGUuZGlzcGxheSYmUyhkKSYmKGZbZ109TC5hY2Nlc3MoZCwib2xkZGlzcGxheSIsdGIoZC5ub2RlTmFtZSkpKSk6KGU9UyhkKSwibm9uZSI9PT1jJiZlfHxMLnNldChkLCJvbGRkaXNwbGF5IixlP2M6bi5jc3MoZCwiZGlzcGxheSIpKSkpO2ZvcihnPTA7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGImJiJub25lIiE9PWQuc3R5bGUuZGlzcGxheSYmIiIhPT1kLnN0eWxlLmRpc3BsYXl8fChkLnN0eWxlLmRpc3BsYXk9Yj9mW2ddfHwiIjoibm9uZSIpKTtyZXR1cm4gYX1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPXhiKGEsIm9wYWNpdHkiKTtyZXR1cm4iIj09PWM/IjEiOmN9fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6ImNzc0Zsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09RmIoaSxoKSksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWM/ZyYmImdldCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsInN0cmluZyI9PT1mJiYoZT1CYi5leGVjKGMpKSYmKGM9KGVbMV0rMSkqZVsyXStwYXJzZUZsb2F0KG4uY3NzKGEsYikpLGY9Im51bWJlciIpLG51bGwhPWMmJmM9PT1jJiYoIm51bWJlciIhPT1mfHxuLmNzc051bWJlcltoXXx8KGMrPSJweCIpLGsuY2xlYXJDbG9uZVN0eWxlfHwiIiE9PWN8fDAhPT1iLmluZGV4T2YoImJhY2tncm91bmQiKXx8KGlbYl09ImluaGVyaXQiKSxnJiYic2V0ImluIGcmJnZvaWQgMD09PShjPWcuc2V0KGEsYyxkKSl8fChpW2JdPWMpKSx2b2lkIDApfX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPUZiKGEuc3R5bGUsaCkpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSxnJiYiZ2V0ImluIGcmJihlPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWUmJihlPXhiKGEsYixkKSksIm5vcm1hbCI9PT1lJiZiIGluIERiJiYoZT1EYltiXSksIiI9PT1jfHxjPyhmPXBhcnNlRmxvYXQoZSksYz09PSEwfHxuLmlzTnVtZXJpYyhmKT9mfHwwOmUpOmV9fSksbi5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGM/emIudGVzdChuLmNzcyhhLCJkaXNwbGF5IikpJiYwPT09YS5vZmZzZXRXaWR0aD9uLnN3YXAoYSxDYixmdW5jdGlvbigpe3JldHVybiBJYihhLGIsZCl9KTpJYihhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJndiKGEpO3JldHVybiBHYihhLGMsZD9IYihhLGIsZCwiYm9yZGVyLWJveCI9PT1uLmNzcyhhLCJib3hTaXppbmciLCExLGUpLGUpOjApfX19KSxuLmNzc0hvb2tzLm1hcmdpblJpZ2h0PXliKGsucmVsaWFibGVNYXJnaW5SaWdodCxmdW5jdGlvbihhLGIpe3JldHVybiBiP24uc3dhcChhLHtkaXNwbGF5OiJpbmxpbmUtYmxvY2sifSx4YixbYSwibWFyZ2luUmlnaHQiXSk6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ND5kO2QrKyllW2ErUltkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSx1Yi50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1HYil9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPXdiKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBKYih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBKYih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtTKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gS2IoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IEtiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1LYixLYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOktiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fCJzd2luZyIsdGhpcy5vcHRpb25zPWIsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPWQsdGhpcy51bml0PWZ8fChuLmNzc051bWJlcltjXT8iIjoicHgiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9S2IucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOktiLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihhKXt2YXIgYixjPUtiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLnBvcz1iPXRoaXMub3B0aW9ucy5kdXJhdGlvbj9uLmVhc2luZ1t0aGlzLmVhc2luZ10oYSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTphLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOktiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LEtiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1LYi5wcm90b3R5cGUsS2IucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBudWxsPT1hLmVsZW1bYS5wcm9wXXx8YS5lbGVtLnN0eWxlJiZudWxsIT1hLmVsZW0uc3R5bGVbYS5wcm9wXT8oYj1uLmNzcyhhLmVsZW0sYS5wcm9wLCIiKSxiJiYiYXV0byIhPT1iP2I6MCk6YS5lbGVtW2EucHJvcF19LHNldDpmdW5jdGlvbihhKXtuLmZ4LnN0ZXBbYS5wcm9wXT9uLmZ4LnN0ZXBbYS5wcm9wXShhKTphLmVsZW0uc3R5bGUmJihudWxsIT1hLmVsZW0uc3R5bGVbbi5jc3NQcm9wc1thLnByb3BdXXx8bi5jc3NIb29rc1thLnByb3BdKT9uLnN0eWxlKGEuZWxlbSxhLnByb3AsYS5ub3crYS51bml0KTphLmVsZW1bYS5wcm9wXT1hLm5vd319fSxLYi5wcm9wSG9va3Muc2Nyb2xsVG9wPUtiLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oYSl7YS5lbGVtLm5vZGVUeXBlJiZhLmVsZW0ucGFyZW50Tm9kZSYmKGEuZWxlbVthLnByb3BdPWEubm93KX19LG4uZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHN3aW5nOmZ1bmN0aW9uKGEpe3JldHVybi41LU1hdGguY29zKGEqTWF0aC5QSSkvMn19LG4uZng9S2IucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBMYixNYixOYj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sT2I9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK1ErIikoW2EteiVdKikkIiwiaSIpLFBiPS9xdWV1ZUhvb2tzJC8sUWI9W1ZiXSxSYj17IioiOltmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlVHdlZW4oYSxiKSxkPWMuY3VyKCksZT1PYi5leGVjKGIpLGY9ZSYmZVszXXx8KG4uY3NzTnVtYmVyW2FdPyIiOiJweCIpLGc9KG4uY3NzTnVtYmVyW2FdfHwicHgiIT09ZiYmK2QpJiZPYi5leGVjKG4uY3NzKGMuZWxlbSxhKSksaD0xLGk9MjA7aWYoZyYmZ1szXSE9PWYpe2Y9Znx8Z1szXSxlPWV8fFtdLGc9K2R8fDE7ZG8gaD1ofHwiLjUiLGcvPWgsbi5zdHlsZShjLmVsZW0sYSxnK2YpO3doaWxlKGghPT0oaD1jLmN1cigpL2QpJiYxIT09aCYmLS1pKX1yZXR1cm4gZSYmKGc9Yy5zdGFydD0rZ3x8K2R8fDAsYy51bml0PWYsYy5lbmQ9ZVsxXT9nKyhlWzFdKzEpKmVbMl06K2VbMl0pLGN9XX07ZnVuY3Rpb24gU2IoKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe0xiPXZvaWQgMH0pLExiPW4ubm93KCl9ZnVuY3Rpb24gVGIoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowOzQ+ZDtkKz0yLWIpYz1SW2RdLGVbIm1hcmdpbiIrY109ZVsicGFkZGluZyIrY109YTtyZXR1cm4gYiYmKGUub3BhY2l0eT1lLndpZHRoPWEpLGV9ZnVuY3Rpb24gVWIoYSxiLGMpe2Zvcih2YXIgZCxlPShSYltiXXx8W10pLmNvbmNhdChSYlsiKiJdKSxmPTAsZz1lLmxlbmd0aDtnPmY7ZisrKWlmKGQ9ZVtmXS5jYWxsKGMsYixhKSlyZXR1cm4gZH1mdW5jdGlvbiBWYihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosayxsPXRoaXMsbT17fSxvPWEuc3R5bGUscD1hLm5vZGVUeXBlJiZTKGEpLHE9TC5nZXQoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLGwuYWx3YXlzKGZ1bmN0aW9uKCl7bC5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gYnx8IndpZHRoImluIGIpJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1uLmNzcyhhLCJkaXNwbGF5Iiksaz0ibm9uZSI9PT1qP0wuZ2V0KGEsIm9sZGRpc3BsYXkiKXx8dGIoYS5ub2RlTmFtZSk6aiwiaW5saW5lIj09PWsmJiJub25lIj09PW4uY3NzKGEsImZsb2F0IikmJihvLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYoby5vdmVyZmxvdz0iaGlkZGVuIixsLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSk7Zm9yKGQgaW4gYilpZihlPWJbZF0sTmIuZXhlYyhlKSl7aWYoZGVsZXRlIGJbZF0sZj1mfHwidG9nZ2xlIj09PWUsZT09PShwPyJoaWRlIjoic2hvdyIpKXtpZigic2hvdyIhPT1lfHwhcXx8dm9pZCAwPT09cVtkXSljb250aW51ZTtwPSEwfW1bZF09cSYmcVtkXXx8bi5zdHlsZShhLGQpfWVsc2Ugaj12b2lkIDA7aWYobi5pc0VtcHR5T2JqZWN0KG0pKSJpbmxpbmUiPT09KCJub25lIj09PWo/dGIoYS5ub2RlTmFtZSk6aikmJihvLmRpc3BsYXk9aik7ZWxzZXtxPyJoaWRkZW4iaW4gcSYmKHA9cS5oaWRkZW4pOnE9TC5hY2Nlc3MoYSwiZnhzaG93Iix7fSksZiYmKHEuaGlkZGVuPSFwKSxwP24oYSkuc2hvdygpOmwuZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbC5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7TC5yZW1vdmUoYSwiZnhzaG93Iik7Zm9yKGIgaW4gbSluLnN0eWxlKGEsYixtW2JdKX0pO2ZvcihkIGluIG0pZz1VYihwP3FbZF06MCxkLGwpLGQgaW4gcXx8KHFbZF09Zy5zdGFydCxwJiYoZy5lbmQ9Zy5zdGFydCxnLnN0YXJ0PSJ3aWR0aCI9PT1kfHwiaGVpZ2h0Ij09PWQ/MTowKSl9fWZ1bmN0aW9uIFdiKGEsYil7dmFyIGMsZCxlLGYsZztmb3IoYyBpbiBhKWlmKGQ9bi5jYW1lbENhc2UoYyksZT1iW2RdLGY9YVtjXSxuLmlzQXJyYXkoZikmJihlPWZbMV0sZj1hW2NdPWZbMF0pLGMhPT1kJiYoYVtkXT1mLGRlbGV0ZSBhW2NdKSxnPW4uY3NzSG9va3NbZF0sZyYmImV4cGFuZCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24gWGIoYSxiLGMpe3ZhciBkLGUsZj0wLGc9UWIubGVuZ3RoLGg9bi5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSBpLmVsZW19KSxpPWZ1bmN0aW9uKCl7aWYoZSlyZXR1cm4hMTtmb3IodmFyIGI9TGJ8fFNiKCksYz1NYXRoLm1heCgwLGouc3RhcnRUaW1lK2ouZHVyYXRpb24tYiksZD1jL2ouZHVyYXRpb258fDAsZj0xLWQsZz0wLGk9ai50d2VlbnMubGVuZ3RoO2k+ZztnKyspai50d2VlbnNbZ10ucnVuKGYpO3JldHVybiBoLm5vdGlmeVdpdGgoYSxbaixmLGNdKSwxPmYmJmk/YzooaC5yZXNvbHZlV2l0aChhLFtqXSksITEpfSxqPWgucHJvbWlzZSh7ZWxlbTphLHByb3BzOm4uZXh0ZW5kKHt9LGIpLG9wdHM6bi5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTpMYnx8U2IoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPW4uVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7ZD5jO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/aC5yZXNvbHZlV2l0aChhLFtqLGJdKTpoLnJlamVjdFdpdGgoYSxbaixiXSksdGhpc319KSxrPWoucHJvcHM7Zm9yKFdiKGssai5vcHRzLnNwZWNpYWxFYXNpbmcpO2c+ZjtmKyspaWYoZD1RYltmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIGQ7cmV0dXJuIG4ubWFwKGssVWIsaiksbi5pc0Z1bmN0aW9uKGoub3B0cy5zdGFydCkmJmoub3B0cy5zdGFydC5jYWxsKGEsaiksbi5meC50aW1lcihuLmV4dGVuZChpLHtlbGVtOmEsYW5pbTpqLHF1ZXVlOmoub3B0cy5xdWV1ZX0pKSxqLnByb2dyZXNzKGoub3B0cy5wcm9ncmVzcykuZG9uZShqLm9wdHMuZG9uZSxqLm9wdHMuY29tcGxldGUpLmZhaWwoai5vcHRzLmZhaWwpLmFsd2F5cyhqLm9wdHMuYWx3YXlzKX1uLkFuaW1hdGlvbj1uLmV4dGVuZChYYix7dHdlZW5lcjpmdW5jdGlvbihhLGIpe24uaXNGdW5jdGlvbihhKT8oYj1hLGE9WyIqIl0pOmE9YS5zcGxpdCgiICIpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWM9YVtkXSxSYltjXT1SYltjXXx8W10sUmJbY10udW5zaGlmdChiKX0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9RYi51bnNoaWZ0KGEpOlFiLnB1c2goYSl9fSksbi5zcGVlZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSYmIm9iamVjdCI9PXR5cGVvZiBhP24uZXh0ZW5kKHt9LGEpOntjb21wbGV0ZTpjfHwhYyYmYnx8bi5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmMmJmJ8fGImJiFuLmlzRnVuY3Rpb24oYikmJmJ9O3JldHVybiBkLmR1cmF0aW9uPW4uZngub2ZmPzA6Im51bWJlciI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBuLmZ4LnNwZWVkcz9uLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTpuLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9ImZ4IiksZC5vbGQ9ZC5jb21wbGV0ZSxkLmNvbXBsZXRlPWZ1bmN0aW9uKCl7bi5pc0Z1bmN0aW9uKGQub2xkKSYmZC5vbGQuY2FsbCh0aGlzKSxkLnF1ZXVlJiZuLmRlcXVldWUodGhpcyxkLnF1ZXVlKX0sZH0sbi5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5maWx0ZXIoUykuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bi5pc0VtcHR5T2JqZWN0KGEpLGY9bi5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPVhiKHRoaXMsbi5leHRlbmQoe30sYSksZik7KGV8fEwuZ2V0KHRoaXMsImZpbmlzaCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGM9YixiPWEsYT12b2lkIDApLGImJmEhPT0hMSYmdGhpcy5xdWV1ZShhfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErInF1ZXVlSG9va3MiLGY9bi50aW1lcnMsZz1MLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZQYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyhifHwhYykmJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixjPUwuZ2V0KHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoVGIoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOlRiKCJzaG93Iiksc2xpZGVVcDpUYigiaGlkZSIpLHNsaWRlVG9nZ2xlOlRiKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPTAsYz1uLnRpbWVycztmb3IoTGI9bi5ub3coKTtiPGMubGVuZ3RoO2IrKylhPWNbYl0sYSgpfHxjW2JdIT09YXx8Yy5zcGxpY2UoYi0tLDEpO2MubGVuZ3RofHxuLmZ4LnN0b3AoKSxMYj12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtNYnx8KE1iPXNldEludGVydmFsKG4uZngudGljayxuLmZ4LmludGVydmFsKSl9LG4uZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoTWIpLE1iPW51bGx9LG4uZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LG4uZm4uZGVsYXk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1uLmZ4P24uZnguc3BlZWRzW2FdfHxhOmEsYj1ifHwiZngiLHRoaXMucXVldWUoYixmdW5jdGlvbihiLGMpe3ZhciBkPXNldFRpbWVvdXQoYixhKTtjLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZCl9fSl9LGZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGI9bC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSxjPWIuYXBwZW5kQ2hpbGQobC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSk7YS50eXBlPSJjaGVja2JveCIsay5jaGVja09uPSIiIT09YS52YWx1ZSxrLm9wdFNlbGVjdGVkPWMuc2VsZWN0ZWQsYi5kaXNhYmxlZD0hMCxrLm9wdERpc2FibGVkPSFjLmRpc2FibGVkLGE9bC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGEudmFsdWU9InQiLGEudHlwZT0icmFkaW8iLGsucmFkaW9WYWx1ZT0idCI9PT1hLnZhbHVlfSgpO3ZhciBZYixaYiwkYj1uLmV4cHIuYXR0ckhhbmRsZTtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZihhJiYzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiB0eXBlb2YgYS5nZXRBdHRyaWJ1dGU9PT1VP24ucHJvcChhLGIsYyk6KDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1iLnRvTG93ZXJDYXNlKCksZD1uLmF0dHJIb29rc1tiXXx8KG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYik/WmI6WWIpKSx2b2lkIDA9PT1jP2QmJiJnZXQiaW4gZCYmbnVsbCE9PShlPWQuZ2V0KGEsYikpP2U6KGU9bi5maW5kLmF0dHIoYSxiKSxudWxsPT1lP3ZvaWQgMDplKTpudWxsIT09Yz9kJiYic2V0ImluIGQmJnZvaWQgMCE9PShlPWQuc2V0KGEsYyxiKSk/ZTooYS5zZXRBdHRyaWJ1dGUoYixjKyIiKSxjKTp2b2lkIG4ucmVtb3ZlQXR0cihhLGIpKQ0KfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEUpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYykmJihhW2RdPSExKSxhLnJlbW92ZUF0dHJpYnV0ZShjKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oYSxiKXtpZighay5yYWRpb1ZhbHVlJiYicmFkaW8iPT09YiYmbi5ub2RlTmFtZShhLCJpbnB1dCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZSgidHlwZSIsYiksYyYmKGEudmFsdWU9YyksYn19fX19KSxaYj17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP24ucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPSRiW2JdfHxuLmZpbmQuYXR0cjskYltiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9JGJbYl0sJGJbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLCRiW2JdPWYpLGV9fSk7dmFyIF9iPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2k7bi5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbbi5wcm9wRml4W2FdfHxhXX0pfX0pLG4uZXh0ZW5kKHtwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn0scHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9YS5ub2RlVHlwZTtpZihhJiYzIT09ZyYmOCE9PWcmJjIhPT1nKXJldHVybiBmPTEhPT1nfHwhbi5pc1hNTERvYyhhKSxmJiYoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGFzQXR0cmlidXRlKCJ0YWJpbmRleCIpfHxfYi50ZXN0KGEubm9kZU5hbWUpfHxhLmhyZWY/YS50YWJJbmRleDotMX19fX0pLGsub3B0U2VsZWN0ZWR8fChuLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBhYz0vW1x0XHJcblxmXS9nO24uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0ic3RyaW5nIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHwiIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oIiAiK2MuY2xhc3NOYW1lKyIgIikucmVwbGFjZShhYywiICIpOiIgIikpe2Y9MDt3aGlsZShlPWJbZisrXSlkLmluZGV4T2YoIiAiK2UrIiAiKTwwJiYoZCs9ZSsiICIpO2c9bi50cmltKGQpLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0wPT09YXJndW1lbnRzLmxlbmd0aHx8InN0cmluZyI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8IiIpLm1hdGNoKEUpfHxbXTtqPmk7aSsrKWlmKGM9dGhpc1tpXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KCIgIitjLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoYWMsIiAiKToiIikpe2Y9MDt3aGlsZShlPWJbZisrXSl3aGlsZShkLmluZGV4T2YoIiAiK2UrIiAiKT49MClkPWQucmVwbGFjZSgiICIrZSsiICIsIiAiKTtnPWE/bi50cmltKGQpOiIiLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBhO3JldHVybiJib29sZWFuIj09dHlwZW9mIGImJiJzdHJpbmciPT09Yz9iP3RoaXMuYWRkQ2xhc3MoYSk6dGhpcy5yZW1vdmVDbGFzcyhhKTp0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGMpe24odGhpcykudG9nZ2xlQ2xhc3MoYS5jYWxsKHRoaXMsYyx0aGlzLmNsYXNzTmFtZSxiKSxiKX06ZnVuY3Rpb24oKXtpZigic3RyaW5nIj09PWMpe3ZhciBiLGQ9MCxlPW4odGhpcyksZj1hLm1hdGNoKEUpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlKGM9PT1VfHwiYm9vbGVhbiI9PT1jKSYmKHRoaXMuY2xhc3NOYW1lJiZMLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT0hMT8iIjpMLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXtmb3IodmFyIGI9IiAiK2ErIiAiLGM9MCxkPXRoaXMubGVuZ3RoO2Q+YztjKyspaWYoMT09PXRoaXNbY10ubm9kZVR5cGUmJigiICIrdGhpc1tjXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKGFjLCIgIikuaW5kZXhPZihiKT49MClyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgYmM9L1xyL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT0iIjoibnVtYmVyIj09dHlwZW9mIGU/ZSs9IiI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOmErIiJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYic2V0ImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSwidmFsdWUiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYiZ2V0ImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsInZhbHVlIikpP2M6KGM9ZS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGJjLCIiKTpudWxsPT1jPyIiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9InNlbGVjdC1vbmUiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLCEoIWMuc2VsZWN0ZWQmJmkhPT1lfHwoay5vcHREaXNhYmxlZD9jLmRpc2FibGVkOm51bGwhPT1jLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSl8fGMucGFyZW50Tm9kZS5kaXNhYmxlZCYmbi5ub2RlTmFtZShjLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KGQudmFsdWUsZik+PTApJiYoYz0hMCk7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGZ9fX19KSxuLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT49MDp2b2lkIDB9fSxrLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6YS52YWx1ZX0pfSksbi5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLCIqKiIpOnRoaXMub2ZmKGIsYXx8IioqIixjKX19KTt2YXIgY2M9bi5ub3coKSxkYz0vXD8vO24ucGFyc2VKU09OPWZ1bmN0aW9uKGEpe3JldHVybiBKU09OLnBhcnNlKGErIiIpfSxuLnBhcnNlWE1MPWZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoIWF8fCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gbnVsbDt0cnl7Yz1uZXcgRE9NUGFyc2VyLGI9Yy5wYXJzZUZyb21TdHJpbmcoYSwidGV4dC94bWwiKX1jYXRjaChkKXtiPXZvaWQgMH1yZXR1cm4oIWJ8fGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSYmbi5lcnJvcigiSW52YWxpZCBYTUw6ICIrYSksYn07dmFyIGVjLGZjLGdjPS8jLiokLyxoYz0vKFs/Jl0pXz1bXiZdKi8saWM9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxqYz0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxrYz0vXig/OkdFVHxIRUFEKSQvLGxjPS9eXC9cLy8sbWM9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sbmM9e30sb2M9e30scGM9IiovIi5jb25jYXQoIioiKTt0cnl7ZmM9bG9jYXRpb24uaHJlZn1jYXRjaChxYyl7ZmM9bC5jcmVhdGVFbGVtZW50KCJhIiksZmMuaHJlZj0iIixmYz1mYy5ocmVmfWVjPW1jLmV4ZWMoZmMudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIHJjKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZFswXT8oZD1kLnNsaWNlKDEpfHwiKiIsKGFbZF09YVtkXXx8W10pLnVuc2hpZnQoYykpOihhW2RdPWFbZF18fFtdKS5wdXNoKGMpfX1mdW5jdGlvbiBzYyhhLGIsYyxkKXt2YXIgZT17fSxmPWE9PT1vYztmdW5jdGlvbiBnKGgpe3ZhciBpO3JldHVybiBlW2hdPSEwLG4uZWFjaChhW2hdfHxbXSxmdW5jdGlvbihhLGgpe3ZhciBqPWgoYixjLGQpO3JldHVybiJzdHJpbmciIT10eXBlb2Yganx8Znx8ZVtqXT9mPyEoaT1qKTp2b2lkIDA6KGIuZGF0YVR5cGVzLnVuc2hpZnQoaiksZyhqKSwhMSl9KSxpfXJldHVybiBnKGIuZGF0YVR5cGVzWzBdKXx8IWVbIioiXSYmZygiKiIpfWZ1bmN0aW9uIHRjKGEsYil7dmFyIGMsZCxlPW4uYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoYyBpbiBiKXZvaWQgMCE9PWJbY10mJigoZVtjXT9hOmR8fChkPXt9KSlbY109YltjXSk7cmV0dXJuIGQmJm4uZXh0ZW5kKCEwLGEsZCksYX1mdW5jdGlvbiB1YyhhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLmNvbnRlbnRzLGk9YS5kYXRhVHlwZXM7d2hpbGUoIioiPT09aVswXSlpLnNoaWZ0KCksdm9pZCAwPT09ZCYmKGQ9YS5taW1lVHlwZXx8Yi5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpO2lmKGQpZm9yKGUgaW4gaClpZihoW2VdJiZoW2VdLnRlc3QoZCkpe2kudW5zaGlmdChlKTticmVha31pZihpWzBdaW4gYylmPWlbMF07ZWxzZXtmb3IoZSBpbiBjKXtpZighaVswXXx8YS5jb252ZXJ0ZXJzW2UrIiAiK2lbMF1dKXtmPWU7YnJlYWt9Z3x8KGc9ZSl9Zj1mfHxnfXJldHVybiBmPyhmIT09aVswXSYmaS51bnNoaWZ0KGYpLGNbZl0pOnZvaWQgMH1mdW5jdGlvbiB2YyhhLGIsYyxkKXt2YXIgZSxmLGcsaCxpLGo9e30saz1hLmRhdGFUeXBlcy5zbGljZSgpO2lmKGtbMV0pZm9yKGcgaW4gYS5jb252ZXJ0ZXJzKWpbZy50b0xvd2VyQ2FzZSgpXT1hLmNvbnZlcnRlcnNbZ107Zj1rLnNoaWZ0KCk7d2hpbGUoZilpZihhLnJlc3BvbnNlRmllbGRzW2ZdJiYoY1thLnJlc3BvbnNlRmllbGRzW2ZdXT1iKSwhaSYmZCYmYS5kYXRhRmlsdGVyJiYoYj1hLmRhdGFGaWx0ZXIoYixhLmRhdGFUeXBlKSksaT1mLGY9ay5zaGlmdCgpKWlmKCIqIj09PWYpZj1pO2Vsc2UgaWYoIioiIT09aSYmaSE9PWYpe2lmKGc9altpKyIgIitmXXx8alsiKiAiK2ZdLCFnKWZvcihlIGluIGopaWYoaD1lLnNwbGl0KCIgIiksaFsxXT09PWYmJihnPWpbaSsiICIraFswXV18fGpbIiogIitoWzBdXSkpe2c9PT0hMD9nPWpbZV06altlXSE9PSEwJiYoZj1oWzBdLGsudW5zaGlmdChoWzFdKSk7YnJlYWt9aWYoZyE9PSEwKWlmKGcmJmFbInRocm93cyJdKWI9ZyhiKTtlbHNlIHRyeXtiPWcoYil9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6Zz9sOiJObyBjb252ZXJzaW9uIGZyb20gIitpKyIgdG8gIitmfX19cmV0dXJue3N0YXRlOiJzdWNjZXNzIixkYXRhOmJ9fW4uZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpmYyx0eXBlOiJHRVQiLGlzTG9jYWw6amMudGVzdChlY1sxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpwYyx0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOm4ucGFyc2VKU09OLCJ0ZXh0IHhtbCI6bi5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/dGModGMoYSxuLmFqYXhTZXR0aW5ncyksYik6dGMobi5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6cmMobmMpLGFqYXhUcmFuc3BvcnQ6cmMob2MpLGFqYXg6ZnVuY3Rpb24oYSxiKXsib2JqZWN0Ij09dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGI9Ynx8e307dmFyIGMsZCxlLGYsZyxoLGksaixrPW4uYWpheFNldHVwKHt9LGIpLGw9ay5jb250ZXh0fHxrLG09ay5jb250ZXh0JiYobC5ub2RlVHlwZXx8bC5qcXVlcnkpP24obCk6bi5ldmVudCxvPW4uRGVmZXJyZWQoKSxwPW4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHE9ay5zdGF0dXNDb2RlfHx7fSxyPXt9LHM9e30sdD0wLHU9ImNhbmNlbGVkIix2PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoMj09PXQpe2lmKCFmKXtmPXt9O3doaWxlKGI9aWMuZXhlYyhlKSlmW2JbMV0udG9Mb3dlckNhc2UoKV09YlsyXX1iPWZbYS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09Yj9udWxsOmJ9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09dD9lOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHR8fChhPXNbY109c1tjXXx8YSxyW2FdPWIpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHR8fChrLm1pbWVUeXBlPWEpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYSlpZigyPnQpZm9yKGIgaW4gYSlxW2JdPVtxW2JdLGFbYl1dO2Vsc2Ugdi5hbHdheXMoYVt2LnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihhKXt2YXIgYj1hfHx1O3JldHVybiBjJiZjLmFib3J0KGIpLHgoMCxiKSx0aGlzfX07aWYoby5wcm9taXNlKHYpLmNvbXBsZXRlPXAuYWRkLHYuc3VjY2Vzcz12LmRvbmUsdi5lcnJvcj12LmZhaWwsay51cmw9KChhfHxrLnVybHx8ZmMpKyIiKS5yZXBsYWNlKGdjLCIiKS5yZXBsYWNlKGxjLGVjWzFdKyIvLyIpLGsudHlwZT1iLm1ldGhvZHx8Yi50eXBlfHxrLm1ldGhvZHx8ay50eXBlLGsuZGF0YVR5cGVzPW4udHJpbShrLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goRSl8fFsiIl0sbnVsbD09ay5jcm9zc0RvbWFpbiYmKGg9bWMuZXhlYyhrLnVybC50b0xvd2VyQ2FzZSgpKSxrLmNyb3NzRG9tYWluPSEoIWh8fGhbMV09PT1lY1sxXSYmaFsyXT09PWVjWzJdJiYoaFszXXx8KCJodHRwOiI9PT1oWzFdPyI4MCI6IjQ0MyIpKT09PShlY1szXXx8KCJodHRwOiI9PT1lY1sxXT8iODAiOiI0NDMiKSkpKSxrLmRhdGEmJmsucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2Ygay5kYXRhJiYoay5kYXRhPW4ucGFyYW0oay5kYXRhLGsudHJhZGl0aW9uYWwpKSxzYyhuYyxrLGIsdiksMj09PXQpcmV0dXJuIHY7aT1rLmdsb2JhbCxpJiYwPT09bi5hY3RpdmUrKyYmbi5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSxrLnR5cGU9ay50eXBlLnRvVXBwZXJDYXNlKCksay5oYXNDb250ZW50PSFrYy50ZXN0KGsudHlwZSksZD1rLnVybCxrLmhhc0NvbnRlbnR8fChrLmRhdGEmJihkPWsudXJsKz0oZGMudGVzdChkKT8iJiI6Ij8iKStrLmRhdGEsZGVsZXRlIGsuZGF0YSksay5jYWNoZT09PSExJiYoay51cmw9aGMudGVzdChkKT9kLnJlcGxhY2UoaGMsIiQxXz0iK2NjKyspOmQrKGRjLnRlc3QoZCk/IiYiOiI/IikrIl89IitjYysrKSksay5pZk1vZGlmaWVkJiYobi5sYXN0TW9kaWZpZWRbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLG4ubGFzdE1vZGlmaWVkW2RdKSxuLmV0YWdbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsbi5ldGFnW2RdKSksKGsuZGF0YSYmay5oYXNDb250ZW50JiZrLmNvbnRlbnRUeXBlIT09ITF8fGIuY29udGVudFR5cGUpJiZ2LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsay5jb250ZW50VHlwZSksdi5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLGsuZGF0YVR5cGVzWzBdJiZrLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dP2suYWNjZXB0c1trLmRhdGFUeXBlc1swXV0rKCIqIiE9PWsuZGF0YVR5cGVzWzBdPyIsICIrcGMrIjsgcT0wLjAxIjoiIik6ay5hY2NlcHRzWyIqIl0pO2ZvcihqIGluIGsuaGVhZGVycyl2LnNldFJlcXVlc3RIZWFkZXIoaixrLmhlYWRlcnNbal0pO2lmKGsuYmVmb3JlU2VuZCYmKGsuYmVmb3JlU2VuZC5jYWxsKGwsdixrKT09PSExfHwyPT09dCkpcmV0dXJuIHYuYWJvcnQoKTt1PSJhYm9ydCI7Zm9yKGogaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pdltqXShrW2pdKTtpZihjPXNjKG9jLGssYix2KSl7di5yZWFkeVN0YXRlPTEsaSYmbS50cmlnZ2VyKCJhamF4U2VuZCIsW3Ysa10pLGsuYXN5bmMmJmsudGltZW91dD4wJiYoZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7di5hYm9ydCgidGltZW91dCIpfSxrLnRpbWVvdXQpKTt0cnl7dD0xLGMuc2VuZChyLHgpfWNhdGNoKHcpe2lmKCEoMj50KSl0aHJvdyB3O3goLTEsdyl9fWVsc2UgeCgtMSwiTm8gVHJhbnNwb3J0Iik7ZnVuY3Rpb24geChhLGIsZixoKXt2YXIgaixyLHMsdSx3LHg9YjsyIT09dCYmKHQ9MixnJiZjbGVhclRpbWVvdXQoZyksYz12b2lkIDAsZT1ofHwiIix2LnJlYWR5U3RhdGU9YT4wPzQ6MCxqPWE+PTIwMCYmMzAwPmF8fDMwND09PWEsZiYmKHU9dWMoayx2LGYpKSx1PXZjKGssdSx2LGopLGo/KGsuaWZNb2RpZmllZCYmKHc9di5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHcmJihuLmxhc3RNb2RpZmllZFtkXT13KSx3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx3JiYobi5ldGFnW2RdPXcpKSwyMDQ9PT1hfHwiSEVBRCI9PT1rLnR5cGU/eD0ibm9jb250ZW50IjozMDQ9PT1hP3g9Im5vdG1vZGlmaWVkIjooeD11LnN0YXRlLHI9dS5kYXRhLHM9dS5lcnJvcixqPSFzKSk6KHM9eCwoYXx8IXgpJiYoeD0iZXJyb3IiLDA+YSYmKGE9MCkpKSx2LnN0YXR1cz1hLHYuc3RhdHVzVGV4dD0oYnx8eCkrIiIsaj9vLnJlc29sdmVXaXRoKGwsW3IseCx2XSk6by5yZWplY3RXaXRoKGwsW3YseCxzXSksdi5zdGF0dXNDb2RlKHEpLHE9dm9pZCAwLGkmJm0udHJpZ2dlcihqPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW3YsayxqP3I6c10pLHAuZmlyZVdpdGgobCxbdix4XSksaSYmKG0udHJpZ2dlcigiYWpheENvbXBsZXRlIixbdixrXSksLS1uLmFjdGl2ZXx8bi5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpKSl9cmV0dXJuIHZ9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmdldChhLGIsYywianNvbiIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5nZXQoYSx2b2lkIDAsYiwic2NyaXB0Iil9fSksbi5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGEsYil7bltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbi5hamF4KHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSl9fSksbi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk6KHRoaXNbMF0mJihiPW4oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpcyl9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKG4uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihiKXtuKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9OmZ1bmN0aW9uKCl7dmFyIGI9bih0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1uLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7bi5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fG4odGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pLG4uZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aDw9MCYmYS5vZmZzZXRIZWlnaHQ8PTB9LG4uZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIW4uZXhwci5maWx0ZXJzLmhpZGRlbihhKX07dmFyIHdjPS8lMjAvZyx4Yz0vXFtcXSQvLHljPS9ccj9cbi9nLHpjPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxBYz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gQmMoYSxiLGMsZCl7dmFyIGU7aWYobi5pc0FycmF5KGIpKW4uZWFjaChiLGZ1bmN0aW9uKGIsZSl7Y3x8eGMudGVzdChhKT9kKGEsZSk6QmMoYSsiWyIrKCJvYmplY3QiPT10eXBlb2YgZT9iOiIiKSsiXSIsZSxjLGQpfSk7ZWxzZSBpZihjfHwib2JqZWN0IiE9PW4udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKUJjKGErIlsiK2UrIl0iLGJbZV0sYyxkKX1uLnBhcmFtPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPWZ1bmN0aW9uKGEsYil7Yj1uLmlzRnVuY3Rpb24oYik/YigpOm51bGw9PWI/IiI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChiKX07aWYodm9pZCAwPT09YiYmKGI9bi5hamF4U2V0dGluZ3MmJm4uYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSxuLmlzQXJyYXkoYSl8fGEuanF1ZXJ5JiYhbi5pc1BsYWluT2JqZWN0KGEpKW4uZWFjaChhLGZ1bmN0aW9uKCl7ZSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihjIGluIGEpQmMoYyxhW2NdLGIsZSk7cmV0dXJuIGQuam9pbigiJiIpLnJlcGxhY2Uod2MsIisiKX0sbi5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBuLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9bi5wcm9wKHRoaXMsImVsZW1lbnRzIik7cmV0dXJuIGE/bi5tYWtlQXJyYXkoYSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBhPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhbih0aGlzKS5pcygiOmRpc2FibGVkIikmJkFjLnRlc3QodGhpcy5ub2RlTmFtZSkmJiF6Yy50ZXN0KGEpJiYodGhpcy5jaGVja2VkfHwhVC50ZXN0KGEpKX0pLm1hcChmdW5jdGlvbihhLGIpe3ZhciBjPW4odGhpcykudmFsKCk7cmV0dXJuIG51bGw9PWM/bnVsbDpuLmlzQXJyYXkoYyk/bi5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm57bmFtZTpiLm5hbWUsdmFsdWU6YS5yZXBsYWNlKHljLCJcclxuIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh5YywiXHJcbiIpfX0pLmdldCgpfX0pLG4uYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKGEpe319O3ZhciBDYz0wLERjPXt9LEVjPXswOjIwMCwxMjIzOjIwNH0sRmM9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5BY3RpdmVYT2JqZWN0JiZuKGEpLm9uKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIERjKURjW2FdKCl9KSxrLmNvcnM9ISFGYyYmIndpdGhDcmVkZW50aWFscyJpbiBGYyxrLmFqYXg9RmM9ISFGYyxuLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGsuY29yc3x8RmMmJiFhLmNyb3NzRG9tYWluP3tzZW5kOmZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hLnhocigpLGc9KytDYztpZihmLm9wZW4oYS50eXBlLGEudXJsLGEuYXN5bmMsYS51c2VybmFtZSxhLnBhc3N3b3JkKSxhLnhockZpZWxkcylmb3IoZSBpbiBhLnhockZpZWxkcylmW2VdPWEueGhyRmllbGRzW2VdO2EubWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlKGEubWltZVR5cGUpLGEuY3Jvc3NEb21haW58fGNbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGNbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZSBpbiBjKWYuc2V0UmVxdWVzdEhlYWRlcihlLGNbZV0pO2I9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7YiYmKGRlbGV0ZSBEY1tnXSxiPWYub25sb2FkPWYub25lcnJvcj1udWxsLCJhYm9ydCI9PT1hP2YuYWJvcnQoKToiZXJyb3IiPT09YT9kKGYuc3RhdHVzLGYuc3RhdHVzVGV4dCk6ZChFY1tmLnN0YXR1c118fGYuc3RhdHVzLGYuc3RhdHVzVGV4dCwic3RyaW5nIj09dHlwZW9mIGYucmVzcG9uc2VUZXh0P3t0ZXh0OmYucmVzcG9uc2VUZXh0fTp2b2lkIDAsZi5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0sZi5vbmxvYWQ9YigpLGYub25lcnJvcj1iKCJlcnJvciIpLGI9RGNbZ109YigiYWJvcnQiKTt0cnl7Zi5zZW5kKGEuaGFzQ29udGVudCYmYS5kYXRhfHxudWxsKX1jYXRjaChoKXtpZihiKXRocm93IGh9fSxhYm9ydDpmdW5jdGlvbigpe2ImJmIoKX19OnZvaWQgMH0pLG4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovKD86amF2YXxlY21hKXNjcmlwdC99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ2xvYmFsRXZhbChhKSxhfX19KSxuLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9IkdFVCIpfSksbi5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZCxlKXtiPW4oIjxzY3JpcHQ+IikucHJvcCh7YXN5bmM6ITAsY2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oImxvYWQgZXJyb3IiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZSgiZXJyb3IiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGwuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgR2M9W10sSGM9Lyg9KVw/KD89JnwkKXxcP1w/LztuLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9R2MucG9wKCl8fG4uZXhwYW5kbysiXyIrY2MrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKEhjLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYhKGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmSGMudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKEhjLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShkYy50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXthW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssR2MucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGw7dmFyIGQ9di5leGVjKGEpLGU9IWMmJltdO3JldHVybiBkP1tiLmNyZWF0ZUVsZW1lbnQoZFsxXSldOihkPW4uYnVpbGRGcmFnbWVudChbYV0sYixlKSxlJiZlLmxlbmd0aCYmbihlKS5yZW1vdmUoKSxuLm1lcmdlKFtdLGQuY2hpbGROb2RlcykpfTt2YXIgSWM9bi5mbi5sb2FkO24uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhJiZJYylyZXR1cm4gSWMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoIiAiKTtyZXR1cm4gaD49MCYmKGQ9bi50cmltKGEuc2xpY2UoaCkpLGE9YS5zbGljZSgwLGgpKSxuLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmIm9iamVjdCI9PXR5cGVvZiBiJiYoZT0iUE9TVCIpLGcubGVuZ3RoPjAmJm4uYWpheCh7dXJsOmEsdHlwZTplLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oIjxkaXY+IikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuY29tcGxldGUoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goYyxmfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KSx0aGlzfSxuLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gbi5ncmVwKG4udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTt2YXIgSmM9YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ZnVuY3Rpb24gS2MoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZSYmYS5kZWZhdWx0Vmlld31uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsInBvc2l0aW9uIiksbD1uKGEpLG09e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLCJ0b3AiKSxpPW4uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiYoZitpKS5pbmRleE9mKCJhdXRvIik+LTEsaj8oZD1sLnBvc2l0aW9uKCksZz1kLnRvcCxlPWQubGVmdCk6KGc9cGFyc2VGbG9hdChmKXx8MCxlPXBhcnNlRmxvYXQoaSl8fDApLG4uaXNGdW5jdGlvbihiKSYmKGI9Yi5jYWxsKGEsYyxoKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSwidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXRoaXNbMF0sZT17dG9wOjAsbGVmdDowfSxmPWQmJmQub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixkKT8odHlwZW9mIGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09VSYmKGU9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1LYyhmKSx7dG9wOmUudG9wK2MucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDplLmxlZnQrYy5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9KTplfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuImZpeGVkIj09PW4uY3NzKGMsInBvc2l0aW9uIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLG4ubm9kZU5hbWUoYVswXSwiaHRtbCIpfHwoZD1hLm9mZnNldCgpKSxkLnRvcCs9bi5jc3MoYVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxkLmxlZnQrPW4uY3NzKGFbMF0sImJvcmRlckxlZnRXaWR0aCIsITApKSx7dG9wOmIudG9wLWQudG9wLW4uY3NzKGMsIm1hcmdpblRvcCIsITApLGxlZnQ6Yi5sZWZ0LWQubGVmdC1uLmNzcyhjLCJtYXJnaW5MZWZ0IiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRQYXJlbnR8fEpjO3doaWxlKGEmJiFuLm5vZGVOYW1lKGEsImh0bWwiKSYmInN0YXRpYyI9PT1uLmNzcyhhLCJwb3NpdGlvbiIpKWE9YS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGF8fEpjfSl9fSksbi5lYWNoKHtzY3JvbGxMZWZ0OiJwYWdlWE9mZnNldCIsc2Nyb2xsVG9wOiJwYWdlWU9mZnNldCJ9LGZ1bmN0aW9uKGIsYyl7dmFyIGQ9InBhZ2VZT2Zmc2V0Ij09PWM7bi5mbltiXT1mdW5jdGlvbihlKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsZSxmKXt2YXIgZz1LYyhiKTtyZXR1cm4gdm9pZCAwPT09Zj9nP2dbY106YltlXTp2b2lkKGc/Zy5zY3JvbGxUbyhkP2EucGFnZVhPZmZzZXQ6ZixkP2Y6YS5wYWdlWU9mZnNldCk6YltlXT1mKX0sYixlLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT15YihrLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz14YihhLGIpLHZiLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7cGFkZGluZzoiaW5uZXIiK2EsY29udGVudDpiLCIiOiJvdXRlciIrYX0sZnVuY3Rpb24oYyxkKXtuLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fCJib29sZWFuIiE9dHlwZW9mIGQpLGc9Y3x8KGQ9PT0hMHx8ZT09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbi5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IithXTo5PT09Yi5ub2RlVHlwZT8oZT1iLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChiLmJvZHlbInNjcm9sbCIrYV0sZVsic2Nyb2xsIithXSxiLmJvZHlbIm9mZnNldCIrYV0sZVsib2Zmc2V0IithXSxlWyJjbGllbnQiK2FdKSk6dm9pZCAwPT09ZD9uLmNzcyhiLGMsZyk6bi5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxuLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG4uZm4uYW5kU2VsZj1uLmZuLmFkZEJhY2ssImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG59KTt2YXIgTGM9YS5qUXVlcnksTWM9YS4kO3JldHVybiBuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW4mJihhLiQ9TWMpLGImJmEualF1ZXJ5PT09biYmKGEualF1ZXJ5PUxjKSxufSx0eXBlb2YgYj09PVUmJihhLmpRdWVyeT1hLiQ9biksbn0pOw=="></script>
  <script src="data:text/javascript;base64,LyohDQogKiBNYXRlcmlhbGl6ZSB2MS4wLjAtcmMuMSAoaHR0cDovL21hdGVyaWFsaXplY3NzLmNvbSkNCiAqIENvcHlyaWdodCAyMDE0LTIwMTcgTWF0ZXJpYWxpemUNCiAqIE1JVCBMaWNlbnNlIChodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRG9nZmFsby9tYXRlcmlhbGl6ZS9tYXN0ZXIvTElDRU5TRSkNCiAqLw0KdmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoInZhbHVlIiBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfTsNCg0KdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7DQoNCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsgfQ0KDQpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfQ0KDQpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0NCg0KLyohIGNhc2gtZG9tIDEuMy41LCBodHRwczovL2dpdGh1Yi5jb20va2Vud2hlZWxlci9jYXNoIEBsaWNlbnNlIE1JVCAqLw0KKGZ1bmN0aW9uIChmYWN0b3J5KSB7DQogIHdpbmRvdy5jYXNoID0gZmFjdG9yeSgpOw0KfSkoZnVuY3Rpb24gKCkgew0KICB2YXIgZG9jID0gZG9jdW1lbnQsDQogICAgICB3aW4gPSB3aW5kb3csDQogICAgICBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLA0KICAgICAgc2xpY2UgPSBBcnJheVByb3RvLnNsaWNlLA0KICAgICAgZmlsdGVyID0gQXJyYXlQcm90by5maWx0ZXIsDQogICAgICBwdXNoID0gQXJyYXlQcm90by5wdXNoOw0KDQogIHZhciBub29wID0gZnVuY3Rpb24gKCkge30sDQogICAgICBpc0Z1bmN0aW9uID0gZnVuY3Rpb24gKGl0ZW0pIHsNCiAgICAvLyBAc2VlIGh0dHBzOi8vY3JidWcuY29tLzU2ODQ0OA0KICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gdHlwZW9mIG5vb3AgJiYgaXRlbS5jYWxsOw0KICB9LA0KICAgICAgaXNTdHJpbmcgPSBmdW5jdGlvbiAoaXRlbSkgew0KICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gdHlwZW9mICIiOw0KICB9Ow0KDQogIHZhciBpZE1hdGNoID0gL14jW1x3LV0qJC8sDQogICAgICBjbGFzc01hdGNoID0gL15cLltcdy1dKiQvLA0KICAgICAgaHRtbE1hdGNoID0gLzwuKz4vLA0KICAgICAgc2luZ2xldCA9IC9eXHcrJC87DQoNCiAgZnVuY3Rpb24gZmluZChzZWxlY3RvciwgY29udGV4dCkgew0KICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IGRvYzsNCiAgICB2YXIgZWxlbXMgPSBjbGFzc01hdGNoLnRlc3Qoc2VsZWN0b3IpID8gY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHNlbGVjdG9yLnNsaWNlKDEpKSA6IHNpbmdsZXQudGVzdChzZWxlY3RvcikgPyBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHNlbGVjdG9yKSA6IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7DQogICAgcmV0dXJuIGVsZW1zOw0KICB9DQoNCiAgdmFyIGZyYWc7DQogIGZ1bmN0aW9uIHBhcnNlSFRNTChzdHIpIHsNCiAgICBpZiAoIWZyYWcpIHsNCiAgICAgIGZyYWcgPSBkb2MuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KG51bGwpOw0KICAgICAgdmFyIGJhc2UgPSBmcmFnLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTsNCiAgICAgIGJhc2UuaHJlZiA9IGRvYy5sb2NhdGlvbi5ocmVmOw0KICAgICAgZnJhZy5oZWFkLmFwcGVuZENoaWxkKGJhc2UpOw0KICAgIH0NCg0KICAgIGZyYWcuYm9keS5pbm5lckhUTUwgPSBzdHI7DQoNCiAgICByZXR1cm4gZnJhZy5ib2R5LmNoaWxkTm9kZXM7DQogIH0NCg0KICBmdW5jdGlvbiBvblJlYWR5KGZuKSB7DQogICAgaWYgKGRvYy5yZWFkeVN0YXRlICE9PSAibG9hZGluZyIpIHsNCiAgICAgIGZuKCk7DQogICAgfSBlbHNlIHsNCiAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgZm4pOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIEluaXQoc2VsZWN0b3IsIGNvbnRleHQpIHsNCiAgICBpZiAoIXNlbGVjdG9yKSB7DQogICAgICByZXR1cm4gdGhpczsNCiAgICB9DQoNCiAgICAvLyBJZiBhbHJlYWR5IGEgY2FzaCBjb2xsZWN0aW9uLCBkb24ndCBkbyBhbnkgZnVydGhlciBwcm9jZXNzaW5nDQogICAgaWYgKHNlbGVjdG9yLmNhc2ggJiYgc2VsZWN0b3IgIT09IHdpbikgew0KICAgICAgcmV0dXJuIHNlbGVjdG9yOw0KICAgIH0NCg0KICAgIHZhciBlbGVtcyA9IHNlbGVjdG9yLA0KICAgICAgICBpID0gMCwNCiAgICAgICAgbGVuZ3RoOw0KDQogICAgaWYgKGlzU3RyaW5nKHNlbGVjdG9yKSkgew0KICAgICAgZWxlbXMgPSBpZE1hdGNoLnRlc3Qoc2VsZWN0b3IpID8NCiAgICAgIC8vIElmIGFuIElEIHVzZSB0aGUgZmFzdGVyIGdldEVsZW1lbnRCeUlkIGNoZWNrDQogICAgICBkb2MuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3Iuc2xpY2UoMSkpIDogaHRtbE1hdGNoLnRlc3Qoc2VsZWN0b3IpID8NCiAgICAgIC8vIElmIEhUTUwsIHBhcnNlIGl0IGludG8gcmVhbCBlbGVtZW50cw0KICAgICAgcGFyc2VIVE1MKHNlbGVjdG9yKSA6DQogICAgICAvLyBlbHNlIHVzZSBgZmluZGANCiAgICAgIGZpbmQoc2VsZWN0b3IsIGNvbnRleHQpOw0KDQogICAgICAvLyBJZiBmdW5jdGlvbiwgdXNlIGFzIHNob3J0Y3V0IGZvciBET00gcmVhZHkNCiAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24oc2VsZWN0b3IpKSB7DQogICAgICBvblJlYWR5KHNlbGVjdG9yKTtyZXR1cm4gdGhpczsNCiAgICB9DQoNCiAgICBpZiAoIWVsZW1zKSB7DQogICAgICByZXR1cm4gdGhpczsNCiAgICB9DQoNCiAgICAvLyBJZiBhIHNpbmdsZSBET00gZWxlbWVudCBpcyBwYXNzZWQgaW4gb3IgcmVjZWl2ZWQgdmlhIElELCByZXR1cm4gdGhlIHNpbmdsZSBlbGVtZW50DQogICAgaWYgKGVsZW1zLm5vZGVUeXBlIHx8IGVsZW1zID09PSB3aW4pIHsNCiAgICAgIHRoaXNbMF0gPSBlbGVtczsNCiAgICAgIHRoaXMubGVuZ3RoID0gMTsNCiAgICB9IGVsc2Ugew0KICAgICAgLy8gVHJlYXQgbGlrZSBhbiBhcnJheSBhbmQgbG9vcCB0aHJvdWdoIGVhY2ggaXRlbS4NCiAgICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoID0gZWxlbXMubGVuZ3RoOw0KICAgICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykgew0KICAgICAgICB0aGlzW2ldID0gZWxlbXNbaV07DQogICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIHRoaXM7DQogIH0NCg0KICBmdW5jdGlvbiBjYXNoKHNlbGVjdG9yLCBjb250ZXh0KSB7DQogICAgcmV0dXJuIG5ldyBJbml0KHNlbGVjdG9yLCBjb250ZXh0KTsNCiAgfQ0KDQogIHZhciBmbiA9IGNhc2guZm4gPSBjYXNoLnByb3RvdHlwZSA9IEluaXQucHJvdG90eXBlID0geyAvLyBqc2hpbnQgaWdub3JlOmxpbmUNCiAgICBjYXNoOiB0cnVlLA0KICAgIGxlbmd0aDogMCwNCiAgICBwdXNoOiBwdXNoLA0KICAgIHNwbGljZTogQXJyYXlQcm90by5zcGxpY2UsDQogICAgbWFwOiBBcnJheVByb3RvLm1hcCwNCiAgICBpbml0OiBJbml0DQogIH07DQoNCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCAiY29uc3RydWN0b3IiLCB7IHZhbHVlOiBjYXNoIH0pOw0KDQogIGNhc2gucGFyc2VIVE1MID0gcGFyc2VIVE1MOw0KICBjYXNoLm5vb3AgPSBub29wOw0KICBjYXNoLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uOw0KICBjYXNoLmlzU3RyaW5nID0gaXNTdHJpbmc7DQoNCiAgY2FzaC5leHRlbmQgPSBmbi5leHRlbmQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7DQogICAgdGFyZ2V0ID0gdGFyZ2V0IHx8IHt9Ow0KDQogICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyksDQogICAgICAgIGxlbmd0aCA9IGFyZ3MubGVuZ3RoLA0KICAgICAgICBpID0gMTsNCg0KICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkgew0KICAgICAgdGFyZ2V0ID0gdGhpczsNCiAgICAgIGkgPSAwOw0KICAgIH0NCg0KICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgIGlmICghYXJnc1tpXSkgew0KICAgICAgICBjb250aW51ZTsNCiAgICAgIH0NCiAgICAgIGZvciAodmFyIGtleSBpbiBhcmdzW2ldKSB7DQogICAgICAgIGlmIChhcmdzW2ldLmhhc093blByb3BlcnR5KGtleSkpIHsNCiAgICAgICAgICB0YXJnZXRba2V5XSA9IGFyZ3NbaV1ba2V5XTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiB0YXJnZXQ7DQogIH07DQoNCiAgZnVuY3Rpb24gZWFjaChjb2xsZWN0aW9uLCBjYWxsYmFjaykgew0KICAgIHZhciBsID0gY29sbGVjdGlvbi5sZW5ndGgsDQogICAgICAgIGkgPSAwOw0KDQogICAgZm9yICg7IGkgPCBsOyBpKyspIHsNCiAgICAgIGlmIChjYWxsYmFjay5jYWxsKGNvbGxlY3Rpb25baV0sIGNvbGxlY3Rpb25baV0sIGksIGNvbGxlY3Rpb24pID09PSBmYWxzZSkgew0KICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiBtYXRjaGVzKGVsLCBzZWxlY3Rvcikgew0KICAgIHZhciBtID0gZWwgJiYgKGVsLm1hdGNoZXMgfHwgZWwud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IGVsLm1vek1hdGNoZXNTZWxlY3RvciB8fCBlbC5tc01hdGNoZXNTZWxlY3RvciB8fCBlbC5vTWF0Y2hlc1NlbGVjdG9yKTsNCiAgICByZXR1cm4gISFtICYmIG0uY2FsbChlbCwgc2VsZWN0b3IpOw0KICB9DQoNCiAgZnVuY3Rpb24gZ2V0Q29tcGFyZUZ1bmN0aW9uKHNlbGVjdG9yKSB7DQogICAgcmV0dXJuICgNCiAgICAgIC8qIFVzZSBicm93c2VyJ3MgYG1hdGNoZXNgIGZ1bmN0aW9uIGlmIHN0cmluZyAqLw0KICAgICAgaXNTdHJpbmcoc2VsZWN0b3IpID8gbWF0Y2hlcyA6DQogICAgICAvKiBNYXRjaCBhIGNhc2ggZWxlbWVudCAqLw0KICAgICAgc2VsZWN0b3IuY2FzaCA/IGZ1bmN0aW9uIChlbCkgew0KICAgICAgICByZXR1cm4gc2VsZWN0b3IuaXMoZWwpOw0KICAgICAgfSA6DQogICAgICAvKiBEaXJlY3QgY29tcGFyaXNvbiAqLw0KICAgICAgZnVuY3Rpb24gKGVsLCBzZWxlY3Rvcikgew0KICAgICAgICByZXR1cm4gZWwgPT09IHNlbGVjdG9yOw0KICAgICAgfQ0KICAgICk7DQogIH0NCg0KICBmdW5jdGlvbiB1bmlxdWUoY29sbGVjdGlvbikgew0KICAgIHJldHVybiBjYXNoKHNsaWNlLmNhbGwoY29sbGVjdGlvbikuZmlsdGVyKGZ1bmN0aW9uIChpdGVtLCBpbmRleCwgc2VsZikgew0KICAgICAgcmV0dXJuIHNlbGYuaW5kZXhPZihpdGVtKSA9PT0gaW5kZXg7DQogICAgfSkpOw0KICB9DQoNCiAgY2FzaC5leHRlbmQoew0KICAgIG1lcmdlOiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgew0KICAgICAgdmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLA0KICAgICAgICAgIGkgPSBmaXJzdC5sZW5ndGgsDQogICAgICAgICAgaiA9IDA7DQoNCiAgICAgIGZvciAoOyBqIDwgbGVuOyBpKyssIGorKykgew0KICAgICAgICBmaXJzdFtpXSA9IHNlY29uZFtqXTsNCiAgICAgIH0NCg0KICAgICAgZmlyc3QubGVuZ3RoID0gaTsNCiAgICAgIHJldHVybiBmaXJzdDsNCiAgICB9LA0KDQogICAgZWFjaDogZWFjaCwNCiAgICBtYXRjaGVzOiBtYXRjaGVzLA0KICAgIHVuaXF1ZTogdW5pcXVlLA0KICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXksDQogICAgaXNOdW1lcmljOiBmdW5jdGlvbiAobikgew0KICAgICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4pKSAmJiBpc0Zpbml0ZShuKTsNCiAgICB9DQoNCiAgfSk7DQoNCiAgdmFyIHVpZCA9IGNhc2gudWlkID0gIl9jYXNoIiArIERhdGUubm93KCk7DQoNCiAgZnVuY3Rpb24gZ2V0RGF0YUNhY2hlKG5vZGUpIHsNCiAgICByZXR1cm4gbm9kZVt1aWRdID0gbm9kZVt1aWRdIHx8IHt9Ow0KICB9DQoNCiAgZnVuY3Rpb24gc2V0RGF0YShub2RlLCBrZXksIHZhbHVlKSB7DQogICAgcmV0dXJuIGdldERhdGFDYWNoZShub2RlKVtrZXldID0gdmFsdWU7DQogIH0NCg0KICBmdW5jdGlvbiBnZXREYXRhKG5vZGUsIGtleSkgew0KICAgIHZhciBjID0gZ2V0RGF0YUNhY2hlKG5vZGUpOw0KICAgIGlmIChjW2tleV0gPT09IHVuZGVmaW5lZCkgew0KICAgICAgY1trZXldID0gbm9kZS5kYXRhc2V0ID8gbm9kZS5kYXRhc2V0W2tleV0gOiBjYXNoKG5vZGUpLmF0dHIoImRhdGEtIiArIGtleSk7DQogICAgfQ0KICAgIHJldHVybiBjW2tleV07DQogIH0NCg0KICBmdW5jdGlvbiByZW1vdmVEYXRhKG5vZGUsIGtleSkgew0KICAgIHZhciBjID0gZ2V0RGF0YUNhY2hlKG5vZGUpOw0KICAgIGlmIChjKSB7DQogICAgICBkZWxldGUgY1trZXldOw0KICAgIH0gZWxzZSBpZiAobm9kZS5kYXRhc2V0KSB7DQogICAgICBkZWxldGUgbm9kZS5kYXRhc2V0W2tleV07DQogICAgfSBlbHNlIHsNCiAgICAgIGNhc2gobm9kZSkucmVtb3ZlQXR0cigiZGF0YS0iICsgbmFtZSk7DQogICAgfQ0KICB9DQoNCiAgZm4uZXh0ZW5kKHsNCiAgICBkYXRhOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsNCiAgICAgIGlmIChpc1N0cmluZyhuYW1lKSkgew0KICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IGdldERhdGEodGhpc1swXSwgbmFtZSkgOiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgICByZXR1cm4gc2V0RGF0YSh2LCBuYW1lLCB2YWx1ZSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkgew0KICAgICAgICB0aGlzLmRhdGEoa2V5LCBuYW1lW2tleV0pOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gdGhpczsNCiAgICB9LA0KDQogICAgcmVtb3ZlRGF0YTogZnVuY3Rpb24gKGtleSkgew0KICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikgew0KICAgICAgICByZXR1cm4gcmVtb3ZlRGF0YSh2LCBrZXkpOw0KICAgICAgfSk7DQogICAgfQ0KDQogIH0pOw0KDQogIHZhciBub3RXaGl0ZU1hdGNoID0gL1xTKy9nOw0KDQogIGZ1bmN0aW9uIGdldENsYXNzZXMoYykgew0KICAgIHJldHVybiBpc1N0cmluZyhjKSAmJiBjLm1hdGNoKG5vdFdoaXRlTWF0Y2gpOw0KICB9DQoNCiAgZnVuY3Rpb24gaGFzQ2xhc3ModiwgYykgew0KICAgIHJldHVybiB2LmNsYXNzTGlzdCA/IHYuY2xhc3NMaXN0LmNvbnRhaW5zKGMpIDogbmV3IFJlZ0V4cCgiKF58ICkiICsgYyArICIoIHwkKSIsICJnaSIpLnRlc3Qodi5jbGFzc05hbWUpOw0KICB9DQoNCiAgZnVuY3Rpb24gYWRkQ2xhc3ModiwgYywgc3BhY2VkTmFtZSkgew0KICAgIGlmICh2LmNsYXNzTGlzdCkgew0KICAgICAgdi5jbGFzc0xpc3QuYWRkKGMpOw0KICAgIH0gZWxzZSBpZiAoc3BhY2VkTmFtZS5pbmRleE9mKCIgIiArIGMgKyAiICIpKSB7DQogICAgICB2LmNsYXNzTmFtZSArPSAiICIgKyBjOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHJlbW92ZUNsYXNzKHYsIGMpIHsNCiAgICBpZiAodi5jbGFzc0xpc3QpIHsNCiAgICAgIHYuY2xhc3NMaXN0LnJlbW92ZShjKTsNCiAgICB9IGVsc2Ugew0KICAgICAgdi5jbGFzc05hbWUgPSB2LmNsYXNzTmFtZS5yZXBsYWNlKGMsICIiKTsNCiAgICB9DQogIH0NCg0KICBmbi5leHRlbmQoew0KICAgIGFkZENsYXNzOiBmdW5jdGlvbiAoYykgew0KICAgICAgdmFyIGNsYXNzZXMgPSBnZXRDbGFzc2VzKGMpOw0KDQogICAgICByZXR1cm4gY2xhc3NlcyA/IHRoaXMuZWFjaChmdW5jdGlvbiAodikgew0KICAgICAgICB2YXIgc3BhY2VkTmFtZSA9ICIgIiArIHYuY2xhc3NOYW1lICsgIiAiOw0KICAgICAgICBlYWNoKGNsYXNzZXMsIGZ1bmN0aW9uIChjKSB7DQogICAgICAgICAgYWRkQ2xhc3ModiwgYywgc3BhY2VkTmFtZSk7DQogICAgICAgIH0pOw0KICAgICAgfSkgOiB0aGlzOw0KICAgIH0sDQoNCiAgICBhdHRyOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsNCiAgICAgIGlmICghbmFtZSkgew0KICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgfQ0KDQogICAgICBpZiAoaXNTdHJpbmcobmFtZSkpIHsNCiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICByZXR1cm4gdGhpc1swXSA/IHRoaXNbMF0uZ2V0QXR0cmlidXRlID8gdGhpc1swXS5nZXRBdHRyaWJ1dGUobmFtZSkgOiB0aGlzWzBdW25hbWVdIDogdW5kZWZpbmVkOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikgew0KICAgICAgICAgIGlmICh2LnNldEF0dHJpYnV0ZSkgew0KICAgICAgICAgICAgdi5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB2W25hbWVdID0gdmFsdWU7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCg0KICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHsNCiAgICAgICAgdGhpcy5hdHRyKGtleSwgbmFtZVtrZXldKTsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIHRoaXM7DQogICAgfSwNCg0KICAgIGhhc0NsYXNzOiBmdW5jdGlvbiAoYykgew0KICAgICAgdmFyIGNoZWNrID0gZmFsc2UsDQogICAgICAgICAgY2xhc3NlcyA9IGdldENsYXNzZXMoYyk7DQogICAgICBpZiAoY2xhc3NlcyAmJiBjbGFzc2VzLmxlbmd0aCkgew0KICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgICBjaGVjayA9IGhhc0NsYXNzKHYsIGNsYXNzZXNbMF0pOw0KICAgICAgICAgIHJldHVybiAhY2hlY2s7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGNoZWNrOw0KICAgIH0sDQoNCiAgICBwcm9wOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsNCiAgICAgIGlmIChpc1N0cmluZyhuYW1lKSkgew0KICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IHRoaXNbMF1bbmFtZV0gOiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgICB2W25hbWVdID0gdmFsdWU7DQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkgew0KICAgICAgICB0aGlzLnByb3Aoa2V5LCBuYW1lW2tleV0pOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gdGhpczsNCiAgICB9LA0KDQogICAgcmVtb3ZlQXR0cjogZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgaWYgKHYucmVtb3ZlQXR0cmlidXRlKSB7DQogICAgICAgICAgdi5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgZGVsZXRlIHZbbmFtZV07DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICByZW1vdmVDbGFzczogZnVuY3Rpb24gKGMpIHsNCiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgew0KICAgICAgICByZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsICIiKTsNCiAgICAgIH0NCiAgICAgIHZhciBjbGFzc2VzID0gZ2V0Q2xhc3NlcyhjKTsNCiAgICAgIHJldHVybiBjbGFzc2VzID8gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7DQogICAgICAgIGVhY2goY2xhc3NlcywgZnVuY3Rpb24gKGMpIHsNCiAgICAgICAgICByZW1vdmVDbGFzcyh2LCBjKTsNCiAgICAgICAgfSk7DQogICAgICB9KSA6IHRoaXM7DQogICAgfSwNCg0KICAgIHJlbW92ZVByb3A6IGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7DQogICAgICAgIGRlbGV0ZSB2W25hbWVdOw0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiAoYywgc3RhdGUpIHsNCiAgICAgIGlmIChzdGF0ZSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHJldHVybiB0aGlzW3N0YXRlID8gImFkZENsYXNzIiA6ICJyZW1vdmVDbGFzcyJdKGMpOw0KICAgICAgfQ0KICAgICAgdmFyIGNsYXNzZXMgPSBnZXRDbGFzc2VzKGMpOw0KICAgICAgcmV0dXJuIGNsYXNzZXMgPyB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgdmFyIHNwYWNlZE5hbWUgPSAiICIgKyB2LmNsYXNzTmFtZSArICIgIjsNCiAgICAgICAgZWFjaChjbGFzc2VzLCBmdW5jdGlvbiAoYykgew0KICAgICAgICAgIGlmIChoYXNDbGFzcyh2LCBjKSkgew0KICAgICAgICAgICAgcmVtb3ZlQ2xhc3ModiwgYyk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGFkZENsYXNzKHYsIGMsIHNwYWNlZE5hbWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KSA6IHRoaXM7DQogICAgfSB9KTsNCg0KICBmbi5leHRlbmQoew0KICAgIGFkZDogZnVuY3Rpb24gKHNlbGVjdG9yLCBjb250ZXh0KSB7DQogICAgICByZXR1cm4gdW5pcXVlKGNhc2gubWVyZ2UodGhpcywgY2FzaChzZWxlY3RvciwgY29udGV4dCkpKTsNCiAgICB9LA0KDQogICAgZWFjaDogZnVuY3Rpb24gKGNhbGxiYWNrKSB7DQogICAgICBlYWNoKHRoaXMsIGNhbGxiYWNrKTsNCiAgICAgIHJldHVybiB0aGlzOw0KICAgIH0sDQoNCiAgICBlcTogZnVuY3Rpb24gKGluZGV4KSB7DQogICAgICByZXR1cm4gY2FzaCh0aGlzLmdldChpbmRleCkpOw0KICAgIH0sDQoNCiAgICBmaWx0ZXI6IGZ1bmN0aW9uIChzZWxlY3Rvcikgew0KICAgICAgaWYgKCFzZWxlY3Rvcikgew0KICAgICAgICByZXR1cm4gdGhpczsNCiAgICAgIH0NCg0KICAgICAgdmFyIGNvbXBhcmF0b3IgPSBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/IHNlbGVjdG9yIDogZ2V0Q29tcGFyZUZ1bmN0aW9uKHNlbGVjdG9yKTsNCg0KICAgICAgcmV0dXJuIGNhc2goZmlsdGVyLmNhbGwodGhpcywgZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoZSwgc2VsZWN0b3IpOw0KICAgICAgfSkpOw0KICAgIH0sDQoNCiAgICBmaXJzdDogZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIHRoaXMuZXEoMCk7DQogICAgfSwNCg0KICAgIGdldDogZnVuY3Rpb24gKGluZGV4KSB7DQogICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkgew0KICAgICAgICByZXR1cm4gc2xpY2UuY2FsbCh0aGlzKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBpbmRleCA8IDAgPyB0aGlzW2luZGV4ICsgdGhpcy5sZW5ndGhdIDogdGhpc1tpbmRleF07DQogICAgfSwNCg0KICAgIGluZGV4OiBmdW5jdGlvbiAoZWxlbSkgew0KICAgICAgdmFyIGNoaWxkID0gZWxlbSA/IGNhc2goZWxlbSlbMF0gOiB0aGlzWzBdLA0KICAgICAgICAgIGNvbGxlY3Rpb24gPSBlbGVtID8gdGhpcyA6IGNhc2goY2hpbGQpLnBhcmVudCgpLmNoaWxkcmVuKCk7DQogICAgICByZXR1cm4gc2xpY2UuY2FsbChjb2xsZWN0aW9uKS5pbmRleE9mKGNoaWxkKTsNCiAgICB9LA0KDQogICAgbGFzdDogZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIHRoaXMuZXEoLTEpOw0KICAgIH0NCg0KICB9KTsNCg0KICB2YXIgY2FtZWxDYXNlID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBjYW1lbFJlZ2V4ID0gLyg/Ol5cd3xbQS1aXXxcYlx3KS9nLA0KICAgICAgICB3aGl0ZVNwYWNlID0gL1tccy1fXSsvZzsNCiAgICByZXR1cm4gZnVuY3Rpb24gKHN0cikgew0KICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsUmVnZXgsIGZ1bmN0aW9uIChsZXR0ZXIsIGluZGV4KSB7DQogICAgICAgIHJldHVybiBsZXR0ZXJbaW5kZXggPT09IDAgPyAidG9Mb3dlckNhc2UiIDogInRvVXBwZXJDYXNlIl0oKTsNCiAgICAgIH0pLnJlcGxhY2Uod2hpdGVTcGFjZSwgIiIpOw0KICAgIH07DQogIH0oKTsNCg0KICB2YXIgZ2V0UHJlZml4ZWRQcm9wID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBjYWNoZSA9IHt9LA0KICAgICAgICBkb2MgPSBkb2N1bWVudCwNCiAgICAgICAgZGl2ID0gZG9jLmNyZWF0ZUVsZW1lbnQoImRpdiIpLA0KICAgICAgICBzdHlsZSA9IGRpdi5zdHlsZTsNCg0KICAgIHJldHVybiBmdW5jdGlvbiAocHJvcCkgew0KICAgICAgcHJvcCA9IGNhbWVsQ2FzZShwcm9wKTsNCiAgICAgIGlmIChjYWNoZVtwcm9wXSkgew0KICAgICAgICByZXR1cm4gY2FjaGVbcHJvcF07DQogICAgICB9DQoNCiAgICAgIHZhciB1Y1Byb3AgPSBwcm9wLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zbGljZSgxKSwNCiAgICAgICAgICBwcmVmaXhlcyA9IFsid2Via2l0IiwgIm1veiIsICJtcyIsICJvIl0sDQogICAgICAgICAgcHJvcHMgPSAocHJvcCArICIgIiArIHByZWZpeGVzLmpvaW4odWNQcm9wICsgIiAiKSArIHVjUHJvcCkuc3BsaXQoIiAiKTsNCg0KICAgICAgZWFjaChwcm9wcywgZnVuY3Rpb24gKHApIHsNCiAgICAgICAgaWYgKHAgaW4gc3R5bGUpIHsNCiAgICAgICAgICBjYWNoZVtwXSA9IHByb3AgPSBjYWNoZVtwcm9wXSA9IHA7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICB9KTsNCg0KICAgICAgcmV0dXJuIGNhY2hlW3Byb3BdOw0KICAgIH07DQogIH0oKTsNCg0KICBjYXNoLnByZWZpeGVkUHJvcCA9IGdldFByZWZpeGVkUHJvcDsNCiAgY2FzaC5jYW1lbENhc2UgPSBjYW1lbENhc2U7DQoNCiAgZm4uZXh0ZW5kKHsNCiAgICBjc3M6IGZ1bmN0aW9uIChwcm9wLCB2YWx1ZSkgew0KICAgICAgaWYgKGlzU3RyaW5nKHByb3ApKSB7DQogICAgICAgIHByb3AgPSBnZXRQcmVmaXhlZFByb3AocHJvcCk7DQogICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHRoaXMuZWFjaChmdW5jdGlvbiAodikgew0KICAgICAgICAgIHJldHVybiB2LnN0eWxlW3Byb3BdID0gdmFsdWU7DQogICAgICAgIH0pIDogd2luLmdldENvbXB1dGVkU3R5bGUodGhpc1swXSlbcHJvcF07DQogICAgICB9DQoNCiAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wKSB7DQogICAgICAgIHRoaXMuY3NzKGtleSwgcHJvcFtrZXldKTsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIHRoaXM7DQogICAgfQ0KDQogIH0pOw0KDQogIGZ1bmN0aW9uIGNvbXB1dGUoZWwsIHByb3ApIHsNCiAgICByZXR1cm4gcGFyc2VJbnQod2luLmdldENvbXB1dGVkU3R5bGUoZWxbMF0sIG51bGwpW3Byb3BdLCAxMCkgfHwgMDsNCiAgfQ0KDQogIGVhY2goWyJXaWR0aCIsICJIZWlnaHQiXSwgZnVuY3Rpb24gKHYpIHsNCiAgICB2YXIgbG93ZXIgPSB2LnRvTG93ZXJDYXNlKCk7DQoNCiAgICBmbltsb3dlcl0gPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gdGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtsb3dlcl07DQogICAgfTsNCg0KICAgIGZuWyJpbm5lciIgKyB2XSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiB0aGlzWzBdWyJjbGllbnQiICsgdl07DQogICAgfTsNCg0KICAgIGZuWyJvdXRlciIgKyB2XSA9IGZ1bmN0aW9uIChtYXJnaW5zKSB7DQogICAgICByZXR1cm4gdGhpc1swXVsib2Zmc2V0IiArIHZdICsgKG1hcmdpbnMgPyBjb21wdXRlKHRoaXMsICJtYXJnaW4iICsgKHYgPT09ICJXaWR0aCIgPyAiTGVmdCIgOiAiVG9wIikpICsgY29tcHV0ZSh0aGlzLCAibWFyZ2luIiArICh2ID09PSAiV2lkdGgiID8gIlJpZ2h0IiA6ICJCb3R0b20iKSkgOiAwKTsNCiAgICB9Ow0KICB9KTsNCg0KICBmdW5jdGlvbiByZWdpc3RlckV2ZW50KG5vZGUsIGV2ZW50TmFtZSwgY2FsbGJhY2spIHsNCiAgICB2YXIgZXZlbnRDYWNoZSA9IGdldERhdGEobm9kZSwgIl9jYXNoRXZlbnRzIikgfHwgc2V0RGF0YShub2RlLCAiX2Nhc2hFdmVudHMiLCB7fSk7DQogICAgZXZlbnRDYWNoZVtldmVudE5hbWVdID0gZXZlbnRDYWNoZVtldmVudE5hbWVdIHx8IFtdOw0KICAgIGV2ZW50Q2FjaGVbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKTsNCiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjayk7DQogIH0NCg0KICBmdW5jdGlvbiByZW1vdmVFdmVudChub2RlLCBldmVudE5hbWUsIGNhbGxiYWNrKSB7DQogICAgdmFyIGV2ZW50cyA9IGdldERhdGEobm9kZSwgIl9jYXNoRXZlbnRzIiksDQogICAgICAgIGV2ZW50Q2FjaGUgPSBldmVudHMgJiYgZXZlbnRzW2V2ZW50TmFtZV0sDQogICAgICAgIGluZGV4Ow0KDQogICAgaWYgKCFldmVudENhY2hlKSB7DQogICAgICByZXR1cm47DQogICAgfQ0KDQogICAgaWYgKGNhbGxiYWNrKSB7DQogICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjayk7DQogICAgICBpbmRleCA9IGV2ZW50Q2FjaGUuaW5kZXhPZihjYWxsYmFjayk7DQogICAgICBpZiAoaW5kZXggPj0gMCkgew0KICAgICAgICBldmVudENhY2hlLnNwbGljZShpbmRleCwgMSk7DQogICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgIGVhY2goZXZlbnRDYWNoZSwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50KTsNCiAgICAgIH0pOw0KICAgICAgZXZlbnRDYWNoZSA9IFtdOw0KICAgIH0NCiAgfQ0KDQogIGZuLmV4dGVuZCh7DQogICAgb2ZmOiBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykgew0KICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikgew0KICAgICAgICByZXR1cm4gcmVtb3ZlRXZlbnQodiwgZXZlbnROYW1lLCBjYWxsYmFjayk7DQogICAgICB9KTsNCiAgICB9LA0KDQogICAgb246IGZ1bmN0aW9uIChldmVudE5hbWUsIGRlbGVnYXRlLCBjYWxsYmFjaywgcnVuT25jZSkgew0KICAgICAgLy8ganNoaW50IGlnbm9yZTpsaW5lDQogICAgICB2YXIgb3JpZ2luYWxDYWxsYmFjazsNCiAgICAgIGlmICghaXNTdHJpbmcoZXZlbnROYW1lKSkgew0KICAgICAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnROYW1lKSB7DQogICAgICAgICAgdGhpcy5vbihrZXksIGRlbGVnYXRlLCBldmVudE5hbWVba2V5XSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRoaXM7DQogICAgICB9DQoNCiAgICAgIGlmIChpc0Z1bmN0aW9uKGRlbGVnYXRlKSkgew0KICAgICAgICBjYWxsYmFjayA9IGRlbGVnYXRlOw0KICAgICAgICBkZWxlZ2F0ZSA9IG51bGw7DQogICAgICB9DQoNCiAgICAgIGlmIChldmVudE5hbWUgPT09ICJyZWFkeSIpIHsNCiAgICAgICAgb25SZWFkeShjYWxsYmFjayk7DQogICAgICAgIHJldHVybiB0aGlzOw0KICAgICAgfQ0KDQogICAgICBpZiAoZGVsZWdhdGUpIHsNCiAgICAgICAgb3JpZ2luYWxDYWxsYmFjayA9IGNhbGxiYWNrOw0KICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgdmFyIHQgPSBlLnRhcmdldDsNCiAgICAgICAgICB3aGlsZSAoIW1hdGNoZXModCwgZGVsZWdhdGUpKSB7DQogICAgICAgICAgICBpZiAodCA9PT0gdGhpcyB8fCB0ID09PSBudWxsKSB7DQogICAgICAgICAgICAgIHJldHVybiB0ID0gZmFsc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHQgPSB0LnBhcmVudE5vZGU7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKHQpIHsNCiAgICAgICAgICAgIG9yaWdpbmFsQ2FsbGJhY2suY2FsbCh0LCBlKTsNCiAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICB9DQoNCiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgdmFyIGZpbmFsQ2FsbGJhY2sgPSBjYWxsYmFjazsNCiAgICAgICAgaWYgKHJ1bk9uY2UpIHsNCiAgICAgICAgICBmaW5hbENhbGxiYWNrID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgICAgIHJlbW92ZUV2ZW50KHYsIGV2ZW50TmFtZSwgZmluYWxDYWxsYmFjayk7DQogICAgICAgICAgfTsNCiAgICAgICAgfQ0KICAgICAgICByZWdpc3RlckV2ZW50KHYsIGV2ZW50TmFtZSwgZmluYWxDYWxsYmFjayk7DQogICAgICB9KTsNCiAgICB9LA0KDQogICAgb25lOiBmdW5jdGlvbiAoZXZlbnROYW1lLCBkZWxlZ2F0ZSwgY2FsbGJhY2spIHsNCiAgICAgIHJldHVybiB0aGlzLm9uKGV2ZW50TmFtZSwgZGVsZWdhdGUsIGNhbGxiYWNrLCB0cnVlKTsNCiAgICB9LA0KDQogICAgcmVhZHk6IG9uUmVhZHksDQoNCiAgICAvKioNCiAgICAgKiBNb2RpZmllZA0KICAgICAqIFRyaWdnZXJzIGJyb3dzZXIgZXZlbnQNCiAgICAgKiBAcGFyYW0gU3RyaW5nIGV2ZW50TmFtZQ0KICAgICAqIEBwYXJhbSBPYmplY3QgZGF0YSAtIEFkZCBwcm9wZXJ0aWVzIHRvIGV2ZW50IG9iamVjdA0KICAgICAqLw0KICAgIHRyaWdnZXI6IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEpIHsNCiAgICAgIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCkgew0KICAgICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTsNCiAgICAgICAgZXZ0LmluaXRFdmVudChldmVudE5hbWUsIHRydWUsIGZhbHNlKTsNCiAgICAgICAgZXZ0ID0gdGhpcy5leHRlbmQoZXZ0LCBkYXRhKTsNCiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikgew0KICAgICAgICAgIHJldHVybiB2LmRpc3BhdGNoRXZlbnQoZXZ0KTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KDQogIH0pOw0KDQogIGZ1bmN0aW9uIGVuY29kZShuYW1lLCB2YWx1ZSkgew0KICAgIHJldHVybiAiJiIgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpLnJlcGxhY2UoLyUyMC9nLCAiKyIpOw0KICB9DQoNCiAgZnVuY3Rpb24gZ2V0U2VsZWN0TXVsdGlwbGVfKGVsKSB7DQogICAgdmFyIHZhbHVlcyA9IFtdOw0KICAgIGVhY2goZWwub3B0aW9ucywgZnVuY3Rpb24gKG8pIHsNCiAgICAgIGlmIChvLnNlbGVjdGVkKSB7DQogICAgICAgIHZhbHVlcy5wdXNoKG8udmFsdWUpOw0KICAgICAgfQ0KICAgIH0pOw0KICAgIHJldHVybiB2YWx1ZXMubGVuZ3RoID8gdmFsdWVzIDogbnVsbDsNCiAgfQ0KDQogIGZ1bmN0aW9uIGdldFNlbGVjdFNpbmdsZV8oZWwpIHsNCiAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IGVsLnNlbGVjdGVkSW5kZXg7DQogICAgcmV0dXJuIHNlbGVjdGVkSW5kZXggPj0gMCA/IGVsLm9wdGlvbnNbc2VsZWN0ZWRJbmRleF0udmFsdWUgOiBudWxsOw0KICB9DQoNCiAgZnVuY3Rpb24gZ2V0VmFsdWUoZWwpIHsNCiAgICB2YXIgdHlwZSA9IGVsLnR5cGU7DQogICAgaWYgKCF0eXBlKSB7DQogICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQogICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHsNCiAgICAgIGNhc2UgInNlbGVjdC1vbmUiOg0KICAgICAgICByZXR1cm4gZ2V0U2VsZWN0U2luZ2xlXyhlbCk7DQogICAgICBjYXNlICJzZWxlY3QtbXVsdGlwbGUiOg0KICAgICAgICByZXR1cm4gZ2V0U2VsZWN0TXVsdGlwbGVfKGVsKTsNCiAgICAgIGNhc2UgInJhZGlvIjoNCiAgICAgICAgcmV0dXJuIGVsLmNoZWNrZWQgPyBlbC52YWx1ZSA6IG51bGw7DQogICAgICBjYXNlICJjaGVja2JveCI6DQogICAgICAgIHJldHVybiBlbC5jaGVja2VkID8gZWwudmFsdWUgOiBudWxsOw0KICAgICAgZGVmYXVsdDoNCiAgICAgICAgcmV0dXJuIGVsLnZhbHVlID8gZWwudmFsdWUgOiBudWxsOw0KICAgIH0NCiAgfQ0KDQogIGZuLmV4dGVuZCh7DQogICAgc2VyaWFsaXplOiBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgcXVlcnkgPSAiIjsNCg0KICAgICAgZWFjaCh0aGlzWzBdLmVsZW1lbnRzIHx8IHRoaXMsIGZ1bmN0aW9uIChlbCkgew0KICAgICAgICBpZiAoZWwuZGlzYWJsZWQgfHwgZWwudGFnTmFtZSA9PT0gIkZJRUxEU0VUIikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgbmFtZSA9IGVsLm5hbWU7DQogICAgICAgIHN3aXRjaCAoZWwudHlwZS50b0xvd2VyQ2FzZSgpKSB7DQogICAgICAgICAgY2FzZSAiZmlsZSI6DQogICAgICAgICAgY2FzZSAicmVzZXQiOg0KICAgICAgICAgIGNhc2UgInN1Ym1pdCI6DQogICAgICAgICAgY2FzZSAiYnV0dG9uIjoNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgInNlbGVjdC1tdWx0aXBsZSI6DQogICAgICAgICAgICB2YXIgdmFsdWVzID0gZ2V0VmFsdWUoZWwpOw0KICAgICAgICAgICAgaWYgKHZhbHVlcyAhPT0gbnVsbCkgew0KICAgICAgICAgICAgICBlYWNoKHZhbHVlcywgZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgcXVlcnkgKz0gZW5jb2RlKG5hbWUsIHZhbHVlKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwpOw0KICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7DQogICAgICAgICAgICAgIHF1ZXJ5ICs9IGVuY29kZShuYW1lLCB2YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KDQogICAgICByZXR1cm4gcXVlcnkuc3Vic3RyKDEpOw0KICAgIH0sDQoNCiAgICB2YWw6IGZ1bmN0aW9uICh2YWx1ZSkgew0KICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgcmV0dXJuIGdldFZhbHVlKHRoaXNbMF0pOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7DQogICAgICAgIHJldHVybiB2LnZhbHVlID0gdmFsdWU7DQogICAgICB9KTsNCiAgICB9DQoNCiAgfSk7DQoNCiAgZnVuY3Rpb24gaW5zZXJ0RWxlbWVudChlbCwgY2hpbGQsIHByZXBlbmQpIHsNCiAgICBpZiAocHJlcGVuZCkgew0KICAgICAgdmFyIGZpcnN0ID0gZWwuY2hpbGROb2Rlc1swXTsNCiAgICAgIGVsLmluc2VydEJlZm9yZShjaGlsZCwgZmlyc3QpOw0KICAgIH0gZWxzZSB7DQogICAgICBlbC5hcHBlbmRDaGlsZChjaGlsZCk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gaW5zZXJ0Q29udGVudChwYXJlbnQsIGNoaWxkLCBwcmVwZW5kKSB7DQogICAgdmFyIHN0ciA9IGlzU3RyaW5nKGNoaWxkKTsNCg0KICAgIGlmICghc3RyICYmIGNoaWxkLmxlbmd0aCkgew0KICAgICAgZWFjaChjaGlsZCwgZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgcmV0dXJuIGluc2VydENvbnRlbnQocGFyZW50LCB2LCBwcmVwZW5kKTsNCiAgICAgIH0pOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVhY2gocGFyZW50LCBzdHIgPyBmdW5jdGlvbiAodikgew0KICAgICAgcmV0dXJuIHYuaW5zZXJ0QWRqYWNlbnRIVE1MKHByZXBlbmQgPyAiYWZ0ZXJiZWdpbiIgOiAiYmVmb3JlZW5kIiwgY2hpbGQpOw0KICAgIH0gOiBmdW5jdGlvbiAodiwgaSkgew0KICAgICAgcmV0dXJuIGluc2VydEVsZW1lbnQodiwgaSA9PT0gMCA/IGNoaWxkIDogY2hpbGQuY2xvbmVOb2RlKHRydWUpLCBwcmVwZW5kKTsNCiAgICB9KTsNCiAgfQ0KDQogIGZuLmV4dGVuZCh7DQogICAgYWZ0ZXI6IGZ1bmN0aW9uIChzZWxlY3Rvcikgew0KICAgICAgY2FzaChzZWxlY3RvcikuaW5zZXJ0QWZ0ZXIodGhpcyk7DQogICAgICByZXR1cm4gdGhpczsNCiAgICB9LA0KDQogICAgYXBwZW5kOiBmdW5jdGlvbiAoY29udGVudCkgew0KICAgICAgaW5zZXJ0Q29udGVudCh0aGlzLCBjb250ZW50KTsNCiAgICAgIHJldHVybiB0aGlzOw0KICAgIH0sDQoNCiAgICBhcHBlbmRUbzogZnVuY3Rpb24gKHBhcmVudCkgew0KICAgICAgaW5zZXJ0Q29udGVudChjYXNoKHBhcmVudCksIHRoaXMpOw0KICAgICAgcmV0dXJuIHRoaXM7DQogICAgfSwNCg0KICAgIGJlZm9yZTogZnVuY3Rpb24gKHNlbGVjdG9yKSB7DQogICAgICBjYXNoKHNlbGVjdG9yKS5pbnNlcnRCZWZvcmUodGhpcyk7DQogICAgICByZXR1cm4gdGhpczsNCiAgICB9LA0KDQogICAgY2xvbmU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBjYXNoKHRoaXMubWFwKGZ1bmN0aW9uICh2KSB7DQogICAgICAgIHJldHVybiB2LmNsb25lTm9kZSh0cnVlKTsNCiAgICAgIH0pKTsNCiAgICB9LA0KDQogICAgZW1wdHk6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMuaHRtbCgiIik7DQogICAgICByZXR1cm4gdGhpczsNCiAgICB9LA0KDQogICAgaHRtbDogZnVuY3Rpb24gKGNvbnRlbnQpIHsNCiAgICAgIGlmIChjb250ZW50ID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgcmV0dXJuIHRoaXNbMF0uaW5uZXJIVE1MOw0KICAgICAgfQ0KICAgICAgdmFyIHNvdXJjZSA9IGNvbnRlbnQubm9kZVR5cGUgPyBjb250ZW50WzBdLm91dGVySFRNTCA6IGNvbnRlbnQ7DQogICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7DQogICAgICAgIHJldHVybiB2LmlubmVySFRNTCA9IHNvdXJjZTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBpbnNlcnRBZnRlcjogZnVuY3Rpb24gKHNlbGVjdG9yKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICBjYXNoKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChlbCwgaSkgew0KICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZSwNCiAgICAgICAgICAgIHNpYmxpbmcgPSBlbC5uZXh0U2libGluZzsNCiAgICAgICAgX3RoaXMuZWFjaChmdW5jdGlvbiAodikgew0KICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoaSA9PT0gMCA/IHYgOiB2LmNsb25lTm9kZSh0cnVlKSwgc2libGluZyk7DQogICAgICAgIH0pOw0KICAgICAgfSk7DQoNCiAgICAgIHJldHVybiB0aGlzOw0KICAgIH0sDQoNCiAgICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIChzZWxlY3Rvcikgew0KICAgICAgdmFyIF90aGlzMiA9IHRoaXM7DQogICAgICBjYXNoKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChlbCwgaSkgew0KICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTsNCiAgICAgICAgX3RoaXMyLmVhY2goZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGkgPT09IDAgPyB2IDogdi5jbG9uZU5vZGUodHJ1ZSksIGVsKTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICAgIHJldHVybiB0aGlzOw0KICAgIH0sDQoNCiAgICBwcmVwZW5kOiBmdW5jdGlvbiAoY29udGVudCkgew0KICAgICAgaW5zZXJ0Q29udGVudCh0aGlzLCBjb250ZW50LCB0cnVlKTsNCiAgICAgIHJldHVybiB0aGlzOw0KICAgIH0sDQoNCiAgICBwcmVwZW5kVG86IGZ1bmN0aW9uIChwYXJlbnQpIHsNCiAgICAgIGluc2VydENvbnRlbnQoY2FzaChwYXJlbnQpLCB0aGlzLCB0cnVlKTsNCiAgICAgIHJldHVybiB0aGlzOw0KICAgIH0sDQoNCiAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgaWYgKCEhdi5wYXJlbnROb2RlKSB7DQogICAgICAgICAgcmV0dXJuIHYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh2KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIHRleHQ6IGZ1bmN0aW9uIChjb250ZW50KSB7DQogICAgICBpZiAoY29udGVudCA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHJldHVybiB0aGlzWzBdLnRleHRDb250ZW50Ow0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikgew0KICAgICAgICByZXR1cm4gdi50ZXh0Q29udGVudCA9IGNvbnRlbnQ7DQogICAgICB9KTsNCiAgICB9DQoNCiAgfSk7DQoNCiAgdmFyIGRvY0VsID0gZG9jLmRvY3VtZW50RWxlbWVudDsNCg0KICBmbi5leHRlbmQoew0KICAgIHBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgZWwgPSB0aGlzWzBdOw0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbGVmdDogZWwub2Zmc2V0TGVmdCwNCiAgICAgICAgdG9wOiBlbC5vZmZzZXRUb3ANCiAgICAgIH07DQogICAgfSwNCg0KICAgIG9mZnNldDogZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHJlY3QgPSB0aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOw0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgdG9wOiByZWN0LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsLmNsaWVudFRvcCwNCiAgICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0IC0gZG9jRWwuY2xpZW50TGVmdA0KICAgICAgfTsNCiAgICB9LA0KDQogICAgb2Zmc2V0UGFyZW50OiBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gY2FzaCh0aGlzWzBdLm9mZnNldFBhcmVudCk7DQogICAgfQ0KDQogIH0pOw0KDQogIGZuLmV4dGVuZCh7DQogICAgY2hpbGRyZW46IGZ1bmN0aW9uIChzZWxlY3Rvcikgew0KICAgICAgdmFyIGVsZW1zID0gW107DQogICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGVsKSB7DQogICAgICAgIHB1c2guYXBwbHkoZWxlbXMsIGVsLmNoaWxkcmVuKTsNCiAgICAgIH0pOw0KICAgICAgZWxlbXMgPSB1bmlxdWUoZWxlbXMpOw0KDQogICAgICByZXR1cm4gIXNlbGVjdG9yID8gZWxlbXMgOiBlbGVtcy5maWx0ZXIoZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgcmV0dXJuIG1hdGNoZXModiwgc2VsZWN0b3IpOw0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIGNsb3Nlc3Q6IGZ1bmN0aW9uIChzZWxlY3Rvcikgew0KICAgICAgaWYgKCFzZWxlY3RvciB8fCB0aGlzLmxlbmd0aCA8IDEpIHsNCiAgICAgICAgcmV0dXJuIGNhc2goKTsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmlzKHNlbGVjdG9yKSkgew0KICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoc2VsZWN0b3IpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRoaXMucGFyZW50KCkuY2xvc2VzdChzZWxlY3Rvcik7DQogICAgfSwNCg0KICAgIGlzOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHsNCiAgICAgIGlmICghc2VsZWN0b3IpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KDQogICAgICB2YXIgbWF0Y2ggPSBmYWxzZSwNCiAgICAgICAgICBjb21wYXJhdG9yID0gZ2V0Q29tcGFyZUZ1bmN0aW9uKHNlbGVjdG9yKTsNCg0KICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChlbCkgew0KICAgICAgICBtYXRjaCA9IGNvbXBhcmF0b3IoZWwsIHNlbGVjdG9yKTsNCiAgICAgICAgcmV0dXJuICFtYXRjaDsNCiAgICAgIH0pOw0KDQogICAgICByZXR1cm4gbWF0Y2g7DQogICAgfSwNCg0KICAgIGZpbmQ6IGZ1bmN0aW9uIChzZWxlY3Rvcikgew0KICAgICAgaWYgKCFzZWxlY3RvciB8fCBzZWxlY3Rvci5ub2RlVHlwZSkgew0KICAgICAgICByZXR1cm4gY2FzaChzZWxlY3RvciAmJiB0aGlzLmhhcyhzZWxlY3RvcikubGVuZ3RoID8gc2VsZWN0b3IgOiBudWxsKTsNCiAgICAgIH0NCg0KICAgICAgdmFyIGVsZW1zID0gW107DQogICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGVsKSB7DQogICAgICAgIHB1c2guYXBwbHkoZWxlbXMsIGZpbmQoc2VsZWN0b3IsIGVsKSk7DQogICAgICB9KTsNCg0KICAgICAgcmV0dXJuIHVuaXF1ZShlbGVtcyk7DQogICAgfSwNCg0KICAgIGhhczogZnVuY3Rpb24gKHNlbGVjdG9yKSB7DQogICAgICB2YXIgY29tcGFyYXRvciA9IGlzU3RyaW5nKHNlbGVjdG9yKSA/IGZ1bmN0aW9uIChlbCkgew0KICAgICAgICByZXR1cm4gZmluZChzZWxlY3RvciwgZWwpLmxlbmd0aCAhPT0gMDsNCiAgICAgIH0gOiBmdW5jdGlvbiAoZWwpIHsNCiAgICAgICAgcmV0dXJuIGVsLmNvbnRhaW5zKHNlbGVjdG9yKTsNCiAgICAgIH07DQoNCiAgICAgIHJldHVybiB0aGlzLmZpbHRlcihjb21wYXJhdG9yKTsNCiAgICB9LA0KDQogICAgbmV4dDogZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIGNhc2godGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmcpOw0KICAgIH0sDQoNCiAgICBub3Q6IGZ1bmN0aW9uIChzZWxlY3Rvcikgew0KICAgICAgaWYgKCFzZWxlY3Rvcikgew0KICAgICAgICByZXR1cm4gdGhpczsNCiAgICAgIH0NCg0KICAgICAgdmFyIGNvbXBhcmF0b3IgPSBnZXRDb21wYXJlRnVuY3Rpb24oc2VsZWN0b3IpOw0KDQogICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7DQogICAgICAgIHJldHVybiAhY29tcGFyYXRvcihlbCwgc2VsZWN0b3IpOw0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIHBhcmVudDogZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KDQogICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGl0ZW0pIHsNCiAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5wYXJlbnROb2RlKSB7DQogICAgICAgICAgcmVzdWx0LnB1c2goaXRlbS5wYXJlbnROb2RlKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQoNCiAgICAgIHJldHVybiB1bmlxdWUocmVzdWx0KTsNCiAgICB9LA0KDQogICAgcGFyZW50czogZnVuY3Rpb24gKHNlbGVjdG9yKSB7DQogICAgICB2YXIgbGFzdCwNCiAgICAgICAgICByZXN1bHQgPSBbXTsNCg0KICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChpdGVtKSB7DQogICAgICAgIGxhc3QgPSBpdGVtOw0KDQogICAgICAgIHdoaWxlIChsYXN0ICYmIGxhc3QucGFyZW50Tm9kZSAmJiBsYXN0ICE9PSBkb2MuYm9keS5wYXJlbnROb2RlKSB7DQogICAgICAgICAgbGFzdCA9IGxhc3QucGFyZW50Tm9kZTsNCg0KICAgICAgICAgIGlmICghc2VsZWN0b3IgfHwgc2VsZWN0b3IgJiYgbWF0Y2hlcyhsYXN0LCBzZWxlY3RvcikpIHsNCiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxhc3QpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSk7DQoNCiAgICAgIHJldHVybiB1bmlxdWUocmVzdWx0KTsNCiAgICB9LA0KDQogICAgcHJldjogZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIGNhc2godGhpc1swXS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKTsNCiAgICB9LA0KDQogICAgc2libGluZ3M6IGZ1bmN0aW9uIChzZWxlY3Rvcikgew0KICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzLnBhcmVudCgpLmNoaWxkcmVuKHNlbGVjdG9yKSwNCiAgICAgICAgICBlbCA9IHRoaXNbMF07DQoNCiAgICAgIHJldHVybiBjb2xsZWN0aW9uLmZpbHRlcihmdW5jdGlvbiAoaSkgew0KICAgICAgICByZXR1cm4gaSAhPT0gZWw7DQogICAgICB9KTsNCiAgICB9DQoNCiAgfSk7DQoNCiAgcmV0dXJuIGNhc2g7DQp9KTsNCjsNCnZhciBDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7DQogIC8qKg0KICAgKiBHZW5lcmljIGNvbnN0cnVjdG9yIGZvciBhbGwgY29tcG9uZW50cw0KICAgKiBAY29uc3RydWN0b3INCiAgICogQHBhcmFtIHtFbGVtZW50fSBlbA0KICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgKi8NCiAgZnVuY3Rpb24gQ29tcG9uZW50KGNsYXNzRGVmLCBlbCwgb3B0aW9ucykgew0KICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb21wb25lbnQpOw0KDQogICAgLy8gRGlzcGxheSBlcnJvciBpZiBlbCBpcyB2YWxpZCBIVE1MIEVsZW1lbnQNCiAgICBpZiAoIShlbCBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7DQogICAgICBjb25zb2xlLmVycm9yKEVycm9yKGVsICsgJyBpcyBub3QgYW4gSFRNTCBFbGVtZW50JykpOw0KICAgIH0NCg0KICAgIC8vIElmIGV4aXN0cywgZGVzdHJveSBhbmQgcmVpbml0aWFsaXplIGluIGNoaWxkDQogICAgdmFyIGlucyA9IGNsYXNzRGVmLmdldEluc3RhbmNlKGVsKTsNCiAgICBpZiAoISFpbnMpIHsNCiAgICAgIGlucy5kZXN0cm95KCk7DQogICAgfQ0KDQogICAgdGhpcy5lbCA9IGVsOw0KICAgIHRoaXMuJGVsID0gY2FzaChlbCk7DQogIH0NCg0KICAvKioNCiAgICogSW5pdGlhbGl6ZXMgY29tcG9uZW50cw0KICAgKiBAcGFyYW0ge2NsYXNzfSBjbGFzc0RlZg0KICAgKiBAcGFyYW0ge0VsZW1lbnQgfCBOb2RlTGlzdCB8IGpRdWVyeX0gZWxzDQogICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zDQogICAqLw0KDQoNCiAgX2NyZWF0ZUNsYXNzKENvbXBvbmVudCwgbnVsbCwgW3sNCiAgICBrZXk6ICJpbml0IiwNCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChjbGFzc0RlZiwgZWxzLCBvcHRpb25zKSB7DQogICAgICB2YXIgaW5zdGFuY2VzID0gbnVsbDsNCiAgICAgIGlmIChlbHMgaW5zdGFuY2VvZiBFbGVtZW50KSB7DQogICAgICAgIGluc3RhbmNlcyA9IG5ldyBjbGFzc0RlZihlbHMsIG9wdGlvbnMpOw0KICAgICAgfSBlbHNlIGlmICghIWVscyAmJiAoZWxzLmpxdWVyeSB8fCBlbHMuY2FzaCB8fCBlbHMgaW5zdGFuY2VvZiBOb2RlTGlzdCkpIHsNCiAgICAgICAgdmFyIGluc3RhbmNlc0FyciA9IFtdOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGluc3RhbmNlc0Fyci5wdXNoKG5ldyBjbGFzc0RlZihlbHNbaV0sIG9wdGlvbnMpKTsNCiAgICAgICAgfQ0KICAgICAgICBpbnN0YW5jZXMgPSBpbnN0YW5jZXNBcnI7DQogICAgICB9DQoNCiAgICAgIHJldHVybiBpbnN0YW5jZXM7DQogICAgfQ0KICB9XSk7DQoNCiAgcmV0dXJuIENvbXBvbmVudDsNCn0oKTsNCg0KOyAvLyBSZXF1aXJlZCBmb3IgTWV0ZW9yIHBhY2thZ2UsIHRoZSB1c2Ugb2Ygd2luZG93IHByZXZlbnRzIGV4cG9ydCBieSBNZXRlb3INCihmdW5jdGlvbiAod2luZG93KSB7DQogIGlmICh3aW5kb3cuUGFja2FnZSkgew0KICAgIE0gPSB7fTsNCiAgfSBlbHNlIHsNCiAgICB3aW5kb3cuTSA9IHt9Ow0KICB9DQoNCiAgLy8gQ2hlY2sgZm9yIGpRdWVyeQ0KICBNLmpRdWVyeUxvYWRlZCA9ICEhd2luZG93LmpRdWVyeTsNCn0pKHdpbmRvdyk7DQoNCi8vIEFNRA0KaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgew0KICBkZWZpbmUoJ00nLCBbXSwgZnVuY3Rpb24gKCkgew0KICAgIHJldHVybiBNOw0KICB9KTsNCg0KICAvLyBDb21tb24gSlMNCn0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnICYmICFleHBvcnRzLm5vZGVUeXBlKSB7DQogIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZS5leHBvcnRzKSB7DQogICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gTTsNCiAgfQ0KICBleHBvcnRzLmRlZmF1bHQgPSBNOw0KfQ0KDQpNLmtleXMgPSB7DQogIFRBQjogOSwNCiAgRU5URVI6IDEzLA0KICBFU0M6IDI3LA0KICBBUlJPV19VUDogMzgsDQogIEFSUk9XX0RPV046IDQwDQp9Ow0KDQovKioNCiAqIFRhYlByZXNzIEtleWRvd24gaGFuZGxlcg0KICovDQpNLnRhYlByZXNzZWQgPSBmYWxzZTsNCk0ua2V5RG93biA9IGZhbHNlOw0KdmFyIGRvY0hhbmRsZUtleWRvd24gPSBmdW5jdGlvbiAoZSkgew0KICBNLmtleURvd24gPSB0cnVlOw0KICBpZiAoZS53aGljaCA9PT0gTS5rZXlzLlRBQiB8fCBlLndoaWNoID09PSBNLmtleXMuQVJST1dfRE9XTiB8fCBlLndoaWNoID09PSBNLmtleXMuQVJST1dfVVApIHsNCiAgICBNLnRhYlByZXNzZWQgPSB0cnVlOw0KICB9DQp9Ow0KdmFyIGRvY0hhbmRsZUtleXVwID0gZnVuY3Rpb24gKGUpIHsNCiAgTS5rZXlEb3duID0gZmFsc2U7DQogIGlmIChlLndoaWNoID09PSBNLmtleXMuVEFCIHx8IGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19ET1dOIHx8IGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19VUCkgew0KICAgIE0udGFiUHJlc3NlZCA9IGZhbHNlOw0KICB9DQp9Ow0KdmFyIGRvY0hhbmRsZUZvY3VzID0gZnVuY3Rpb24gKGUpIHsNCiAgaWYgKE0ua2V5RG93bikgew0KICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmQtZm9jdXNlZCcpOw0KICB9DQp9Ow0KdmFyIGRvY0hhbmRsZUJsdXIgPSBmdW5jdGlvbiAoZSkgew0KICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2tleWJvYXJkLWZvY3VzZWQnKTsNCn07DQpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZG9jSGFuZGxlS2V5ZG93biwgdHJ1ZSk7DQpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGRvY0hhbmRsZUtleXVwLCB0cnVlKTsNCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZG9jSGFuZGxlRm9jdXMsIHRydWUpOw0KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGRvY0hhbmRsZUJsdXIsIHRydWUpOw0KDQovKioNCiAqIEluaXRpYWxpemUgalF1ZXJ5IHdyYXBwZXIgZm9yIHBsdWdpbg0KICogQHBhcmFtIHtDbGFzc30gcGx1Z2luICBqYXZhc2NyaXB0IGNsYXNzDQogKiBAcGFyYW0ge3N0cmluZ30gcGx1Z2luTmFtZSAgalF1ZXJ5IHBsdWdpbiBuYW1lDQogKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NSZWYgIENsYXNzIHJlZmVyZW5jZSBuYW1lDQogKi8NCk0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIgPSBmdW5jdGlvbiAocGx1Z2luLCBwbHVnaW5OYW1lLCBjbGFzc1JlZikgew0KICBqUXVlcnkuZm5bcGx1Z2luTmFtZV0gPSBmdW5jdGlvbiAobWV0aG9kT3JPcHRpb25zKSB7DQogICAgLy8gQ2FsbCBwbHVnaW4gbWV0aG9kIGlmIHZhbGlkIG1ldGhvZCBuYW1lIGlzIHBhc3NlZCBpbg0KICAgIGlmIChwbHVnaW4ucHJvdG90eXBlW21ldGhvZE9yT3B0aW9uc10pIHsNCiAgICAgIHZhciBwYXJhbXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOw0KDQogICAgICAvLyBHZXR0ZXIgbWV0aG9kcw0KICAgICAgaWYgKG1ldGhvZE9yT3B0aW9ucy5zbGljZSgwLCAzKSA9PT0gJ2dldCcpIHsNCiAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5maXJzdCgpWzBdW2NsYXNzUmVmXTsNCiAgICAgICAgcmV0dXJuIGluc3RhbmNlW21ldGhvZE9yT3B0aW9uc10uYXBwbHkoaW5zdGFuY2UsIHBhcmFtcyk7DQogICAgICB9DQoNCiAgICAgIC8vIFZvaWQgbWV0aG9kcw0KICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXNbY2xhc3NSZWZdOw0KICAgICAgICBpbnN0YW5jZVttZXRob2RPck9wdGlvbnNdLmFwcGx5KGluc3RhbmNlLCBwYXJhbXMpOw0KICAgICAgfSk7DQoNCiAgICAgIC8vIEluaXRpYWxpemUgcGx1Z2luIGlmIG9wdGlvbnMgb3Igbm8gYXJndW1lbnQgaXMgcGFzc2VkIGluDQogICAgfSBlbHNlIGlmICh0eXBlb2YgbWV0aG9kT3JPcHRpb25zID09PSAnb2JqZWN0JyB8fCAhbWV0aG9kT3JPcHRpb25zKSB7DQogICAgICBwbHVnaW4uaW5pdCh0aGlzLCBhcmd1bWVudHNbMF0pOw0KICAgICAgcmV0dXJuIHRoaXM7DQogICAgfQ0KDQogICAgLy8gUmV0dXJuIGVycm9yIGlmIGFuIHVucmVjb2duaXplZCAgbWV0aG9kIG5hbWUgaXMgcGFzc2VkIGluDQogICAgalF1ZXJ5LmVycm9yKCJNZXRob2QgIiArIG1ldGhvZE9yT3B0aW9ucyArICIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LiIgKyBwbHVnaW5OYW1lKTsNCiAgfTsNCn07DQoNCi8qKg0KICogQXV0b21hdGljYWxseSBpbml0aWFsaXplIGNvbXBvbmVudHMNCiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGV4dCAgRE9NIEVsZW1lbnQgdG8gc2VhcmNoIHdpdGhpbiBmb3IgY29tcG9uZW50cw0KICovDQpNLkF1dG9Jbml0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgLy8gVXNlIGRvY3VtZW50LmJvZHkgaWYgbm8gY29udGV4dCBpcyBnaXZlbg0KICB2YXIgcm9vdCA9ICEhY29udGV4dCA/IGNvbnRleHQgOiBkb2N1bWVudC5ib2R5Ow0KDQogIHZhciByZWdpc3RyeSA9IHsNCiAgICBBdXRvY29tcGxldGU6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLmF1dG9jb21wbGV0ZTpub3QoLm5vLWF1dG9pbml0KScpLA0KICAgIENhcm91c2VsOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJvdXNlbDpub3QoLm5vLWF1dG9pbml0KScpLA0KICAgIENoaXBzOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGlwczpub3QoLm5vLWF1dG9pbml0KScpLA0KICAgIENvbGxhcHNpYmxlOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2xsYXBzaWJsZTpub3QoLm5vLWF1dG9pbml0KScpLA0KICAgIERhdGVwaWNrZXI6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLmRhdGVwaWNrZXI6bm90KC5uby1hdXRvaW5pdCknKSwNCiAgICBEcm9wZG93bjogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcGRvd24tdHJpZ2dlcjpub3QoLm5vLWF1dG9pbml0KScpLA0KICAgIE1hdGVyaWFsYm94OiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYXRlcmlhbGJveGVkOm5vdCgubm8tYXV0b2luaXQpJyksDQogICAgTW9kYWw6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsOm5vdCgubm8tYXV0b2luaXQpJyksDQogICAgUGFyYWxsYXg6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLnBhcmFsbGF4Om5vdCgubm8tYXV0b2luaXQpJyksDQogICAgUHVzaHBpbjogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcucHVzaHBpbjpub3QoLm5vLWF1dG9pbml0KScpLA0KICAgIFNjcm9sbFNweTogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuc2Nyb2xsc3B5Om5vdCgubm8tYXV0b2luaXQpJyksDQogICAgRm9ybVNlbGVjdDogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3Q6bm90KC5uby1hdXRvaW5pdCknKSwNCiAgICBTaWRlbmF2OiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlbmF2Om5vdCgubm8tYXV0b2luaXQpJyksDQogICAgVGFiczogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiczpub3QoLm5vLWF1dG9pbml0KScpLA0KICAgIFRhcFRhcmdldDogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcudGFwLXRhcmdldDpub3QoLm5vLWF1dG9pbml0KScpLA0KICAgIFRpbWVwaWNrZXI6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLnRpbWVwaWNrZXI6bm90KC5uby1hdXRvaW5pdCknKSwNCiAgICBUb29sdGlwOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b29sdGlwcGVkOm5vdCgubm8tYXV0b2luaXQpJyksDQogICAgRmxvYXRpbmdBY3Rpb25CdXR0b246IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLmZpeGVkLWFjdGlvbi1idG46bm90KC5uby1hdXRvaW5pdCknKQ0KICB9Ow0KDQogIGZvciAodmFyIHBsdWdpbk5hbWUgaW4gcmVnaXN0cnkpIHsNCiAgICB2YXIgcGx1Z2luID0gTVtwbHVnaW5OYW1lXTsNCiAgICBwbHVnaW4uaW5pdChyZWdpc3RyeVtwbHVnaW5OYW1lXSk7DQogIH0NCn07DQoNCi8qKg0KICogR2VuZXJhdGUgYXBwcm94aW1hdGVkIHNlbGVjdG9yIHN0cmluZyBmb3IgYSBqUXVlcnkgb2JqZWN0DQogKiBAcGFyYW0ge2pRdWVyeX0gb2JqICBqUXVlcnkgb2JqZWN0IHRvIGJlIHBhcnNlZA0KICogQHJldHVybnMge3N0cmluZ30NCiAqLw0KTS5vYmplY3RTZWxlY3RvclN0cmluZyA9IGZ1bmN0aW9uIChvYmopIHsNCiAgdmFyIHRhZ1N0ciA9IG9iai5wcm9wKCd0YWdOYW1lJykgfHwgJyc7DQogIHZhciBpZFN0ciA9IG9iai5hdHRyKCdpZCcpIHx8ICcnOw0KICB2YXIgY2xhc3NTdHIgPSBvYmouYXR0cignY2xhc3MnKSB8fCAnJzsNCiAgcmV0dXJuICh0YWdTdHIgKyBpZFN0ciArIGNsYXNzU3RyKS5yZXBsYWNlKC9ccy9nLCAnJyk7DQp9Ow0KDQovLyBVbmlxdWUgUmFuZG9tIElEDQpNLmd1aWQgPSBmdW5jdGlvbiAoKSB7DQogIGZ1bmN0aW9uIHM0KCkgew0KICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpOw0KICB9DQogIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpOw0KICB9Ow0KfSgpOw0KDQovKioNCiAqIEVzY2FwZXMgaGFzaCBmcm9tIHNwZWNpYWwgY2hhcmFjdGVycw0KICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggIFN0cmluZyByZXR1cm5lZCBmcm9tIHRoaXMuaGFzaA0KICogQHJldHVybnMge3N0cmluZ30NCiAqLw0KTS5lc2NhcGVIYXNoID0gZnVuY3Rpb24gKGhhc2gpIHsNCiAgcmV0dXJuIGhhc2gucmVwbGFjZSgvKDp8XC58XFt8XF18LHw9fFwvKS9nLCAnXFwkMScpOw0KfTsNCg0KTS5lbGVtZW50T3JQYXJlbnRJc0ZpeGVkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsNCiAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgdmFyICRjaGVja0VsZW1lbnRzID0gJGVsZW1lbnQuYWRkKCRlbGVtZW50LnBhcmVudHMoKSk7DQogIHZhciBpc0ZpeGVkID0gZmFsc2U7DQogICRjaGVja0VsZW1lbnRzLmVhY2goZnVuY3Rpb24gKCkgew0KICAgIGlmICgkKHRoaXMpLmNzcygncG9zaXRpb24nKSA9PT0gJ2ZpeGVkJykgew0KICAgICAgaXNGaXhlZCA9IHRydWU7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICB9KTsNCiAgcmV0dXJuIGlzRml4ZWQ7DQp9Ow0KDQovKioNCiAqIEB0eXBlZGVmIHtPYmplY3R9IEVkZ2VzDQogKiBAcHJvcGVydHkge0Jvb2xlYW59IHRvcCAgSWYgdGhlIHRvcCBlZGdlIHdhcyBleGNlZWRlZA0KICogQHByb3BlcnR5IHtCb29sZWFufSByaWdodCAgSWYgdGhlIHJpZ2h0IGVkZ2Ugd2FzIGV4Y2VlZGVkDQogKiBAcHJvcGVydHkge0Jvb2xlYW59IGJvdHRvbSAgSWYgdGhlIGJvdHRvbSBlZGdlIHdhcyBleGNlZWRlZA0KICogQHByb3BlcnR5IHtCb29sZWFufSBsZWZ0ICBJZiB0aGUgbGVmdCBlZGdlIHdhcyBleGNlZWRlZA0KICovDQoNCi8qKg0KICogQHR5cGVkZWYge09iamVjdH0gQm91bmRpbmcNCiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBsZWZ0ICBsZWZ0IG9mZnNldCBjb29yZGluYXRlDQogKiBAcHJvcGVydHkge051bWJlcn0gdG9wICB0b3Agb2Zmc2V0IGNvb3JkaW5hdGUNCiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSB3aWR0aA0KICogQHByb3BlcnR5IHtOdW1iZXJ9IGhlaWdodA0KICovDQoNCi8qKg0KICogRXNjYXBlcyBoYXNoIGZyb20gc3BlY2lhbCBjaGFyYWN0ZXJzDQogKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRhaW5lciAgQ29udGFpbmVyIGVsZW1lbnQgdGhhdCBhY3RzIGFzIHRoZSBib3VuZGFyeQ0KICogQHBhcmFtIHtCb3VuZGluZ30gYm91bmRpbmcgIGVsZW1lbnQgYm91bmRpbmcgdGhhdCBpcyBiZWluZyBjaGVja2VkDQogKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0ICBvZmZzZXQgZnJvbSBlZGdlIHRoYXQgY291bnRzIGFzIGV4Y2VlZGluZw0KICogQHJldHVybnMge0VkZ2VzfQ0KICovDQpNLmNoZWNrV2l0aGluQ29udGFpbmVyID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgYm91bmRpbmcsIG9mZnNldCkgew0KICB2YXIgZWRnZXMgPSB7DQogICAgdG9wOiBmYWxzZSwNCiAgICByaWdodDogZmFsc2UsDQogICAgYm90dG9tOiBmYWxzZSwNCiAgICBsZWZ0OiBmYWxzZQ0KICB9Ow0KDQogIHZhciBjb250YWluZXJSZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOw0KICAvLyBJZiBib2R5IGVsZW1lbnQgaXMgc21hbGxlciB0aGFuIHZpZXdwb3J0LCB1c2Ugdmlld3BvcnQgaGVpZ2h0IGluc3RlYWQuDQogIHZhciBjb250YWluZXJCb3R0b20gPSBjb250YWluZXIgPT09IGRvY3VtZW50LmJvZHkgPyBNYXRoLm1heChjb250YWluZXJSZWN0LmJvdHRvbSwgd2luZG93LmlubmVySGVpZ2h0KSA6IGNvbnRhaW5lclJlY3QuYm90dG9tOw0KDQogIHZhciBzY3JvbGxMZWZ0ID0gY29udGFpbmVyLnNjcm9sbExlZnQ7DQogIHZhciBzY3JvbGxUb3AgPSBjb250YWluZXIuc2Nyb2xsVG9wOw0KDQogIHZhciBzY3JvbGxlZFggPSBib3VuZGluZy5sZWZ0IC0gc2Nyb2xsTGVmdDsNCiAgdmFyIHNjcm9sbGVkWSA9IGJvdW5kaW5nLnRvcCAtIHNjcm9sbFRvcDsNCg0KICAvLyBDaGVjayBmb3IgY29udGFpbmVyIGFuZCB2aWV3cG9ydCBmb3IgZWFjaCBlZGdlDQogIGlmIChzY3JvbGxlZFggPCBjb250YWluZXJSZWN0LmxlZnQgKyBvZmZzZXQgfHwgc2Nyb2xsZWRYIDwgb2Zmc2V0KSB7DQogICAgZWRnZXMubGVmdCA9IHRydWU7DQogIH0NCg0KICBpZiAoc2Nyb2xsZWRYICsgYm91bmRpbmcud2lkdGggPiBjb250YWluZXJSZWN0LnJpZ2h0IC0gb2Zmc2V0IHx8IHNjcm9sbGVkWCArIGJvdW5kaW5nLndpZHRoID4gd2luZG93LmlubmVyV2lkdGggLSBvZmZzZXQpIHsNCiAgICBlZGdlcy5yaWdodCA9IHRydWU7DQogIH0NCg0KICBpZiAoc2Nyb2xsZWRZIDwgY29udGFpbmVyUmVjdC50b3AgKyBvZmZzZXQgfHwgc2Nyb2xsZWRZIDwgb2Zmc2V0KSB7DQogICAgZWRnZXMudG9wID0gdHJ1ZTsNCiAgfQ0KDQogIGlmIChzY3JvbGxlZFkgKyBib3VuZGluZy5oZWlnaHQgPiBjb250YWluZXJCb3R0b20gLSBvZmZzZXQgfHwgc2Nyb2xsZWRZICsgYm91bmRpbmcuaGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0IC0gb2Zmc2V0KSB7DQogICAgZWRnZXMuYm90dG9tID0gdHJ1ZTsNCiAgfQ0KDQogIHJldHVybiBlZGdlczsNCn07DQoNCk0uY2hlY2tQb3NzaWJsZUFsaWdubWVudHMgPSBmdW5jdGlvbiAoZWwsIGNvbnRhaW5lciwgYm91bmRpbmcsIG9mZnNldCkgew0KICB2YXIgY2FuQWxpZ24gPSB7DQogICAgdG9wOiB0cnVlLA0KICAgIHJpZ2h0OiB0cnVlLA0KICAgIGJvdHRvbTogdHJ1ZSwNCiAgICBsZWZ0OiB0cnVlLA0KICAgIHNwYWNlT25Ub3A6IG51bGwsDQogICAgc3BhY2VPblJpZ2h0OiBudWxsLA0KICAgIHNwYWNlT25Cb3R0b206IG51bGwsDQogICAgc3BhY2VPbkxlZnQ6IG51bGwNCiAgfTsNCg0KICB2YXIgY29udGFpbmVyQWxsb3dzT3ZlcmZsb3cgPSBnZXRDb21wdXRlZFN0eWxlKGNvbnRhaW5lcikub3ZlcmZsb3cgPT09ICd2aXNpYmxlJzsNCiAgdmFyIGNvbnRhaW5lclJlY3QgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQogIHZhciBjb250YWluZXJIZWlnaHQgPSBNYXRoLm1pbihjb250YWluZXJSZWN0LmhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0KTsNCiAgdmFyIGNvbnRhaW5lcldpZHRoID0gTWF0aC5taW4oY29udGFpbmVyUmVjdC53aWR0aCwgd2luZG93LmlubmVyV2lkdGgpOw0KICB2YXIgZWxPZmZzZXRSZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQoNCiAgdmFyIHNjcm9sbExlZnQgPSBjb250YWluZXIuc2Nyb2xsTGVmdDsNCiAgdmFyIHNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxUb3A7DQoNCiAgdmFyIHNjcm9sbGVkWCA9IGJvdW5kaW5nLmxlZnQgLSBzY3JvbGxMZWZ0Ow0KICB2YXIgc2Nyb2xsZWRZVG9wRWRnZSA9IGJvdW5kaW5nLnRvcCAtIHNjcm9sbFRvcDsNCiAgdmFyIHNjcm9sbGVkWUJvdHRvbUVkZ2UgPSBib3VuZGluZy50b3AgKyBlbE9mZnNldFJlY3QuaGVpZ2h0IC0gc2Nyb2xsVG9wOw0KDQogIC8vIENoZWNrIGZvciBjb250YWluZXIgYW5kIHZpZXdwb3J0IGZvciBsZWZ0DQogIGNhbkFsaWduLnNwYWNlT25SaWdodCA9ICFjb250YWluZXJBbGxvd3NPdmVyZmxvdyA/IGNvbnRhaW5lcldpZHRoIC0gKHNjcm9sbGVkWCArIGJvdW5kaW5nLndpZHRoKSA6IHdpbmRvdy5pbm5lcldpZHRoIC0gKGVsT2Zmc2V0UmVjdC5sZWZ0ICsgYm91bmRpbmcud2lkdGgpOw0KICBpZiAoY2FuQWxpZ24uc3BhY2VPblJpZ2h0IDwgMCkgew0KICAgIGNhbkFsaWduLmxlZnQgPSBmYWxzZTsNCiAgfQ0KDQogIC8vIENoZWNrIGZvciBjb250YWluZXIgYW5kIHZpZXdwb3J0IGZvciBSaWdodA0KICBjYW5BbGlnbi5zcGFjZU9uTGVmdCA9ICFjb250YWluZXJBbGxvd3NPdmVyZmxvdyA/IHNjcm9sbGVkWCAtIGJvdW5kaW5nLndpZHRoICsgZWxPZmZzZXRSZWN0LndpZHRoIDogZWxPZmZzZXRSZWN0LnJpZ2h0IC0gYm91bmRpbmcud2lkdGg7DQogIGlmIChjYW5BbGlnbi5zcGFjZU9uTGVmdCA8IDApIHsNCiAgICBjYW5BbGlnbi5yaWdodCA9IGZhbHNlOw0KICB9DQoNCiAgLy8gQ2hlY2sgZm9yIGNvbnRhaW5lciBhbmQgdmlld3BvcnQgZm9yIFRvcA0KICBjYW5BbGlnbi5zcGFjZU9uQm90dG9tID0gIWNvbnRhaW5lckFsbG93c092ZXJmbG93ID8gY29udGFpbmVySGVpZ2h0IC0gKHNjcm9sbGVkWVRvcEVkZ2UgKyBib3VuZGluZy5oZWlnaHQgKyBvZmZzZXQpIDogd2luZG93LmlubmVySGVpZ2h0IC0gKGVsT2Zmc2V0UmVjdC50b3AgKyBib3VuZGluZy5oZWlnaHQgKyBvZmZzZXQpOw0KICBpZiAoY2FuQWxpZ24uc3BhY2VPbkJvdHRvbSA8IDApIHsNCiAgICBjYW5BbGlnbi50b3AgPSBmYWxzZTsNCiAgfQ0KDQogIC8vIENoZWNrIGZvciBjb250YWluZXIgYW5kIHZpZXdwb3J0IGZvciBCb3R0b20NCiAgY2FuQWxpZ24uc3BhY2VPblRvcCA9ICFjb250YWluZXJBbGxvd3NPdmVyZmxvdyA/IHNjcm9sbGVkWUJvdHRvbUVkZ2UgLSAoYm91bmRpbmcuaGVpZ2h0IC0gb2Zmc2V0KSA6IGVsT2Zmc2V0UmVjdC5ib3R0b20gLSAoYm91bmRpbmcuaGVpZ2h0ICsgb2Zmc2V0KTsNCiAgaWYgKGNhbkFsaWduLnNwYWNlT25Ub3AgPCAwKSB7DQogICAgY2FuQWxpZ24uYm90dG9tID0gZmFsc2U7DQogIH0NCg0KICByZXR1cm4gY2FuQWxpZ247DQp9Ow0KDQpNLmdldE92ZXJmbG93UGFyZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsNCiAgaWYgKGVsZW1lbnQgPT0gbnVsbCkgew0KICAgIHJldHVybiBudWxsOw0KICB9DQoNCiAgaWYgKGVsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkgfHwgZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5vdmVyZmxvdyAhPT0gJ3Zpc2libGUnKSB7DQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0NCg0KICByZXR1cm4gTS5nZXRPdmVyZmxvd1BhcmVudChlbGVtZW50LnBhcmVudEVsZW1lbnQpOw0KfTsNCg0KLyoqDQogKiBHZXRzIGlkIG9mIGNvbXBvbmVudCBmcm9tIGEgdHJpZ2dlcg0KICogQHBhcmFtIHtFbGVtZW50fSB0cmlnZ2VyICB0cmlnZ2VyDQogKiBAcmV0dXJucyB7c3RyaW5nfQ0KICovDQpNLmdldElkRnJvbVRyaWdnZXIgPSBmdW5jdGlvbiAodHJpZ2dlcikgew0KICB2YXIgaWQgPSB0cmlnZ2VyLmdldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnKTsNCiAgaWYgKCFpZCkgew0KICAgIGlkID0gdHJpZ2dlci5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTsNCiAgICBpZiAoaWQpIHsNCiAgICAgIGlkID0gaWQuc2xpY2UoMSk7DQogICAgfSBlbHNlIHsNCiAgICAgIGlkID0gJyc7DQogICAgfQ0KICB9DQogIHJldHVybiBpZDsNCn07DQoNCi8qKg0KICogTXVsdGkgYnJvd3NlciBzdXBwb3J0IGZvciBkb2N1bWVudCBzY3JvbGwgdG9wDQogKiBAcmV0dXJucyB7TnVtYmVyfQ0KICovDQpNLmdldERvY3VtZW50U2Nyb2xsVG9wID0gZnVuY3Rpb24gKCkgew0KICByZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgMDsNCn07DQoNCi8qKg0KICogTXVsdGkgYnJvd3NlciBzdXBwb3J0IGZvciBkb2N1bWVudCBzY3JvbGwgbGVmdA0KICogQHJldHVybnMge051bWJlcn0NCiAqLw0KTS5nZXREb2N1bWVudFNjcm9sbExlZnQgPSBmdW5jdGlvbiAoKSB7DQogIHJldHVybiB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IHx8IDA7DQp9Ow0KDQovKioNCiAqIEB0eXBlZGVmIHtPYmplY3R9IEVkZ2VzDQogKiBAcHJvcGVydHkge0Jvb2xlYW59IHRvcCAgSWYgdGhlIHRvcCBlZGdlIHdhcyBleGNlZWRlZA0KICogQHByb3BlcnR5IHtCb29sZWFufSByaWdodCAgSWYgdGhlIHJpZ2h0IGVkZ2Ugd2FzIGV4Y2VlZGVkDQogKiBAcHJvcGVydHkge0Jvb2xlYW59IGJvdHRvbSAgSWYgdGhlIGJvdHRvbSBlZGdlIHdhcyBleGNlZWRlZA0KICogQHByb3BlcnR5IHtCb29sZWFufSBsZWZ0ICBJZiB0aGUgbGVmdCBlZGdlIHdhcyBleGNlZWRlZA0KICovDQoNCi8qKg0KICogQHR5cGVkZWYge09iamVjdH0gQm91bmRpbmcNCiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBsZWZ0ICBsZWZ0IG9mZnNldCBjb29yZGluYXRlDQogKiBAcHJvcGVydHkge051bWJlcn0gdG9wICB0b3Agb2Zmc2V0IGNvb3JkaW5hdGUNCiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSB3aWR0aA0KICogQHByb3BlcnR5IHtOdW1iZXJ9IGhlaWdodA0KICovDQoNCi8qKg0KICogR2V0IHRpbWUgaW4gbXMNCiAqIEBsaWNlbnNlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvbWFzdGVyL0xJQ0VOU0UNCiAqIEB0eXBlIHtmdW5jdGlvbn0NCiAqIEByZXR1cm4ge251bWJlcn0NCiAqLw0KdmFyIGdldFRpbWUgPSBEYXRlLm5vdyB8fCBmdW5jdGlvbiAoKSB7DQogIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCn07DQoNCi8qKg0KICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlDQogKiBkdXJpbmcgYSBnaXZlbiB3aW5kb3cgb2YgdGltZS4gTm9ybWFsbHksIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gd2lsbCBydW4NCiAqIGFzIG11Y2ggYXMgaXQgY2FuLCB3aXRob3V0IGV2ZXIgZ29pbmcgbW9yZSB0aGFuIG9uY2UgcGVyIGB3YWl0YCBkdXJhdGlvbjsNCiAqIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzDQogKiBge2xlYWRpbmc6IGZhbHNlfWAuIFRvIGRpc2FibGUgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlLCBkaXR0by4NCiAqIEBsaWNlbnNlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvbWFzdGVyL0xJQ0VOU0UNCiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmMNCiAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0DQogKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMNCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0NCiAqLw0KTS50aHJvdHRsZSA9IGZ1bmN0aW9uIChmdW5jLCB3YWl0LCBvcHRpb25zKSB7DQogIHZhciBjb250ZXh0ID0gdm9pZCAwLA0KICAgICAgYXJncyA9IHZvaWQgMCwNCiAgICAgIHJlc3VsdCA9IHZvaWQgMDsNCiAgdmFyIHRpbWVvdXQgPSBudWxsOw0KICB2YXIgcHJldmlvdXMgPSAwOw0KICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pOw0KICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiAoKSB7DQogICAgcHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IGdldFRpbWUoKTsNCiAgICB0aW1lb3V0ID0gbnVsbDsNCiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpOw0KICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDsNCiAgfTsNCiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgbm93ID0gZ2V0VGltZSgpOw0KICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7DQogICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpOw0KICAgIGNvbnRleHQgPSB0aGlzOw0KICAgIGFyZ3MgPSBhcmd1bWVudHM7DQogICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7DQogICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7DQogICAgICB0aW1lb3V0ID0gbnVsbDsNCiAgICAgIHByZXZpb3VzID0gbm93Ow0KICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTsNCiAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDsNCiAgICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7DQogICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTsNCiAgICB9DQogICAgcmV0dXJuIHJlc3VsdDsNCiAgfTsNCn07DQo7IC8qDQogIHYyLjIuMA0KICAyMDE3IEp1bGlhbiBHYXJuaWVyDQogIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQ0KICAqLw0KdmFyICRqc2NvbXAgPSB7IHNjb3BlOiB7fSB9OyRqc2NvbXAuZGVmaW5lUHJvcGVydHkgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIChlLCByLCBwKSB7DQogIGlmIChwLmdldCB8fCBwLnNldCkgdGhyb3cgbmV3IFR5cGVFcnJvcigiRVMzIGRvZXMgbm90IHN1cHBvcnQgZ2V0dGVycyBhbmQgc2V0dGVycy4iKTtlICE9IEFycmF5LnByb3RvdHlwZSAmJiBlICE9IE9iamVjdC5wcm90b3R5cGUgJiYgKGVbcl0gPSBwLnZhbHVlKTsNCn07JGpzY29tcC5nZXRHbG9iYWwgPSBmdW5jdGlvbiAoZSkgew0KICByZXR1cm4gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB3aW5kb3cgPT09IGUgPyBlIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIGdsb2JhbCAmJiBudWxsICE9IGdsb2JhbCA/IGdsb2JhbCA6IGU7DQp9OyRqc2NvbXAuZ2xvYmFsID0gJGpzY29tcC5nZXRHbG9iYWwodGhpcyk7JGpzY29tcC5TWU1CT0xfUFJFRklYID0gImpzY29tcF9zeW1ib2xfIjsNCiRqc2NvbXAuaW5pdFN5bWJvbCA9IGZ1bmN0aW9uICgpIHsNCiAgJGpzY29tcC5pbml0U3ltYm9sID0gZnVuY3Rpb24gKCkge307JGpzY29tcC5nbG9iYWwuU3ltYm9sIHx8ICgkanNjb21wLmdsb2JhbC5TeW1ib2wgPSAkanNjb21wLlN5bWJvbCk7DQp9OyRqc2NvbXAuc3ltYm9sQ291bnRlcl8gPSAwOyRqc2NvbXAuU3ltYm9sID0gZnVuY3Rpb24gKGUpIHsNCiAgcmV0dXJuICRqc2NvbXAuU1lNQk9MX1BSRUZJWCArIChlIHx8ICIiKSArICRqc2NvbXAuc3ltYm9sQ291bnRlcl8rKzsNCn07DQokanNjb21wLmluaXRTeW1ib2xJdGVyYXRvciA9IGZ1bmN0aW9uICgpIHsNCiAgJGpzY29tcC5pbml0U3ltYm9sKCk7dmFyIGUgPSAkanNjb21wLmdsb2JhbC5TeW1ib2wuaXRlcmF0b3I7ZSB8fCAoZSA9ICRqc2NvbXAuZ2xvYmFsLlN5bWJvbC5pdGVyYXRvciA9ICRqc2NvbXAuZ2xvYmFsLlN5bWJvbCgiaXRlcmF0b3IiKSk7ImZ1bmN0aW9uIiAhPSB0eXBlb2YgQXJyYXkucHJvdG90eXBlW2VdICYmICRqc2NvbXAuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBlLCB7IGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCwgdmFsdWU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiAkanNjb21wLmFycmF5SXRlcmF0b3IodGhpcyk7DQogICAgfSB9KTskanNjb21wLmluaXRTeW1ib2xJdGVyYXRvciA9IGZ1bmN0aW9uICgpIHt9Ow0KfTskanNjb21wLmFycmF5SXRlcmF0b3IgPSBmdW5jdGlvbiAoZSkgew0KICB2YXIgciA9IDA7cmV0dXJuICRqc2NvbXAuaXRlcmF0b3JQcm90b3R5cGUoZnVuY3Rpb24gKCkgew0KICAgIHJldHVybiByIDwgZS5sZW5ndGggPyB7IGRvbmU6ICExLCB2YWx1ZTogZVtyKytdIH0gOiB7IGRvbmU6ICEwIH07DQogIH0pOw0KfTsNCiRqc2NvbXAuaXRlcmF0b3JQcm90b3R5cGUgPSBmdW5jdGlvbiAoZSkgew0KICAkanNjb21wLmluaXRTeW1ib2xJdGVyYXRvcigpO2UgPSB7IG5leHQ6IGUgfTtlWyRqc2NvbXAuZ2xvYmFsLlN5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuIHRoaXM7DQogIH07cmV0dXJuIGU7DQp9OyRqc2NvbXAuYXJyYXkgPSAkanNjb21wLmFycmF5IHx8IHt9OyRqc2NvbXAuaXRlcmF0b3JGcm9tQXJyYXkgPSBmdW5jdGlvbiAoZSwgcikgew0KICAkanNjb21wLmluaXRTeW1ib2xJdGVyYXRvcigpO2UgaW5zdGFuY2VvZiBTdHJpbmcgJiYgKGUgKz0gIiIpO3ZhciBwID0gMCwNCiAgICAgIG0gPSB7IG5leHQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmIChwIDwgZS5sZW5ndGgpIHsNCiAgICAgICAgdmFyIHUgPSBwKys7cmV0dXJuIHsgdmFsdWU6IHIodSwgZVt1XSksIGRvbmU6ICExIH07DQogICAgICB9bS5uZXh0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4geyBkb25lOiAhMCwgdmFsdWU6IHZvaWQgMCB9Ow0KICAgICAgfTtyZXR1cm4gbS5uZXh0KCk7DQogICAgfSB9O21bU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gbTsNCiAgfTtyZXR1cm4gbTsNCn07DQokanNjb21wLnBvbHlmaWxsID0gZnVuY3Rpb24gKGUsIHIsIHAsIG0pIHsNCiAgaWYgKHIpIHsNCiAgICBwID0gJGpzY29tcC5nbG9iYWw7ZSA9IGUuc3BsaXQoIi4iKTtmb3IgKG0gPSAwOyBtIDwgZS5sZW5ndGggLSAxOyBtKyspIHsNCiAgICAgIHZhciB1ID0gZVttXTt1IGluIHAgfHwgKHBbdV0gPSB7fSk7cCA9IHBbdV07DQogICAgfWUgPSBlW2UubGVuZ3RoIC0gMV07bSA9IHBbZV07ciA9IHIobSk7ciAhPSBtICYmIG51bGwgIT0gciAmJiAkanNjb21wLmRlZmluZVByb3BlcnR5KHAsIGUsIHsgY29uZmlndXJhYmxlOiAhMCwgd3JpdGFibGU6ICEwLCB2YWx1ZTogciB9KTsNCiAgfQ0KfTskanNjb21wLnBvbHlmaWxsKCJBcnJheS5wcm90b3R5cGUua2V5cyIsIGZ1bmN0aW9uIChlKSB7DQogIHJldHVybiBlID8gZSA6IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gJGpzY29tcC5pdGVyYXRvckZyb21BcnJheSh0aGlzLCBmdW5jdGlvbiAoZSkgew0KICAgICAgcmV0dXJuIGU7DQogICAgfSk7DQogIH07DQp9LCAiZXM2LWltcGwiLCAiZXMzIik7dmFyICRqc2NvbXAkdGhpcyA9IHRoaXM7DQooZnVuY3Rpb24gKHIpIHsNCiAgTS5hbmltZSA9IHIoKTsNCn0pKGZ1bmN0aW9uICgpIHsNCiAgZnVuY3Rpb24gZShhKSB7DQogICAgaWYgKCFoLmNvbChhKSkgdHJ5IHsNCiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGEpOw0KICAgIH0gY2F0Y2ggKGMpIHt9DQogIH1mdW5jdGlvbiByKGEsIGMpIHsNCiAgICBmb3IgKHZhciBkID0gYS5sZW5ndGgsIGIgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBhcmd1bWVudHNbMV0gOiB2b2lkIDAsIGYgPSBbXSwgbiA9IDA7IG4gPCBkOyBuKyspIHsNCiAgICAgIGlmIChuIGluIGEpIHsNCiAgICAgICAgdmFyIGsgPSBhW25dO2MuY2FsbChiLCBrLCBuLCBhKSAmJiBmLnB1c2goayk7DQogICAgICB9DQogICAgfXJldHVybiBmOw0KICB9ZnVuY3Rpb24gcChhKSB7DQogICAgcmV0dXJuIGEucmVkdWNlKGZ1bmN0aW9uIChhLCBkKSB7DQogICAgICByZXR1cm4gYS5jb25jYXQoaC5hcnIoZCkgPyBwKGQpIDogZCk7DQogICAgfSwgW10pOw0KICB9ZnVuY3Rpb24gbShhKSB7DQogICAgaWYgKGguYXJyKGEpKSByZXR1cm4gYTsNCiAgICBoLnN0cihhKSAmJiAoYSA9IGUoYSkgfHwgYSk7cmV0dXJuIGEgaW5zdGFuY2VvZiBOb2RlTGlzdCB8fCBhIGluc3RhbmNlb2YgSFRNTENvbGxlY3Rpb24gPyBbXS5zbGljZS5jYWxsKGEpIDogW2FdOw0KICB9ZnVuY3Rpb24gdShhLCBjKSB7DQogICAgcmV0dXJuIGEuc29tZShmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuIGEgPT09IGM7DQogICAgfSk7DQogIH1mdW5jdGlvbiBDKGEpIHsNCiAgICB2YXIgYyA9IHt9LA0KICAgICAgICBkO2ZvciAoZCBpbiBhKSB7DQogICAgICBjW2RdID0gYVtkXTsNCiAgICB9cmV0dXJuIGM7DQogIH1mdW5jdGlvbiBEKGEsIGMpIHsNCiAgICB2YXIgZCA9IEMoYSksDQogICAgICAgIGI7Zm9yIChiIGluIGEpIHsNCiAgICAgIGRbYl0gPSBjLmhhc093blByb3BlcnR5KGIpID8gY1tiXSA6IGFbYl07DQogICAgfXJldHVybiBkOw0KICB9ZnVuY3Rpb24geihhLCBjKSB7DQogICAgdmFyIGQgPSBDKGEpLA0KICAgICAgICBiO2ZvciAoYiBpbiBjKSB7DQogICAgICBkW2JdID0gaC51bmQoYVtiXSkgPyBjW2JdIDogYVtiXTsNCiAgICB9cmV0dXJuIGQ7DQogIH1mdW5jdGlvbiBUKGEpIHsNCiAgICBhID0gYS5yZXBsYWNlKC9eIz8oW2EtZlxkXSkoW2EtZlxkXSkoW2EtZlxkXSkkL2ksIGZ1bmN0aW9uIChhLCBjLCBkLCBrKSB7DQogICAgICByZXR1cm4gYyArIGMgKyBkICsgZCArIGsgKyBrOw0KICAgIH0pO3ZhciBjID0gL14jPyhbYS1mXGRdezJ9KShbYS1mXGRdezJ9KShbYS1mXGRdezJ9KSQvaS5leGVjKGEpOw0KICAgIGEgPSBwYXJzZUludChjWzFdLCAxNik7dmFyIGQgPSBwYXJzZUludChjWzJdLCAxNiksDQogICAgICAgIGMgPSBwYXJzZUludChjWzNdLCAxNik7cmV0dXJuICJyZ2JhKCIgKyBhICsgIiwiICsgZCArICIsIiArIGMgKyAiLDEpIjsNCiAgfWZ1bmN0aW9uIFUoYSkgew0KICAgIGZ1bmN0aW9uIGMoYSwgYywgYikgew0KICAgICAgMCA+IGIgJiYgKGIgKz0gMSk7MSA8IGIgJiYgLS1iO3JldHVybiBiIDwgMSAvIDYgPyBhICsgNiAqIChjIC0gYSkgKiBiIDogLjUgPiBiID8gYyA6IGIgPCAyIC8gMyA/IGEgKyAoYyAtIGEpICogKDIgLyAzIC0gYikgKiA2IDogYTsNCiAgICB9dmFyIGQgPSAvaHNsXCgoXGQrKSxccyooW1xkLl0rKSUsXHMqKFtcZC5dKyklXCkvZy5leGVjKGEpIHx8IC9oc2xhXCgoXGQrKSxccyooW1xkLl0rKSUsXHMqKFtcZC5dKyklLFxzKihbXGQuXSspXCkvZy5leGVjKGEpO2EgPSBwYXJzZUludChkWzFdKSAvIDM2MDt2YXIgYiA9IHBhcnNlSW50KGRbMl0pIC8gMTAwLA0KICAgICAgICBmID0gcGFyc2VJbnQoZFszXSkgLyAxMDAsDQogICAgICAgIGQgPSBkWzRdIHx8IDE7aWYgKDAgPT0gYikgZiA9IGIgPSBhID0gZjtlbHNlIHsNCiAgICAgIHZhciBuID0gLjUgPiBmID8gZiAqICgxICsgYikgOiBmICsgYiAtIGYgKiBiLA0KICAgICAgICAgIGsgPSAyICogZiAtIG4sDQogICAgICAgICAgZiA9IGMoaywgbiwgYSArIDEgLyAzKSwNCiAgICAgICAgICBiID0gYyhrLCBuLCBhKTthID0gYyhrLCBuLCBhIC0gMSAvIDMpOw0KICAgIH1yZXR1cm4gInJnYmEoIiArIDI1NSAqIGYgKyAiLCIgKyAyNTUgKiBiICsgIiwiICsgMjU1ICogYSArICIsIiArIGQgKyAiKSI7DQogIH1mdW5jdGlvbiB5KGEpIHsNCiAgICBpZiAoYSA9IC8oW1wrXC1dP1swLTkjXC5dKykoJXxweHxwdHxlbXxyZW18aW58Y218bW18ZXh8Y2h8cGN8dnd8dmh8dm1pbnx2bWF4fGRlZ3xyYWR8dHVybik/JC8uZXhlYyhhKSkgcmV0dXJuIGFbMl07DQogIH1mdW5jdGlvbiBWKGEpIHsNCiAgICBpZiAoLTEgPCBhLmluZGV4T2YoInRyYW5zbGF0ZSIpIHx8ICJwZXJzcGVjdGl2ZSIgPT09IGEpIHJldHVybiAicHgiO2lmICgtMSA8IGEuaW5kZXhPZigicm90YXRlIikgfHwgLTEgPCBhLmluZGV4T2YoInNrZXciKSkgcmV0dXJuICJkZWciOw0KICB9ZnVuY3Rpb24gSShhLCBjKSB7DQogICAgcmV0dXJuIGguZm5jKGEpID8gYShjLnRhcmdldCwgYy5pZCwgYy50b3RhbCkgOiBhOw0KICB9ZnVuY3Rpb24gRShhLCBjKSB7DQogICAgaWYgKGMgaW4gYS5zdHlsZSkgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUoYSkuZ2V0UHJvcGVydHlWYWx1ZShjLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csICIkMS0kMiIpLnRvTG93ZXJDYXNlKCkpIHx8ICIwIjsNCiAgfWZ1bmN0aW9uIEooYSwgYykgew0KICAgIGlmIChoLmRvbShhKSAmJiB1KFcsIGMpKSByZXR1cm4gInRyYW5zZm9ybSI7aWYgKGguZG9tKGEpICYmIChhLmdldEF0dHJpYnV0ZShjKSB8fCBoLnN2ZyhhKSAmJiBhW2NdKSkgcmV0dXJuICJhdHRyaWJ1dGUiO2lmIChoLmRvbShhKSAmJiAidHJhbnNmb3JtIiAhPT0gYyAmJiBFKGEsIGMpKSByZXR1cm4gImNzcyI7aWYgKG51bGwgIT0gYVtjXSkgcmV0dXJuICJvYmplY3QiOw0KICB9ZnVuY3Rpb24gWChhLCBjKSB7DQogICAgdmFyIGQgPSBWKGMpLA0KICAgICAgICBkID0gLTEgPCBjLmluZGV4T2YoInNjYWxlIikgPyAxIDogMCArIGQ7YSA9IGEuc3R5bGUudHJhbnNmb3JtO2lmICghYSkgcmV0dXJuIGQ7Zm9yICh2YXIgYiA9IFtdLCBmID0gW10sIG4gPSBbXSwgayA9IC8oXHcrKVwoKC4rPylcKS9nOyBiID0gay5leGVjKGEpOykgew0KICAgICAgZi5wdXNoKGJbMV0pLCBuLnB1c2goYlsyXSk7DQogICAgfWEgPSByKG4sIGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICByZXR1cm4gZltiXSA9PT0gYzsNCiAgICB9KTtyZXR1cm4gYS5sZW5ndGggPyBhWzBdIDogZDsNCiAgfWZ1bmN0aW9uIEsoYSwgYykgew0KICAgIHN3aXRjaCAoSihhLCBjKSkge2Nhc2UgInRyYW5zZm9ybSI6DQogICAgICAgIHJldHVybiBYKGEsIGMpO2Nhc2UgImNzcyI6DQogICAgICAgIHJldHVybiBFKGEsIGMpO2Nhc2UgImF0dHJpYnV0ZSI6DQogICAgICAgIHJldHVybiBhLmdldEF0dHJpYnV0ZShjKTt9cmV0dXJuIGFbY10gfHwgMDsNCiAgfWZ1bmN0aW9uIEwoYSwgYykgew0KICAgIHZhciBkID0gL14oXCo9fFwrPXwtPSkvLmV4ZWMoYSk7aWYgKCFkKSByZXR1cm4gYTt2YXIgYiA9IHkoYSkgfHwgMDtjID0gcGFyc2VGbG9hdChjKTthID0gcGFyc2VGbG9hdChhLnJlcGxhY2UoZFswXSwgIiIpKTtzd2l0Y2ggKGRbMF1bMF0pIHtjYXNlICIrIjoNCiAgICAgICAgcmV0dXJuIGMgKyBhICsgYjtjYXNlICItIjoNCiAgICAgICAgcmV0dXJuIGMgLSBhICsgYjtjYXNlICIqIjoNCiAgICAgICAgcmV0dXJuIGMgKiBhICsgYjt9DQogIH1mdW5jdGlvbiBGKGEsIGMpIHsNCiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGMueCAtIGEueCwgMikgKyBNYXRoLnBvdyhjLnkgLSBhLnksIDIpKTsNCiAgfWZ1bmN0aW9uIE0oYSkgew0KICAgIGEgPSBhLnBvaW50cztmb3IgKHZhciBjID0gMCwgZCwgYiA9IDA7IGIgPCBhLm51bWJlck9mSXRlbXM7IGIrKykgew0KICAgICAgdmFyIGYgPSBhLmdldEl0ZW0oYik7MCA8IGIgJiYgKGMgKz0gRihkLCBmKSk7ZCA9IGY7DQogICAgfXJldHVybiBjOw0KICB9ZnVuY3Rpb24gTihhKSB7DQogICAgaWYgKGEuZ2V0VG90YWxMZW5ndGgpIHJldHVybiBhLmdldFRvdGFsTGVuZ3RoKCk7c3dpdGNoIChhLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkge2Nhc2UgImNpcmNsZSI6DQogICAgICAgIHJldHVybiAyICogTWF0aC5QSSAqIGEuZ2V0QXR0cmlidXRlKCJyIik7Y2FzZSAicmVjdCI6DQogICAgICAgIHJldHVybiAyICogYS5nZXRBdHRyaWJ1dGUoIndpZHRoIikgKyAyICogYS5nZXRBdHRyaWJ1dGUoImhlaWdodCIpO2Nhc2UgImxpbmUiOg0KICAgICAgICByZXR1cm4gRih7IHg6IGEuZ2V0QXR0cmlidXRlKCJ4MSIpLCB5OiBhLmdldEF0dHJpYnV0ZSgieTEiKSB9LCB7IHg6IGEuZ2V0QXR0cmlidXRlKCJ4MiIpLCB5OiBhLmdldEF0dHJpYnV0ZSgieTIiKSB9KTtjYXNlICJwb2x5bGluZSI6DQogICAgICAgIHJldHVybiBNKGEpO2Nhc2UgInBvbHlnb24iOg0KICAgICAgICB2YXIgYyA9IGEucG9pbnRzO3JldHVybiBNKGEpICsgRihjLmdldEl0ZW0oYy5udW1iZXJPZkl0ZW1zIC0gMSksIGMuZ2V0SXRlbSgwKSk7fQ0KICB9ZnVuY3Rpb24gWShhLCBjKSB7DQogICAgZnVuY3Rpb24gZChiKSB7DQogICAgICBiID0gdm9pZCAwID09PSBiID8gMCA6IGI7cmV0dXJuIGEuZWwuZ2V0UG9pbnRBdExlbmd0aCgxIDw9IGMgKyBiID8gYyArIGIgOiAwKTsNCiAgICB9dmFyIGIgPSBkKCksDQogICAgICAgIGYgPSBkKC0xKSwNCiAgICAgICAgbiA9IGQoMSk7c3dpdGNoIChhLnByb3BlcnR5KSB7Y2FzZSAieCI6DQogICAgICAgIHJldHVybiBiLng7Y2FzZSAieSI6DQogICAgICAgIHJldHVybiBiLnk7DQogICAgICBjYXNlICJhbmdsZSI6DQogICAgICAgIHJldHVybiAxODAgKiBNYXRoLmF0YW4yKG4ueSAtIGYueSwgbi54IC0gZi54KSAvIE1hdGguUEk7fQ0KICB9ZnVuY3Rpb24gTyhhLCBjKSB7DQogICAgdmFyIGQgPSAvLT9cZCpcLj9cZCsvZywNCiAgICAgICAgYjtiID0gaC5wdGgoYSkgPyBhLnRvdGFsTGVuZ3RoIDogYTtpZiAoaC5jb2woYikpIHsNCiAgICAgIGlmIChoLnJnYihiKSkgew0KICAgICAgICB2YXIgZiA9IC9yZ2JcKChcZCssXHMqW1xkXSssXHMqW1xkXSspXCkvZy5leGVjKGIpO2IgPSBmID8gInJnYmEoIiArIGZbMV0gKyAiLDEpIiA6IGI7DQogICAgICB9IGVsc2UgYiA9IGguaGV4KGIpID8gVChiKSA6IGguaHNsKGIpID8gVShiKSA6IHZvaWQgMDsNCiAgICB9IGVsc2UgZiA9IChmID0geShiKSkgPyBiLnN1YnN0cigwLCBiLmxlbmd0aCAtIGYubGVuZ3RoKSA6IGIsIGIgPSBjICYmICEvXHMvZy50ZXN0KGIpID8gZiArIGMgOiBmO2IgKz0gIiI7cmV0dXJuIHsgb3JpZ2luYWw6IGIsIG51bWJlcnM6IGIubWF0Y2goZCkgPyBiLm1hdGNoKGQpLm1hcChOdW1iZXIpIDogWzBdLCBzdHJpbmdzOiBoLnN0cihhKSB8fCBjID8gYi5zcGxpdChkKSA6IFtdIH07DQogIH1mdW5jdGlvbiBQKGEpIHsNCiAgICBhID0gYSA/IHAoaC5hcnIoYSkgPyBhLm1hcChtKSA6IG0oYSkpIDogW107cmV0dXJuIHIoYSwgZnVuY3Rpb24gKGEsIGQsIGIpIHsNCiAgICAgIHJldHVybiBiLmluZGV4T2YoYSkgPT09IGQ7DQogICAgfSk7DQogIH1mdW5jdGlvbiBaKGEpIHsNCiAgICB2YXIgYyA9IFAoYSk7cmV0dXJuIGMubWFwKGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICByZXR1cm4geyB0YXJnZXQ6IGEsIGlkOiBiLCB0b3RhbDogYy5sZW5ndGggfTsNCiAgICB9KTsNCiAgfWZ1bmN0aW9uIGFhKGEsIGMpIHsNCiAgICB2YXIgZCA9IEMoYyk7aWYgKGguYXJyKGEpKSB7DQogICAgICB2YXIgYiA9IGEubGVuZ3RoOzIgIT09IGIgfHwgaC5vYmooYVswXSkgPyBoLmZuYyhjLmR1cmF0aW9uKSB8fCAoZC5kdXJhdGlvbiA9IGMuZHVyYXRpb24gLyBiKSA6IGEgPSB7IHZhbHVlOiBhIH07DQogICAgfXJldHVybiBtKGEpLm1hcChmdW5jdGlvbiAoYSwgYikgew0KICAgICAgYiA9IGIgPyAwIDogYy5kZWxheTthID0gaC5vYmooYSkgJiYgIWgucHRoKGEpID8gYSA6IHsgdmFsdWU6IGEgfTtoLnVuZChhLmRlbGF5KSAmJiAoYS5kZWxheSA9IGIpO3JldHVybiBhOw0KICAgIH0pLm1hcChmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuIHooYSwgZCk7DQogICAgfSk7DQogIH1mdW5jdGlvbiBiYShhLCBjKSB7DQogICAgdmFyIGQgPSB7fSwNCiAgICAgICAgYjtmb3IgKGIgaW4gYSkgew0KICAgICAgdmFyIGYgPSBJKGFbYl0sIGMpO2guYXJyKGYpICYmIChmID0gZi5tYXAoZnVuY3Rpb24gKGEpIHsNCiAgICAgICAgcmV0dXJuIEkoYSwgYyk7DQogICAgICB9KSwgMSA9PT0gZi5sZW5ndGggJiYgKGYgPSBmWzBdKSk7ZFtiXSA9IGY7DQogICAgfWQuZHVyYXRpb24gPSBwYXJzZUZsb2F0KGQuZHVyYXRpb24pO2QuZGVsYXkgPSBwYXJzZUZsb2F0KGQuZGVsYXkpO3JldHVybiBkOw0KICB9ZnVuY3Rpb24gY2EoYSkgew0KICAgIHJldHVybiBoLmFycihhKSA/IEEuYXBwbHkodGhpcywgYSkgOiBRW2FdOw0KICB9ZnVuY3Rpb24gZGEoYSwgYykgew0KICAgIHZhciBkO3JldHVybiBhLnR3ZWVucy5tYXAoZnVuY3Rpb24gKGIpIHsNCiAgICAgIGIgPSBiYShiLCBjKTt2YXIgZiA9IGIudmFsdWUsDQogICAgICAgICAgZSA9IEsoYy50YXJnZXQsIGEubmFtZSksDQogICAgICAgICAgayA9IGQgPyBkLnRvLm9yaWdpbmFsIDogZSwNCiAgICAgICAgICBrID0gaC5hcnIoZikgPyBmWzBdIDogaywNCiAgICAgICAgICB3ID0gTChoLmFycihmKSA/IGZbMV0gOiBmLCBrKSwNCiAgICAgICAgICBlID0geSh3KSB8fCB5KGspIHx8IHkoZSk7Yi5mcm9tID0gTyhrLCBlKTtiLnRvID0gTyh3LCBlKTtiLnN0YXJ0ID0gZCA/IGQuZW5kIDogYS5vZmZzZXQ7Yi5lbmQgPSBiLnN0YXJ0ICsgYi5kZWxheSArIGIuZHVyYXRpb247Yi5lYXNpbmcgPSBjYShiLmVhc2luZyk7Yi5lbGFzdGljaXR5ID0gKDFFMyAtIE1hdGgubWluKE1hdGgubWF4KGIuZWxhc3RpY2l0eSwgMSksIDk5OSkpIC8gMUUzO2IuaXNQYXRoID0gaC5wdGgoZik7Yi5pc0NvbG9yID0gaC5jb2woYi5mcm9tLm9yaWdpbmFsKTtiLmlzQ29sb3IgJiYgKGIucm91bmQgPSAxKTtyZXR1cm4gZCA9IGI7DQogICAgfSk7DQogIH1mdW5jdGlvbiBlYShhLCBjKSB7DQogICAgcmV0dXJuIHIocChhLm1hcChmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuIGMubWFwKGZ1bmN0aW9uIChiKSB7DQogICAgICAgIHZhciBjID0gSihhLnRhcmdldCwgYi5uYW1lKTtpZiAoYykgew0KICAgICAgICAgIHZhciBkID0gZGEoYiwgYSk7YiA9IHsgdHlwZTogYywgcHJvcGVydHk6IGIubmFtZSwgYW5pbWF0YWJsZTogYSwgdHdlZW5zOiBkLCBkdXJhdGlvbjogZFtkLmxlbmd0aCAtIDFdLmVuZCwgZGVsYXk6IGRbMF0uZGVsYXkgfTsNCiAgICAgICAgfSBlbHNlIGIgPSB2b2lkIDA7cmV0dXJuIGI7DQogICAgICB9KTsNCiAgICB9KSksIGZ1bmN0aW9uIChhKSB7DQogICAgICByZXR1cm4gIWgudW5kKGEpOw0KICAgIH0pOw0KICB9ZnVuY3Rpb24gUihhLCBjLCBkLCBiKSB7DQogICAgdmFyIGYgPSAiZGVsYXkiID09PSBhO3JldHVybiBjLmxlbmd0aCA/IChmID8gTWF0aC5taW4gOiBNYXRoLm1heCkuYXBwbHkoTWF0aCwgYy5tYXAoZnVuY3Rpb24gKGIpIHsNCiAgICAgIHJldHVybiBiW2FdOw0KICAgIH0pKSA6IGYgPyBiLmRlbGF5IDogZC5vZmZzZXQgKyBiLmRlbGF5ICsgYi5kdXJhdGlvbjsNCiAgfWZ1bmN0aW9uIGZhKGEpIHsNCiAgICB2YXIgYyA9IEQoZ2EsIGEpLA0KICAgICAgICBkID0gRChTLCBhKSwNCiAgICAgICAgYiA9IFooYS50YXJnZXRzKSwNCiAgICAgICAgZiA9IFtdLA0KICAgICAgICBlID0geihjLCBkKSwNCiAgICAgICAgaztmb3IgKGsgaW4gYSkgew0KICAgICAgZS5oYXNPd25Qcm9wZXJ0eShrKSB8fCAidGFyZ2V0cyIgPT09IGsgfHwgZi5wdXNoKHsgbmFtZTogaywgb2Zmc2V0OiBlLm9mZnNldCwgdHdlZW5zOiBhYShhW2tdLCBkKSB9KTsNCiAgICB9YSA9IGVhKGIsIGYpO3JldHVybiB6KGMsIHsgY2hpbGRyZW46IFtdLCBhbmltYXRhYmxlczogYiwgYW5pbWF0aW9uczogYSwgZHVyYXRpb246IFIoImR1cmF0aW9uIiwgYSwgYywgZCksIGRlbGF5OiBSKCJkZWxheSIsIGEsIGMsIGQpIH0pOw0KICB9ZnVuY3Rpb24gcShhKSB7DQogICAgZnVuY3Rpb24gYygpIHsNCiAgICAgIHJldHVybiB3aW5kb3cuUHJvbWlzZSAmJiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSkgew0KICAgICAgICByZXR1cm4gcCA9IGE7DQogICAgICB9KTsNCiAgICB9ZnVuY3Rpb24gZChhKSB7DQogICAgICByZXR1cm4gZy5yZXZlcnNlZCA/IGcuZHVyYXRpb24gLSBhIDogYTsNCiAgICB9ZnVuY3Rpb24gYihhKSB7DQogICAgICBmb3IgKHZhciBiID0gMCwgYyA9IHt9LCBkID0gZy5hbmltYXRpb25zLCBmID0gZC5sZW5ndGg7IGIgPCBmOykgew0KICAgICAgICB2YXIgZSA9IGRbYl0sDQogICAgICAgICAgICBrID0gZS5hbmltYXRhYmxlLA0KICAgICAgICAgICAgaCA9IGUudHdlZW5zLA0KICAgICAgICAgICAgbiA9IGgubGVuZ3RoIC0gMSwNCiAgICAgICAgICAgIGwgPSBoW25dO24gJiYgKGwgPSByKGgsIGZ1bmN0aW9uIChiKSB7DQogICAgICAgICAgcmV0dXJuIGEgPCBiLmVuZDsNCiAgICAgICAgfSlbMF0gfHwgbCk7Zm9yICh2YXIgaCA9IE1hdGgubWluKE1hdGgubWF4KGEgLSBsLnN0YXJ0IC0gbC5kZWxheSwgMCksIGwuZHVyYXRpb24pIC8gbC5kdXJhdGlvbiwgdyA9IGlzTmFOKGgpID8gMSA6IGwuZWFzaW5nKGgsIGwuZWxhc3RpY2l0eSksIGggPSBsLnRvLnN0cmluZ3MsIHAgPSBsLnJvdW5kLCBuID0gW10sIG0gPSB2b2lkIDAsIG0gPSBsLnRvLm51bWJlcnMubGVuZ3RoLCB0ID0gMDsgdCA8IG07IHQrKykgew0KICAgICAgICAgIHZhciB4ID0gdm9pZCAwLA0KICAgICAgICAgICAgICB4ID0gbC50by5udW1iZXJzW3RdLA0KICAgICAgICAgICAgICBxID0gbC5mcm9tLm51bWJlcnNbdF0sDQogICAgICAgICAgICAgIHggPSBsLmlzUGF0aCA/IFkobC52YWx1ZSwgdyAqIHgpIDogcSArIHcgKiAoeCAtIHEpO3AgJiYgKGwuaXNDb2xvciAmJiAyIDwgdCB8fCAoeCA9IE1hdGgucm91bmQoeCAqIHApIC8gcCkpO24ucHVzaCh4KTsNCiAgICAgICAgfWlmIChsID0gaC5sZW5ndGgpIGZvciAobSA9IGhbMF0sIHcgPSAwOyB3IDwgbDsgdysrKSB7DQogICAgICAgICAgcCA9IGhbdyArIDFdLCB0ID0gblt3XSwgaXNOYU4odCkgfHwgKG0gPSBwID8gbSArICh0ICsgcCkgOiBtICsgKHQgKyAiICIpKTsNCiAgICAgICAgfSBlbHNlIG0gPSBuWzBdO2hhW2UudHlwZV0oay50YXJnZXQsIGUucHJvcGVydHksIG0sIGMsIGsuaWQpO2UuY3VycmVudFZhbHVlID0gbTtiKys7DQogICAgICB9aWYgKGIgPSBPYmplY3Qua2V5cyhjKS5sZW5ndGgpIGZvciAoZCA9IDA7IGQgPCBiOyBkKyspIHsNCiAgICAgICAgSCB8fCAoSCA9IEUoZG9jdW1lbnQuYm9keSwgInRyYW5zZm9ybSIpID8gInRyYW5zZm9ybSIgOiAiLXdlYmtpdC10cmFuc2Zvcm0iKSwgZy5hbmltYXRhYmxlc1tkXS50YXJnZXQuc3R5bGVbSF0gPSBjW2RdLmpvaW4oIiAiKTsNCiAgICAgIH1nLmN1cnJlbnRUaW1lID0gYTtnLnByb2dyZXNzID0gYSAvIGcuZHVyYXRpb24gKiAxMDA7DQogICAgfWZ1bmN0aW9uIGYoYSkgew0KICAgICAgaWYgKGdbYV0pIGdbYV0oZyk7DQogICAgfWZ1bmN0aW9uIGUoKSB7DQogICAgICBnLnJlbWFpbmluZyAmJiAhMCAhPT0gZy5yZW1haW5pbmcgJiYgZy5yZW1haW5pbmctLTsNCiAgICB9ZnVuY3Rpb24gayhhKSB7DQogICAgICB2YXIgayA9IGcuZHVyYXRpb24sDQogICAgICAgICAgbiA9IGcub2Zmc2V0LA0KICAgICAgICAgIHcgPSBuICsgZy5kZWxheSwNCiAgICAgICAgICByID0gZy5jdXJyZW50VGltZSwNCiAgICAgICAgICB4ID0gZy5yZXZlcnNlZCwNCiAgICAgICAgICBxID0gZChhKTtpZiAoZy5jaGlsZHJlbi5sZW5ndGgpIHsNCiAgICAgICAgdmFyIHUgPSBnLmNoaWxkcmVuLA0KICAgICAgICAgICAgdiA9IHUubGVuZ3RoOw0KICAgICAgICBpZiAocSA+PSBnLmN1cnJlbnRUaW1lKSBmb3IgKHZhciBHID0gMDsgRyA8IHY7IEcrKykgew0KICAgICAgICAgIHVbR10uc2VlayhxKTsNCiAgICAgICAgfSBlbHNlIGZvciAoOyB2LS07KSB7DQogICAgICAgICAgdVt2XS5zZWVrKHEpOw0KICAgICAgICB9DQogICAgICB9aWYgKHEgPj0gdyB8fCAhaykgZy5iZWdhbiB8fCAoZy5iZWdhbiA9ICEwLCBmKCJiZWdpbiIpKSwgZigicnVuIik7aWYgKHEgPiBuICYmIHEgPCBrKSBiKHEpO2Vsc2UgaWYgKHEgPD0gbiAmJiAwICE9PSByICYmIChiKDApLCB4ICYmIGUoKSksIHEgPj0gayAmJiByICE9PSBrIHx8ICFrKSBiKGspLCB4IHx8IGUoKTtmKCJ1cGRhdGUiKTthID49IGsgJiYgKGcucmVtYWluaW5nID8gKHQgPSBoLCAiYWx0ZXJuYXRlIiA9PT0gZy5kaXJlY3Rpb24gJiYgKGcucmV2ZXJzZWQgPSAhZy5yZXZlcnNlZCkpIDogKGcucGF1c2UoKSwgZy5jb21wbGV0ZWQgfHwgKGcuY29tcGxldGVkID0gITAsIGYoImNvbXBsZXRlIiksICJQcm9taXNlIiBpbiB3aW5kb3cgJiYgKHAoKSwgbSA9IGMoKSkpKSwgbCA9IDApOw0KICAgIH1hID0gdm9pZCAwID09PSBhID8ge30gOiBhO3ZhciBoLA0KICAgICAgICB0LA0KICAgICAgICBsID0gMCwNCiAgICAgICAgcCA9IG51bGwsDQogICAgICAgIG0gPSBjKCksDQogICAgICAgIGcgPSBmYShhKTtnLnJlc2V0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGEgPSBnLmRpcmVjdGlvbiwNCiAgICAgICAgICBjID0gZy5sb29wO2cuY3VycmVudFRpbWUgPSAwO2cucHJvZ3Jlc3MgPSAwO2cucGF1c2VkID0gITA7Zy5iZWdhbiA9ICExO2cuY29tcGxldGVkID0gITE7Zy5yZXZlcnNlZCA9ICJyZXZlcnNlIiA9PT0gYTtnLnJlbWFpbmluZyA9ICJhbHRlcm5hdGUiID09PSBhICYmIDEgPT09IGMgPyAyIDogYztiKDApO2ZvciAoYSA9IGcuY2hpbGRyZW4ubGVuZ3RoOyBhLS07KSB7DQogICAgICAgIGcuY2hpbGRyZW5bYV0ucmVzZXQoKTsNCiAgICAgIH0NCiAgICB9O2cudGljayA9IGZ1bmN0aW9uIChhKSB7DQogICAgICBoID0gYTt0IHx8ICh0ID0gaCk7aygobCArIGggLSB0KSAqIHEuc3BlZWQpOw0KICAgIH07Zy5zZWVrID0gZnVuY3Rpb24gKGEpIHsNCiAgICAgIGsoZChhKSk7DQogICAgfTtnLnBhdXNlID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGEgPSB2LmluZGV4T2YoZyk7LTEgPCBhICYmIHYuc3BsaWNlKGEsIDEpO2cucGF1c2VkID0gITA7DQogICAgfTtnLnBsYXkgPSBmdW5jdGlvbiAoKSB7DQogICAgICBnLnBhdXNlZCAmJiAoZy5wYXVzZWQgPSAhMSwgdCA9IDAsIGwgPSBkKGcuY3VycmVudFRpbWUpLCB2LnB1c2goZyksIEIgfHwgaWEoKSk7DQogICAgfTtnLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICBnLnJldmVyc2VkID0gIWcucmV2ZXJzZWQ7dCA9IDA7bCA9IGQoZy5jdXJyZW50VGltZSk7DQogICAgfTtnLnJlc3RhcnQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBnLnBhdXNlKCk7DQogICAgICBnLnJlc2V0KCk7Zy5wbGF5KCk7DQogICAgfTtnLmZpbmlzaGVkID0gbTtnLnJlc2V0KCk7Zy5hdXRvcGxheSAmJiBnLnBsYXkoKTtyZXR1cm4gZzsNCiAgfXZhciBnYSA9IHsgdXBkYXRlOiB2b2lkIDAsIGJlZ2luOiB2b2lkIDAsIHJ1bjogdm9pZCAwLCBjb21wbGV0ZTogdm9pZCAwLCBsb29wOiAxLCBkaXJlY3Rpb246ICJub3JtYWwiLCBhdXRvcGxheTogITAsIG9mZnNldDogMCB9LA0KICAgICAgUyA9IHsgZHVyYXRpb246IDFFMywgZGVsYXk6IDAsIGVhc2luZzogImVhc2VPdXRFbGFzdGljIiwgZWxhc3RpY2l0eTogNTAwLCByb3VuZDogMCB9LA0KICAgICAgVyA9ICJ0cmFuc2xhdGVYIHRyYW5zbGF0ZVkgdHJhbnNsYXRlWiByb3RhdGUgcm90YXRlWCByb3RhdGVZIHJvdGF0ZVogc2NhbGUgc2NhbGVYIHNjYWxlWSBzY2FsZVogc2tld1ggc2tld1kgcGVyc3BlY3RpdmUiLnNwbGl0KCIgIiksDQogICAgICBILA0KICAgICAgaCA9IHsgYXJyOiBmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYSk7DQogICAgfSwgb2JqOiBmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuIC0xIDwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpLmluZGV4T2YoIk9iamVjdCIpOw0KICAgIH0sDQogICAgcHRoOiBmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuIGgub2JqKGEpICYmIGEuaGFzT3duUHJvcGVydHkoInRvdGFsTGVuZ3RoIik7DQogICAgfSwgc3ZnOiBmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuIGEgaW5zdGFuY2VvZiBTVkdFbGVtZW50Ow0KICAgIH0sIGRvbTogZnVuY3Rpb24gKGEpIHsNCiAgICAgIHJldHVybiBhLm5vZGVUeXBlIHx8IGguc3ZnKGEpOw0KICAgIH0sIHN0cjogZnVuY3Rpb24gKGEpIHsNCiAgICAgIHJldHVybiAic3RyaW5nIiA9PT0gdHlwZW9mIGE7DQogICAgfSwgZm5jOiBmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT09IHR5cGVvZiBhOw0KICAgIH0sIHVuZDogZnVuY3Rpb24gKGEpIHsNCiAgICAgIHJldHVybiAidW5kZWZpbmVkIiA9PT0gdHlwZW9mIGE7DQogICAgfSwgaGV4OiBmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuICgvKF4jWzAtOUEtRl17Nn0kKXwoXiNbMC05QS1GXXszfSQpL2kudGVzdChhKQ0KICAgICAgKTsNCiAgICB9LCByZ2I6IGZ1bmN0aW9uIChhKSB7DQogICAgICByZXR1cm4gKC9ecmdiLy50ZXN0KGEpDQogICAgICApOw0KICAgIH0sIGhzbDogZnVuY3Rpb24gKGEpIHsNCiAgICAgIHJldHVybiAoL15oc2wvLnRlc3QoYSkNCiAgICAgICk7DQogICAgfSwgY29sOiBmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuIGguaGV4KGEpIHx8IGgucmdiKGEpIHx8IGguaHNsKGEpOw0KICAgIH0gfSwNCiAgICAgIEEgPSBmdW5jdGlvbiAoKSB7DQogICAgZnVuY3Rpb24gYShhLCBkLCBiKSB7DQogICAgICByZXR1cm4gKCgoMSAtIDMgKiBiICsgMyAqIGQpICogYSArICgzICogYiAtIDYgKiBkKSkgKiBhICsgMyAqIGQpICogYTsNCiAgICB9cmV0dXJuIGZ1bmN0aW9uIChjLCBkLCBiLCBmKSB7DQogICAgICBpZiAoMCA8PSBjICYmIDEgPj0gYyAmJiAwIDw9IGIgJiYgMSA+PSBiKSB7DQogICAgICAgIHZhciBlID0gbmV3IEZsb2F0MzJBcnJheSgxMSk7aWYgKGMgIT09IGQgfHwgYiAhPT0gZikgZm9yICh2YXIgayA9IDA7IDExID4gazsgKytrKSB7DQogICAgICAgICAgZVtrXSA9IGEoLjEgKiBrLCBjLCBiKTsNCiAgICAgICAgfXJldHVybiBmdW5jdGlvbiAoaykgew0KICAgICAgICAgIGlmIChjID09PSBkICYmIGIgPT09IGYpIHJldHVybiBrO2lmICgwID09PSBrKSByZXR1cm4gMDtpZiAoMSA9PT0gaykgcmV0dXJuIDE7Zm9yICh2YXIgaCA9IDAsIGwgPSAxOyAxMCAhPT0gbCAmJiBlW2xdIDw9IGs7ICsrbCkgew0KICAgICAgICAgICAgaCArPSAuMTsNCiAgICAgICAgICB9LS1sO3ZhciBsID0gaCArIChrIC0gZVtsXSkgLyAoZVtsICsgMV0gLSBlW2xdKSAqIC4xLA0KICAgICAgICAgICAgICBuID0gMyAqICgxIC0gMyAqIGIgKyAzICogYykgKiBsICogbCArIDIgKiAoMyAqIGIgLSA2ICogYykgKiBsICsgMyAqIGM7aWYgKC4wMDEgPD0gbikgew0KICAgICAgICAgICAgZm9yIChoID0gMDsgNCA+IGg7ICsraCkgew0KICAgICAgICAgICAgICBuID0gMyAqICgxIC0gMyAqIGIgKyAzICogYykgKiBsICogbCArIDIgKiAoMyAqIGIgLSA2ICogYykgKiBsICsgMyAqIGM7aWYgKDAgPT09IG4pIGJyZWFrO3ZhciBtID0gYShsLCBjLCBiKSAtIGssDQogICAgICAgICAgICAgICAgICBsID0gbCAtIG0gLyBuOw0KICAgICAgICAgICAgfWsgPSBsOw0KICAgICAgICAgIH0gZWxzZSBpZiAoMCA9PT0gbikgayA9IGw7ZWxzZSB7DQogICAgICAgICAgICB2YXIgbCA9IGgsDQogICAgICAgICAgICAgICAgaCA9IGggKyAuMSwNCiAgICAgICAgICAgICAgICBnID0gMDtkbyB7DQogICAgICAgICAgICAgIG0gPSBsICsgKGggLSBsKSAvIDIsIG4gPSBhKG0sIGMsIGIpIC0gaywgMCA8IG4gPyBoID0gbSA6IGwgPSBtOw0KICAgICAgICAgICAgfSB3aGlsZSAoMWUtNyA8IE1hdGguYWJzKG4pICYmIDEwID4gKytnKTtrID0gbTsNCiAgICAgICAgICB9cmV0dXJuIGEoaywgZCwgZik7DQogICAgICAgIH07DQogICAgICB9DQogICAgfTsNCiAgfSgpLA0KICAgICAgUSA9IGZ1bmN0aW9uICgpIHsNCiAgICBmdW5jdGlvbiBhKGEsIGIpIHsNCiAgICAgIHJldHVybiAwID09PSBhIHx8IDEgPT09IGEgPyBhIDogLU1hdGgucG93KDIsIDEwICogKGEgLSAxKSkgKiBNYXRoLnNpbigyICogKGEgLSAxIC0gYiAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4oMSkpICogTWF0aC5QSSAvIGIpOw0KICAgIH12YXIgYyA9ICJRdWFkIEN1YmljIFF1YXJ0IFF1aW50IFNpbmUgRXhwbyBDaXJjIEJhY2sgRWxhc3RpYyIuc3BsaXQoIiAiKSwNCiAgICAgICAgZCA9IHsgSW46IFtbLjU1LCAuMDg1LCAuNjgsIC41M10sIFsuNTUsIC4wNTUsIC42NzUsIC4xOV0sIFsuODk1LCAuMDMsIC42ODUsIC4yMl0sIFsuNzU1LCAuMDUsIC44NTUsIC4wNl0sIFsuNDcsIDAsIC43NDUsIC43MTVdLCBbLjk1LCAuMDUsIC43OTUsIC4wMzVdLCBbLjYsIC4wNCwgLjk4LCAuMzM1XSwgWy42LCAtLjI4LCAuNzM1LCAuMDQ1XSwgYV0sIE91dDogW1suMjUsIC40NiwgLjQ1LCAuOTRdLCBbLjIxNSwgLjYxLCAuMzU1LCAxXSwgWy4xNjUsIC44NCwgLjQ0LCAxXSwgWy4yMywgMSwgLjMyLCAxXSwgWy4zOSwgLjU3NSwgLjU2NSwgMV0sIFsuMTksIDEsIC4yMiwgMV0sIFsuMDc1LCAuODIsIC4xNjUsIDFdLCBbLjE3NSwgLjg4NSwgLjMyLCAxLjI3NV0sIGZ1bmN0aW9uIChiLCBjKSB7DQogICAgICAgIHJldHVybiAxIC0gYSgxIC0gYiwgYyk7DQogICAgICB9XSwgSW5PdXQ6IFtbLjQ1NSwgLjAzLCAuNTE1LCAuOTU1XSwgWy42NDUsIC4wNDUsIC4zNTUsIDFdLCBbLjc3LCAwLCAuMTc1LCAxXSwgWy44NiwgMCwgLjA3LCAxXSwgWy40NDUsIC4wNSwgLjU1LCAuOTVdLCBbMSwgMCwgMCwgMV0sIFsuNzg1LCAuMTM1LCAuMTUsIC44Nl0sIFsuNjgsIC0uNTUsIC4yNjUsIDEuNTVdLCBmdW5jdGlvbiAoYiwgYykgew0KICAgICAgICByZXR1cm4gLjUgPiBiID8gYSgyICogYiwgYykgLyAyIDogMSAtIGEoLTIgKiBiICsgMiwgYykgLyAyOw0KICAgICAgfV0gfSwNCiAgICAgICAgYiA9IHsgbGluZWFyOiBBKC4yNSwgLjI1LCAuNzUsIC43NSkgfSwNCiAgICAgICAgZiA9IHt9LA0KICAgICAgICBlO2ZvciAoZSBpbiBkKSB7DQogICAgICBmLnR5cGUgPSBlLCBkW2YudHlwZV0uZm9yRWFjaChmdW5jdGlvbiAoYSkgew0KICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGYpIHsNCiAgICAgICAgICBiWyJlYXNlIiArIGEudHlwZSArIGNbZl1dID0gaC5mbmMoZCkgPyBkIDogQS5hcHBseSgkanNjb21wJHRoaXMsIGQpOw0KICAgICAgICB9Ow0KICAgICAgfShmKSksIGYgPSB7IHR5cGU6IGYudHlwZSB9Ow0KICAgIH1yZXR1cm4gYjsNCiAgfSgpLA0KICAgICAgaGEgPSB7IGNzczogZnVuY3Rpb24gKGEsIGMsIGQpIHsNCiAgICAgIHJldHVybiBhLnN0eWxlW2NdID0gZDsNCiAgICB9LCBhdHRyaWJ1dGU6IGZ1bmN0aW9uIChhLCBjLCBkKSB7DQogICAgICByZXR1cm4gYS5zZXRBdHRyaWJ1dGUoYywgZCk7DQogICAgfSwgb2JqZWN0OiBmdW5jdGlvbiAoYSwgYywgZCkgew0KICAgICAgcmV0dXJuIGFbY10gPSBkOw0KICAgIH0sIHRyYW5zZm9ybTogZnVuY3Rpb24gKGEsIGMsIGQsIGIsIGYpIHsNCiAgICAgIGJbZl0gfHwgKGJbZl0gPSBbXSk7YltmXS5wdXNoKGMgKyAiKCIgKyBkICsgIikiKTsNCiAgICB9IH0sDQogICAgICB2ID0gW10sDQogICAgICBCID0gMCwNCiAgICAgIGlhID0gZnVuY3Rpb24gKCkgew0KICAgIGZ1bmN0aW9uIGEoKSB7DQogICAgICBCID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGMpOw0KICAgIH1mdW5jdGlvbiBjKGMpIHsNCiAgICAgIHZhciBiID0gdi5sZW5ndGg7aWYgKGIpIHsNCiAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBiOykgew0KICAgICAgICAgIHZbZF0gJiYgdltkXS50aWNrKGMpLCBkKys7DQogICAgICAgIH1hKCk7DQogICAgICB9IGVsc2UgY2FuY2VsQW5pbWF0aW9uRnJhbWUoQiksIEIgPSAwOw0KICAgIH1yZXR1cm4gYTsNCiAgfSgpO3EudmVyc2lvbiA9ICIyLjIuMCI7cS5zcGVlZCA9IDE7cS5ydW5uaW5nID0gdjtxLnJlbW92ZSA9IGZ1bmN0aW9uIChhKSB7DQogICAgYSA9IFAoYSk7Zm9yICh2YXIgYyA9IHYubGVuZ3RoOyBjLS07KSB7DQogICAgICBmb3IgKHZhciBkID0gdltjXSwgYiA9IGQuYW5pbWF0aW9ucywgZiA9IGIubGVuZ3RoOyBmLS07KSB7DQogICAgICAgIHUoYSwgYltmXS5hbmltYXRhYmxlLnRhcmdldCkgJiYgKGIuc3BsaWNlKGYsIDEpLCBiLmxlbmd0aCB8fCBkLnBhdXNlKCkpOw0KICAgICAgfQ0KICAgIH0NCiAgfTtxLmdldFZhbHVlID0gSztxLnBhdGggPSBmdW5jdGlvbiAoYSwgYykgew0KICAgIHZhciBkID0gaC5zdHIoYSkgPyBlKGEpWzBdIDogYSwNCiAgICAgICAgYiA9IGMgfHwgMTAwO3JldHVybiBmdW5jdGlvbiAoYSkgew0KICAgICAgcmV0dXJuIHsgZWw6IGQsIHByb3BlcnR5OiBhLCB0b3RhbExlbmd0aDogTihkKSAqIChiIC8gMTAwKSB9Ow0KICAgIH07DQogIH07cS5zZXREYXNob2Zmc2V0ID0gZnVuY3Rpb24gKGEpIHsNCiAgICB2YXIgYyA9IE4oYSk7YS5zZXRBdHRyaWJ1dGUoInN0cm9rZS1kYXNoYXJyYXkiLCBjKTtyZXR1cm4gYzsNCiAgfTtxLmJlemllciA9IEE7cS5lYXNpbmdzID0gUTtxLnRpbWVsaW5lID0gZnVuY3Rpb24gKGEpIHsNCiAgICB2YXIgYyA9IHEoYSk7Yy5wYXVzZSgpO2MuZHVyYXRpb24gPSAwO2MuYWRkID0gZnVuY3Rpb24gKGQpIHsNCiAgICAgIGMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYSkgew0KICAgICAgICBhLmJlZ2FuID0gITA7YS5jb21wbGV0ZWQgPSAhMDsNCiAgICAgIH0pO20oZCkuZm9yRWFjaChmdW5jdGlvbiAoYikgew0KICAgICAgICB2YXIgZCA9IHooYiwgRChTLCBhIHx8IHt9KSk7ZC50YXJnZXRzID0gZC50YXJnZXRzIHx8IGEudGFyZ2V0cztiID0gYy5kdXJhdGlvbjt2YXIgZSA9IGQub2Zmc2V0O2QuYXV0b3BsYXkgPSAhMTtkLmRpcmVjdGlvbiA9IGMuZGlyZWN0aW9uO2Qub2Zmc2V0ID0gaC51bmQoZSkgPyBiIDogTChlLCBiKTtjLmJlZ2FuID0gITA7Yy5jb21wbGV0ZWQgPSAhMDtjLnNlZWsoZC5vZmZzZXQpO2QgPSBxKGQpO2QuYmVnYW4gPSAhMDtkLmNvbXBsZXRlZCA9ICEwO2QuZHVyYXRpb24gPiBiICYmIChjLmR1cmF0aW9uID0gZC5kdXJhdGlvbik7Yy5jaGlsZHJlbi5wdXNoKGQpOw0KICAgICAgfSk7Yy5zZWVrKDApO2MucmVzZXQoKTtjLmF1dG9wbGF5ICYmIGMucmVzdGFydCgpO3JldHVybiBjOw0KICAgIH07cmV0dXJuIGM7DQogIH07cS5yYW5kb20gPSBmdW5jdGlvbiAoYSwgYykgew0KICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoYyAtIGEgKyAxKSkgKyBhOw0KICB9O3JldHVybiBxOw0KfSk7DQo7KGZ1bmN0aW9uICgkLCBhbmltKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICB2YXIgX2RlZmF1bHRzID0gew0KICAgIGFjY29yZGlvbjogdHJ1ZSwNCiAgICBvbk9wZW5TdGFydDogdW5kZWZpbmVkLA0KICAgIG9uT3BlbkVuZDogdW5kZWZpbmVkLA0KICAgIG9uQ2xvc2VTdGFydDogdW5kZWZpbmVkLA0KICAgIG9uQ2xvc2VFbmQ6IHVuZGVmaW5lZCwNCiAgICBpbkR1cmF0aW9uOiAzMDAsDQogICAgb3V0RHVyYXRpb246IDMwMA0KICB9Ow0KDQogIC8qKg0KICAgKiBAY2xhc3MNCiAgICoNCiAgICovDQoNCiAgdmFyIENvbGxhcHNpYmxlID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHsNCiAgICBfaW5oZXJpdHMoQ29sbGFwc2libGUsIF9Db21wb25lbnQpOw0KDQogICAgLyoqDQogICAgICogQ29uc3RydWN0IENvbGxhcHNpYmxlIGluc3RhbmNlDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtIHtFbGVtZW50fSBlbA0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zDQogICAgICovDQogICAgZnVuY3Rpb24gQ29sbGFwc2libGUoZWwsIG9wdGlvbnMpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xsYXBzaWJsZSk7DQoNCiAgICAgIHZhciBfdGhpczMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ29sbGFwc2libGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb2xsYXBzaWJsZSkpLmNhbGwodGhpcywgQ29sbGFwc2libGUsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzMy5lbC5NX0NvbGxhcHNpYmxlID0gX3RoaXMzOw0KDQogICAgICAvKioNCiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBjb2xsYXBzaWJsZQ0KICAgICAgICogQG1lbWJlciBDb2xsYXBzaWJsZSNvcHRpb25zDQogICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2FjY29yZGlvbj1mYWxzZV0gLSBUeXBlIG9mIHRoZSBjb2xsYXBzaWJsZQ0KICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5TdGFydCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBiZWZvcmUgY29sbGFwc2libGUgaXMgb3BlbmVkDQogICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlbkVuZCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciBjb2xsYXBzaWJsZSBpcyBvcGVuZWQNCiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZVN0YXJ0IC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGJlZm9yZSBjb2xsYXBzaWJsZSBpcyBjbG9zZWQNCiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZUVuZCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciBjb2xsYXBzaWJsZSBpcyBjbG9zZWQNCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IGluRHVyYXRpb24gLSBUcmFuc2l0aW9uIGluIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy4NCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IG91dER1cmF0aW9uIC0gVHJhbnNpdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuDQogICAgICAgKi8NCiAgICAgIF90aGlzMy5vcHRpb25zID0gJC5leHRlbmQoe30sIENvbGxhcHNpYmxlLmRlZmF1bHRzLCBvcHRpb25zKTsNCg0KICAgICAgLy8gU2V0dXAgdGFiIGluZGljZXMNCiAgICAgIF90aGlzMy4kaGVhZGVycyA9IF90aGlzMy4kZWwuY2hpbGRyZW4oJ2xpJykuY2hpbGRyZW4oJy5jb2xsYXBzaWJsZS1oZWFkZXInKTsNCiAgICAgIF90aGlzMy4kaGVhZGVycy5hdHRyKCd0YWJpbmRleCcsIDApOw0KDQogICAgICBfdGhpczMuX3NldHVwRXZlbnRIYW5kbGVycygpOw0KDQogICAgICAvLyBPcGVuIGZpcnN0IGFjdGl2ZQ0KICAgICAgdmFyICRhY3RpdmVCb2RpZXMgPSBfdGhpczMuJGVsLmNoaWxkcmVuKCdsaS5hY3RpdmUnKS5jaGlsZHJlbignLmNvbGxhcHNpYmxlLWJvZHknKTsNCiAgICAgIGlmIChfdGhpczMub3B0aW9ucy5hY2NvcmRpb24pIHsNCiAgICAgICAgLy8gSGFuZGxlIEFjY29yZGlvbg0KICAgICAgICAkYWN0aXZlQm9kaWVzLmZpcnN0KCkuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvLyBIYW5kbGUgRXhwYW5kYWJsZXMNCiAgICAgICAgJGFjdGl2ZUJvZGllcy5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBfdGhpczM7DQogICAgfQ0KDQogICAgX2NyZWF0ZUNsYXNzKENvbGxhcHNpYmxlLCBbew0KICAgICAga2V5OiAiZGVzdHJveSIsDQoNCg0KICAgICAgLyoqDQogICAgICAgKiBUZWFyZG93biBjb21wb25lbnQNCiAgICAgICAqLw0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7DQogICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTsNCiAgICAgICAgdGhpcy5lbC5NX0NvbGxhcHNpYmxlID0gdW5kZWZpbmVkOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cEV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIHZhciBfdGhpczQgPSB0aGlzOw0KDQogICAgICAgIHRoaXMuX2hhbmRsZUNvbGxhcHNpYmxlQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUNvbGxhcHNpYmxlQ2xpY2suYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlQ29sbGFwc2libGVLZXlkb3duQm91bmQgPSB0aGlzLl9oYW5kbGVDb2xsYXBzaWJsZUtleWRvd24uYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNvbGxhcHNpYmxlQ2xpY2tCb3VuZCk7DQogICAgICAgIHRoaXMuJGhlYWRlcnMuZWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7DQogICAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBfdGhpczQuX2hhbmRsZUNvbGxhcHNpYmxlS2V5ZG93bkJvdW5kKTsNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNvbGxhcHNpYmxlQ2xpY2tCb3VuZCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIENvbGxhcHNpYmxlIENsaWNrDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVDb2xsYXBzaWJsZUNsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ29sbGFwc2libGVDbGljayhlKSB7DQogICAgICAgIHZhciAkaGVhZGVyID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmNvbGxhcHNpYmxlLWhlYWRlcicpOw0KICAgICAgICBpZiAoZS50YXJnZXQgJiYgJGhlYWRlci5sZW5ndGgpIHsNCiAgICAgICAgICB2YXIgJGNvbGxhcHNpYmxlID0gJGhlYWRlci5jbG9zZXN0KCcuY29sbGFwc2libGUnKTsNCiAgICAgICAgICBpZiAoJGNvbGxhcHNpYmxlWzBdID09PSB0aGlzLmVsKSB7DQogICAgICAgICAgICB2YXIgJGNvbGxhcHNpYmxlTGkgPSAkaGVhZGVyLmNsb3Nlc3QoJ2xpJyk7DQogICAgICAgICAgICB2YXIgJGNvbGxhcHNpYmxlTGlzID0gJGNvbGxhcHNpYmxlLmNoaWxkcmVuKCdsaScpOw0KICAgICAgICAgICAgdmFyIGlzQWN0aXZlID0gJGNvbGxhcHNpYmxlTGlbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKTsNCiAgICAgICAgICAgIHZhciBpbmRleCA9ICRjb2xsYXBzaWJsZUxpcy5pbmRleCgkY29sbGFwc2libGVMaSk7DQoNCiAgICAgICAgICAgIGlmIChpc0FjdGl2ZSkgew0KICAgICAgICAgICAgICB0aGlzLmNsb3NlKGluZGV4KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMub3BlbihpbmRleCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIENvbGxhcHNpYmxlIEtleWRvd24NCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUNvbGxhcHNpYmxlS2V5ZG93biIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNvbGxhcHNpYmxlS2V5ZG93bihlKSB7DQogICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7DQogICAgICAgICAgdGhpcy5faGFuZGxlQ29sbGFwc2libGVDbGlja0JvdW5kKGUpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQW5pbWF0ZSBpbiBjb2xsYXBzaWJsZSBzbGlkZQ0KICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IC0gMHRoIGluZGV4IG9mIHNsaWRlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hbmltYXRlSW4iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlSW4oaW5kZXgpIHsNCiAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7DQoNCiAgICAgICAgdmFyICRjb2xsYXBzaWJsZUxpID0gdGhpcy4kZWwuY2hpbGRyZW4oJ2xpJykuZXEoaW5kZXgpOw0KICAgICAgICBpZiAoJGNvbGxhcHNpYmxlTGkubGVuZ3RoKSB7DQogICAgICAgICAgdmFyICRib2R5ID0gJGNvbGxhcHNpYmxlTGkuY2hpbGRyZW4oJy5jb2xsYXBzaWJsZS1ib2R5Jyk7DQoNCiAgICAgICAgICBhbmltLnJlbW92ZSgkYm9keVswXSk7DQogICAgICAgICAgJGJvZHkuY3NzKHsNCiAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaycsDQogICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsDQogICAgICAgICAgICBoZWlnaHQ6IDAsDQogICAgICAgICAgICBwYWRkaW5nVG9wOiAnJywNCiAgICAgICAgICAgIHBhZGRpbmdCb3R0b206ICcnDQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICB2YXIgcFRvcCA9ICRib2R5LmNzcygncGFkZGluZy10b3AnKTsNCiAgICAgICAgICB2YXIgcEJvdHRvbSA9ICRib2R5LmNzcygncGFkZGluZy1ib3R0b20nKTsNCiAgICAgICAgICB2YXIgZmluYWxIZWlnaHQgPSAkYm9keVswXS5zY3JvbGxIZWlnaHQ7DQogICAgICAgICAgJGJvZHkuY3NzKHsNCiAgICAgICAgICAgIHBhZGRpbmdUb3A6IDAsDQogICAgICAgICAgICBwYWRkaW5nQm90dG9tOiAwDQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICBhbmltKHsNCiAgICAgICAgICAgIHRhcmdldHM6ICRib2R5WzBdLA0KICAgICAgICAgICAgaGVpZ2h0OiBmaW5hbEhlaWdodCwNCiAgICAgICAgICAgIHBhZGRpbmdUb3A6IHBUb3AsDQogICAgICAgICAgICBwYWRkaW5nQm90dG9tOiBwQm90dG9tLA0KICAgICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLA0KICAgICAgICAgICAgZWFzaW5nOiAnZWFzZUluT3V0Q3ViaWMnLA0KICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChhbmltKSB7DQogICAgICAgICAgICAgICRib2R5LmNzcyh7DQogICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICcnLA0KICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6ICcnLA0KICAgICAgICAgICAgICAgIHBhZGRpbmdCb3R0b206ICcnLA0KICAgICAgICAgICAgICAgIGhlaWdodDogJycNCiAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgLy8gb25PcGVuRW5kIGNhbGxiYWNrDQogICAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXM1Lm9wdGlvbnMub25PcGVuRW5kID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgX3RoaXM1Lm9wdGlvbnMub25PcGVuRW5kLmNhbGwoX3RoaXM1LCAkY29sbGFwc2libGVMaVswXSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEFuaW1hdGUgb3V0IGNvbGxhcHNpYmxlIHNsaWRlDQogICAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggLSAwdGggaW5kZXggb2Ygc2xpZGUgdG8gb3Blbg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfYW5pbWF0ZU91dCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVPdXQoaW5kZXgpIHsNCiAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7DQoNCiAgICAgICAgdmFyICRjb2xsYXBzaWJsZUxpID0gdGhpcy4kZWwuY2hpbGRyZW4oJ2xpJykuZXEoaW5kZXgpOw0KICAgICAgICBpZiAoJGNvbGxhcHNpYmxlTGkubGVuZ3RoKSB7DQogICAgICAgICAgdmFyICRib2R5ID0gJGNvbGxhcHNpYmxlTGkuY2hpbGRyZW4oJy5jb2xsYXBzaWJsZS1ib2R5Jyk7DQogICAgICAgICAgYW5pbS5yZW1vdmUoJGJvZHlbMF0pOw0KICAgICAgICAgICRib2R5LmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7DQogICAgICAgICAgYW5pbSh7DQogICAgICAgICAgICB0YXJnZXRzOiAkYm9keVswXSwNCiAgICAgICAgICAgIGhlaWdodDogMCwNCiAgICAgICAgICAgIHBhZGRpbmdUb3A6IDAsDQogICAgICAgICAgICBwYWRkaW5nQm90dG9tOiAwLA0KICAgICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbiwNCiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VJbk91dEN1YmljJywNCiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICRib2R5LmNzcyh7DQogICAgICAgICAgICAgICAgaGVpZ2h0OiAnJywNCiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJycsDQogICAgICAgICAgICAgICAgcGFkZGluZzogJycsDQogICAgICAgICAgICAgICAgZGlzcGxheTogJycNCiAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgLy8gb25DbG9zZUVuZCBjYWxsYmFjaw0KICAgICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzNi5vcHRpb25zLm9uQ2xvc2VFbmQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICBfdGhpczYub3B0aW9ucy5vbkNsb3NlRW5kLmNhbGwoX3RoaXM2LCAkY29sbGFwc2libGVMaVswXSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIE9wZW4gQ29sbGFwc2libGUNCiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCAtIDB0aCBpbmRleCBvZiBzbGlkZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJvcGVuIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKGluZGV4KSB7DQogICAgICAgIHZhciBfdGhpczcgPSB0aGlzOw0KDQogICAgICAgIHZhciAkY29sbGFwc2libGVMaSA9IHRoaXMuJGVsLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KTsNCiAgICAgICAgaWYgKCRjb2xsYXBzaWJsZUxpLmxlbmd0aCAmJiAhJGNvbGxhcHNpYmxlTGlbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgew0KICAgICAgICAgIC8vIG9uT3BlblN0YXJ0IGNhbGxiYWNrDQogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydC5jYWxsKHRoaXMsICRjb2xsYXBzaWJsZUxpWzBdKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBIYW5kbGUgYWNjb3JkaW9uIGJlaGF2aW9yDQogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hY2NvcmRpb24pIHsNCiAgICAgICAgICAgIHZhciAkY29sbGFwc2libGVMaXMgPSB0aGlzLiRlbC5jaGlsZHJlbignbGknKTsNCiAgICAgICAgICAgIHZhciAkYWN0aXZlTGlzID0gdGhpcy4kZWwuY2hpbGRyZW4oJ2xpLmFjdGl2ZScpOw0KICAgICAgICAgICAgJGFjdGl2ZUxpcy5lYWNoKGZ1bmN0aW9uIChlbCkgew0KICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkY29sbGFwc2libGVMaXMuaW5kZXgoJChlbCkpOw0KICAgICAgICAgICAgICBfdGhpczcuY2xvc2UoaW5kZXgpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gQW5pbWF0ZSBpbg0KICAgICAgICAgICRjb2xsYXBzaWJsZUxpWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOw0KICAgICAgICAgIHRoaXMuX2FuaW1hdGVJbihpbmRleCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBDbG9zZSBDb2xsYXBzaWJsZQ0KICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IC0gMHRoIGluZGV4IG9mIHNsaWRlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImNsb3NlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZShpbmRleCkgew0KICAgICAgICB2YXIgJGNvbGxhcHNpYmxlTGkgPSB0aGlzLiRlbC5jaGlsZHJlbignbGknKS5lcShpbmRleCk7DQogICAgICAgIGlmICgkY29sbGFwc2libGVMaS5sZW5ndGggJiYgJGNvbGxhcHNpYmxlTGlbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgew0KICAgICAgICAgIC8vIG9uQ2xvc2VTdGFydCBjYWxsYmFjaw0KICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydC5jYWxsKHRoaXMsICRjb2xsYXBzaWJsZUxpWzBdKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBBbmltYXRlIG91dA0KICAgICAgICAgICRjb2xsYXBzaWJsZUxpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOw0KICAgICAgICAgIHRoaXMuX2FuaW1hdGVPdXQoaW5kZXgpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfV0sIFt7DQogICAgICBrZXk6ICJpbml0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX2dldChDb2xsYXBzaWJsZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbGxhcHNpYmxlKSwgImluaXQiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogR2V0IEluc3RhbmNlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImdldEluc3RhbmNlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkgew0KICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDsNCiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9Db2xsYXBzaWJsZTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJkZWZhdWx0cyIsDQogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIF9kZWZhdWx0czsNCiAgICAgIH0NCiAgICB9XSk7DQoNCiAgICByZXR1cm4gQ29sbGFwc2libGU7DQogIH0oQ29tcG9uZW50KTsNCg0KICBNLkNvbGxhcHNpYmxlID0gQ29sbGFwc2libGU7DQoNCiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7DQogICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihDb2xsYXBzaWJsZSwgJ2NvbGxhcHNpYmxlJywgJ01fQ29sbGFwc2libGUnKTsNCiAgfQ0KfSkoY2FzaCwgTS5hbmltZSk7DQo7KGZ1bmN0aW9uICgkLCBhbmltKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICB2YXIgX2RlZmF1bHRzID0gew0KICAgIGFsaWdubWVudDogJ2xlZnQnLA0KICAgIGF1dG9Gb2N1czogdHJ1ZSwNCiAgICBjb25zdHJhaW5XaWR0aDogdHJ1ZSwNCiAgICBjb250YWluZXI6IG51bGwsDQogICAgY292ZXJUcmlnZ2VyOiB0cnVlLA0KICAgIGNsb3NlT25DbGljazogdHJ1ZSwNCiAgICBob3ZlcjogZmFsc2UsDQogICAgaW5EdXJhdGlvbjogMTUwLA0KICAgIG91dER1cmF0aW9uOiAyNTAsDQogICAgb25PcGVuU3RhcnQ6IG51bGwsDQogICAgb25PcGVuRW5kOiBudWxsLA0KICAgIG9uQ2xvc2VTdGFydDogbnVsbCwNCiAgICBvbkNsb3NlRW5kOiBudWxsLA0KICAgIG9uSXRlbUNsaWNrOiBudWxsDQogIH07DQoNCiAgLyoqDQogICAqIEBjbGFzcw0KICAgKi8NCg0KICB2YXIgRHJvcGRvd24gPSBmdW5jdGlvbiAoX0NvbXBvbmVudDIpIHsNCiAgICBfaW5oZXJpdHMoRHJvcGRvd24sIF9Db21wb25lbnQyKTsNCg0KICAgIGZ1bmN0aW9uIERyb3Bkb3duKGVsLCBvcHRpb25zKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJvcGRvd24pOw0KDQogICAgICB2YXIgX3RoaXM4ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKERyb3Bkb3duLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRHJvcGRvd24pKS5jYWxsKHRoaXMsIERyb3Bkb3duLCBlbCwgb3B0aW9ucykpOw0KDQogICAgICBfdGhpczguZWwuTV9Ecm9wZG93biA9IF90aGlzODsNCiAgICAgIERyb3Bkb3duLl9kcm9wZG93bnMucHVzaChfdGhpczgpOw0KDQogICAgICBfdGhpczguaWQgPSBNLmdldElkRnJvbVRyaWdnZXIoZWwpOw0KICAgICAgX3RoaXM4LmRyb3Bkb3duRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChfdGhpczguaWQpOw0KICAgICAgX3RoaXM4LiRkcm9wZG93bkVsID0gJChfdGhpczguZHJvcGRvd25FbCk7DQoNCiAgICAgIC8qKg0KICAgICAgICogT3B0aW9ucyBmb3IgdGhlIGRyb3Bkb3duDQogICAgICAgKiBAbWVtYmVyIERyb3Bkb3duI29wdGlvbnMNCiAgICAgICAqIEBwcm9wIHtTdHJpbmd9IFthbGlnbm1lbnQ9J2xlZnQnXSAtIEVkZ2Ugd2hpY2ggdGhlIGRyb3Bkb3duIGlzIGFsaWduZWQgdG8NCiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbYXV0b0ZvY3VzPXRydWVdIC0gQXV0b21hdGljYWxseSBmb2N1cyBkcm9wZG93biBlbCBmb3Iga2V5Ym9hcmQNCiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbY29uc3RyYWluV2lkdGg9dHJ1ZV0gLSBDb25zdHJhaW4gd2lkdGggdG8gd2lkdGggb2YgdGhlIGJ1dHRvbg0KICAgICAgICogQHByb3Age0VsZW1lbnR9IGNvbnRhaW5lciAtIENvbnRhaW5lciBlbGVtZW50IHRvIGF0dGFjaCBkcm9wZG93biB0byAob3B0aW9uYWwpDQogICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2NvdmVyVHJpZ2dlcj10cnVlXSAtIFBsYWNlIGRyb3Bkb3duIG92ZXIgdHJpZ2dlcg0KICAgICAgICogQHByb3Age0Jvb2xlYW59IFtjbG9zZU9uQ2xpY2s9dHJ1ZV0gLSBDbG9zZSBvbiBjbGljayBvZiBkcm9wZG93biBpdGVtDQogICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2hvdmVyPWZhbHNlXSAtIE9wZW4gZHJvcGRvd24gb24gaG92ZXINCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtpbkR1cmF0aW9uPTE1MF0gLSBEdXJhdGlvbiBvZiBvcGVuIGFuaW1hdGlvbiBpbiBtcw0KICAgICAgICogQHByb3Age051bWJlcn0gW291dER1cmF0aW9uPTI1MF0gLSBEdXJhdGlvbiBvZiBjbG9zZSBhbmltYXRpb24gaW4gbXMNCiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25PcGVuU3RhcnQgLSBGdW5jdGlvbiBjYWxsZWQgd2hlbiBkcm9wZG93biBzdGFydHMgb3BlbmluZw0KICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5FbmQgLSBGdW5jdGlvbiBjYWxsZWQgd2hlbiBkcm9wZG93biBmaW5pc2hlcyBvcGVuaW5nDQogICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ2xvc2VTdGFydCAtIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRyb3Bkb3duIHN0YXJ0cyBjbG9zaW5nDQogICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ2xvc2VFbmQgLSBGdW5jdGlvbiBjYWxsZWQgd2hlbiBkcm9wZG93biBmaW5pc2hlcyBjbG9zaW5nDQogICAgICAgKi8NCiAgICAgIF90aGlzOC5vcHRpb25zID0gJC5leHRlbmQoe30sIERyb3Bkb3duLmRlZmF1bHRzLCBvcHRpb25zKTsNCg0KICAgICAgLyoqDQogICAgICAgKiBEZXNjcmliZXMgb3Blbi9jbG9zZSBzdGF0ZSBvZiBkcm9wZG93bg0KICAgICAgICogQHR5cGUge0Jvb2xlYW59DQogICAgICAgKi8NCiAgICAgIF90aGlzOC5pc09wZW4gPSBmYWxzZTsNCg0KICAgICAgLyoqDQogICAgICAgKiBEZXNjcmliZXMgaWYgZHJvcGRvd24gY29udGVudCBpcyBzY3JvbGxhYmxlDQogICAgICAgKiBAdHlwZSB7Qm9vbGVhbn0NCiAgICAgICAqLw0KICAgICAgX3RoaXM4LmlzU2Nyb2xsYWJsZSA9IGZhbHNlOw0KDQogICAgICAvKioNCiAgICAgICAqIERlc2NyaWJlcyBpZiB0b3VjaCBtb3Zpbmcgb24gZHJvcGRvd24gY29udGVudA0KICAgICAgICogQHR5cGUge0Jvb2xlYW59DQogICAgICAgKi8NCiAgICAgIF90aGlzOC5pc1RvdWNoTW92aW5nID0gZmFsc2U7DQoNCiAgICAgIF90aGlzOC5mb2N1c2VkSW5kZXggPSAtMTsNCiAgICAgIF90aGlzOC5maWx0ZXJRdWVyeSA9IFtdOw0KDQogICAgICAvLyBNb3ZlIGRyb3Bkb3duLWNvbnRlbnQgYWZ0ZXIgZHJvcGRvd24tdHJpZ2dlcg0KICAgICAgaWYgKCEhX3RoaXM4Lm9wdGlvbnMuY29udGFpbmVyKSB7DQogICAgICAgICQoX3RoaXM4Lm9wdGlvbnMuY29udGFpbmVyKS5hcHBlbmQoX3RoaXM4LmRyb3Bkb3duRWwpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgX3RoaXM4LiRlbC5hZnRlcihfdGhpczguZHJvcGRvd25FbCk7DQogICAgICB9DQoNCiAgICAgIF90aGlzOC5fbWFrZURyb3Bkb3duRm9jdXNhYmxlKCk7DQogICAgICBfdGhpczguX3Jlc2V0RmlsdGVyUXVlcnlCb3VuZCA9IF90aGlzOC5fcmVzZXRGaWx0ZXJRdWVyeS5iaW5kKF90aGlzOCk7DQogICAgICBfdGhpczguX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCA9IF90aGlzOC5faGFuZGxlRG9jdW1lbnRDbGljay5iaW5kKF90aGlzOCk7DQogICAgICBfdGhpczguX2hhbmRsZURvY3VtZW50VG91Y2htb3ZlQm91bmQgPSBfdGhpczguX2hhbmRsZURvY3VtZW50VG91Y2htb3ZlLmJpbmQoX3RoaXM4KTsNCiAgICAgIF90aGlzOC5faGFuZGxlRHJvcGRvd25DbGlja0JvdW5kID0gX3RoaXM4Ll9oYW5kbGVEcm9wZG93bkNsaWNrLmJpbmQoX3RoaXM4KTsNCiAgICAgIF90aGlzOC5faGFuZGxlRHJvcGRvd25LZXlkb3duQm91bmQgPSBfdGhpczguX2hhbmRsZURyb3Bkb3duS2V5ZG93bi5iaW5kKF90aGlzOCk7DQogICAgICBfdGhpczguX2hhbmRsZVRyaWdnZXJLZXlkb3duQm91bmQgPSBfdGhpczguX2hhbmRsZVRyaWdnZXJLZXlkb3duLmJpbmQoX3RoaXM4KTsNCiAgICAgIF90aGlzOC5fc2V0dXBFdmVudEhhbmRsZXJzKCk7DQogICAgICByZXR1cm4gX3RoaXM4Ow0KICAgIH0NCg0KICAgIF9jcmVhdGVDbGFzcyhEcm9wZG93biwgW3sNCiAgICAgIGtleTogImRlc3Ryb3kiLA0KDQoNCiAgICAgIC8qKg0KICAgICAgICogVGVhcmRvd24gY29tcG9uZW50DQogICAgICAgKi8NCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkgew0KICAgICAgICB0aGlzLl9yZXNldERyb3Bkb3duU3R5bGVzKCk7DQogICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTsNCiAgICAgICAgRHJvcGRvd24uX2Ryb3Bkb3ducy5zcGxpY2UoRHJvcGRvd24uX2Ryb3Bkb3ducy5pbmRleE9mKHRoaXMpLCAxKTsNCiAgICAgICAgdGhpcy5lbC5NX0Ryb3Bkb3duID0gdW5kZWZpbmVkOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cEV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIC8vIFRyaWdnZXIga2V5ZG93biBoYW5kbGVyDQogICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZVRyaWdnZXJLZXlkb3duQm91bmQpOw0KDQogICAgICAgIC8vIEl0ZW0gY2xpY2sgaGFuZGxlcg0KICAgICAgICB0aGlzLmRyb3Bkb3duRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEcm9wZG93bkNsaWNrQm91bmQpOw0KDQogICAgICAgIC8vIEhvdmVyIGV2ZW50IGhhbmRsZXJzDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaG92ZXIpIHsNCiAgICAgICAgICB0aGlzLl9oYW5kbGVNb3VzZUVudGVyQm91bmQgPSB0aGlzLl9oYW5kbGVNb3VzZUVudGVyLmJpbmQodGhpcyk7DQogICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kKTsNCiAgICAgICAgICB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlQm91bmQgPSB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlLmJpbmQodGhpcyk7DQogICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlTW91c2VMZWF2ZUJvdW5kKTsNCiAgICAgICAgICB0aGlzLmRyb3Bkb3duRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCk7DQoNCiAgICAgICAgICAvLyBDbGljayBldmVudCBoYW5kbGVycw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuX2hhbmRsZUNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVDbGljay5iaW5kKHRoaXMpOw0KICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbGlja0JvdW5kKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfcmVtb3ZlRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZVRyaWdnZXJLZXlkb3duQm91bmQpOw0KICAgICAgICB0aGlzLmRyb3Bkb3duRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEcm9wZG93bkNsaWNrQm91bmQpOw0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaG92ZXIpIHsNCiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLl9oYW5kbGVNb3VzZUVudGVyQm91bmQpOw0KICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCk7DQogICAgICAgICAgdGhpcy5kcm9wZG93bkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlQm91bmQpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbGlja0JvdW5kKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cFRlbXBvcmFyeUV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cFRlbXBvcmFyeUV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIC8vIFVzZSBjYXB0dXJlIHBoYXNlIGV2ZW50IGhhbmRsZXIgdG8gcHJldmVudCBjbGljaw0KICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kLCB0cnVlKTsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCk7DQogICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlRG9jdW1lbnRUb3VjaG1vdmVCb3VuZCk7DQogICAgICAgIHRoaXMuZHJvcGRvd25FbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRHJvcGRvd25LZXlkb3duQm91bmQpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVUZW1wb3JhcnlFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlVGVtcG9yYXJ5RXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgLy8gVXNlIGNhcHR1cmUgcGhhc2UgZXZlbnQgaGFuZGxlciB0byBwcmV2ZW50IGNsaWNrDQogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQsIHRydWUpOw0KICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kKTsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVEb2N1bWVudFRvdWNobW92ZUJvdW5kKTsNCiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVEcm9wZG93bktleWRvd25Cb3VuZCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUNsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2xpY2soZSkgew0KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIHRoaXMub3BlbigpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVNb3VzZUVudGVyIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlTW91c2VFbnRlcigpIHsNCiAgICAgICAgdGhpcy5vcGVuKCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZU1vdXNlTGVhdmUiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVNb3VzZUxlYXZlKGUpIHsNCiAgICAgICAgdmFyIHRvRWwgPSBlLnRvRWxlbWVudCB8fCBlLnJlbGF0ZWRUYXJnZXQ7DQogICAgICAgIHZhciBsZWF2ZVRvRHJvcGRvd25Db250ZW50ID0gISEkKHRvRWwpLmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykubGVuZ3RoOw0KICAgICAgICB2YXIgbGVhdmVUb0FjdGl2ZURyb3Bkb3duVHJpZ2dlciA9IGZhbHNlOw0KDQogICAgICAgIHZhciAkY2xvc2VzdFRyaWdnZXIgPSAkKHRvRWwpLmNsb3Nlc3QoJy5kcm9wZG93bi10cmlnZ2VyJyk7DQogICAgICAgIGlmICgkY2xvc2VzdFRyaWdnZXIubGVuZ3RoICYmICEhJGNsb3Nlc3RUcmlnZ2VyWzBdLk1fRHJvcGRvd24gJiYgJGNsb3Nlc3RUcmlnZ2VyWzBdLk1fRHJvcGRvd24uaXNPcGVuKSB7DQogICAgICAgICAgbGVhdmVUb0FjdGl2ZURyb3Bkb3duVHJpZ2dlciA9IHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDbG9zZSBob3ZlciBkcm9wZG93biBpZiBtb3VzZSBkaWQgbm90IGxlYXZlIHRvIGVpdGhlciBhY3RpdmUgZHJvcGRvd24tdHJpZ2dlciBvciBkcm9wZG93bi1jb250ZW50DQogICAgICAgIGlmICghbGVhdmVUb0FjdGl2ZURyb3Bkb3duVHJpZ2dlciAmJiAhbGVhdmVUb0Ryb3Bkb3duQ29udGVudCkgew0KICAgICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVEb2N1bWVudENsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRG9jdW1lbnRDbGljayhlKSB7DQogICAgICAgIHZhciBfdGhpczkgPSB0aGlzOw0KDQogICAgICAgIHZhciAkdGFyZ2V0ID0gJChlLnRhcmdldCk7DQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2xvc2VPbkNsaWNrICYmICR0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGggJiYgIXRoaXMuaXNUb3VjaE1vdmluZykgew0KICAgICAgICAgIC8vIGlzVG91Y2hNb3ZpbmcgdG8gY2hlY2sgaWYgc2Nyb2xsaW5nIG9uIG1vYmlsZS4NCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIF90aGlzOS5jbG9zZSgpOw0KICAgICAgICAgIH0sIDApOw0KICAgICAgICB9IGVsc2UgaWYgKCR0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLXRyaWdnZXInKS5sZW5ndGggfHwgISR0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGgpIHsNCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIF90aGlzOS5jbG9zZSgpOw0KICAgICAgICAgIH0sIDApOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuaXNUb3VjaE1vdmluZyA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVUcmlnZ2VyS2V5ZG93biIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVRyaWdnZXJLZXlkb3duKGUpIHsNCiAgICAgICAgLy8gQVJST1cgRE9XTiBPUiBFTlRFUiBXSEVOIFNFTEVDVCBJUyBDTE9TRUQgLSBvcGVuIERyb3Bkb3duDQogICAgICAgIGlmICgoZS53aGljaCA9PT0gTS5rZXlzLkFSUk9XX0RPV04gfHwgZS53aGljaCA9PT0gTS5rZXlzLkVOVEVSKSAmJiAhdGhpcy5pc09wZW4pIHsNCiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgdGhpcy5vcGVuKCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgRG9jdW1lbnQgVG91Y2htb3ZlDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVEb2N1bWVudFRvdWNobW92ZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURvY3VtZW50VG91Y2htb3ZlKGUpIHsNCiAgICAgICAgdmFyICR0YXJnZXQgPSAkKGUudGFyZ2V0KTsNCiAgICAgICAgaWYgKCR0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGgpIHsNCiAgICAgICAgICB0aGlzLmlzVG91Y2hNb3ZpbmcgPSB0cnVlOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIERyb3Bkb3duIENsaWNrDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVEcm9wZG93bkNsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRHJvcGRvd25DbGljayhlKSB7DQogICAgICAgIC8vIG9uSXRlbUNsaWNrIGNhbGxiYWNrDQogICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uSXRlbUNsaWNrID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgdmFyIGl0ZW1FbCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2xpJylbMF07DQogICAgICAgICAgdGhpcy5vcHRpb25zLm9uSXRlbUNsaWNrLmNhbGwodGhpcywgaXRlbUVsKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBEcm9wZG93biBLZXlkb3duDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVEcm9wZG93bktleWRvd24iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVEcm9wZG93bktleWRvd24oZSkgew0KICAgICAgICBpZiAoZS53aGljaCA9PT0gTS5rZXlzLlRBQikgew0KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICB0aGlzLmNsb3NlKCk7DQoNCiAgICAgICAgICAvLyBOYXZpZ2F0ZSBkb3duIGRyb3Bkb3duIGxpc3QNCiAgICAgICAgfSBlbHNlIGlmICgoZS53aGljaCA9PT0gTS5rZXlzLkFSUk9XX0RPV04gfHwgZS53aGljaCA9PT0gTS5rZXlzLkFSUk9XX1VQKSAmJiB0aGlzLmlzT3Blbikgew0KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gZS53aGljaCA9PT0gTS5rZXlzLkFSUk9XX0RPV04gPyAxIDogLTE7DQogICAgICAgICAgdmFyIG5ld0ZvY3VzZWRJbmRleCA9IHRoaXMuZm9jdXNlZEluZGV4Ow0KICAgICAgICAgIHZhciBmb3VuZE5ld0luZGV4ID0gZmFsc2U7DQogICAgICAgICAgZG8gew0KICAgICAgICAgICAgbmV3Rm9jdXNlZEluZGV4ID0gbmV3Rm9jdXNlZEluZGV4ICsgZGlyZWN0aW9uOw0KDQogICAgICAgICAgICBpZiAoISF0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW5bbmV3Rm9jdXNlZEluZGV4XSAmJiB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW5bbmV3Rm9jdXNlZEluZGV4XS50YWJJbmRleCAhPT0gLTEpIHsNCiAgICAgICAgICAgICAgZm91bmROZXdJbmRleCA9IHRydWU7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gd2hpbGUgKG5ld0ZvY3VzZWRJbmRleCA8IHRoaXMuZHJvcGRvd25FbC5jaGlsZHJlbi5sZW5ndGggJiYgbmV3Rm9jdXNlZEluZGV4ID49IDApOw0KDQogICAgICAgICAgaWYgKGZvdW5kTmV3SW5kZXgpIHsNCiAgICAgICAgICAgIHRoaXMuZm9jdXNlZEluZGV4ID0gbmV3Rm9jdXNlZEluZGV4Ow0KICAgICAgICAgICAgdGhpcy5fZm9jdXNGb2N1c2VkSXRlbSgpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIEVOVEVSIHNlbGVjdHMgY2hvaWNlIG9uIGZvY3VzZWQgaXRlbQ0KICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5FTlRFUiAmJiB0aGlzLmlzT3Blbikgew0KICAgICAgICAgIC8vIFNlYXJjaCBmb3IgPGE+IGFuZCA8YnV0dG9uPg0KICAgICAgICAgIHZhciBmb2N1c2VkRWxlbWVudCA9IHRoaXMuZHJvcGRvd25FbC5jaGlsZHJlblt0aGlzLmZvY3VzZWRJbmRleF07DQogICAgICAgICAgdmFyICRhY3RpdmF0YWJsZUVsZW1lbnQgPSAkKGZvY3VzZWRFbGVtZW50KS5maW5kKCdhLCBidXR0b24nKS5maXJzdCgpOw0KDQogICAgICAgICAgLy8gQ2xpY2sgYSBvciBidXR0b24gdGFnIGlmIGV4aXN0cywgb3RoZXJ3aXNlIGNsaWNrIGxpIHRhZw0KICAgICAgICAgICEhJGFjdGl2YXRhYmxlRWxlbWVudC5sZW5ndGggPyAkYWN0aXZhdGFibGVFbGVtZW50WzBdLmNsaWNrKCkgOiBmb2N1c2VkRWxlbWVudC5jbGljaygpOw0KDQogICAgICAgICAgLy8gQ2xvc2UgZHJvcGRvd24gb24gRVNDDQogICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PT0gTS5rZXlzLkVTQyAmJiB0aGlzLmlzT3Blbikgew0KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDQVNFIFdIRU4gVVNFUiBUWVBFIExFVFRFUlMNCiAgICAgICAgdmFyIGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCkudG9Mb3dlckNhc2UoKSwNCiAgICAgICAgICAgIG5vbkxldHRlcnMgPSBbOSwgMTMsIDI3LCAzOCwgNDBdOw0KICAgICAgICBpZiAobGV0dGVyICYmIG5vbkxldHRlcnMuaW5kZXhPZihlLndoaWNoKSA9PT0gLTEpIHsNCiAgICAgICAgICB0aGlzLmZpbHRlclF1ZXJ5LnB1c2gobGV0dGVyKTsNCg0KICAgICAgICAgIHZhciBzdHJpbmcgPSB0aGlzLmZpbHRlclF1ZXJ5LmpvaW4oJycpLA0KICAgICAgICAgICAgICBuZXdPcHRpb25FbCA9ICQodGhpcy5kcm9wZG93bkVsKS5maW5kKCdsaScpLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsNCiAgICAgICAgICAgIHJldHVybiAkKGVsKS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHN0cmluZykgPT09IDA7DQogICAgICAgICAgfSlbMF07DQoNCiAgICAgICAgICBpZiAobmV3T3B0aW9uRWwpIHsNCiAgICAgICAgICAgIHRoaXMuZm9jdXNlZEluZGV4ID0gJChuZXdPcHRpb25FbCkuaW5kZXgoKTsNCiAgICAgICAgICAgIHRoaXMuX2ZvY3VzRm9jdXNlZEl0ZW0oKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmZpbHRlclRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuX3Jlc2V0RmlsdGVyUXVlcnlCb3VuZCwgMTAwMCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgZHJvcGRvd24NCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3Jlc2V0RmlsdGVyUXVlcnkiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNldEZpbHRlclF1ZXJ5KCkgew0KICAgICAgICB0aGlzLmZpbHRlclF1ZXJ5ID0gW107DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX3Jlc2V0RHJvcGRvd25TdHlsZXMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNldERyb3Bkb3duU3R5bGVzKCkgew0KICAgICAgICB0aGlzLiRkcm9wZG93bkVsLmNzcyh7DQogICAgICAgICAgZGlzcGxheTogJycsDQogICAgICAgICAgd2lkdGg6ICcnLA0KICAgICAgICAgIGhlaWdodDogJycsDQogICAgICAgICAgbGVmdDogJycsDQogICAgICAgICAgdG9wOiAnJywNCiAgICAgICAgICAndHJhbnNmb3JtLW9yaWdpbic6ICcnLA0KICAgICAgICAgIHRyYW5zZm9ybTogJycsDQogICAgICAgICAgb3BhY2l0eTogJycNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX21ha2VEcm9wZG93bkZvY3VzYWJsZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX21ha2VEcm9wZG93bkZvY3VzYWJsZSgpIHsNCiAgICAgICAgLy8gTmVlZGVkIGZvciBhcnJvdyBrZXkgbmF2aWdhdGlvbg0KICAgICAgICB0aGlzLmRyb3Bkb3duRWwudGFiSW5kZXggPSAwOw0KDQogICAgICAgIC8vIE9ubHkgc2V0IHRhYmluZGV4IGlmIGl0IGhhc24ndCBiZWVuIHNldCBieSB1c2VyDQogICAgICAgICQodGhpcy5kcm9wZG93bkVsKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24gKGVsKSB7DQogICAgICAgICAgaWYgKCFlbC5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykpIHsNCiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAwKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9mb2N1c0ZvY3VzZWRJdGVtIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZm9jdXNGb2N1c2VkSXRlbSgpIHsNCiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZEluZGV4ID49IDAgJiYgdGhpcy5mb2N1c2VkSW5kZXggPCB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW4ubGVuZ3RoICYmIHRoaXMub3B0aW9ucy5hdXRvRm9jdXMpIHsNCiAgICAgICAgICB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW5bdGhpcy5mb2N1c2VkSW5kZXhdLmZvY3VzKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfZ2V0RHJvcGRvd25Qb3NpdGlvbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldERyb3Bkb3duUG9zaXRpb24oKSB7DQogICAgICAgIHZhciBvZmZzZXRQYXJlbnRCUmVjdCA9IHRoaXMuZWwub2Zmc2V0UGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOw0KICAgICAgICB2YXIgdHJpZ2dlckJSZWN0ID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICAgICAgdmFyIGRyb3Bkb3duQlJlY3QgPSB0aGlzLmRyb3Bkb3duRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQoNCiAgICAgICAgdmFyIGlkZWFsSGVpZ2h0ID0gZHJvcGRvd25CUmVjdC5oZWlnaHQ7DQogICAgICAgIHZhciBpZGVhbFdpZHRoID0gZHJvcGRvd25CUmVjdC53aWR0aDsNCiAgICAgICAgdmFyIGlkZWFsWFBvcyA9IHRyaWdnZXJCUmVjdC5sZWZ0IC0gZHJvcGRvd25CUmVjdC5sZWZ0Ow0KICAgICAgICB2YXIgaWRlYWxZUG9zID0gdHJpZ2dlckJSZWN0LnRvcCAtIGRyb3Bkb3duQlJlY3QudG9wOw0KDQogICAgICAgIHZhciBkcm9wZG93bkJvdW5kcyA9IHsNCiAgICAgICAgICBsZWZ0OiBpZGVhbFhQb3MsDQogICAgICAgICAgdG9wOiBpZGVhbFlQb3MsDQogICAgICAgICAgaGVpZ2h0OiBpZGVhbEhlaWdodCwNCiAgICAgICAgICB3aWR0aDogaWRlYWxXaWR0aA0KICAgICAgICB9Ow0KDQogICAgICAgIC8vIENvdW50YWluZXIgaGVyZSB3aWxsIGJlIGNsb3Nlc3QgYW5jZXN0b3Igd2l0aCBvdmVyZmxvdzogaGlkZGVuDQogICAgICAgIHZhciBjbG9zZXN0T3ZlcmZsb3dQYXJlbnQgPSB0aGlzLmRyb3Bkb3duRWwub2Zmc2V0UGFyZW50Ow0KICAgICAgICB2YXIgYWxpZ25tZW50cyA9IE0uY2hlY2tQb3NzaWJsZUFsaWdubWVudHModGhpcy5lbCwgY2xvc2VzdE92ZXJmbG93UGFyZW50LCBkcm9wZG93bkJvdW5kcywgdGhpcy5vcHRpb25zLmNvdmVyVHJpZ2dlciA/IDAgOiB0cmlnZ2VyQlJlY3QuaGVpZ2h0KTsNCg0KICAgICAgICB2YXIgdmVydGljYWxBbGlnbm1lbnQgPSAndG9wJzsNCiAgICAgICAgdmFyIGhvcml6b250YWxBbGlnbm1lbnQgPSB0aGlzLm9wdGlvbnMuYWxpZ25tZW50Ow0KICAgICAgICBpZGVhbFlQb3MgKz0gdGhpcy5vcHRpb25zLmNvdmVyVHJpZ2dlciA/IDAgOiB0cmlnZ2VyQlJlY3QuaGVpZ2h0Ow0KDQogICAgICAgIC8vIFJlc2V0IGlzU2Nyb2xsYWJsZQ0KICAgICAgICB0aGlzLmlzU2Nyb2xsYWJsZSA9IGZhbHNlOw0KDQogICAgICAgIGlmICghYWxpZ25tZW50cy50b3ApIHsNCiAgICAgICAgICBpZiAoYWxpZ25tZW50cy5ib3R0b20pIHsNCiAgICAgICAgICAgIHZlcnRpY2FsQWxpZ25tZW50ID0gJ2JvdHRvbSc7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuaXNTY3JvbGxhYmxlID0gdHJ1ZTsNCg0KICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHdoaWNoIHNpZGUgaGFzIG1vc3Qgc3BhY2UgYW5kIGN1dG9mZiBhdCBjb3JyZWN0IGhlaWdodA0KICAgICAgICAgICAgaWYgKGFsaWdubWVudHMuc3BhY2VPblRvcCA+IGFsaWdubWVudHMuc3BhY2VPbkJvdHRvbSkgew0KICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWdubWVudCA9ICdib3R0b20nOw0KICAgICAgICAgICAgICBpZGVhbEhlaWdodCArPSBhbGlnbm1lbnRzLnNwYWNlT25Ub3A7DQogICAgICAgICAgICAgIGlkZWFsWVBvcyAtPSBhbGlnbm1lbnRzLnNwYWNlT25Ub3A7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBpZGVhbEhlaWdodCArPSBhbGlnbm1lbnRzLnNwYWNlT25Cb3R0b207DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gSWYgcHJlZmVycmVkIGhvcml6b250YWwgYWxpZ25tZW50IGlzIHBvc3NpYmxlDQogICAgICAgIGlmICghYWxpZ25tZW50c1tob3Jpem9udGFsQWxpZ25tZW50XSkgew0KICAgICAgICAgIHZhciBvcHBvc2l0ZUFsaWdubWVudCA9IGhvcml6b250YWxBbGlnbm1lbnQgPT09ICdsZWZ0JyA/ICdyaWdodCcgOiAnbGVmdCc7DQogICAgICAgICAgaWYgKGFsaWdubWVudHNbb3Bwb3NpdGVBbGlnbm1lbnRdKSB7DQogICAgICAgICAgICBob3Jpem9udGFsQWxpZ25tZW50ID0gb3Bwb3NpdGVBbGlnbm1lbnQ7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIERldGVybWluZSB3aGljaCBzaWRlIGhhcyBtb3N0IHNwYWNlIGFuZCBjdXRvZmYgYXQgY29ycmVjdCBoZWlnaHQNCiAgICAgICAgICAgIGlmIChhbGlnbm1lbnRzLnNwYWNlT25MZWZ0ID4gYWxpZ25tZW50cy5zcGFjZU9uUmlnaHQpIHsNCiAgICAgICAgICAgICAgaG9yaXpvbnRhbEFsaWdubWVudCA9ICdyaWdodCc7DQogICAgICAgICAgICAgIGlkZWFsV2lkdGggKz0gYWxpZ25tZW50cy5zcGFjZU9uTGVmdDsNCiAgICAgICAgICAgICAgaWRlYWxYUG9zIC09IGFsaWdubWVudHMuc3BhY2VPbkxlZnQ7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBob3Jpem9udGFsQWxpZ25tZW50ID0gJ2xlZnQnOw0KICAgICAgICAgICAgICBpZGVhbFdpZHRoICs9IGFsaWdubWVudHMuc3BhY2VPblJpZ2h0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmICh2ZXJ0aWNhbEFsaWdubWVudCA9PT0gJ2JvdHRvbScpIHsNCiAgICAgICAgICBpZGVhbFlQb3MgPSBpZGVhbFlQb3MgLSBkcm9wZG93bkJSZWN0LmhlaWdodCArICh0aGlzLm9wdGlvbnMuY292ZXJUcmlnZ2VyID8gdHJpZ2dlckJSZWN0LmhlaWdodCA6IDApOw0KICAgICAgICB9DQogICAgICAgIGlmIChob3Jpem9udGFsQWxpZ25tZW50ID09PSAncmlnaHQnKSB7DQogICAgICAgICAgaWRlYWxYUG9zID0gaWRlYWxYUG9zIC0gZHJvcGRvd25CUmVjdC53aWR0aCArIHRyaWdnZXJCUmVjdC53aWR0aDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIHg6IGlkZWFsWFBvcywNCiAgICAgICAgICB5OiBpZGVhbFlQb3MsDQogICAgICAgICAgdmVydGljYWxBbGlnbm1lbnQ6IHZlcnRpY2FsQWxpZ25tZW50LA0KICAgICAgICAgIGhvcml6b250YWxBbGlnbm1lbnQ6IGhvcml6b250YWxBbGlnbm1lbnQsDQogICAgICAgICAgaGVpZ2h0OiBpZGVhbEhlaWdodCwNCiAgICAgICAgICB3aWR0aDogaWRlYWxXaWR0aA0KICAgICAgICB9Ow0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEFuaW1hdGUgaW4gZHJvcGRvd24NCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2FuaW1hdGVJbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbigpIHsNCiAgICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOw0KDQogICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZHJvcGRvd25FbCk7DQogICAgICAgIGFuaW0oew0KICAgICAgICAgIHRhcmdldHM6IHRoaXMuZHJvcGRvd25FbCwNCiAgICAgICAgICBvcGFjaXR5OiB7DQogICAgICAgICAgICB2YWx1ZTogWzAsIDFdLA0KICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnDQogICAgICAgICAgfSwNCiAgICAgICAgICBzY2FsZVg6IFswLjMsIDFdLA0KICAgICAgICAgIHNjYWxlWTogWzAuMywgMV0sDQogICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWludCcsDQogICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChhbmltKSB7DQogICAgICAgICAgICBpZiAoX3RoaXMxMC5vcHRpb25zLmF1dG9Gb2N1cykgew0KICAgICAgICAgICAgICBfdGhpczEwLmRyb3Bkb3duRWwuZm9jdXMoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gb25PcGVuRW5kIGNhbGxiYWNrDQogICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTAub3B0aW9ucy5vbk9wZW5FbmQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgdmFyIGVsZW0gPSBhbmltLmFuaW1hdGFibGVzWzBdLnRhcmdldDsNCiAgICAgICAgICAgICAgX3RoaXMxMC5vcHRpb25zLm9uT3BlbkVuZC5jYWxsKGVsZW0sIF90aGlzMTAuZWwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQW5pbWF0ZSBvdXQgZHJvcGRvd24NCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2FuaW1hdGVPdXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3V0KCkgew0KICAgICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7DQoNCiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5kcm9wZG93bkVsKTsNCiAgICAgICAgYW5pbSh7DQogICAgICAgICAgdGFyZ2V0czogdGhpcy5kcm9wZG93bkVsLA0KICAgICAgICAgIG9wYWNpdHk6IHsNCiAgICAgICAgICAgIHZhbHVlOiAwLA0KICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1aW50Jw0KICAgICAgICAgIH0sDQogICAgICAgICAgc2NhbGVYOiAwLjMsDQogICAgICAgICAgc2NhbGVZOiAwLjMsDQogICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbiwNCiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVpbnQnLA0KICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoYW5pbSkgew0KICAgICAgICAgICAgX3RoaXMxMS5fcmVzZXREcm9wZG93blN0eWxlcygpOw0KDQogICAgICAgICAgICAvLyBvbkNsb3NlRW5kIGNhbGxiYWNrDQogICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTEub3B0aW9ucy5vbkNsb3NlRW5kID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgIHZhciBlbGVtID0gYW5pbS5hbmltYXRhYmxlc1swXS50YXJnZXQ7DQogICAgICAgICAgICAgIF90aGlzMTEub3B0aW9ucy5vbkNsb3NlRW5kLmNhbGwoX3RoaXMxMSwgX3RoaXMxMS5lbCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBQbGFjZSBkcm9wZG93bg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfcGxhY2VEcm9wZG93biIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3BsYWNlRHJvcGRvd24oKSB7DQogICAgICAgIC8vIFNldCB3aWR0aCBiZWZvcmUgY2FsY3VsYXRpbmcgcG9zaXRpb25JbmZvDQogICAgICAgIHZhciBpZGVhbFdpZHRoID0gdGhpcy5vcHRpb25zLmNvbnN0cmFpbldpZHRoID8gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA6IHRoaXMuZHJvcGRvd25FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDsNCiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLndpZHRoID0gaWRlYWxXaWR0aCArICdweCc7DQoNCiAgICAgICAgdmFyIHBvc2l0aW9uSW5mbyA9IHRoaXMuX2dldERyb3Bkb3duUG9zaXRpb24oKTsNCiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLmxlZnQgPSBwb3NpdGlvbkluZm8ueCArICdweCc7DQogICAgICAgIHRoaXMuZHJvcGRvd25FbC5zdHlsZS50b3AgPSBwb3NpdGlvbkluZm8ueSArICdweCc7DQogICAgICAgIHRoaXMuZHJvcGRvd25FbC5zdHlsZS5oZWlnaHQgPSBwb3NpdGlvbkluZm8uaGVpZ2h0ICsgJ3B4JzsNCiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLndpZHRoID0gcG9zaXRpb25JbmZvLndpZHRoICsgJ3B4JzsNCiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IChwb3NpdGlvbkluZm8uaG9yaXpvbnRhbEFsaWdubWVudCA9PT0gJ2xlZnQnID8gJzAnIDogJzEwMCUnKSArICIgIiArIChwb3NpdGlvbkluZm8udmVydGljYWxBbGlnbm1lbnQgPT09ICd0b3AnID8gJzAnIDogJzEwMCUnKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBPcGVuIERyb3Bkb3duDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIm9wZW4iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7DQogICAgICAgIGlmICh0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7DQoNCiAgICAgICAgLy8gb25PcGVuU3RhcnQgY2FsbGJhY2sNCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQuY2FsbCh0aGlzLCB0aGlzLmVsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFJlc2V0IHN0eWxlcw0KICAgICAgICB0aGlzLl9yZXNldERyb3Bkb3duU3R5bGVzKCk7DQogICAgICAgIHRoaXMuZHJvcGRvd25FbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCg0KICAgICAgICB0aGlzLl9wbGFjZURyb3Bkb3duKCk7DQogICAgICAgIHRoaXMuX2FuaW1hdGVJbigpOw0KICAgICAgICB0aGlzLl9zZXR1cFRlbXBvcmFyeUV2ZW50SGFuZGxlcnMoKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBDbG9zZSBEcm9wZG93bg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJjbG9zZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7DQogICAgICAgIGlmICghdGhpcy5pc09wZW4pIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsNCiAgICAgICAgdGhpcy5mb2N1c2VkSW5kZXggPSAtMTsNCg0KICAgICAgICAvLyBvbkNsb3NlU3RhcnQgY2FsbGJhY2sNCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0ID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5fYW5pbWF0ZU91dCgpOw0KICAgICAgICB0aGlzLl9yZW1vdmVUZW1wb3JhcnlFdmVudEhhbmRsZXJzKCk7DQoNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hdXRvRm9jdXMpIHsNCiAgICAgICAgICB0aGlzLmVsLmZvY3VzKCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBSZWNhbGN1bGF0ZSBkaW1lbnNpb25zDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogInJlY2FsY3VsYXRlRGltZW5zaW9ucyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gcmVjYWxjdWxhdGVEaW1lbnNpb25zKCkgew0KICAgICAgICBpZiAodGhpcy5pc09wZW4pIHsNCiAgICAgICAgICB0aGlzLiRkcm9wZG93bkVsLmNzcyh7DQogICAgICAgICAgICB3aWR0aDogJycsDQogICAgICAgICAgICBoZWlnaHQ6ICcnLA0KICAgICAgICAgICAgbGVmdDogJycsDQogICAgICAgICAgICB0b3A6ICcnLA0KICAgICAgICAgICAgJ3RyYW5zZm9ybS1vcmlnaW4nOiAnJw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMuX3BsYWNlRHJvcGRvd24oKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiaW5pdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9nZXQoRHJvcGRvd24uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihEcm9wZG93biksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBJbnN0YW5jZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRJbnN0YW5jZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHsNCiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7DQogICAgICAgIHJldHVybiBkb21FbGVtLk1fRHJvcGRvd247DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiZGVmYXVsdHMiLA0KICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBfZGVmYXVsdHM7DQogICAgICB9DQogICAgfV0pOw0KDQogICAgcmV0dXJuIERyb3Bkb3duOw0KICB9KENvbXBvbmVudCk7DQoNCiAgLyoqDQogICAqIEBzdGF0aWMNCiAgICogQG1lbWJlcm9mIERyb3Bkb3duDQogICAqLw0KDQoNCiAgRHJvcGRvd24uX2Ryb3Bkb3ducyA9IFtdOw0KDQogIHdpbmRvdy5NLkRyb3Bkb3duID0gRHJvcGRvd247DQoNCiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7DQogICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihEcm9wZG93biwgJ2Ryb3Bkb3duJywgJ01fRHJvcGRvd24nKTsNCiAgfQ0KfSkoY2FzaCwgTS5hbmltZSk7DQo7KGZ1bmN0aW9uICgkLCBhbmltKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICB2YXIgX2RlZmF1bHRzID0gew0KICAgIG9wYWNpdHk6IDAuNSwNCiAgICBpbkR1cmF0aW9uOiAyNTAsDQogICAgb3V0RHVyYXRpb246IDI1MCwNCiAgICBvbk9wZW5TdGFydDogbnVsbCwNCiAgICBvbk9wZW5FbmQ6IG51bGwsDQogICAgb25DbG9zZVN0YXJ0OiBudWxsLA0KICAgIG9uQ2xvc2VFbmQ6IG51bGwsDQogICAgcHJldmVudFNjcm9sbGluZzogdHJ1ZSwNCiAgICBkaXNtaXNzaWJsZTogdHJ1ZSwNCiAgICBzdGFydGluZ1RvcDogJzQlJywNCiAgICBlbmRpbmdUb3A6ICcxMCUnDQogIH07DQoNCiAgLyoqDQogICAqIEBjbGFzcw0KICAgKg0KICAgKi8NCg0KICB2YXIgTW9kYWwgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDMpIHsNCiAgICBfaW5oZXJpdHMoTW9kYWwsIF9Db21wb25lbnQzKTsNCg0KICAgIC8qKg0KICAgICAqIENvbnN0cnVjdCBNb2RhbCBpbnN0YW5jZSBhbmQgc2V0IHVwIG92ZXJsYXkNCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsDQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBNb2RhbChlbCwgb3B0aW9ucykgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vZGFsKTsNCg0KICAgICAgdmFyIF90aGlzMTIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTW9kYWwuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNb2RhbCkpLmNhbGwodGhpcywgTW9kYWwsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzMTIuZWwuTV9Nb2RhbCA9IF90aGlzMTI7DQoNCiAgICAgIC8qKg0KICAgICAgICogT3B0aW9ucyBmb3IgdGhlIG1vZGFsDQogICAgICAgKiBAbWVtYmVyIE1vZGFsI29wdGlvbnMNCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtvcGFjaXR5PTAuNV0gLSBPcGFjaXR5IG9mIHRoZSBtb2RhbCBvdmVybGF5DQogICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbaW5EdXJhdGlvbj0yNTBdIC0gTGVuZ3RoIGluIG1zIG9mIGVudGVyIHRyYW5zaXRpb24NCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtvdXREdXJhdGlvbj0yNTBdIC0gTGVuZ3RoIGluIG1zIG9mIGV4aXQgdHJhbnNpdGlvbg0KICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5TdGFydCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBiZWZvcmUgbW9kYWwgaXMgb3BlbmVkDQogICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlbkVuZCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciBtb2RhbCBpcyBvcGVuZWQNCiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZVN0YXJ0IC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGJlZm9yZSBtb2RhbCBpcyBjbG9zZWQNCiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZUVuZCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciBtb2RhbCBpcyBjbG9zZWQNCiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbZGlzbWlzc2libGU9dHJ1ZV0gLSBBbGxvdyBtb2RhbCB0byBiZSBkaXNtaXNzZWQgYnkga2V5Ym9hcmQgb3Igb3ZlcmxheSBjbGljaw0KICAgICAgICogQHByb3Age1N0cmluZ30gW3N0YXJ0aW5nVG9wPSc0JSddIC0gc3RhcnRpbmdUb3ANCiAgICAgICAqIEBwcm9wIHtTdHJpbmd9IFtlbmRpbmdUb3A9JzEwJSddIC0gZW5kaW5nVG9wDQogICAgICAgKi8NCiAgICAgIF90aGlzMTIub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBNb2RhbC5kZWZhdWx0cywgb3B0aW9ucyk7DQoNCiAgICAgIC8qKg0KICAgICAgICogRGVzY3JpYmVzIG9wZW4vY2xvc2Ugc3RhdGUgb2YgbW9kYWwNCiAgICAgICAqIEB0eXBlIHtCb29sZWFufQ0KICAgICAgICovDQogICAgICBfdGhpczEyLmlzT3BlbiA9IGZhbHNlOw0KDQogICAgICBfdGhpczEyLmlkID0gX3RoaXMxMi4kZWwuYXR0cignaWQnKTsNCiAgICAgIF90aGlzMTIuX29wZW5pbmdUcmlnZ2VyID0gdW5kZWZpbmVkOw0KICAgICAgX3RoaXMxMi4kb3ZlcmxheSA9ICQoJzxkaXYgY2xhc3M9Im1vZGFsLW92ZXJsYXkiPjwvZGl2PicpOw0KICAgICAgX3RoaXMxMi5lbC50YWJJbmRleCA9IDA7DQogICAgICBfdGhpczEyLl9udGhNb2RhbE9wZW5lZCA9IDA7DQoNCiAgICAgIE1vZGFsLl9jb3VudCsrOw0KICAgICAgX3RoaXMxMi5fc2V0dXBFdmVudEhhbmRsZXJzKCk7DQogICAgICByZXR1cm4gX3RoaXMxMjsNCiAgICB9DQoNCiAgICBfY3JlYXRlQ2xhc3MoTW9kYWwsIFt7DQogICAgICBrZXk6ICJkZXN0cm95IiwNCg0KDQogICAgICAvKioNCiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudA0KICAgICAgICovDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsNCiAgICAgICAgTW9kYWwuX2NvdW50LS07DQogICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7DQogICAgICAgIHRoaXMuJG92ZXJsYXkucmVtb3ZlKCk7DQogICAgICAgIHRoaXMuZWwuTV9Nb2RhbCA9IHVuZGVmaW5lZDsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZU92ZXJsYXlDbGljay5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLl9oYW5kbGVNb2RhbENsb3NlQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZU1vZGFsQ2xvc2VDbGljay5iaW5kKHRoaXMpOw0KDQogICAgICAgIGlmIChNb2RhbC5fY291bnQgPT09IDEpIHsNCiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVHJpZ2dlckNsaWNrKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRvdmVybGF5WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrQm91bmQpOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTW9kYWxDbG9zZUNsaWNrQm91bmQpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfcmVtb3ZlRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIGlmIChNb2RhbC5fY291bnQgPT09IDApIHsNCiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVHJpZ2dlckNsaWNrKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRvdmVybGF5WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrQm91bmQpOw0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTW9kYWxDbG9zZUNsaWNrQm91bmQpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBUcmlnZ2VyIENsaWNrDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVUcmlnZ2VyQ2xpY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVUcmlnZ2VyQ2xpY2soZSkgew0KICAgICAgICB2YXIgJHRyaWdnZXIgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcubW9kYWwtdHJpZ2dlcicpOw0KICAgICAgICBpZiAoJHRyaWdnZXIubGVuZ3RoKSB7DQogICAgICAgICAgdmFyIG1vZGFsSWQgPSBNLmdldElkRnJvbVRyaWdnZXIoJHRyaWdnZXJbMF0pOw0KICAgICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxJZCkuTV9Nb2RhbDsNCiAgICAgICAgICBpZiAobW9kYWxJbnN0YW5jZSkgew0KICAgICAgICAgICAgbW9kYWxJbnN0YW5jZS5vcGVuKCR0cmlnZ2VyKTsNCiAgICAgICAgICB9DQogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIE92ZXJsYXkgQ2xpY2sNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZU92ZXJsYXlDbGljayIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU92ZXJsYXlDbGljaygpIHsNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNtaXNzaWJsZSkgew0KICAgICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBNb2RhbCBDbG9zZSBDbGljaw0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlTW9kYWxDbG9zZUNsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlTW9kYWxDbG9zZUNsaWNrKGUpIHsNCiAgICAgICAgdmFyICRjbG9zZVRyaWdnZXIgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcubW9kYWwtY2xvc2UnKTsNCiAgICAgICAgaWYgKCRjbG9zZVRyaWdnZXIubGVuZ3RoKSB7DQogICAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIEtleWRvd24NCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUtleWRvd24iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVLZXlkb3duKGUpIHsNCiAgICAgICAgLy8gRVNDIGtleQ0KICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNyAmJiB0aGlzLm9wdGlvbnMuZGlzbWlzc2libGUpIHsNCiAgICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgRm9jdXMNCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUZvY3VzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRm9jdXMoZSkgew0KICAgICAgICAvLyBPbmx5IHRyYXAgZm9jdXMgaWYgdGhpcyBtb2RhbCBpcyB0aGUgbGFzdCBtb2RlbCBvcGVuZWQgKHByZXZlbnRzIGxvb3BzIGluIG5lc3RlZCBtb2RhbHMpLg0KICAgICAgICBpZiAoIXRoaXMuZWwuY29udGFpbnMoZS50YXJnZXQpICYmIHRoaXMuX250aE1vZGFsT3BlbmVkID09PSBNb2RhbC5fbW9kYWxzT3Blbikgew0KICAgICAgICAgIHRoaXMuZWwuZm9jdXMoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEFuaW1hdGUgaW4gbW9kYWwNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2FuaW1hdGVJbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbigpIHsNCiAgICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOw0KDQogICAgICAgIC8vIFNldCBpbml0aWFsIHN0eWxlcw0KICAgICAgICAkLmV4dGVuZCh0aGlzLmVsLnN0eWxlLCB7DQogICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJywNCiAgICAgICAgICBvcGFjaXR5OiAwDQogICAgICAgIH0pOw0KICAgICAgICAkLmV4dGVuZCh0aGlzLiRvdmVybGF5WzBdLnN0eWxlLCB7DQogICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJywNCiAgICAgICAgICBvcGFjaXR5OiAwDQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIEFuaW1hdGUgb3ZlcmxheQ0KICAgICAgICBhbmltKHsNCiAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRvdmVybGF5WzBdLA0KICAgICAgICAgIG9wYWNpdHk6IHRoaXMub3B0aW9ucy5vcGFjaXR5LA0KICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuaW5EdXJhdGlvbiwNCiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gRGVmaW5lIG1vZGFsIGFuaW1hdGlvbiBvcHRpb25zDQogICAgICAgIHZhciBlbnRlckFuaW1PcHRpb25zID0gew0KICAgICAgICAgIHRhcmdldHM6IHRoaXMuZWwsDQogICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsDQogICAgICAgICAgLy8gSGFuZGxlIG1vZGFsIG9uT3BlbkVuZCBjYWxsYmFjaw0KICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTMub3B0aW9ucy5vbk9wZW5FbmQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgX3RoaXMxMy5vcHRpb25zLm9uT3BlbkVuZC5jYWxsKF90aGlzMTMsIF90aGlzMTMuZWwsIF90aGlzMTMuX29wZW5pbmdUcmlnZ2VyKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gQm90dG9tIHNoZWV0IGFuaW1hdGlvbg0KICAgICAgICBpZiAodGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvdHRvbS1zaGVldCcpKSB7DQogICAgICAgICAgJC5leHRlbmQoZW50ZXJBbmltT3B0aW9ucywgew0KICAgICAgICAgICAgYm90dG9tOiAwLA0KICAgICAgICAgICAgb3BhY2l0eTogMQ0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGFuaW0oZW50ZXJBbmltT3B0aW9ucyk7DQoNCiAgICAgICAgICAvLyBOb3JtYWwgbW9kYWwgYW5pbWF0aW9uDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgJC5leHRlbmQoZW50ZXJBbmltT3B0aW9ucywgew0KICAgICAgICAgICAgdG9wOiBbdGhpcy5vcHRpb25zLnN0YXJ0aW5nVG9wLCB0aGlzLm9wdGlvbnMuZW5kaW5nVG9wXSwNCiAgICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgICBzY2FsZVg6IFswLjgsIDFdLA0KICAgICAgICAgICAgc2NhbGVZOiBbMC44LCAxXQ0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGFuaW0oZW50ZXJBbmltT3B0aW9ucyk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBBbmltYXRlIG91dCBtb2RhbA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfYW5pbWF0ZU91dCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVPdXQoKSB7DQogICAgICAgIHZhciBfdGhpczE0ID0gdGhpczsNCg0KICAgICAgICAvLyBBbmltYXRlIG92ZXJsYXkNCiAgICAgICAgYW5pbSh7DQogICAgICAgICAgdGFyZ2V0czogdGhpcy4kb3ZlcmxheVswXSwNCiAgICAgICAgICBvcGFjaXR5OiAwLA0KICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMub3V0RHVyYXRpb24sDQogICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YXJ0Jw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBEZWZpbmUgbW9kYWwgYW5pbWF0aW9uIG9wdGlvbnMNCiAgICAgICAgdmFyIGV4aXRBbmltT3B0aW9ucyA9IHsNCiAgICAgICAgICB0YXJnZXRzOiB0aGlzLmVsLA0KICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMub3V0RHVyYXRpb24sDQogICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJywNCiAgICAgICAgICAvLyBIYW5kbGUgbW9kYWwgcmVhZHkgY2FsbGJhY2sNCiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgX3RoaXMxNC5lbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgX3RoaXMxNC4kb3ZlcmxheS5yZW1vdmUoKTsNCg0KICAgICAgICAgICAgLy8gQ2FsbCBvbkNsb3NlRW5kIGNhbGxiYWNrDQogICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTQub3B0aW9ucy5vbkNsb3NlRW5kID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgIF90aGlzMTQub3B0aW9ucy5vbkNsb3NlRW5kLmNhbGwoX3RoaXMxNCwgX3RoaXMxNC5lbCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIC8vIEJvdHRvbSBzaGVldCBhbmltYXRpb24NCiAgICAgICAgaWYgKHRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdib3R0b20tc2hlZXQnKSkgew0KICAgICAgICAgICQuZXh0ZW5kKGV4aXRBbmltT3B0aW9ucywgew0KICAgICAgICAgICAgYm90dG9tOiAnLTEwMCUnLA0KICAgICAgICAgICAgb3BhY2l0eTogMA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGFuaW0oZXhpdEFuaW1PcHRpb25zKTsNCg0KICAgICAgICAgIC8vIE5vcm1hbCBtb2RhbCBhbmltYXRpb24NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAkLmV4dGVuZChleGl0QW5pbU9wdGlvbnMsIHsNCiAgICAgICAgICAgIHRvcDogW3RoaXMub3B0aW9ucy5lbmRpbmdUb3AsIHRoaXMub3B0aW9ucy5zdGFydGluZ1RvcF0sDQogICAgICAgICAgICBvcGFjaXR5OiAwLA0KICAgICAgICAgICAgc2NhbGVYOiAwLjgsDQogICAgICAgICAgICBzY2FsZVk6IDAuOA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGFuaW0oZXhpdEFuaW1PcHRpb25zKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIE9wZW4gTW9kYWwNCiAgICAgICAqIEBwYXJhbSB7Y2FzaH0gWyR0cmlnZ2VyXQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJvcGVuIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKCR0cmlnZ2VyKSB7DQogICAgICAgIGlmICh0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTsNCiAgICAgICAgTW9kYWwuX21vZGFsc09wZW4rKzsNCiAgICAgICAgdGhpcy5fbnRoTW9kYWxPcGVuZWQgPSBNb2RhbC5fbW9kYWxzT3BlbjsNCg0KICAgICAgICAvLyBTZXQgWi1JbmRleCBiYXNlZCBvbiBudW1iZXIgb2YgY3VycmVudGx5IG9wZW4gbW9kYWxzDQogICAgICAgIHRoaXMuJG92ZXJsYXlbMF0uc3R5bGUuekluZGV4ID0gMTAwMCArIE1vZGFsLl9tb2RhbHNPcGVuICogMjsNCiAgICAgICAgdGhpcy5lbC5zdHlsZS56SW5kZXggPSAxMDAwICsgTW9kYWwuX21vZGFsc09wZW4gKiAyICsgMTsNCg0KICAgICAgICAvLyBTZXQgb3BlbmluZyB0cmlnZ2VyLCB1bmRlZmluZWQgaW5kaWNhdGVzIG1vZGFsIHdhcyBvcGVuZWQgYnkgamF2YXNjcmlwdA0KICAgICAgICB0aGlzLl9vcGVuaW5nVHJpZ2dlciA9ICEhJHRyaWdnZXIgPyAkdHJpZ2dlclswXSA6IHVuZGVmaW5lZDsNCg0KICAgICAgICAvLyBvbk9wZW5TdGFydCBjYWxsYmFjaw0KICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwsIHRoaXMuX29wZW5pbmdUcmlnZ2VyKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMucHJldmVudFNjcm9sbGluZykgew0KICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJzsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnb3BlbicpOw0KICAgICAgICB0aGlzLmVsLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCB0aGlzLiRvdmVybGF5WzBdKTsNCg0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc21pc3NpYmxlKSB7DQogICAgICAgICAgdGhpcy5faGFuZGxlS2V5ZG93bkJvdW5kID0gdGhpcy5faGFuZGxlS2V5ZG93bi5iaW5kKHRoaXMpOw0KICAgICAgICAgIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQgPSB0aGlzLl9oYW5kbGVGb2N1cy5iaW5kKHRoaXMpOw0KICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVLZXlkb3duQm91bmQpOw0KICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlRm9jdXNCb3VuZCwgdHJ1ZSk7DQogICAgICAgIH0NCg0KICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTsNCiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy4kb3ZlcmxheVswXSk7DQogICAgICAgIHRoaXMuX2FuaW1hdGVJbigpOw0KDQogICAgICAgIC8vIEZvY3VzIG1vZGFsDQogICAgICAgIHRoaXMuZWwuZm9jdXMoKTsNCg0KICAgICAgICByZXR1cm4gdGhpczsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBDbG9zZSBNb2RhbA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJjbG9zZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7DQogICAgICAgIGlmICghdGhpcy5pc09wZW4pIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlOw0KICAgICAgICBNb2RhbC5fbW9kYWxzT3Blbi0tOw0KICAgICAgICB0aGlzLl9udGhNb2RhbE9wZW5lZCA9IDA7DQoNCiAgICAgICAgLy8gQ2FsbCBvbkNsb3NlU3RhcnQgY2FsbGJhY2sNCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0ID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7DQoNCiAgICAgICAgLy8gRW5hYmxlIGJvZHkgc2Nyb2xsaW5nIG9ubHkgaWYgdGhlcmUgYXJlIG5vIG1vcmUgbW9kYWxzIG9wZW4uDQogICAgICAgIGlmIChNb2RhbC5fbW9kYWxzT3BlbiA9PT0gMCkgew0KICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJzsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzbWlzc2libGUpIHsNCiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlS2V5ZG93bkJvdW5kKTsNCiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQsIHRydWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5lbCk7DQogICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuJG92ZXJsYXlbMF0pOw0KICAgICAgICB0aGlzLl9hbmltYXRlT3V0KCk7DQogICAgICAgIHJldHVybiB0aGlzOw0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiaW5pdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9nZXQoTW9kYWwuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNb2RhbCksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBJbnN0YW5jZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRJbnN0YW5jZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHsNCiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7DQogICAgICAgIHJldHVybiBkb21FbGVtLk1fTW9kYWw7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiZGVmYXVsdHMiLA0KICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBfZGVmYXVsdHM7DQogICAgICB9DQogICAgfV0pOw0KDQogICAgcmV0dXJuIE1vZGFsOw0KICB9KENvbXBvbmVudCk7DQoNCiAgLyoqDQogICAqIEBzdGF0aWMNCiAgICogQG1lbWJlcm9mIE1vZGFsDQogICAqLw0KDQoNCiAgTW9kYWwuX21vZGFsc09wZW4gPSAwOw0KDQogIC8qKg0KICAgKiBAc3RhdGljDQogICAqIEBtZW1iZXJvZiBNb2RhbA0KICAgKi8NCiAgTW9kYWwuX2NvdW50ID0gMDsNCg0KICBNLk1vZGFsID0gTW9kYWw7DQoNCiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7DQogICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihNb2RhbCwgJ21vZGFsJywgJ01fTW9kYWwnKTsNCiAgfQ0KfSkoY2FzaCwgTS5hbmltZSk7DQo7KGZ1bmN0aW9uICgkLCBhbmltKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICB2YXIgX2RlZmF1bHRzID0gew0KICAgIGluRHVyYXRpb246IDI3NSwNCiAgICBvdXREdXJhdGlvbjogMjAwLA0KICAgIG9uT3BlblN0YXJ0OiBudWxsLA0KICAgIG9uT3BlbkVuZDogbnVsbCwNCiAgICBvbkNsb3NlU3RhcnQ6IG51bGwsDQogICAgb25DbG9zZUVuZDogbnVsbA0KICB9Ow0KDQogIC8qKg0KICAgKiBAY2xhc3MNCiAgICoNCiAgICovDQoNCiAgdmFyIE1hdGVyaWFsYm94ID0gZnVuY3Rpb24gKF9Db21wb25lbnQ0KSB7DQogICAgX2luaGVyaXRzKE1hdGVyaWFsYm94LCBfQ29tcG9uZW50NCk7DQoNCiAgICAvKioNCiAgICAgKiBDb25zdHJ1Y3QgTWF0ZXJpYWxib3ggaW5zdGFuY2UNCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsDQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBNYXRlcmlhbGJveChlbCwgb3B0aW9ucykgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1hdGVyaWFsYm94KTsNCg0KICAgICAgdmFyIF90aGlzMTUgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTWF0ZXJpYWxib3guX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXRlcmlhbGJveCkpLmNhbGwodGhpcywgTWF0ZXJpYWxib3gsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzMTUuZWwuTV9NYXRlcmlhbGJveCA9IF90aGlzMTU7DQoNCiAgICAgIC8qKg0KICAgICAgICogT3B0aW9ucyBmb3IgdGhlIG1vZGFsDQogICAgICAgKiBAbWVtYmVyIE1hdGVyaWFsYm94I29wdGlvbnMNCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtpbkR1cmF0aW9uPTI3NV0gLSBMZW5ndGggaW4gbXMgb2YgZW50ZXIgdHJhbnNpdGlvbg0KICAgICAgICogQHByb3Age051bWJlcn0gW291dER1cmF0aW9uPTIwMF0gLSBMZW5ndGggaW4gbXMgb2YgZXhpdCB0cmFuc2l0aW9uDQogICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlblN0YXJ0IC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGJlZm9yZSBtYXRlcmlhbGJveCBpcyBvcGVuZWQNCiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25PcGVuRW5kIC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGFmdGVyIG1hdGVyaWFsYm94IGlzIG9wZW5lZA0KICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkNsb3NlU3RhcnQgLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgYmVmb3JlIG1hdGVyaWFsYm94IGlzIGNsb3NlZA0KICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkNsb3NlRW5kIC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGFmdGVyIG1hdGVyaWFsYm94IGlzIGNsb3NlZA0KICAgICAgICovDQogICAgICBfdGhpczE1Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgTWF0ZXJpYWxib3guZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICBfdGhpczE1Lm92ZXJsYXlBY3RpdmUgPSBmYWxzZTsNCiAgICAgIF90aGlzMTUuZG9uZUFuaW1hdGluZyA9IHRydWU7DQogICAgICBfdGhpczE1LnBsYWNlaG9sZGVyID0gJCgnPGRpdj48L2Rpdj4nKS5hZGRDbGFzcygnbWF0ZXJpYWwtcGxhY2Vob2xkZXInKTsNCiAgICAgIF90aGlzMTUub3JpZ2luYWxXaWR0aCA9IDA7DQogICAgICBfdGhpczE1Lm9yaWdpbmFsSGVpZ2h0ID0gMDsNCiAgICAgIF90aGlzMTUub3JpZ2luSW5saW5lU3R5bGVzID0gX3RoaXMxNS4kZWwuYXR0cignc3R5bGUnKTsNCiAgICAgIF90aGlzMTUuY2FwdGlvbiA9IF90aGlzMTUuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWNhcHRpb24nKSB8fCAnJzsNCg0KICAgICAgLy8gV3JhcA0KICAgICAgX3RoaXMxNS4kZWwuYmVmb3JlKF90aGlzMTUucGxhY2Vob2xkZXIpOw0KICAgICAgX3RoaXMxNS5wbGFjZWhvbGRlci5hcHBlbmQoX3RoaXMxNS4kZWwpOw0KDQogICAgICBfdGhpczE1Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTsNCiAgICAgIHJldHVybiBfdGhpczE1Ow0KICAgIH0NCg0KICAgIF9jcmVhdGVDbGFzcyhNYXRlcmlhbGJveCwgW3sNCiAgICAgIGtleTogImRlc3Ryb3kiLA0KDQoNCiAgICAgIC8qKg0KICAgICAgICogVGVhcmRvd24gY29tcG9uZW50DQogICAgICAgKi8NCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkgew0KICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7DQogICAgICAgIHRoaXMuZWwuTV9NYXRlcmlhbGJveCA9IHVuZGVmaW5lZDsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLl9oYW5kbGVNYXRlcmlhbGJveENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVNYXRlcmlhbGJveENsaWNrLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVNYXRlcmlhbGJveENsaWNrQm91bmQpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfcmVtb3ZlRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVNYXRlcmlhbGJveENsaWNrQm91bmQpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBNYXRlcmlhbGJveCBDbGljaw0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlTWF0ZXJpYWxib3hDbGljayIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU1hdGVyaWFsYm94Q2xpY2soZSkgew0KICAgICAgICAvLyBJZiBhbHJlYWR5IG1vZGFsLCByZXR1cm4gdG8gb3JpZ2luYWwNCiAgICAgICAgaWYgKHRoaXMuZG9uZUFuaW1hdGluZyA9PT0gZmFsc2UgfHwgdGhpcy5vdmVybGF5QWN0aXZlICYmIHRoaXMuZG9uZUFuaW1hdGluZykgew0KICAgICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLm9wZW4oKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBXaW5kb3cgU2Nyb2xsDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVXaW5kb3dTY3JvbGwiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVXaW5kb3dTY3JvbGwoKSB7DQogICAgICAgIGlmICh0aGlzLm92ZXJsYXlBY3RpdmUpIHsNCiAgICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgV2luZG93IFJlc2l6ZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlV2luZG93UmVzaXplIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2luZG93UmVzaXplKCkgew0KICAgICAgICBpZiAodGhpcy5vdmVybGF5QWN0aXZlKSB7DQogICAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIFdpbmRvdyBSZXNpemUNCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZVdpbmRvd0VzY2FwZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVdpbmRvd0VzY2FwZShlKSB7DQogICAgICAgIC8vIEVTQyBrZXkNCiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcgJiYgdGhpcy5kb25lQW5pbWF0aW5nICYmIHRoaXMub3ZlcmxheUFjdGl2ZSkgew0KICAgICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEZpbmQgYW5jZXN0b3JzIHdpdGggb3ZlcmZsb3c6IGhpZGRlbjsgYW5kIG1ha2UgdmlzaWJsZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfbWFrZUFuY2VzdG9yc092ZXJmbG93VmlzaWJsZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX21ha2VBbmNlc3RvcnNPdmVyZmxvd1Zpc2libGUoKSB7DQogICAgICAgIHRoaXMuYW5jZXN0b3JzQ2hhbmdlZCA9ICQoKTsNCiAgICAgICAgdmFyIGFuY2VzdG9yID0gdGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlOw0KICAgICAgICB3aGlsZSAoYW5jZXN0b3IgIT09IG51bGwgJiYgISQoYW5jZXN0b3IpLmlzKGRvY3VtZW50KSkgew0KICAgICAgICAgIHZhciBjdXJyID0gJChhbmNlc3Rvcik7DQogICAgICAgICAgaWYgKGN1cnIuY3NzKCdvdmVyZmxvdycpICE9PSAndmlzaWJsZScpIHsNCiAgICAgICAgICAgIGN1cnIuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7DQogICAgICAgICAgICBpZiAodGhpcy5hbmNlc3RvcnNDaGFuZ2VkID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgdGhpcy5hbmNlc3RvcnNDaGFuZ2VkID0gY3VycjsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuYW5jZXN0b3JzQ2hhbmdlZCA9IHRoaXMuYW5jZXN0b3JzQ2hhbmdlZC5hZGQoY3Vycik7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50Tm9kZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEFuaW1hdGUgaW1hZ2UgaW4NCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2FuaW1hdGVJbWFnZUluIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUltYWdlSW4oKSB7DQogICAgICAgIHZhciBfdGhpczE2ID0gdGhpczsNCg0KICAgICAgICB2YXIgYW5pbU9wdGlvbnMgPSB7DQogICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCwNCiAgICAgICAgICBoZWlnaHQ6IFt0aGlzLm9yaWdpbmFsSGVpZ2h0LCB0aGlzLm5ld0hlaWdodF0sDQogICAgICAgICAgd2lkdGg6IFt0aGlzLm9yaWdpbmFsV2lkdGgsIHRoaXMubmV3V2lkdGhdLA0KICAgICAgICAgIGxlZnQ6IE0uZ2V0RG9jdW1lbnRTY3JvbGxMZWZ0KCkgKyB0aGlzLndpbmRvd1dpZHRoIC8gMiAtIHRoaXMucGxhY2Vob2xkZXIub2Zmc2V0KCkubGVmdCAtIHRoaXMubmV3V2lkdGggLyAyLA0KICAgICAgICAgIHRvcDogTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpICsgdGhpcy53aW5kb3dIZWlnaHQgLyAyIC0gdGhpcy5wbGFjZWhvbGRlci5vZmZzZXQoKS50b3AgLSB0aGlzLm5ld0hlaWdodCAvIDIsDQogICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywNCiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgX3RoaXMxNi5kb25lQW5pbWF0aW5nID0gdHJ1ZTsNCg0KICAgICAgICAgICAgLy8gb25PcGVuRW5kIGNhbGxiYWNrDQogICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTYub3B0aW9ucy5vbk9wZW5FbmQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgX3RoaXMxNi5vcHRpb25zLm9uT3BlbkVuZC5jYWxsKF90aGlzMTYsIF90aGlzMTYuZWwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICAvLyBPdmVycmlkZSBtYXgtd2lkdGggb3IgbWF4LWhlaWdodCBpZiBuZWVkZWQNCiAgICAgICAgdGhpcy5tYXhXaWR0aCA9IHRoaXMuJGVsLmNzcygnbWF4LXdpZHRoJyk7DQogICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gdGhpcy4kZWwuY3NzKCdtYXgtaGVpZ2h0Jyk7DQogICAgICAgIGlmICh0aGlzLm1heFdpZHRoICE9PSAnbm9uZScpIHsNCiAgICAgICAgICBhbmltT3B0aW9ucy5tYXhXaWR0aCA9IHRoaXMubmV3V2lkdGg7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMubWF4SGVpZ2h0ICE9PSAnbm9uZScpIHsNCiAgICAgICAgICBhbmltT3B0aW9ucy5tYXhIZWlnaHQgPSB0aGlzLm5ld0hlaWdodDsNCiAgICAgICAgfQ0KDQogICAgICAgIGFuaW0oYW5pbU9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEFuaW1hdGUgaW1hZ2Ugb3V0DQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hbmltYXRlSW1hZ2VPdXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlSW1hZ2VPdXQoKSB7DQogICAgICAgIHZhciBfdGhpczE3ID0gdGhpczsNCg0KICAgICAgICB2YXIgYW5pbU9wdGlvbnMgPSB7DQogICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCwNCiAgICAgICAgICB3aWR0aDogdGhpcy5vcmlnaW5hbFdpZHRoLA0KICAgICAgICAgIGhlaWdodDogdGhpcy5vcmlnaW5hbEhlaWdodCwNCiAgICAgICAgICBsZWZ0OiAwLA0KICAgICAgICAgIHRvcDogMCwNCiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywNCiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgX3RoaXMxNy5wbGFjZWhvbGRlci5jc3Moew0KICAgICAgICAgICAgICBoZWlnaHQ6ICcnLA0KICAgICAgICAgICAgICB3aWR0aDogJycsDQogICAgICAgICAgICAgIHBvc2l0aW9uOiAnJywNCiAgICAgICAgICAgICAgdG9wOiAnJywNCiAgICAgICAgICAgICAgbGVmdDogJycNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBSZXZlcnQgdG8gd2lkdGggb3IgaGVpZ2h0IGF0dHJpYnV0ZQ0KICAgICAgICAgICAgaWYgKF90aGlzMTcuYXR0cldpZHRoKSB7DQogICAgICAgICAgICAgIF90aGlzMTcuJGVsLmF0dHIoJ3dpZHRoJywgX3RoaXMxNy5hdHRyV2lkdGgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKF90aGlzMTcuYXR0ckhlaWdodCkgew0KICAgICAgICAgICAgICBfdGhpczE3LiRlbC5hdHRyKCdoZWlnaHQnLCBfdGhpczE3LmF0dHJIZWlnaHQpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBfdGhpczE3LiRlbC5yZW1vdmVBdHRyKCdzdHlsZScpOw0KICAgICAgICAgICAgX3RoaXMxNy4kZWwuYXR0cignc3R5bGUnLCBfdGhpczE3Lm9yaWdpbklubGluZVN0eWxlcyk7DQoNCiAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzcw0KICAgICAgICAgICAgX3RoaXMxNy4kZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgX3RoaXMxNy5kb25lQW5pbWF0aW5nID0gdHJ1ZTsNCg0KICAgICAgICAgICAgLy8gUmVtb3ZlIG92ZXJmbG93IG92ZXJyaWRlcyBvbiBhbmNlc3RvcnMNCiAgICAgICAgICAgIGlmIChfdGhpczE3LmFuY2VzdG9yc0NoYW5nZWQubGVuZ3RoKSB7DQogICAgICAgICAgICAgIF90aGlzMTcuYW5jZXN0b3JzQ2hhbmdlZC5jc3MoJ292ZXJmbG93JywgJycpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBvbkNsb3NlRW5kIGNhbGxiYWNrDQogICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTcub3B0aW9ucy5vbkNsb3NlRW5kID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgIF90aGlzMTcub3B0aW9ucy5vbkNsb3NlRW5kLmNhbGwoX3RoaXMxNywgX3RoaXMxNy5lbCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGFuaW0oYW5pbU9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFVwZGF0ZSBvcGVuIGFuZCBjbG9zZSB2YXJzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl91cGRhdGVWYXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlVmFycygpIHsNCiAgICAgICAgdGhpcy53aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOw0KICAgICAgICB0aGlzLndpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsNCiAgICAgICAgdGhpcy5jYXB0aW9uID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FwdGlvbicpIHx8ICcnOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIE9wZW4gTWF0ZXJpYWxib3gNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAib3BlbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbigpIHsNCiAgICAgICAgdmFyIF90aGlzMTggPSB0aGlzOw0KDQogICAgICAgIHRoaXMuX3VwZGF0ZVZhcnMoKTsNCiAgICAgICAgdGhpcy5vcmlnaW5hbFdpZHRoID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDsNCiAgICAgICAgdGhpcy5vcmlnaW5hbEhlaWdodCA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0Ow0KDQogICAgICAgIC8vIFNldCBzdGF0ZXMNCiAgICAgICAgdGhpcy5kb25lQW5pbWF0aW5nID0gZmFsc2U7DQogICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgdGhpcy5vdmVybGF5QWN0aXZlID0gdHJ1ZTsNCg0KICAgICAgICAvLyBvbk9wZW5TdGFydCBjYWxsYmFjaw0KICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU2V0IHBvc2l0aW9uaW5nIGZvciBwbGFjZWhvbGRlcg0KICAgICAgICB0aGlzLnBsYWNlaG9sZGVyLmNzcyh7DQogICAgICAgICAgd2lkdGg6IHRoaXMucGxhY2Vob2xkZXJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAncHgnLA0KICAgICAgICAgIGhlaWdodDogdGhpcy5wbGFjZWhvbGRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyAncHgnLA0KICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLA0KICAgICAgICAgIHRvcDogMCwNCiAgICAgICAgICBsZWZ0OiAwDQogICAgICAgIH0pOw0KDQogICAgICAgIHRoaXMuX21ha2VBbmNlc3RvcnNPdmVyZmxvd1Zpc2libGUoKTsNCg0KICAgICAgICAvLyBTZXQgY3NzIG9uIG9yaWdpbg0KICAgICAgICB0aGlzLiRlbC5jc3Moew0KICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLA0KICAgICAgICAgICd6LWluZGV4JzogMTAwMCwNCiAgICAgICAgICAnd2lsbC1jaGFuZ2UnOiAnbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0Jw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBDaGFuZ2UgZnJvbSB3aWR0aCBvciBoZWlnaHQgYXR0cmlidXRlIHRvIGNzcw0KICAgICAgICB0aGlzLmF0dHJXaWR0aCA9IHRoaXMuJGVsLmF0dHIoJ3dpZHRoJyk7DQogICAgICAgIHRoaXMuYXR0ckhlaWdodCA9IHRoaXMuJGVsLmF0dHIoJ2hlaWdodCcpOw0KICAgICAgICBpZiAodGhpcy5hdHRyV2lkdGgpIHsNCiAgICAgICAgICB0aGlzLiRlbC5jc3MoJ3dpZHRoJywgdGhpcy5hdHRyV2lkdGggKyAncHgnKTsNCiAgICAgICAgICB0aGlzLiRlbC5yZW1vdmVBdHRyKCd3aWR0aCcpOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLmF0dHJIZWlnaHQpIHsNCiAgICAgICAgICB0aGlzLiRlbC5jc3MoJ3dpZHRoJywgdGhpcy5hdHRySGVpZ2h0ICsgJ3B4Jyk7DQogICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQXR0cignaGVpZ2h0Jyk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBBZGQgb3ZlcmxheQ0KICAgICAgICB0aGlzLiRvdmVybGF5ID0gJCgnPGRpdiBpZD0ibWF0ZXJpYWxib3gtb3ZlcmxheSI+PC9kaXY+JykuY3NzKHsNCiAgICAgICAgICBvcGFjaXR5OiAwDQogICAgICAgIH0pLm9uZSgnY2xpY2snLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgaWYgKF90aGlzMTguZG9uZUFuaW1hdGluZykgew0KICAgICAgICAgICAgX3RoaXMxOC5jbG9zZSgpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gUHV0IGJlZm9yZSBpbiBvcmlnaW4gaW1hZ2UgdG8gcHJlc2VydmUgei1pbmRleCBsYXllcmluZy4NCiAgICAgICAgdGhpcy4kZWwuYmVmb3JlKHRoaXMuJG92ZXJsYXkpOw0KDQogICAgICAgIC8vIFNldCBkaW1lbnNpb25zIGlmIG5lZWRlZA0KICAgICAgICB2YXIgb3ZlcmxheU9mZnNldCA9IHRoaXMuJG92ZXJsYXlbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQogICAgICAgIHRoaXMuJG92ZXJsYXkuY3NzKHsNCiAgICAgICAgICB3aWR0aDogdGhpcy53aW5kb3dXaWR0aCArICdweCcsDQogICAgICAgICAgaGVpZ2h0OiB0aGlzLndpbmRvd0hlaWdodCArICdweCcsDQogICAgICAgICAgbGVmdDogLTEgKiBvdmVybGF5T2Zmc2V0LmxlZnQgKyAncHgnLA0KICAgICAgICAgIHRvcDogLTEgKiBvdmVybGF5T2Zmc2V0LnRvcCArICdweCcNCiAgICAgICAgfSk7DQoNCiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5lbCk7DQogICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuJG92ZXJsYXlbMF0pOw0KDQogICAgICAgIC8vIEFuaW1hdGUgT3ZlcmxheQ0KICAgICAgICBhbmltKHsNCiAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRvdmVybGF5WzBdLA0KICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBBZGQgYW5kIGFuaW1hdGUgY2FwdGlvbiBpZiBpdCBleGlzdHMNCiAgICAgICAgaWYgKHRoaXMuY2FwdGlvbiAhPT0gJycpIHsNCiAgICAgICAgICBpZiAodGhpcy4kcGhvdG9jYXB0aW9uKSB7DQogICAgICAgICAgICBhbmltLnJlbW92ZSh0aGlzLiRwaG90b0NhcHRpb25bMF0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLiRwaG90b0NhcHRpb24gPSAkKCc8ZGl2IGNsYXNzPSJtYXRlcmlhbGJveC1jYXB0aW9uIj48L2Rpdj4nKTsNCiAgICAgICAgICB0aGlzLiRwaG90b0NhcHRpb24udGV4dCh0aGlzLmNhcHRpb24pOw0KICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQodGhpcy4kcGhvdG9DYXB0aW9uKTsNCiAgICAgICAgICB0aGlzLiRwaG90b0NhcHRpb24uY3NzKHsgZGlzcGxheTogJ2lubGluZScgfSk7DQoNCiAgICAgICAgICBhbmltKHsNCiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuJHBob3RvQ2FwdGlvblswXSwNCiAgICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmluRHVyYXRpb24sDQogICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFJlc2l6ZSBJbWFnZQ0KICAgICAgICB2YXIgcmF0aW8gPSAwOw0KICAgICAgICB2YXIgd2lkdGhQZXJjZW50ID0gdGhpcy5vcmlnaW5hbFdpZHRoIC8gdGhpcy53aW5kb3dXaWR0aDsNCiAgICAgICAgdmFyIGhlaWdodFBlcmNlbnQgPSB0aGlzLm9yaWdpbmFsSGVpZ2h0IC8gdGhpcy53aW5kb3dIZWlnaHQ7DQogICAgICAgIHRoaXMubmV3V2lkdGggPSAwOw0KICAgICAgICB0aGlzLm5ld0hlaWdodCA9IDA7DQoNCiAgICAgICAgaWYgKHdpZHRoUGVyY2VudCA+IGhlaWdodFBlcmNlbnQpIHsNCiAgICAgICAgICByYXRpbyA9IHRoaXMub3JpZ2luYWxIZWlnaHQgLyB0aGlzLm9yaWdpbmFsV2lkdGg7DQogICAgICAgICAgdGhpcy5uZXdXaWR0aCA9IHRoaXMud2luZG93V2lkdGggKiAwLjk7DQogICAgICAgICAgdGhpcy5uZXdIZWlnaHQgPSB0aGlzLndpbmRvd1dpZHRoICogMC45ICogcmF0aW87DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmF0aW8gPSB0aGlzLm9yaWdpbmFsV2lkdGggLyB0aGlzLm9yaWdpbmFsSGVpZ2h0Ow0KICAgICAgICAgIHRoaXMubmV3V2lkdGggPSB0aGlzLndpbmRvd0hlaWdodCAqIDAuOSAqIHJhdGlvOw0KICAgICAgICAgIHRoaXMubmV3SGVpZ2h0ID0gdGhpcy53aW5kb3dIZWlnaHQgKiAwLjk7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLl9hbmltYXRlSW1hZ2VJbigpOw0KDQogICAgICAgIC8vIEhhbmRsZSBFeGl0IHRyaWdnZXJzDQogICAgICAgIHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbEJvdW5kID0gdGhpcy5faGFuZGxlV2luZG93U2Nyb2xsLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZUJvdW5kID0gdGhpcy5faGFuZGxlV2luZG93UmVzaXplLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZVdpbmRvd0VzY2FwZUJvdW5kID0gdGhpcy5faGFuZGxlV2luZG93RXNjYXBlLmJpbmQodGhpcyk7DQoNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbEJvdW5kKTsNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZUJvdW5kKTsNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlV2luZG93RXNjYXBlQm91bmQpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIENsb3NlIE1hdGVyaWFsYm94DQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImNsb3NlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHsNCiAgICAgICAgdmFyIF90aGlzMTkgPSB0aGlzOw0KDQogICAgICAgIHRoaXMuX3VwZGF0ZVZhcnMoKTsNCiAgICAgICAgdGhpcy5kb25lQW5pbWF0aW5nID0gZmFsc2U7DQoNCiAgICAgICAgLy8gb25DbG9zZVN0YXJ0IGNhbGxiYWNrDQogICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNsb3NlU3RhcnQuY2FsbCh0aGlzLCB0aGlzLmVsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZWwpOw0KICAgICAgICBhbmltLnJlbW92ZSh0aGlzLiRvdmVybGF5WzBdKTsNCg0KICAgICAgICBpZiAodGhpcy5jYXB0aW9uICE9PSAnJykgew0KICAgICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuJHBob3RvQ2FwdGlvblswXSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBkaXNhYmxlIGV4aXQgaGFuZGxlcnMNCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbEJvdW5kKTsNCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZUJvdW5kKTsNCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlV2luZG93RXNjYXBlQm91bmQpOw0KDQogICAgICAgIGFuaW0oew0KICAgICAgICAgIHRhcmdldHM6IHRoaXMuJG92ZXJsYXlbMF0sDQogICAgICAgICAgb3BhY2l0eTogMCwNCiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywNCiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgX3RoaXMxOS5vdmVybGF5QWN0aXZlID0gZmFsc2U7DQogICAgICAgICAgICBfdGhpczE5LiRvdmVybGF5LnJlbW92ZSgpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAgICAgdGhpcy5fYW5pbWF0ZUltYWdlT3V0KCk7DQoNCiAgICAgICAgLy8gUmVtb3ZlIENhcHRpb24gKyByZXNldCBjc3Mgc2V0dGluZ3Mgb24gaW1hZ2UNCiAgICAgICAgaWYgKHRoaXMuY2FwdGlvbiAhPT0gJycpIHsNCiAgICAgICAgICBhbmltKHsNCiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuJHBob3RvQ2FwdGlvblswXSwNCiAgICAgICAgICAgIG9wYWNpdHk6IDAsDQogICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLA0KICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLA0KICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgX3RoaXMxOS4kcGhvdG9DYXB0aW9uLnJlbW92ZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfV0sIFt7DQogICAgICBrZXk6ICJpbml0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX2dldChNYXRlcmlhbGJveC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hdGVyaWFsYm94KSwgImluaXQiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogR2V0IEluc3RhbmNlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImdldEluc3RhbmNlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkgew0KICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDsNCiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9NYXRlcmlhbGJveDsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJkZWZhdWx0cyIsDQogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIF9kZWZhdWx0czsNCiAgICAgIH0NCiAgICB9XSk7DQoNCiAgICByZXR1cm4gTWF0ZXJpYWxib3g7DQogIH0oQ29tcG9uZW50KTsNCg0KICBNLk1hdGVyaWFsYm94ID0gTWF0ZXJpYWxib3g7DQoNCiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7DQogICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihNYXRlcmlhbGJveCwgJ21hdGVyaWFsYm94JywgJ01fTWF0ZXJpYWxib3gnKTsNCiAgfQ0KfSkoY2FzaCwgTS5hbmltZSk7DQo7KGZ1bmN0aW9uICgkKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICB2YXIgX2RlZmF1bHRzID0gew0KICAgIHJlc3BvbnNpdmVUaHJlc2hvbGQ6IDAgLy8gYnJlYWtwb2ludCBmb3Igc3dpcGVhYmxlDQogIH07DQoNCiAgdmFyIFBhcmFsbGF4ID0gZnVuY3Rpb24gKF9Db21wb25lbnQ1KSB7DQogICAgX2luaGVyaXRzKFBhcmFsbGF4LCBfQ29tcG9uZW50NSk7DQoNCiAgICBmdW5jdGlvbiBQYXJhbGxheChlbCwgb3B0aW9ucykgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBhcmFsbGF4KTsNCg0KICAgICAgdmFyIF90aGlzMjAgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUGFyYWxsYXguX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQYXJhbGxheCkpLmNhbGwodGhpcywgUGFyYWxsYXgsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzMjAuZWwuTV9QYXJhbGxheCA9IF90aGlzMjA7DQoNCiAgICAgIC8qKg0KICAgICAgICogT3B0aW9ucyBmb3IgdGhlIFBhcmFsbGF4DQogICAgICAgKiBAbWVtYmVyIFBhcmFsbGF4I29wdGlvbnMNCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IHJlc3BvbnNpdmVUaHJlc2hvbGQNCiAgICAgICAqLw0KICAgICAgX3RoaXMyMC5vcHRpb25zID0gJC5leHRlbmQoe30sIFBhcmFsbGF4LmRlZmF1bHRzLCBvcHRpb25zKTsNCiAgICAgIF90aGlzMjAuX2VuYWJsZWQgPSB3aW5kb3cuaW5uZXJXaWR0aCA+IF90aGlzMjAub3B0aW9ucy5yZXNwb25zaXZlVGhyZXNob2xkOw0KDQogICAgICBfdGhpczIwLiRpbWcgPSBfdGhpczIwLiRlbC5maW5kKCdpbWcnKS5maXJzdCgpOw0KICAgICAgX3RoaXMyMC4kaW1nLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgZWwgPSB0aGlzOw0KICAgICAgICBpZiAoZWwuY29tcGxldGUpICQoZWwpLnRyaWdnZXIoJ2xvYWQnKTsNCiAgICAgIH0pOw0KDQogICAgICBfdGhpczIwLl91cGRhdGVQYXJhbGxheCgpOw0KICAgICAgX3RoaXMyMC5fc2V0dXBFdmVudEhhbmRsZXJzKCk7DQogICAgICBfdGhpczIwLl9zZXR1cFN0eWxlcygpOw0KDQogICAgICBQYXJhbGxheC5fcGFyYWxsYXhlcy5wdXNoKF90aGlzMjApOw0KICAgICAgcmV0dXJuIF90aGlzMjA7DQogICAgfQ0KDQogICAgX2NyZWF0ZUNsYXNzKFBhcmFsbGF4LCBbew0KICAgICAga2V5OiAiZGVzdHJveSIsDQoNCg0KICAgICAgLyoqDQogICAgICAgKiBUZWFyZG93biBjb21wb25lbnQNCiAgICAgICAqLw0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7DQogICAgICAgIFBhcmFsbGF4Ll9wYXJhbGxheGVzLnNwbGljZShQYXJhbGxheC5fcGFyYWxsYXhlcy5pbmRleE9mKHRoaXMpLCAxKTsNCiAgICAgICAgdGhpcy4kaW1nWzBdLnN0eWxlLnRyYW5zZm9ybSA9ICcnOw0KICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7DQoNCiAgICAgICAgdGhpcy4kZWxbMF0uTV9QYXJhbGxheCA9IHVuZGVmaW5lZDsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUxvYWRCb3VuZCA9IHRoaXMuX2hhbmRsZUltYWdlTG9hZC5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLiRpbWdbMF0uYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuX2hhbmRsZUltYWdlTG9hZEJvdW5kKTsNCg0KICAgICAgICBpZiAoUGFyYWxsYXguX3BhcmFsbGF4ZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgUGFyYWxsYXguX2hhbmRsZVNjcm9sbFRocm90dGxlZCA9IE0udGhyb3R0bGUoUGFyYWxsYXguX2hhbmRsZVNjcm9sbCwgNSk7DQogICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIFBhcmFsbGF4Ll9oYW5kbGVTY3JvbGxUaHJvdHRsZWQpOw0KDQogICAgICAgICAgUGFyYWxsYXguX2hhbmRsZVdpbmRvd1Jlc2l6ZVRocm90dGxlZCA9IE0udGhyb3R0bGUoUGFyYWxsYXguX2hhbmRsZVdpbmRvd1Jlc2l6ZSwgNSk7DQogICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIFBhcmFsbGF4Ll9oYW5kbGVXaW5kb3dSZXNpemVUaHJvdHRsZWQpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX3JlbW92ZUV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLiRpbWdbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuX2hhbmRsZUltYWdlTG9hZEJvdW5kKTsNCg0KICAgICAgICBpZiAoUGFyYWxsYXguX3BhcmFsbGF4ZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIFBhcmFsbGF4Ll9oYW5kbGVTY3JvbGxUaHJvdHRsZWQpOw0KICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBQYXJhbGxheC5faGFuZGxlV2luZG93UmVzaXplVGhyb3R0bGVkKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cFN0eWxlcyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwU3R5bGVzKCkgew0KICAgICAgICB0aGlzLiRpbWdbMF0uc3R5bGUub3BhY2l0eSA9IDE7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUltYWdlTG9hZCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUltYWdlTG9hZCgpIHsNCiAgICAgICAgdGhpcy5fdXBkYXRlUGFyYWxsYXgoKTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfdXBkYXRlUGFyYWxsYXgiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVQYXJhbGxheCgpIHsNCiAgICAgICAgdmFyIGNvbnRhaW5lckhlaWdodCA9IHRoaXMuJGVsLmhlaWdodCgpID4gMCA/IHRoaXMuZWwucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQgOiA1MDA7DQogICAgICAgIHZhciBpbWdIZWlnaHQgPSB0aGlzLiRpbWdbMF0ub2Zmc2V0SGVpZ2h0Ow0KICAgICAgICB2YXIgcGFyYWxsYXhEaXN0ID0gaW1nSGVpZ2h0IC0gY29udGFpbmVySGVpZ2h0Ow0KICAgICAgICB2YXIgYm90dG9tID0gdGhpcy4kZWwub2Zmc2V0KCkudG9wICsgY29udGFpbmVySGVpZ2h0Ow0KICAgICAgICB2YXIgdG9wID0gdGhpcy4kZWwub2Zmc2V0KCkudG9wOw0KICAgICAgICB2YXIgc2Nyb2xsVG9wID0gTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpOw0KICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0Ow0KICAgICAgICB2YXIgd2luZG93Qm90dG9tID0gc2Nyb2xsVG9wICsgd2luZG93SGVpZ2h0Ow0KICAgICAgICB2YXIgcGVyY2VudFNjcm9sbGVkID0gKHdpbmRvd0JvdHRvbSAtIHRvcCkgLyAoY29udGFpbmVySGVpZ2h0ICsgd2luZG93SGVpZ2h0KTsNCiAgICAgICAgdmFyIHBhcmFsbGF4ID0gcGFyYWxsYXhEaXN0ICogcGVyY2VudFNjcm9sbGVkOw0KDQogICAgICAgIGlmICghdGhpcy5fZW5hYmxlZCkgew0KICAgICAgICAgIHRoaXMuJGltZ1swXS5zdHlsZS50cmFuc2Zvcm0gPSAnJzsNCiAgICAgICAgfSBlbHNlIGlmIChib3R0b20gPiBzY3JvbGxUb3AgJiYgdG9wIDwgc2Nyb2xsVG9wICsgd2luZG93SGVpZ2h0KSB7DQogICAgICAgICAgdGhpcy4kaW1nWzBdLnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUzRCgtNTAlLCAiICsgcGFyYWxsYXggKyAicHgsIDApIjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiaW5pdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9nZXQoUGFyYWxsYXguX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQYXJhbGxheCksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBJbnN0YW5jZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRJbnN0YW5jZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHsNCiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7DQogICAgICAgIHJldHVybiBkb21FbGVtLk1fUGFyYWxsYXg7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZVNjcm9sbCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVNjcm9sbCgpIHsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBQYXJhbGxheC5fcGFyYWxsYXhlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHZhciBwYXJhbGxheEluc3RhbmNlID0gUGFyYWxsYXguX3BhcmFsbGF4ZXNbaV07DQogICAgICAgICAgcGFyYWxsYXhJbnN0YW5jZS5fdXBkYXRlUGFyYWxsYXguY2FsbChwYXJhbGxheEluc3RhbmNlKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVXaW5kb3dSZXNpemUiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVXaW5kb3dSZXNpemUoKSB7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgUGFyYWxsYXguX3BhcmFsbGF4ZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICB2YXIgcGFyYWxsYXhJbnN0YW5jZSA9IFBhcmFsbGF4Ll9wYXJhbGxheGVzW2ldOw0KICAgICAgICAgIHBhcmFsbGF4SW5zdGFuY2UuX2VuYWJsZWQgPSB3aW5kb3cuaW5uZXJXaWR0aCA+IHBhcmFsbGF4SW5zdGFuY2Uub3B0aW9ucy5yZXNwb25zaXZlVGhyZXNob2xkOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiZGVmYXVsdHMiLA0KICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBfZGVmYXVsdHM7DQogICAgICB9DQogICAgfV0pOw0KDQogICAgcmV0dXJuIFBhcmFsbGF4Ow0KICB9KENvbXBvbmVudCk7DQoNCiAgLyoqDQogICAqIEBzdGF0aWMNCiAgICogQG1lbWJlcm9mIFBhcmFsbGF4DQogICAqLw0KDQoNCiAgUGFyYWxsYXguX3BhcmFsbGF4ZXMgPSBbXTsNCg0KICBNLlBhcmFsbGF4ID0gUGFyYWxsYXg7DQoNCiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7DQogICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihQYXJhbGxheCwgJ3BhcmFsbGF4JywgJ01fUGFyYWxsYXgnKTsNCiAgfQ0KfSkoY2FzaCk7DQo7KGZ1bmN0aW9uICgkLCBhbmltKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICB2YXIgX2RlZmF1bHRzID0gew0KICAgIGR1cmF0aW9uOiAzMDAsDQogICAgb25TaG93OiBudWxsLA0KICAgIHN3aXBlYWJsZTogZmFsc2UsDQogICAgcmVzcG9uc2l2ZVRocmVzaG9sZDogSW5maW5pdHkgLy8gYnJlYWtwb2ludCBmb3Igc3dpcGVhYmxlDQogIH07DQoNCiAgLyoqDQogICAqIEBjbGFzcw0KICAgKg0KICAgKi8NCg0KICB2YXIgVGFicyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50Nikgew0KICAgIF9pbmhlcml0cyhUYWJzLCBfQ29tcG9uZW50Nik7DQoNCiAgICAvKioNCiAgICAgKiBDb25zdHJ1Y3QgVGFicyBpbnN0YW5jZQ0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIFRhYnMoZWwsIG9wdGlvbnMpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYWJzKTsNCg0KICAgICAgdmFyIF90aGlzMjEgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVGFicy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRhYnMpKS5jYWxsKHRoaXMsIFRhYnMsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzMjEuZWwuTV9UYWJzID0gX3RoaXMyMTsNCg0KICAgICAgLyoqDQogICAgICAgKiBPcHRpb25zIGZvciB0aGUgVGFicw0KICAgICAgICogQG1lbWJlciBUYWJzI29wdGlvbnMNCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IGR1cmF0aW9uDQogICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uU2hvdw0KICAgICAgICogQHByb3Age0Jvb2xlYW59IHN3aXBlYWJsZQ0KICAgICAgICogQHByb3Age051bWJlcn0gcmVzcG9uc2l2ZVRocmVzaG9sZA0KICAgICAgICovDQogICAgICBfdGhpczIxLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgVGFicy5kZWZhdWx0cywgb3B0aW9ucyk7DQoNCiAgICAgIC8vIFNldHVwDQogICAgICBfdGhpczIxLiR0YWJMaW5rcyA9IF90aGlzMjEuJGVsLmNoaWxkcmVuKCdsaS50YWInKS5jaGlsZHJlbignYScpOw0KICAgICAgX3RoaXMyMS5pbmRleCA9IDA7DQogICAgICBfdGhpczIxLl9zZXRUYWJzQW5kVGFiV2lkdGgoKTsNCiAgICAgIF90aGlzMjEuX3NldHVwQWN0aXZlVGFiTGluaygpOw0KICAgICAgX3RoaXMyMS5fY3JlYXRlSW5kaWNhdG9yKCk7DQoNCiAgICAgIGlmIChfdGhpczIxLm9wdGlvbnMuc3dpcGVhYmxlKSB7DQogICAgICAgIF90aGlzMjEuX3NldHVwU3dpcGVhYmxlVGFicygpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgX3RoaXMyMS5fc2V0dXBOb3JtYWxUYWJzKCk7DQogICAgICB9DQoNCiAgICAgIF90aGlzMjEuX3NldHVwRXZlbnRIYW5kbGVycygpOw0KICAgICAgcmV0dXJuIF90aGlzMjE7DQogICAgfQ0KDQogICAgX2NyZWF0ZUNsYXNzKFRhYnMsIFt7DQogICAgICBrZXk6ICJkZXN0cm95IiwNCg0KDQogICAgICAvKioNCiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudA0KICAgICAgICovDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsNCiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpOw0KICAgICAgICB0aGlzLl9pbmRpY2F0b3IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9pbmRpY2F0b3IpOw0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3dpcGVhYmxlKSB7DQogICAgICAgICAgdGhpcy5fdGVhcmRvd25Td2lwZWFibGVUYWJzKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5fdGVhcmRvd25Ob3JtYWxUYWJzKCk7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLiRlbFswXS5NX1RhYnMgPSB1bmRlZmluZWQ7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdGhpcy5faGFuZGxlV2luZG93UmVzaXplQm91bmQgPSB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemUuYmluZCh0aGlzKTsNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZUJvdW5kKTsNCg0KICAgICAgICB0aGlzLl9oYW5kbGVUYWJDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlVGFiQ2xpY2suYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVRhYkNsaWNrQm91bmQpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfcmVtb3ZlRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCk7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUYWJDbGlja0JvdW5kKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgd2luZG93IFJlc2l6ZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlV2luZG93UmVzaXplIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2luZG93UmVzaXplKCkgew0KICAgICAgICB0aGlzLl9zZXRUYWJzQW5kVGFiV2lkdGgoKTsNCg0KICAgICAgICBpZiAodGhpcy50YWJXaWR0aCAhPT0gMCAmJiB0aGlzLnRhYnNXaWR0aCAhPT0gMCkgew0KICAgICAgICAgIHRoaXMuX2luZGljYXRvci5zdHlsZS5sZWZ0ID0gdGhpcy5fY2FsY0xlZnRQb3ModGhpcy4kYWN0aXZlVGFiTGluaykgKyAncHgnOw0KICAgICAgICAgIHRoaXMuX2luZGljYXRvci5zdHlsZS5yaWdodCA9IHRoaXMuX2NhbGNSaWdodFBvcyh0aGlzLiRhY3RpdmVUYWJMaW5rKSArICdweCc7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgdGFiIGNsaWNrDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVUYWJDbGljayIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVRhYkNsaWNrKGUpIHsNCiAgICAgICAgdmFyIF90aGlzMjIgPSB0aGlzOw0KDQogICAgICAgIHZhciB0YWIgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaS50YWInKTsNCiAgICAgICAgdmFyIHRhYkxpbmsgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJyk7DQoNCiAgICAgICAgLy8gSGFuZGxlIGNsaWNrIG9uIHRhYiBsaW5rIG9ubHkNCiAgICAgICAgaWYgKCF0YWJMaW5rLmxlbmd0aCB8fCAhdGFiTGluay5wYXJlbnQoKS5oYXNDbGFzcygndGFiJykpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICBpZiAodGFiLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7DQogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEFjdCBhcyByZWd1bGFyIGxpbmsgaWYgdGFyZ2V0IGF0dHJpYnV0ZSBpcyBzcGVjaWZpZWQuDQogICAgICAgIGlmICghIXRhYkxpbmsuYXR0cigndGFyZ2V0JykpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLl9zZXRUYWJzQW5kVGFiV2lkdGgoKTsNCg0KICAgICAgICAvLyBNYWtlIHRoZSBvbGQgdGFiIGluYWN0aXZlLg0KICAgICAgICB0aGlzLiRhY3RpdmVUYWJMaW5rLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgdmFyICRvbGRDb250ZW50ID0gdGhpcy4kY29udGVudDsNCg0KICAgICAgICAvLyBVcGRhdGUgdGhlIHZhcmlhYmxlcyB3aXRoIHRoZSBuZXcgbGluayBhbmQgY29udGVudA0KICAgICAgICB0aGlzLiRhY3RpdmVUYWJMaW5rID0gdGFiTGluazsNCiAgICAgICAgdGhpcy4kY29udGVudCA9ICQoTS5lc2NhcGVIYXNoKHRhYkxpbmtbMF0uaGFzaCkpOw0KICAgICAgICB0aGlzLiR0YWJMaW5rcyA9IHRoaXMuJGVsLmNoaWxkcmVuKCdsaS50YWInKS5jaGlsZHJlbignYScpOw0KDQogICAgICAgIC8vIE1ha2UgdGhlIHRhYiBhY3RpdmUuDQogICAgICAgIHRoaXMuJGFjdGl2ZVRhYkxpbmsuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICB2YXIgcHJldkluZGV4ID0gdGhpcy5pbmRleDsNCiAgICAgICAgdGhpcy5pbmRleCA9IE1hdGgubWF4KHRoaXMuJHRhYkxpbmtzLmluZGV4KHRhYkxpbmspLCAwKTsNCg0KICAgICAgICAvLyBTd2FwIGNvbnRlbnQNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zd2lwZWFibGUpIHsNCiAgICAgICAgICBpZiAodGhpcy5fdGFic0Nhcm91c2VsKSB7DQogICAgICAgICAgICB0aGlzLl90YWJzQ2Fyb3VzZWwuc2V0KHRoaXMuaW5kZXgsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczIyLm9wdGlvbnMub25TaG93ID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgX3RoaXMyMi5vcHRpb25zLm9uU2hvdy5jYWxsKF90aGlzMjIsIF90aGlzMjIuJGNvbnRlbnRbMF0pOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKHRoaXMuJGNvbnRlbnQubGVuZ3RoKSB7DQogICAgICAgICAgICB0aGlzLiRjb250ZW50WzBdLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICAgICAgdGhpcy4kY29udGVudC5hZGRDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vblNob3cgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uU2hvdy5jYWxsKHRoaXMsIHRoaXMuJGNvbnRlbnRbMF0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoJG9sZENvbnRlbnQubGVuZ3RoICYmICEkb2xkQ29udGVudC5pcyh0aGlzLiRjb250ZW50KSkgew0KICAgICAgICAgICAgICAkb2xkQ29udGVudFswXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgICAkb2xkQ29udGVudC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcg0KICAgICAgICB0aGlzLl9hbmltYXRlSW5kaWNhdG9yKHByZXZJbmRleCk7DQoNCiAgICAgICAgLy8gUHJldmVudCB0aGUgYW5jaG9yJ3MgZGVmYXVsdCBjbGljayBhY3Rpb24NCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdlbmVyYXRlIGVsZW1lbnRzIGZvciB0YWIgaW5kaWNhdG9yLg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfY3JlYXRlSW5kaWNhdG9yIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlSW5kaWNhdG9yKCkgew0KICAgICAgICB2YXIgX3RoaXMyMyA9IHRoaXM7DQoNCiAgICAgICAgdmFyIGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7DQogICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdpbmRpY2F0b3InKTsNCg0KICAgICAgICB0aGlzLmVsLmFwcGVuZENoaWxkKGluZGljYXRvcik7DQogICAgICAgIHRoaXMuX2luZGljYXRvciA9IGluZGljYXRvcjsNCg0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBfdGhpczIzLl9pbmRpY2F0b3Iuc3R5bGUubGVmdCA9IF90aGlzMjMuX2NhbGNMZWZ0UG9zKF90aGlzMjMuJGFjdGl2ZVRhYkxpbmspICsgJ3B4JzsNCiAgICAgICAgICBfdGhpczIzLl9pbmRpY2F0b3Iuc3R5bGUucmlnaHQgPSBfdGhpczIzLl9jYWxjUmlnaHRQb3MoX3RoaXMyMy4kYWN0aXZlVGFiTGluaykgKyAncHgnOw0KICAgICAgICB9LCAwKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXR1cCBmaXJzdCBhY3RpdmUgdGFiIGxpbmsuDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cEFjdGl2ZVRhYkxpbmsiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEFjdGl2ZVRhYkxpbmsoKSB7DQogICAgICAgIC8vIElmIHRoZSBsb2NhdGlvbi5oYXNoIG1hdGNoZXMgb25lIG9mIHRoZSBsaW5rcywgdXNlIHRoYXQgYXMgdGhlIGFjdGl2ZSB0YWIuDQogICAgICAgIHRoaXMuJGFjdGl2ZVRhYkxpbmsgPSAkKHRoaXMuJHRhYkxpbmtzLmZpbHRlcignW2hyZWY9IicgKyBsb2NhdGlvbi5oYXNoICsgJyJdJykpOw0KDQogICAgICAgIC8vIElmIG5vIG1hdGNoIGlzIGZvdW5kLCB1c2UgdGhlIGZpcnN0IGxpbmsgb3IgYW55IHdpdGggY2xhc3MgJ2FjdGl2ZScgYXMgdGhlIGluaXRpYWwgYWN0aXZlIHRhYi4NCiAgICAgICAgaWYgKHRoaXMuJGFjdGl2ZVRhYkxpbmsubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgdGhpcy4kYWN0aXZlVGFiTGluayA9IHRoaXMuJGVsLmNoaWxkcmVuKCdsaS50YWInKS5jaGlsZHJlbignYS5hY3RpdmUnKS5maXJzdCgpOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLiRhY3RpdmVUYWJMaW5rLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgIHRoaXMuJGFjdGl2ZVRhYkxpbmsgPSB0aGlzLiRlbC5jaGlsZHJlbignbGkudGFiJykuY2hpbGRyZW4oJ2EnKS5maXJzdCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy4kdGFiTGlua3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICB0aGlzLiRhY3RpdmVUYWJMaW5rWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOw0KDQogICAgICAgIHRoaXMuaW5kZXggPSBNYXRoLm1heCh0aGlzLiR0YWJMaW5rcy5pbmRleCh0aGlzLiRhY3RpdmVUYWJMaW5rKSwgMCk7DQoNCiAgICAgICAgaWYgKHRoaXMuJGFjdGl2ZVRhYkxpbmsubGVuZ3RoKSB7DQogICAgICAgICAgdGhpcy4kY29udGVudCA9ICQoTS5lc2NhcGVIYXNoKHRoaXMuJGFjdGl2ZVRhYkxpbmtbMF0uaGFzaCkpOw0KICAgICAgICAgIHRoaXMuJGNvbnRlbnQuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgc3dpcGVhYmxlIHRhYnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwU3dpcGVhYmxlVGFicyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwU3dpcGVhYmxlVGFicygpIHsNCiAgICAgICAgdmFyIF90aGlzMjQgPSB0aGlzOw0KDQogICAgICAgIC8vIENoYW5nZSBzd2lwZWFibGUgYWNjb3JkaW5nIHRvIHJlc3BvbnNpdmUgdGhyZXNob2xkDQogICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IHRoaXMub3B0aW9ucy5yZXNwb25zaXZlVGhyZXNob2xkKSB7DQogICAgICAgICAgdGhpcy5vcHRpb25zLnN3aXBlYWJsZSA9IGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyICR0YWJzQ29udGVudCA9ICQoKTsNCiAgICAgICAgdGhpcy4kdGFiTGlua3MuZWFjaChmdW5jdGlvbiAobGluaykgew0KICAgICAgICAgIHZhciAkY3VyckNvbnRlbnQgPSAkKE0uZXNjYXBlSGFzaChsaW5rLmhhc2gpKTsNCiAgICAgICAgICAkY3VyckNvbnRlbnQuYWRkQ2xhc3MoJ2Nhcm91c2VsLWl0ZW0nKTsNCiAgICAgICAgICAkdGFic0NvbnRlbnQgPSAkdGFic0NvbnRlbnQuYWRkKCRjdXJyQ29udGVudCk7DQogICAgICAgIH0pOw0KDQogICAgICAgIHZhciAkdGFic1dyYXBwZXIgPSAkKCc8ZGl2IGNsYXNzPSJ0YWJzLWNvbnRlbnQgY2Fyb3VzZWwgY2Fyb3VzZWwtc2xpZGVyIj48L2Rpdj4nKTsNCiAgICAgICAgJHRhYnNDb250ZW50LmZpcnN0KCkuYmVmb3JlKCR0YWJzV3JhcHBlcik7DQogICAgICAgICR0YWJzV3JhcHBlci5hcHBlbmQoJHRhYnNDb250ZW50KTsNCiAgICAgICAgJHRhYnNDb250ZW50WzBdLnN0eWxlLmRpc3BsYXkgPSAnJzsNCg0KICAgICAgICAvLyBLZWVwIGFjdGl2ZSB0YWIgaW5kZXggdG8gc2V0IGluaXRpYWwgY2Fyb3VzZWwgc2xpZGUNCiAgICAgICAgdmFyIGFjdGl2ZVRhYkluZGV4ID0gdGhpcy4kYWN0aXZlVGFiTGluay5jbG9zZXN0KCcudGFiJykuaW5kZXgoKTsNCg0KICAgICAgICB0aGlzLl90YWJzQ2Fyb3VzZWwgPSBNLkNhcm91c2VsLmluaXQoJHRhYnNXcmFwcGVyWzBdLCB7DQogICAgICAgICAgZnVsbFdpZHRoOiB0cnVlLA0KICAgICAgICAgIG5vV3JhcDogdHJ1ZSwNCiAgICAgICAgICBvbkN5Y2xlVG86IGZ1bmN0aW9uIChpdGVtKSB7DQogICAgICAgICAgICB2YXIgcHJldkluZGV4ID0gX3RoaXMyNC5pbmRleDsNCiAgICAgICAgICAgIF90aGlzMjQuaW5kZXggPSAkKGl0ZW0pLmluZGV4KCk7DQogICAgICAgICAgICBfdGhpczI0LiRhY3RpdmVUYWJMaW5rLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgIF90aGlzMjQuJGFjdGl2ZVRhYkxpbmsgPSBfdGhpczI0LiR0YWJMaW5rcy5lcShfdGhpczI0LmluZGV4KTsNCiAgICAgICAgICAgIF90aGlzMjQuJGFjdGl2ZVRhYkxpbmsuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgX3RoaXMyNC5fYW5pbWF0ZUluZGljYXRvcihwcmV2SW5kZXgpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczI0Lm9wdGlvbnMub25TaG93ID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgIF90aGlzMjQub3B0aW9ucy5vblNob3cuY2FsbChfdGhpczI0LCBfdGhpczI0LiRjb250ZW50WzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIFNldCBpbml0aWFsIGNhcm91c2VsIHNsaWRlIHRvIGFjdGl2ZSB0YWINCiAgICAgICAgdGhpcy5fdGFic0Nhcm91c2VsLnNldChhY3RpdmVUYWJJbmRleCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogVGVhcmRvd24gbm9ybWFsIHRhYnMuDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl90ZWFyZG93blN3aXBlYWJsZVRhYnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90ZWFyZG93blN3aXBlYWJsZVRhYnMoKSB7DQogICAgICAgIHZhciAkdGFic1dyYXBwZXIgPSB0aGlzLl90YWJzQ2Fyb3VzZWwuJGVsOw0KICAgICAgICB0aGlzLl90YWJzQ2Fyb3VzZWwuZGVzdHJveSgpOw0KDQogICAgICAgIC8vIFVud3JhcA0KICAgICAgICAkdGFic1dyYXBwZXIuYWZ0ZXIoJHRhYnNXcmFwcGVyLmNoaWxkcmVuKCkpOw0KICAgICAgICAkdGFic1dyYXBwZXIucmVtb3ZlKCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgbm9ybWFsIHRhYnMuDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cE5vcm1hbFRhYnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cE5vcm1hbFRhYnMoKSB7DQogICAgICAgIC8vIEhpZGUgVGFicyBDb250ZW50DQogICAgICAgIHRoaXMuJHRhYkxpbmtzLm5vdCh0aGlzLiRhY3RpdmVUYWJMaW5rKS5lYWNoKGZ1bmN0aW9uIChsaW5rKSB7DQogICAgICAgICAgaWYgKCEhbGluay5oYXNoKSB7DQogICAgICAgICAgICB2YXIgJGN1cnJDb250ZW50ID0gJChNLmVzY2FwZUhhc2gobGluay5oYXNoKSk7DQogICAgICAgICAgICBpZiAoJGN1cnJDb250ZW50Lmxlbmd0aCkgew0KICAgICAgICAgICAgICAkY3VyckNvbnRlbnRbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFRlYXJkb3duIG5vcm1hbCB0YWJzLg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfdGVhcmRvd25Ob3JtYWxUYWJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdGVhcmRvd25Ob3JtYWxUYWJzKCkgew0KICAgICAgICAvLyBzaG93IFRhYnMgQ29udGVudA0KICAgICAgICB0aGlzLiR0YWJMaW5rcy5lYWNoKGZ1bmN0aW9uIChsaW5rKSB7DQogICAgICAgICAgaWYgKCEhbGluay5oYXNoKSB7DQogICAgICAgICAgICB2YXIgJGN1cnJDb250ZW50ID0gJChNLmVzY2FwZUhhc2gobGluay5oYXNoKSk7DQogICAgICAgICAgICBpZiAoJGN1cnJDb250ZW50Lmxlbmd0aCkgew0KICAgICAgICAgICAgICAkY3VyckNvbnRlbnRbMF0uc3R5bGUuZGlzcGxheSA9ICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogc2V0IHRhYnMgYW5kIHRhYiB3aWR0aA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0VGFic0FuZFRhYldpZHRoIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0VGFic0FuZFRhYldpZHRoKCkgew0KICAgICAgICB0aGlzLnRhYnNXaWR0aCA9IHRoaXMuJGVsLndpZHRoKCk7DQogICAgICAgIHRoaXMudGFiV2lkdGggPSBNYXRoLm1heCh0aGlzLnRhYnNXaWR0aCwgdGhpcy5lbC5zY3JvbGxXaWR0aCkgLyB0aGlzLiR0YWJMaW5rcy5sZW5ndGg7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogRmluZHMgcmlnaHQgYXR0cmlidXRlIGZvciBpbmRpY2F0b3IgYmFzZWQgb24gYWN0aXZlIHRhYi4NCiAgICAgICAqIEBwYXJhbSB7Y2FzaH0gZWwNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2NhbGNSaWdodFBvcyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2NhbGNSaWdodFBvcyhlbCkgew0KICAgICAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMudGFic1dpZHRoIC0gZWwucG9zaXRpb24oKS5sZWZ0IC0gZWxbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEZpbmRzIGxlZnQgYXR0cmlidXRlIGZvciBpbmRpY2F0b3IgYmFzZWQgb24gYWN0aXZlIHRhYi4NCiAgICAgICAqIEBwYXJhbSB7Y2FzaH0gZWwNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2NhbGNMZWZ0UG9zIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2FsY0xlZnRQb3MoZWwpIHsNCiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoZWwucG9zaXRpb24oKS5sZWZ0KTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJ1cGRhdGVUYWJJbmRpY2F0b3IiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRhYkluZGljYXRvcigpIHsNCiAgICAgICAgdGhpcy5fYW5pbWF0ZUluZGljYXRvcih0aGlzLmluZGV4KTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBBbmltYXRlcyBJbmRpY2F0b3IgdG8gYWN0aXZlIHRhYi4NCiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcmV2SW5kZXgNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2FuaW1hdGVJbmRpY2F0b3IiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlSW5kaWNhdG9yKHByZXZJbmRleCkgew0KICAgICAgICB2YXIgbGVmdERlbGF5ID0gMCwNCiAgICAgICAgICAgIHJpZ2h0RGVsYXkgPSAwOw0KDQogICAgICAgIGlmICh0aGlzLmluZGV4IC0gcHJldkluZGV4ID49IDApIHsNCiAgICAgICAgICBsZWZ0RGVsYXkgPSA5MDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByaWdodERlbGF5ID0gOTA7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBBbmltYXRlDQogICAgICAgIHZhciBhbmltT3B0aW9ucyA9IHsNCiAgICAgICAgICB0YXJnZXRzOiB0aGlzLl9pbmRpY2F0b3IsDQogICAgICAgICAgbGVmdDogew0KICAgICAgICAgICAgdmFsdWU6IHRoaXMuX2NhbGNMZWZ0UG9zKHRoaXMuJGFjdGl2ZVRhYkxpbmspLA0KICAgICAgICAgICAgZGVsYXk6IGxlZnREZWxheQ0KICAgICAgICAgIH0sDQogICAgICAgICAgcmlnaHQ6IHsNCiAgICAgICAgICAgIHZhbHVlOiB0aGlzLl9jYWxjUmlnaHRQb3ModGhpcy4kYWN0aXZlVGFiTGluayksDQogICAgICAgICAgICBkZWxheTogcmlnaHREZWxheQ0KICAgICAgICAgIH0sDQogICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5kdXJhdGlvbiwNCiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcNCiAgICAgICAgfTsNCiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5faW5kaWNhdG9yKTsNCiAgICAgICAgYW5pbShhbmltT3B0aW9ucyk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2VsZWN0IHRhYi4NCiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0YWJJZA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJzZWxlY3QiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdCh0YWJJZCkgew0KICAgICAgICB2YXIgdGFiID0gdGhpcy4kdGFiTGlua3MuZmlsdGVyKCdbaHJlZj0iIycgKyB0YWJJZCArICciXScpOw0KICAgICAgICBpZiAodGFiLmxlbmd0aCkgew0KICAgICAgICAgIHRhYi50cmlnZ2VyKCdjbGljaycpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfV0sIFt7DQogICAgICBrZXk6ICJpbml0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX2dldChUYWJzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGFicyksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBJbnN0YW5jZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRJbnN0YW5jZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHsNCiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7DQogICAgICAgIHJldHVybiBkb21FbGVtLk1fVGFiczsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJkZWZhdWx0cyIsDQogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIF9kZWZhdWx0czsNCiAgICAgIH0NCiAgICB9XSk7DQoNCiAgICByZXR1cm4gVGFiczsNCiAgfShDb21wb25lbnQpOw0KDQogIHdpbmRvdy5NLlRhYnMgPSBUYWJzOw0KDQogIGlmIChNLmpRdWVyeUxvYWRlZCkgew0KICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoVGFicywgJ3RhYnMnLCAnTV9UYWJzJyk7DQogIH0NCn0pKGNhc2gsIE0uYW5pbWUpOw0KOyhmdW5jdGlvbiAoJCwgYW5pbSkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgdmFyIF9kZWZhdWx0cyA9IHsNCiAgICBleGl0RGVsYXk6IDIwMCwNCiAgICBlbnRlckRlbGF5OiAwLA0KICAgIGh0bWw6IG51bGwsDQogICAgbWFyZ2luOiA1LA0KICAgIGluRHVyYXRpb246IDI1MCwNCiAgICBvdXREdXJhdGlvbjogMjAwLA0KICAgIHBvc2l0aW9uOiAnYm90dG9tJywNCiAgICB0cmFuc2l0aW9uTW92ZW1lbnQ6IDEwDQogIH07DQoNCiAgLyoqDQogICAqIEBjbGFzcw0KICAgKg0KICAgKi8NCg0KICB2YXIgVG9vbHRpcCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50Nykgew0KICAgIF9pbmhlcml0cyhUb29sdGlwLCBfQ29tcG9uZW50Nyk7DQoNCiAgICAvKioNCiAgICAgKiBDb25zdHJ1Y3QgVG9vbHRpcCBpbnN0YW5jZQ0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIFRvb2x0aXAoZWwsIG9wdGlvbnMpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUb29sdGlwKTsNCg0KICAgICAgdmFyIF90aGlzMjUgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVG9vbHRpcC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRvb2x0aXApKS5jYWxsKHRoaXMsIFRvb2x0aXAsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzMjUuZWwuTV9Ub29sdGlwID0gX3RoaXMyNTsNCiAgICAgIF90aGlzMjUub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBUb29sdGlwLmRlZmF1bHRzLCBvcHRpb25zKTsNCg0KICAgICAgX3RoaXMyNS5pc09wZW4gPSBmYWxzZTsNCiAgICAgIF90aGlzMjUuaXNIb3ZlcmVkID0gZmFsc2U7DQogICAgICBfdGhpczI1LmlzRm9jdXNlZCA9IGZhbHNlOw0KICAgICAgX3RoaXMyNS5fYXBwZW5kVG9vbHRpcEVsKCk7DQogICAgICBfdGhpczI1Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTsNCiAgICAgIHJldHVybiBfdGhpczI1Ow0KICAgIH0NCg0KICAgIF9jcmVhdGVDbGFzcyhUb29sdGlwLCBbew0KICAgICAga2V5OiAiZGVzdHJveSIsDQoNCg0KICAgICAgLyoqDQogICAgICAgKiBUZWFyZG93biBjb21wb25lbnQNCiAgICAgICAqLw0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7DQogICAgICAgICQodGhpcy50b29sdGlwRWwpLnJlbW92ZSgpOw0KICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7DQogICAgICAgIHRoaXMuZWwuTV9Ub29sdGlwID0gdW5kZWZpbmVkOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hcHBlbmRUb29sdGlwRWwiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBlbmRUb29sdGlwRWwoKSB7DQogICAgICAgIHZhciB0b29sdGlwRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgdG9vbHRpcEVsLmNsYXNzTGlzdC5hZGQoJ21hdGVyaWFsLXRvb2x0aXAnKTsNCiAgICAgICAgdGhpcy50b29sdGlwRWwgPSB0b29sdGlwRWw7DQoNCiAgICAgICAgdmFyIHRvb2x0aXBDb250ZW50RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgdG9vbHRpcENvbnRlbnRFbC5jbGFzc0xpc3QuYWRkKCd0b29sdGlwLWNvbnRlbnQnKTsNCiAgICAgICAgdG9vbHRpcENvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLm9wdGlvbnMuaHRtbDsNCiAgICAgICAgdG9vbHRpcEVsLmFwcGVuZENoaWxkKHRvb2x0aXBDb250ZW50RWwpOw0KICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvb2x0aXBFbCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX3VwZGF0ZVRvb2x0aXBDb250ZW50IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlVG9vbHRpcENvbnRlbnQoKSB7DQogICAgICAgIHRoaXMudG9vbHRpcEVsLnF1ZXJ5U2VsZWN0b3IoJy50b29sdGlwLWNvbnRlbnQnKS5pbm5lckhUTUwgPSB0aGlzLm9wdGlvbnMuaHRtbDsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLl9oYW5kbGVNb3VzZUVudGVyQm91bmQgPSB0aGlzLl9oYW5kbGVNb3VzZUVudGVyLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCA9IHRoaXMuX2hhbmRsZU1vdXNlTGVhdmUuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlRm9jdXNCb3VuZCA9IHRoaXMuX2hhbmRsZUZvY3VzLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZUJsdXJCb3VuZCA9IHRoaXMuX2hhbmRsZUJsdXIuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlTW91c2VMZWF2ZUJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQsIHRydWUpOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVCbHVyQm91bmQsIHRydWUpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlTW91c2VMZWF2ZUJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQsIHRydWUpOw0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVCbHVyQm91bmQsIHRydWUpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIm9wZW4iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7DQogICAgICAgIGlmICh0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7DQogICAgICAgIC8vIFVwZGF0ZSB0b29sdGlwIGNvbnRlbnQgd2l0aCBIVE1MIGF0dHJpYnV0ZSBvcHRpb25zDQogICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIHRoaXMuX2dldEF0dHJpYnV0ZU9wdGlvbnMoKSk7DQogICAgICAgIHRoaXMuX3VwZGF0ZVRvb2x0aXBDb250ZW50KCk7DQogICAgICAgIHRoaXMuX3NldEVudGVyRGVsYXlUaW1lb3V0KCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiY2xvc2UiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKCkgew0KICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5pc0hvdmVyZWQgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsNCiAgICAgICAgdGhpcy5fc2V0RXhpdERlbGF5VGltZW91dCgpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIENyZWF0ZSB0aW1lb3V0IHdoaWNoIGRlbGF5cyB3aGVuIHRoZSB0b29sdGlwIGNsb3Nlcw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0RXhpdERlbGF5VGltZW91dCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldEV4aXREZWxheVRpbWVvdXQoKSB7DQogICAgICAgIHZhciBfdGhpczI2ID0gdGhpczsNCg0KICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fZXhpdERlbGF5VGltZW91dCk7DQoNCiAgICAgICAgdGhpcy5fZXhpdERlbGF5VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGlmIChfdGhpczI2LmlzSG92ZXJlZCB8fCBfdGhpczI2LmlzRm9jdXNlZCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIF90aGlzMjYuX2FuaW1hdGVPdXQoKTsNCiAgICAgICAgfSwgdGhpcy5vcHRpb25zLmV4aXREZWxheSk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQ3JlYXRlIHRpbWVvdXQgd2hpY2ggZGVsYXlzIHdoZW4gdGhlIHRvYXN0IGNsb3Nlcw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0RW50ZXJEZWxheVRpbWVvdXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRFbnRlckRlbGF5VGltZW91dCgpIHsNCiAgICAgICAgdmFyIF90aGlzMjcgPSB0aGlzOw0KDQogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9lbnRlckRlbGF5VGltZW91dCk7DQoNCiAgICAgICAgdGhpcy5fZW50ZXJEZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoIV90aGlzMjcuaXNIb3ZlcmVkICYmICFfdGhpczI3LmlzRm9jdXNlZCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIF90aGlzMjcuX2FuaW1hdGVJbigpOw0KICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZW50ZXJEZWxheSk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX3Bvc2l0aW9uVG9vbHRpcCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3Bvc2l0aW9uVG9vbHRpcCgpIHsNCiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZWwsDQogICAgICAgICAgICB0b29sdGlwID0gdGhpcy50b29sdGlwRWwsDQogICAgICAgICAgICBvcmlnaW5IZWlnaHQgPSBvcmlnaW4ub2Zmc2V0SGVpZ2h0LA0KICAgICAgICAgICAgb3JpZ2luV2lkdGggPSBvcmlnaW4ub2Zmc2V0V2lkdGgsDQogICAgICAgICAgICB0b29sdGlwSGVpZ2h0ID0gdG9vbHRpcC5vZmZzZXRIZWlnaHQsDQogICAgICAgICAgICB0b29sdGlwV2lkdGggPSB0b29sdGlwLm9mZnNldFdpZHRoLA0KICAgICAgICAgICAgbmV3Q29vcmRpbmF0ZXMgPSB2b2lkIDAsDQogICAgICAgICAgICBtYXJnaW4gPSB0aGlzLm9wdGlvbnMubWFyZ2luLA0KICAgICAgICAgICAgdGFyZ2V0VG9wID0gdm9pZCAwLA0KICAgICAgICAgICAgdGFyZ2V0TGVmdCA9IHZvaWQgMDsNCg0KICAgICAgICB0aGlzLnhNb3ZlbWVudCA9IDAsIHRoaXMueU1vdmVtZW50ID0gMDsNCg0KICAgICAgICB0YXJnZXRUb3AgPSBvcmlnaW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpOw0KICAgICAgICB0YXJnZXRMZWZ0ID0gb3JpZ2luLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyBNLmdldERvY3VtZW50U2Nyb2xsTGVmdCgpOw0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMucG9zaXRpb24gPT09ICd0b3AnKSB7DQogICAgICAgICAgdGFyZ2V0VG9wICs9IC10b29sdGlwSGVpZ2h0IC0gbWFyZ2luOw0KICAgICAgICAgIHRhcmdldExlZnQgKz0gb3JpZ2luV2lkdGggLyAyIC0gdG9vbHRpcFdpZHRoIC8gMjsNCiAgICAgICAgICB0aGlzLnlNb3ZlbWVudCA9IC10aGlzLm9wdGlvbnMudHJhbnNpdGlvbk1vdmVtZW50Ow0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gJ3JpZ2h0Jykgew0KICAgICAgICAgIHRhcmdldFRvcCArPSBvcmlnaW5IZWlnaHQgLyAyIC0gdG9vbHRpcEhlaWdodCAvIDI7DQogICAgICAgICAgdGFyZ2V0TGVmdCArPSBvcmlnaW5XaWR0aCArIG1hcmdpbjsNCiAgICAgICAgICB0aGlzLnhNb3ZlbWVudCA9IHRoaXMub3B0aW9ucy50cmFuc2l0aW9uTW92ZW1lbnQ7DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSAnbGVmdCcpIHsNCiAgICAgICAgICB0YXJnZXRUb3AgKz0gb3JpZ2luSGVpZ2h0IC8gMiAtIHRvb2x0aXBIZWlnaHQgLyAyOw0KICAgICAgICAgIHRhcmdldExlZnQgKz0gLXRvb2x0aXBXaWR0aCAtIG1hcmdpbjsNCiAgICAgICAgICB0aGlzLnhNb3ZlbWVudCA9IC10aGlzLm9wdGlvbnMudHJhbnNpdGlvbk1vdmVtZW50Ow0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRhcmdldFRvcCArPSBvcmlnaW5IZWlnaHQgKyBtYXJnaW47DQogICAgICAgICAgdGFyZ2V0TGVmdCArPSBvcmlnaW5XaWR0aCAvIDIgLSB0b29sdGlwV2lkdGggLyAyOw0KICAgICAgICAgIHRoaXMueU1vdmVtZW50ID0gdGhpcy5vcHRpb25zLnRyYW5zaXRpb25Nb3ZlbWVudDsNCiAgICAgICAgfQ0KDQogICAgICAgIG5ld0Nvb3JkaW5hdGVzID0gdGhpcy5fcmVwb3NpdGlvbldpdGhpblNjcmVlbih0YXJnZXRMZWZ0LCB0YXJnZXRUb3AsIHRvb2x0aXBXaWR0aCwgdG9vbHRpcEhlaWdodCk7DQogICAgICAgICQodG9vbHRpcCkuY3NzKHsNCiAgICAgICAgICB0b3A6IG5ld0Nvb3JkaW5hdGVzLnkgKyAncHgnLA0KICAgICAgICAgIGxlZnQ6IG5ld0Nvb3JkaW5hdGVzLnggKyAncHgnDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZXBvc2l0aW9uV2l0aGluU2NyZWVuIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVwb3NpdGlvbldpdGhpblNjcmVlbih4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7DQogICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gTS5nZXREb2N1bWVudFNjcm9sbExlZnQoKTsNCiAgICAgICAgdmFyIHNjcm9sbFRvcCA9IE0uZ2V0RG9jdW1lbnRTY3JvbGxUb3AoKTsNCiAgICAgICAgdmFyIG5ld1ggPSB4IC0gc2Nyb2xsTGVmdDsNCiAgICAgICAgdmFyIG5ld1kgPSB5IC0gc2Nyb2xsVG9wOw0KDQogICAgICAgIHZhciBib3VuZGluZyA9IHsNCiAgICAgICAgICBsZWZ0OiBuZXdYLA0KICAgICAgICAgIHRvcDogbmV3WSwNCiAgICAgICAgICB3aWR0aDogd2lkdGgsDQogICAgICAgICAgaGVpZ2h0OiBoZWlnaHQNCiAgICAgICAgfTsNCg0KICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy5vcHRpb25zLm1hcmdpbiArIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uTW92ZW1lbnQ7DQogICAgICAgIHZhciBlZGdlcyA9IE0uY2hlY2tXaXRoaW5Db250YWluZXIoZG9jdW1lbnQuYm9keSwgYm91bmRpbmcsIG9mZnNldCk7DQoNCiAgICAgICAgaWYgKGVkZ2VzLmxlZnQpIHsNCiAgICAgICAgICBuZXdYID0gb2Zmc2V0Ow0KICAgICAgICB9IGVsc2UgaWYgKGVkZ2VzLnJpZ2h0KSB7DQogICAgICAgICAgbmV3WCAtPSBuZXdYICsgd2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aDsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChlZGdlcy50b3ApIHsNCiAgICAgICAgICBuZXdZID0gb2Zmc2V0Ow0KICAgICAgICB9IGVsc2UgaWYgKGVkZ2VzLmJvdHRvbSkgew0KICAgICAgICAgIG5ld1kgLT0gbmV3WSArIGhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodDsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgeDogbmV3WCArIHNjcm9sbExlZnQsDQogICAgICAgICAgeTogbmV3WSArIHNjcm9sbFRvcA0KICAgICAgICB9Ow0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hbmltYXRlSW4iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlSW4oKSB7DQogICAgICAgIHRoaXMuX3Bvc2l0aW9uVG9vbHRpcCgpOw0KICAgICAgICB0aGlzLnRvb2x0aXBFbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOw0KICAgICAgICBhbmltLnJlbW92ZSh0aGlzLnRvb2x0aXBFbCk7DQogICAgICAgIGFuaW0oew0KICAgICAgICAgIHRhcmdldHM6IHRoaXMudG9vbHRpcEVsLA0KICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgdHJhbnNsYXRlWDogdGhpcy54TW92ZW1lbnQsDQogICAgICAgICAgdHJhbnNsYXRlWTogdGhpcy55TW92ZW1lbnQsDQogICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2FuaW1hdGVPdXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3V0KCkgew0KICAgICAgICBhbmltLnJlbW92ZSh0aGlzLnRvb2x0aXBFbCk7DQogICAgICAgIGFuaW0oew0KICAgICAgICAgIHRhcmdldHM6IHRoaXMudG9vbHRpcEVsLA0KICAgICAgICAgIG9wYWNpdHk6IDAsDQogICAgICAgICAgdHJhbnNsYXRlWDogMCwNCiAgICAgICAgICB0cmFuc2xhdGVZOiAwLA0KICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMub3V0RHVyYXRpb24sDQogICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlTW91c2VFbnRlciIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU1vdXNlRW50ZXIoKSB7DQogICAgICAgIHRoaXMuaXNIb3ZlcmVkID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTsgLy8gQWxsb3dzIGNsb3NlIG9mIHRvb2x0aXAgd2hlbiBvcGVuZWQgYnkgZm9jdXMuDQogICAgICAgIHRoaXMub3BlbigpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVNb3VzZUxlYXZlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlTW91c2VMZWF2ZSgpIHsNCiAgICAgICAgdGhpcy5pc0hvdmVyZWQgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTsgLy8gQWxsb3dzIGNsb3NlIG9mIHRvb2x0aXAgd2hlbiBvcGVuZWQgYnkgZm9jdXMuDQogICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlRm9jdXMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVGb2N1cygpIHsNCiAgICAgICAgaWYgKE0udGFiUHJlc3NlZCkgew0KICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTsNCiAgICAgICAgICB0aGlzLm9wZW4oKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVCbHVyIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQmx1cigpIHsNCiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9nZXRBdHRyaWJ1dGVPcHRpb25zIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0QXR0cmlidXRlT3B0aW9ucygpIHsNCiAgICAgICAgdmFyIGF0dHJpYnV0ZU9wdGlvbnMgPSB7fTsNCiAgICAgICAgdmFyIHRvb2x0aXBUZXh0T3B0aW9uID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcCcpOw0KICAgICAgICB2YXIgcG9zaXRpb25PcHRpb24gPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnZGF0YS1wb3NpdGlvbicpOw0KDQogICAgICAgIGlmICh0b29sdGlwVGV4dE9wdGlvbikgew0KICAgICAgICAgIGF0dHJpYnV0ZU9wdGlvbnMuaHRtbCA9IHRvb2x0aXBUZXh0T3B0aW9uOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHBvc2l0aW9uT3B0aW9uKSB7DQogICAgICAgICAgYXR0cmlidXRlT3B0aW9ucy5wb3NpdGlvbiA9IHBvc2l0aW9uT3B0aW9uOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBhdHRyaWJ1dGVPcHRpb25zOw0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiaW5pdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9nZXQoVG9vbHRpcC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRvb2x0aXApLCAiaW5pdCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBHZXQgSW5zdGFuY2UNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiZ2V0SW5zdGFuY2UiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7DQogICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsOw0KICAgICAgICByZXR1cm4gZG9tRWxlbS5NX1Rvb2x0aXA7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiZGVmYXVsdHMiLA0KICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBfZGVmYXVsdHM7DQogICAgICB9DQogICAgfV0pOw0KDQogICAgcmV0dXJuIFRvb2x0aXA7DQogIH0oQ29tcG9uZW50KTsNCg0KICBNLlRvb2x0aXAgPSBUb29sdGlwOw0KDQogIGlmIChNLmpRdWVyeUxvYWRlZCkgew0KICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoVG9vbHRpcCwgJ3Rvb2x0aXAnLCAnTV9Ub29sdGlwJyk7DQogIH0NCn0pKGNhc2gsIE0uYW5pbWUpOw0KOyAvKiENCiAgKiBXYXZlcyB2MC42LjQNCiAgKiBodHRwOi8vZmlhbi5teS5pZC9XYXZlcw0KICAqDQogICogQ29weXJpZ2h0IDIwMTQgQWxmaWFuYSBFLiBTaWJ1ZWEgYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQ0KICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9maWFucy9XYXZlcy9ibG9iL21hc3Rlci9MSUNFTlNFDQogICovDQoNCjsoZnVuY3Rpb24gKHdpbmRvdykgew0KICAndXNlIHN0cmljdCc7DQoNCiAgdmFyIFdhdmVzID0gV2F2ZXMgfHwge307DQogIHZhciAkJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwuYmluZChkb2N1bWVudCk7DQoNCiAgLy8gRmluZCBleGFjdCBwb3NpdGlvbiBvZiBlbGVtZW50DQogIGZ1bmN0aW9uIGlzV2luZG93KG9iaikgew0KICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgb2JqID09PSBvYmoud2luZG93Ow0KICB9DQoNCiAgZnVuY3Rpb24gZ2V0V2luZG93KGVsZW0pIHsNCiAgICByZXR1cm4gaXNXaW5kb3coZWxlbSkgPyBlbGVtIDogZWxlbS5ub2RlVHlwZSA9PT0gOSAmJiBlbGVtLmRlZmF1bHRWaWV3Ow0KICB9DQoNCiAgZnVuY3Rpb24gb2Zmc2V0KGVsZW0pIHsNCiAgICB2YXIgZG9jRWxlbSwNCiAgICAgICAgd2luLA0KICAgICAgICBib3ggPSB7IHRvcDogMCwgbGVmdDogMCB9LA0KICAgICAgICBkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDsNCg0KICAgIGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50Ow0KDQogICAgaWYgKHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gdHlwZW9mIHVuZGVmaW5lZCkgew0KICAgICAgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICB9DQogICAgd2luID0gZ2V0V2luZG93KGRvYyk7DQogICAgcmV0dXJuIHsNCiAgICAgIHRvcDogYm94LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsZW0uY2xpZW50VG9wLA0KICAgICAgbGVmdDogYm94LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQgLSBkb2NFbGVtLmNsaWVudExlZnQNCiAgICB9Ow0KICB9DQoNCiAgZnVuY3Rpb24gY29udmVydFN0eWxlKG9iaikgew0KICAgIHZhciBzdHlsZSA9ICcnOw0KDQogICAgZm9yICh2YXIgYSBpbiBvYmopIHsNCiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoYSkpIHsNCiAgICAgICAgc3R5bGUgKz0gYSArICc6JyArIG9ialthXSArICc7JzsNCiAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gc3R5bGU7DQogIH0NCg0KICB2YXIgRWZmZWN0ID0gew0KDQogICAgLy8gRWZmZWN0IGRlbGF5DQogICAgZHVyYXRpb246IDc1MCwNCg0KICAgIHNob3c6IGZ1bmN0aW9uIChlLCBlbGVtZW50KSB7DQoNCiAgICAgIC8vIERpc2FibGUgcmlnaHQgY2xpY2sNCiAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMikgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIHZhciBlbCA9IGVsZW1lbnQgfHwgdGhpczsNCg0KICAgICAgLy8gQ3JlYXRlIHJpcHBsZQ0KICAgICAgdmFyIHJpcHBsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgcmlwcGxlLmNsYXNzTmFtZSA9ICd3YXZlcy1yaXBwbGUnOw0KICAgICAgZWwuYXBwZW5kQ2hpbGQocmlwcGxlKTsNCg0KICAgICAgLy8gR2V0IGNsaWNrIGNvb3JkaW5hdGUgYW5kIGVsZW1lbnQgd2l0ZGgNCiAgICAgIHZhciBwb3MgPSBvZmZzZXQoZWwpOw0KICAgICAgdmFyIHJlbGF0aXZlWSA9IGUucGFnZVkgLSBwb3MudG9wOw0KICAgICAgdmFyIHJlbGF0aXZlWCA9IGUucGFnZVggLSBwb3MubGVmdDsNCiAgICAgIHZhciBzY2FsZSA9ICdzY2FsZSgnICsgZWwuY2xpZW50V2lkdGggLyAxMDAgKiAxMCArICcpJzsNCg0KICAgICAgLy8gU3VwcG9ydCBmb3IgdG91Y2ggZGV2aWNlcw0KICAgICAgaWYgKCd0b3VjaGVzJyBpbiBlKSB7DQogICAgICAgIHJlbGF0aXZlWSA9IGUudG91Y2hlc1swXS5wYWdlWSAtIHBvcy50b3A7DQogICAgICAgIHJlbGF0aXZlWCA9IGUudG91Y2hlc1swXS5wYWdlWCAtIHBvcy5sZWZ0Ow0KICAgICAgfQ0KDQogICAgICAvLyBBdHRhY2ggZGF0YSB0byBlbGVtZW50DQogICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLWhvbGQnLCBEYXRlLm5vdygpKTsNCiAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnLCBzY2FsZSk7DQogICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLXgnLCByZWxhdGl2ZVgpOw0KICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS15JywgcmVsYXRpdmVZKTsNCg0KICAgICAgLy8gU2V0IHJpcHBsZSBwb3NpdGlvbg0KICAgICAgdmFyIHJpcHBsZVN0eWxlID0gew0KICAgICAgICAndG9wJzogcmVsYXRpdmVZICsgJ3B4JywNCiAgICAgICAgJ2xlZnQnOiByZWxhdGl2ZVggKyAncHgnDQogICAgICB9Ow0KDQogICAgICByaXBwbGUuY2xhc3NOYW1lID0gcmlwcGxlLmNsYXNzTmFtZSArICcgd2F2ZXMtbm90cmFuc2l0aW9uJzsNCiAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udmVydFN0eWxlKHJpcHBsZVN0eWxlKSk7DQogICAgICByaXBwbGUuY2xhc3NOYW1lID0gcmlwcGxlLmNsYXNzTmFtZS5yZXBsYWNlKCd3YXZlcy1ub3RyYW5zaXRpb24nLCAnJyk7DQoNCiAgICAgIC8vIFNjYWxlIHRoZSByaXBwbGUNCiAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zZm9ybSddID0gc2NhbGU7DQogICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2Zvcm0nXSA9IHNjYWxlOw0KICAgICAgcmlwcGxlU3R5bGVbJy1tcy10cmFuc2Zvcm0nXSA9IHNjYWxlOw0KICAgICAgcmlwcGxlU3R5bGVbJy1vLXRyYW5zZm9ybSddID0gc2NhbGU7DQogICAgICByaXBwbGVTdHlsZS50cmFuc2Zvcm0gPSBzY2FsZTsNCiAgICAgIHJpcHBsZVN0eWxlLm9wYWNpdHkgPSAnMSc7DQoNCiAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7DQogICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uJ10gPSBFZmZlY3QuZHVyYXRpb24gKyAnbXMnOw0KICAgICAgcmlwcGxlU3R5bGVbJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7DQogICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi1kdXJhdGlvbiddID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJzsNCg0KICAgICAgcmlwcGxlU3R5bGVbJy13ZWJraXQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJzsNCiAgICAgIHJpcHBsZVN0eWxlWyctbW96LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJ10gPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7DQogICAgICByaXBwbGVTdHlsZVsnLW8tdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJzsNCiAgICAgIHJpcHBsZVN0eWxlWyd0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknOw0KDQogICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGNvbnZlcnRTdHlsZShyaXBwbGVTdHlsZSkpOw0KICAgIH0sDQoNCiAgICBoaWRlOiBmdW5jdGlvbiAoZSkgew0KICAgICAgVG91Y2hIYW5kbGVyLnRvdWNodXAoZSk7DQoNCiAgICAgIHZhciBlbCA9IHRoaXM7DQogICAgICB2YXIgd2lkdGggPSBlbC5jbGllbnRXaWR0aCAqIDEuNDsNCg0KICAgICAgLy8gR2V0IGZpcnN0IHJpcHBsZQ0KICAgICAgdmFyIHJpcHBsZSA9IG51bGw7DQogICAgICB2YXIgcmlwcGxlcyA9IGVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3dhdmVzLXJpcHBsZScpOw0KICAgICAgaWYgKHJpcHBsZXMubGVuZ3RoID4gMCkgew0KICAgICAgICByaXBwbGUgPSByaXBwbGVzW3JpcHBsZXMubGVuZ3RoIC0gMV07DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIHZhciByZWxhdGl2ZVggPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTsNCiAgICAgIHZhciByZWxhdGl2ZVkgPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTsNCiAgICAgIHZhciBzY2FsZSA9IHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnKTsNCg0KICAgICAgLy8gR2V0IGRlbGF5IGJlZXR3ZWVuIG1vdXNlZG93biBhbmQgbW91c2UgbGVhdmUNCiAgICAgIHZhciBkaWZmID0gRGF0ZS5ub3coKSAtIE51bWJlcihyaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWhvbGQnKSk7DQogICAgICB2YXIgZGVsYXkgPSAzNTAgLSBkaWZmOw0KDQogICAgICBpZiAoZGVsYXkgPCAwKSB7DQogICAgICAgIGRlbGF5ID0gMDsNCiAgICAgIH0NCg0KICAgICAgLy8gRmFkZSBvdXQgcmlwcGxlIGFmdGVyIGRlbGF5DQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIHN0eWxlID0gew0KICAgICAgICAgICd0b3AnOiByZWxhdGl2ZVkgKyAncHgnLA0KICAgICAgICAgICdsZWZ0JzogcmVsYXRpdmVYICsgJ3B4JywNCiAgICAgICAgICAnb3BhY2l0eSc6ICcwJywNCg0KICAgICAgICAgIC8vIER1cmF0aW9uDQogICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsDQogICAgICAgICAgJy1tb3otdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsDQogICAgICAgICAgJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLA0KICAgICAgICAgICd0cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJywNCiAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiBzY2FsZSwNCiAgICAgICAgICAnLW1vei10cmFuc2Zvcm0nOiBzY2FsZSwNCiAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6IHNjYWxlLA0KICAgICAgICAgICctby10cmFuc2Zvcm0nOiBzY2FsZSwNCiAgICAgICAgICAndHJhbnNmb3JtJzogc2NhbGUNCiAgICAgICAgfTsNCg0KICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGNvbnZlcnRTdHlsZShzdHlsZSkpOw0KDQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICBlbC5yZW1vdmVDaGlsZChyaXBwbGUpOw0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgIH0sIEVmZmVjdC5kdXJhdGlvbik7DQogICAgICB9LCBkZWxheSk7DQogICAgfSwNCg0KICAgIC8vIExpdHRsZSBoYWNrIHRvIG1ha2UgPGlucHV0PiBjYW4gcGVyZm9ybSB3YXZlcyBlZmZlY3QNCiAgICB3cmFwSW5wdXQ6IGZ1bmN0aW9uIChlbGVtZW50cykgew0KICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBlbGVtZW50cy5sZW5ndGg7IGErKykgew0KICAgICAgICB2YXIgZWwgPSBlbGVtZW50c1thXTsNCg0KICAgICAgICBpZiAoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7DQogICAgICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudE5vZGU7DQoNCiAgICAgICAgICAvLyBJZiBpbnB1dCBhbHJlYWR5IGhhdmUgcGFyZW50IGp1c3QgcGFzcyB0aHJvdWdoDQogICAgICAgICAgaWYgKHBhcmVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpJyAmJiBwYXJlbnQuY2xhc3NOYW1lLmluZGV4T2YoJ3dhdmVzLWVmZmVjdCcpICE9PSAtMSkgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gUHV0IGVsZW1lbnQgY2xhc3MgYW5kIHN0eWxlIHRvIHRoZSBzcGVjaWZpZWQgcGFyZW50DQogICAgICAgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7DQogICAgICAgICAgd3JhcHBlci5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUgKyAnIHdhdmVzLWlucHV0LXdyYXBwZXInOw0KDQogICAgICAgICAgdmFyIGVsZW1lbnRTdHlsZSA9IGVsLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTsNCg0KICAgICAgICAgIGlmICghZWxlbWVudFN0eWxlKSB7DQogICAgICAgICAgICBlbGVtZW50U3R5bGUgPSAnJzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBlbGVtZW50U3R5bGUpOw0KDQogICAgICAgICAgZWwuY2xhc3NOYW1lID0gJ3dhdmVzLWJ1dHRvbi1pbnB1dCc7DQogICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpOw0KDQogICAgICAgICAgLy8gUHV0IGVsZW1lbnQgYXMgY2hpbGQNCiAgICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKHdyYXBwZXIsIGVsKTsNCiAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGVsKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfTsNCg0KICAvKioNCiAgICogRGlzYWJsZSBtb3VzZWRvd24gZXZlbnQgZm9yIDUwMG1zIGR1cmluZyBhbmQgYWZ0ZXIgdG91Y2gNCiAgICovDQogIHZhciBUb3VjaEhhbmRsZXIgPSB7DQogICAgLyogdXNlcyBhbiBpbnRlZ2VyIHJhdGhlciB0aGFuIGJvb2wgc28gdGhlcmUncyBubyBpc3N1ZXMgd2l0aA0KICAgICAqIG5lZWRpbmcgdG8gY2xlYXIgdGltZW91dHMgaWYgYW5vdGhlciB0b3VjaCBldmVudCBvY2N1cnJlZA0KICAgICAqIHdpdGhpbiB0aGUgNTAwbXMuIENhbm5vdCBtb3VzZXVwIGJldHdlZW4gdG91Y2hzdGFydCBhbmQNCiAgICAgKiB0b3VjaGVuZCwgbm9yIGluIHRoZSA1MDBtcyBhZnRlciB0b3VjaGVuZC4gKi8NCiAgICB0b3VjaGVzOiAwLA0KICAgIGFsbG93RXZlbnQ6IGZ1bmN0aW9uIChlKSB7DQogICAgICB2YXIgYWxsb3cgPSB0cnVlOw0KDQogICAgICBpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcpIHsNCiAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgKz0gMTsgLy9wdXNoDQogICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCcpIHsNCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgaWYgKFRvdWNoSGFuZGxlci50b3VjaGVzID4gMCkgew0KICAgICAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgLT0gMTsgLy9wb3AgYWZ0ZXIgNTAwbXMNCiAgICAgICAgICB9DQogICAgICAgIH0sIDUwMCk7DQogICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgVG91Y2hIYW5kbGVyLnRvdWNoZXMgPiAwKSB7DQogICAgICAgIGFsbG93ID0gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIHJldHVybiBhbGxvdzsNCiAgICB9LA0KICAgIHRvdWNodXA6IGZ1bmN0aW9uIChlKSB7DQogICAgICBUb3VjaEhhbmRsZXIuYWxsb3dFdmVudChlKTsNCiAgICB9DQogIH07DQoNCiAgLyoqDQogICAqIERlbGVnYXRlZCBjbGljayBoYW5kbGVyIGZvciAud2F2ZXMtZWZmZWN0IGVsZW1lbnQuDQogICAqIHJldHVybnMgbnVsbCB3aGVuIC53YXZlcy1lZmZlY3QgZWxlbWVudCBub3QgaW4gImNsaWNrIHRyZWUiDQogICAqLw0KICBmdW5jdGlvbiBnZXRXYXZlc0VmZmVjdEVsZW1lbnQoZSkgew0KICAgIGlmIChUb3VjaEhhbmRsZXIuYWxsb3dFdmVudChlKSA9PT0gZmFsc2UpIHsNCiAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCg0KICAgIHZhciBlbGVtZW50ID0gbnVsbDsNCiAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50Ow0KDQogICAgd2hpbGUgKHRhcmdldC5wYXJlbnROb2RlICE9PSBudWxsKSB7DQogICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSAmJiB0YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoJ3dhdmVzLWVmZmVjdCcpICE9PSAtMSkgew0KICAgICAgICBlbGVtZW50ID0gdGFyZ2V0Ow0KICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOw0KICAgIH0NCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfQ0KDQogIC8qKg0KICAgKiBCdWJibGUgdGhlIGNsaWNrIGFuZCBzaG93IGVmZmVjdCBpZiAud2F2ZXMtZWZmZWN0IGVsZW0gd2FzIGZvdW5kDQogICAqLw0KICBmdW5jdGlvbiBzaG93RWZmZWN0KGUpIHsNCiAgICB2YXIgZWxlbWVudCA9IGdldFdhdmVzRWZmZWN0RWxlbWVudChlKTsNCg0KICAgIGlmIChlbGVtZW50ICE9PSBudWxsKSB7DQogICAgICBFZmZlY3Quc2hvdyhlLCBlbGVtZW50KTsNCg0KICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgew0KICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgRWZmZWN0LmhpZGUsIGZhbHNlKTsNCiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIEVmZmVjdC5oaWRlLCBmYWxzZSk7DQogICAgICB9DQoNCiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIEVmZmVjdC5oaWRlLCBmYWxzZSk7DQogICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBFZmZlY3QuaGlkZSwgZmFsc2UpOw0KICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgRWZmZWN0LmhpZGUsIGZhbHNlKTsNCiAgICB9DQogIH0NCg0KICBXYXZlcy5kaXNwbGF5RWZmZWN0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsNCiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsNCg0KICAgIGlmICgnZHVyYXRpb24nIGluIG9wdGlvbnMpIHsNCiAgICAgIEVmZmVjdC5kdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb247DQogICAgfQ0KDQogICAgLy9XcmFwIGlucHV0IGluc2lkZSA8aT4gdGFnDQogICAgRWZmZWN0LndyYXBJbnB1dCgkJCgnLndhdmVzLWVmZmVjdCcpKTsNCg0KICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHsNCiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHNob3dFZmZlY3QsIGZhbHNlKTsNCiAgICB9DQoNCiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHNob3dFZmZlY3QsIGZhbHNlKTsNCiAgfTsNCg0KICAvKioNCiAgICogQXR0YWNoIFdhdmVzIHRvIGFuIGlucHV0IGVsZW1lbnQgKG9yIGFueSBlbGVtZW50IHdoaWNoIGRvZXNuJ3QNCiAgICogYnViYmxlIG1vdXNldXAvbW91c2Vkb3duIGV2ZW50cykuDQogICAqICAgSW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoIGR5bmFtaWNhbGx5IGxvYWRlZCBmb3Jtcy9pbnB1dHMsIG9yDQogICAqIHdoZXJlIHRoZSB1c2VyIGRvZXNuJ3Qgd2FudCBhIGRlbGVnYXRlZCBjbGljayBoYW5kbGVyLg0KICAgKi8NCiAgV2F2ZXMuYXR0YWNoID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsNCiAgICAvL0ZVVFVSRTogYXV0b21hdGljYWxseSBhZGQgd2F2ZXMgY2xhc3NlcyBhbmQgYWxsb3cgdXNlcnMNCiAgICAvLyB0byBzcGVjaWZ5IHRoZW0gd2l0aCBhbiBvcHRpb25zIHBhcmFtPyBFZy4gbGlnaHQvY2xhc3NpYy9idXR0b24NCiAgICBpZiAoZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpIHsNCiAgICAgIEVmZmVjdC53cmFwSW5wdXQoW2VsZW1lbnRdKTsNCiAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7DQogICAgfQ0KDQogICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgew0KICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpOw0KICAgIH0NCg0KICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc2hvd0VmZmVjdCwgZmFsc2UpOw0KICB9Ow0KDQogIHdpbmRvdy5XYXZlcyA9IFdhdmVzOw0KDQogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7DQogICAgV2F2ZXMuZGlzcGxheUVmZmVjdCgpOw0KICB9LCBmYWxzZSk7DQp9KSh3aW5kb3cpOw0KOyhmdW5jdGlvbiAoJCwgYW5pbSkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgdmFyIF9kZWZhdWx0cyA9IHsNCiAgICBodG1sOiAnJywNCiAgICBkaXNwbGF5TGVuZ3RoOiA0MDAwLA0KICAgIGluRHVyYXRpb246IDMwMCwNCiAgICBvdXREdXJhdGlvbjogMzc1LA0KICAgIGNsYXNzZXM6ICcnLA0KICAgIGNvbXBsZXRlQ2FsbGJhY2s6IG51bGwsDQogICAgYWN0aXZhdGlvblBlcmNlbnQ6IDAuOA0KICB9Ow0KDQogIHZhciBUb2FzdCA9IGZ1bmN0aW9uICgpIHsNCiAgICBmdW5jdGlvbiBUb2FzdChvcHRpb25zKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVG9hc3QpOw0KDQogICAgICAvKioNCiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSB0b2FzdA0KICAgICAgICogQG1lbWJlciBUb2FzdCNvcHRpb25zDQogICAgICAgKi8NCiAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBUb2FzdC5kZWZhdWx0cywgb3B0aW9ucyk7DQogICAgICB0aGlzLm1lc3NhZ2UgPSB0aGlzLm9wdGlvbnMuaHRtbDsNCg0KICAgICAgLyoqDQogICAgICAgKiBEZXNjcmliZXMgY3VycmVudCBwYW4gc3RhdGUgdG9hc3QNCiAgICAgICAqIEB0eXBlIHtCb29sZWFufQ0KICAgICAgICovDQogICAgICB0aGlzLnBhbm5pbmcgPSBmYWxzZTsNCg0KICAgICAgLyoqDQogICAgICAgKiBUaW1lIHJlbWFpbmluZyB1bnRpbCB0b2FzdCBpcyByZW1vdmVkDQogICAgICAgKi8NCiAgICAgIHRoaXMudGltZVJlbWFpbmluZyA9IHRoaXMub3B0aW9ucy5kaXNwbGF5TGVuZ3RoOw0KDQogICAgICBpZiAoVG9hc3QuX3RvYXN0cy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgVG9hc3QuX2NyZWF0ZUNvbnRhaW5lcigpOw0KICAgICAgfQ0KDQogICAgICAvLyBDcmVhdGUgbmV3IHRvYXN0DQogICAgICBUb2FzdC5fdG9hc3RzLnB1c2godGhpcyk7DQogICAgICB2YXIgdG9hc3RFbGVtZW50ID0gdGhpcy5fY3JlYXRlVG9hc3QoKTsNCiAgICAgIHRvYXN0RWxlbWVudC5NX1RvYXN0ID0gdGhpczsNCiAgICAgIHRoaXMuZWwgPSB0b2FzdEVsZW1lbnQ7DQogICAgICB0aGlzLiRlbCA9ICQodG9hc3RFbGVtZW50KTsNCiAgICAgIHRoaXMuX2FuaW1hdGVJbigpOw0KICAgICAgdGhpcy5fc2V0VGltZXIoKTsNCiAgICB9DQoNCiAgICBfY3JlYXRlQ2xhc3MoVG9hc3QsIFt7DQogICAgICBrZXk6ICJfY3JlYXRlVG9hc3QiLA0KDQoNCiAgICAgIC8qKg0KICAgICAgICogQ3JlYXRlIHRvYXN0IGFuZCBhcHBlbmQgaXQgdG8gdG9hc3QgY29udGFpbmVyDQogICAgICAgKi8NCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlVG9hc3QoKSB7DQogICAgICAgIHZhciB0b2FzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICB0b2FzdC5jbGFzc0xpc3QuYWRkKCd0b2FzdCcpOw0KDQogICAgICAgIC8vIEFkZCBjdXN0b20gY2xhc3NlcyBvbnRvIHRvYXN0DQogICAgICAgIGlmICghIXRoaXMub3B0aW9ucy5jbGFzc2VzLmxlbmd0aCkgew0KICAgICAgICAgICQodG9hc3QpLmFkZENsYXNzKHRoaXMub3B0aW9ucy5jbGFzc2VzKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFNldCBjb250ZW50DQogICAgICAgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICdvYmplY3QnID8gdGhpcy5tZXNzYWdlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgOiB0aGlzLm1lc3NhZ2UgJiYgdHlwZW9mIHRoaXMubWVzc2FnZSA9PT0gJ29iamVjdCcgJiYgdGhpcy5tZXNzYWdlICE9PSBudWxsICYmIHRoaXMubWVzc2FnZS5ub2RlVHlwZSA9PT0gMSAmJiB0eXBlb2YgdGhpcy5tZXNzYWdlLm5vZGVOYW1lID09PSAnc3RyaW5nJykgew0KICAgICAgICAgIHRvYXN0LmFwcGVuZENoaWxkKHRoaXMubWVzc2FnZSk7DQoNCiAgICAgICAgICAvLyBDaGVjayBpZiBpdCBpcyBqUXVlcnkgb2JqZWN0DQogICAgICAgIH0gZWxzZSBpZiAoISF0aGlzLm1lc3NhZ2UuanF1ZXJ5KSB7DQogICAgICAgICAgJCh0b2FzdCkuYXBwZW5kKHRoaXMubWVzc2FnZVswXSk7DQoNCiAgICAgICAgICAvLyBJbnNlcnQgYXMgaHRtbDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0b2FzdC5pbm5lckhUTUwgPSB0aGlzLm1lc3NhZ2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBBcHBlbmQgdG9hc2Z0DQogICAgICAgIFRvYXN0Ll9jb250YWluZXIuYXBwZW5kQ2hpbGQodG9hc3QpOw0KICAgICAgICByZXR1cm4gdG9hc3Q7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQW5pbWF0ZSBpbiB0b2FzdA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfYW5pbWF0ZUluIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUluKCkgew0KICAgICAgICAvLyBBbmltYXRlIHRvYXN0IGluDQogICAgICAgIGFuaW0oew0KICAgICAgICAgIHRhcmdldHM6IHRoaXMuZWwsDQogICAgICAgICAgdG9wOiAwLA0KICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQ3JlYXRlIHNldEludGVydmFsIHdoaWNoIGF1dG9tYXRpY2FsbHkgcmVtb3ZlcyB0b2FzdCB3aGVuIHRpbWVSZW1haW5pbmcgPj0gMA0KICAgICAgICogaGFzIGJlZW4gcmVhY2hlZA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0VGltZXIiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRUaW1lcigpIHsNCiAgICAgICAgdmFyIF90aGlzMjggPSB0aGlzOw0KDQogICAgICAgIGlmICh0aGlzLnRpbWVSZW1haW5pbmcgIT09IEluZmluaXR5KSB7DQogICAgICAgICAgdGhpcy5jb3VudGVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAvLyBJZiB0b2FzdCBpcyBub3QgYmVpbmcgZHJhZ2dlZCwgZGVjcmVhc2UgaXRzIHRpbWUgcmVtYWluaW5nDQogICAgICAgICAgICBpZiAoIV90aGlzMjgucGFubmluZykgew0KICAgICAgICAgICAgICBfdGhpczI4LnRpbWVSZW1haW5pbmcgLT0gMjA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIEFuaW1hdGUgdG9hc3Qgb3V0DQogICAgICAgICAgICBpZiAoX3RoaXMyOC50aW1lUmVtYWluaW5nIDw9IDApIHsNCiAgICAgICAgICAgICAgX3RoaXMyOC5kaXNtaXNzKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwgMjApOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogRGlzbWlzcyB0b2FzdCB3aXRoIGFuaW1hdGlvbg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJkaXNtaXNzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNtaXNzKCkgew0KICAgICAgICB2YXIgX3RoaXMyOSA9IHRoaXM7DQoNCiAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5jb3VudGVySW50ZXJ2YWwpOw0KICAgICAgICB2YXIgYWN0aXZhdGlvbkRpc3RhbmNlID0gdGhpcy5lbC5vZmZzZXRXaWR0aCAqIHRoaXMub3B0aW9ucy5hY3RpdmF0aW9uUGVyY2VudDsNCg0KICAgICAgICBpZiAodGhpcy53YXNTd2lwZWQpIHsNCiAgICAgICAgICB0aGlzLmVsLnN0eWxlLnRyYW5zaXRpb24gPSAndHJhbnNmb3JtIC4wNXMsIG9wYWNpdHkgLjA1cyc7DQogICAgICAgICAgdGhpcy5lbC5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlWCgiICsgYWN0aXZhdGlvbkRpc3RhbmNlICsgInB4KSI7DQogICAgICAgICAgdGhpcy5lbC5zdHlsZS5vcGFjaXR5ID0gMDsNCiAgICAgICAgfQ0KDQogICAgICAgIGFuaW0oew0KICAgICAgICAgIHRhcmdldHM6IHRoaXMuZWwsDQogICAgICAgICAgb3BhY2l0eTogMCwNCiAgICAgICAgICBtYXJnaW5Ub3A6IC00MCwNCiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRFeHBvJywNCiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgLy8gQ2FsbCB0aGUgb3B0aW9uYWwgY2FsbGJhY2sNCiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMyOS5vcHRpb25zLmNvbXBsZXRlQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgX3RoaXMyOS5vcHRpb25zLmNvbXBsZXRlQ2FsbGJhY2soKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIFJlbW92ZSB0b2FzdCBmcm9tIERPTQ0KICAgICAgICAgICAgX3RoaXMyOS4kZWwucmVtb3ZlKCk7DQogICAgICAgICAgICBUb2FzdC5fdG9hc3RzLnNwbGljZShUb2FzdC5fdG9hc3RzLmluZGV4T2YoX3RoaXMyOSksIDEpOw0KICAgICAgICAgICAgaWYgKFRvYXN0Ll90b2FzdHMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgIFRvYXN0Ll9yZW1vdmVDb250YWluZXIoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiZ2V0SW5zdGFuY2UiLA0KDQoNCiAgICAgIC8qKg0KICAgICAgICogR2V0IEluc3RhbmNlDQogICAgICAgKi8NCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkgew0KICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDsNCiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9Ub2FzdDsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBBcHBlbmQgdG9hc3QgY29udGFpbmVyIGFuZCBhZGQgZXZlbnQgaGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2NyZWF0ZUNvbnRhaW5lciIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUNvbnRhaW5lcigpIHsNCiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsICd0b2FzdC1jb250YWluZXInKTsNCg0KICAgICAgICAvLyBBZGQgZXZlbnQgaGFuZGxlcg0KICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIFRvYXN0Ll9vbkRyYWdTdGFydCk7DQogICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBUb2FzdC5fb25EcmFnTW92ZSk7DQogICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIFRvYXN0Ll9vbkRyYWdFbmQpOw0KDQogICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBUb2FzdC5fb25EcmFnU3RhcnQpOw0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBUb2FzdC5fb25EcmFnTW92ZSk7DQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBUb2FzdC5fb25EcmFnRW5kKTsNCg0KICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7DQogICAgICAgIFRvYXN0Ll9jb250YWluZXIgPSBjb250YWluZXI7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVtb3ZlIHRvYXN0IGNvbnRhaW5lciBhbmQgZXZlbnQgaGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3JlbW92ZUNvbnRhaW5lciIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUNvbnRhaW5lcigpIHsNCiAgICAgICAgLy8gQWRkIGV2ZW50IGhhbmRsZXINCiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgVG9hc3QuX29uRHJhZ01vdmUpOw0KICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgVG9hc3QuX29uRHJhZ0VuZCk7DQoNCiAgICAgICAgJChUb2FzdC5fY29udGFpbmVyKS5yZW1vdmUoKTsNCiAgICAgICAgVG9hc3QuX2NvbnRhaW5lciA9IG51bGw7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQmVnaW4gZHJhZyBoYW5kbGVyDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9vbkRyYWdTdGFydCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX29uRHJhZ1N0YXJ0KGUpIHsNCiAgICAgICAgaWYgKGUudGFyZ2V0ICYmICQoZS50YXJnZXQpLmNsb3Nlc3QoJy50b2FzdCcpLmxlbmd0aCkgew0KICAgICAgICAgIHZhciAkdG9hc3QgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcudG9hc3QnKTsNCiAgICAgICAgICB2YXIgdG9hc3QgPSAkdG9hc3RbMF0uTV9Ub2FzdDsNCiAgICAgICAgICB0b2FzdC5wYW5uaW5nID0gdHJ1ZTsNCiAgICAgICAgICBUb2FzdC5fZHJhZ2dlZFRvYXN0ID0gdG9hc3Q7DQogICAgICAgICAgdG9hc3QuZWwuY2xhc3NMaXN0LmFkZCgncGFubmluZycpOw0KICAgICAgICAgIHRvYXN0LmVsLnN0eWxlLnRyYW5zaXRpb24gPSAnJzsNCiAgICAgICAgICB0b2FzdC5zdGFydGluZ1hQb3MgPSBUb2FzdC5feFBvcyhlKTsNCiAgICAgICAgICB0b2FzdC50aW1lID0gRGF0ZS5ub3coKTsNCiAgICAgICAgICB0b2FzdC54UG9zID0gVG9hc3QuX3hQb3MoZSk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBEcmFnIG1vdmUgaGFuZGxlcg0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfb25EcmFnTW92ZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX29uRHJhZ01vdmUoZSkgew0KICAgICAgICBpZiAoISFUb2FzdC5fZHJhZ2dlZFRvYXN0KSB7DQogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgIHZhciB0b2FzdCA9IFRvYXN0Ll9kcmFnZ2VkVG9hc3Q7DQogICAgICAgICAgdG9hc3QuZGVsdGFYID0gTWF0aC5hYnModG9hc3QueFBvcyAtIFRvYXN0Ll94UG9zKGUpKTsNCiAgICAgICAgICB0b2FzdC54UG9zID0gVG9hc3QuX3hQb3MoZSk7DQogICAgICAgICAgdG9hc3QudmVsb2NpdHlYID0gdG9hc3QuZGVsdGFYIC8gKERhdGUubm93KCkgLSB0b2FzdC50aW1lKTsNCiAgICAgICAgICB0b2FzdC50aW1lID0gRGF0ZS5ub3coKTsNCg0KICAgICAgICAgIHZhciB0b3RhbERlbHRhWCA9IHRvYXN0LnhQb3MgLSB0b2FzdC5zdGFydGluZ1hQb3M7DQogICAgICAgICAgdmFyIGFjdGl2YXRpb25EaXN0YW5jZSA9IHRvYXN0LmVsLm9mZnNldFdpZHRoICogdG9hc3Qub3B0aW9ucy5hY3RpdmF0aW9uUGVyY2VudDsNCiAgICAgICAgICB0b2FzdC5lbC5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlWCgiICsgdG90YWxEZWx0YVggKyAicHgpIjsNCiAgICAgICAgICB0b2FzdC5lbC5zdHlsZS5vcGFjaXR5ID0gMSAtIE1hdGguYWJzKHRvdGFsRGVsdGFYIC8gYWN0aXZhdGlvbkRpc3RhbmNlKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEVuZCBkcmFnIGhhbmRsZXINCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX29uRHJhZ0VuZCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX29uRHJhZ0VuZCgpIHsNCiAgICAgICAgaWYgKCEhVG9hc3QuX2RyYWdnZWRUb2FzdCkgew0KICAgICAgICAgIHZhciB0b2FzdCA9IFRvYXN0Ll9kcmFnZ2VkVG9hc3Q7DQogICAgICAgICAgdG9hc3QucGFubmluZyA9IGZhbHNlOw0KICAgICAgICAgIHRvYXN0LmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Bhbm5pbmcnKTsNCg0KICAgICAgICAgIHZhciB0b3RhbERlbHRhWCA9IHRvYXN0LnhQb3MgLSB0b2FzdC5zdGFydGluZ1hQb3M7DQogICAgICAgICAgdmFyIGFjdGl2YXRpb25EaXN0YW5jZSA9IHRvYXN0LmVsLm9mZnNldFdpZHRoICogdG9hc3Qub3B0aW9ucy5hY3RpdmF0aW9uUGVyY2VudDsNCiAgICAgICAgICB2YXIgc2hvdWxkQmVEaXNtaXNzZWQgPSBNYXRoLmFicyh0b3RhbERlbHRhWCkgPiBhY3RpdmF0aW9uRGlzdGFuY2UgfHwgdG9hc3QudmVsb2NpdHlYID4gMTsNCg0KICAgICAgICAgIC8vIFJlbW92ZSB0b2FzdA0KICAgICAgICAgIGlmIChzaG91bGRCZURpc21pc3NlZCkgew0KICAgICAgICAgICAgdG9hc3Qud2FzU3dpcGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHRvYXN0LmRpc21pc3MoKTsNCg0KICAgICAgICAgICAgLy8gQW5pbWF0ZSB0b2FzdCBiYWNrIHRvIG9yaWdpbmFsIHBvc2l0aW9uDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRvYXN0LmVsLnN0eWxlLnRyYW5zaXRpb24gPSAndHJhbnNmb3JtIC4ycywgb3BhY2l0eSAuMnMnOw0KICAgICAgICAgICAgdG9hc3QuZWwuc3R5bGUudHJhbnNmb3JtID0gJyc7DQogICAgICAgICAgICB0b2FzdC5lbC5zdHlsZS5vcGFjaXR5ID0gJyc7DQogICAgICAgICAgfQ0KICAgICAgICAgIFRvYXN0Ll9kcmFnZ2VkVG9hc3QgPSBudWxsOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogR2V0IHggcG9zaXRpb24gb2YgbW91c2Ugb3IgdG91Y2ggZXZlbnQNCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3hQb3MiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF94UG9zKGUpIHsNCiAgICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoID49IDEpIHsNCiAgICAgICAgICByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFg7DQogICAgICAgIH0NCiAgICAgICAgLy8gbW91c2UgZXZlbnQNCiAgICAgICAgcmV0dXJuIGUuY2xpZW50WDsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBSZW1vdmUgYWxsIHRvYXN0cw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJkaXNtaXNzQWxsIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNtaXNzQWxsKCkgew0KICAgICAgICBmb3IgKHZhciB0b2FzdEluZGV4IGluIFRvYXN0Ll90b2FzdHMpIHsNCiAgICAgICAgICBUb2FzdC5fdG9hc3RzW3RvYXN0SW5kZXhdLmRpc21pc3MoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImRlZmF1bHRzIiwNCiAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gX2RlZmF1bHRzOw0KICAgICAgfQ0KICAgIH1dKTsNCg0KICAgIHJldHVybiBUb2FzdDsNCiAgfSgpOw0KDQogIC8qKg0KICAgKiBAc3RhdGljDQogICAqIEBtZW1iZXJvZiBUb2FzdA0KICAgKiBAdHlwZSB7QXJyYXkuPFRvYXN0Pn0NCiAgICovDQoNCg0KICBUb2FzdC5fdG9hc3RzID0gW107DQoNCiAgLyoqDQogICAqIEBzdGF0aWMNCiAgICogQG1lbWJlcm9mIFRvYXN0DQogICAqLw0KICBUb2FzdC5fY29udGFpbmVyID0gbnVsbDsNCg0KICAvKioNCiAgICogQHN0YXRpYw0KICAgKiBAbWVtYmVyb2YgVG9hc3QNCiAgICogQHR5cGUge1RvYXN0fQ0KICAgKi8NCiAgVG9hc3QuX2RyYWdnZWRUb2FzdCA9IG51bGw7DQoNCiAgTS5Ub2FzdCA9IFRvYXN0Ow0KICBNLnRvYXN0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsNCiAgICByZXR1cm4gbmV3IFRvYXN0KG9wdGlvbnMpOw0KICB9Ow0KfSkoY2FzaCwgTS5hbmltZSk7DQo7KGZ1bmN0aW9uICgkLCBhbmltKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICB2YXIgX2RlZmF1bHRzID0gew0KICAgIGVkZ2U6ICdsZWZ0JywNCiAgICBkcmFnZ2FibGU6IHRydWUsDQogICAgaW5EdXJhdGlvbjogMjUwLA0KICAgIG91dER1cmF0aW9uOiAyMDAsDQogICAgb25PcGVuU3RhcnQ6IG51bGwsDQogICAgb25PcGVuRW5kOiBudWxsLA0KICAgIG9uQ2xvc2VTdGFydDogbnVsbCwNCiAgICBvbkNsb3NlRW5kOiBudWxsLA0KICAgIHByZXZlbnRTY3JvbGxpbmc6IHRydWUNCiAgfTsNCg0KICAvKioNCiAgICogQGNsYXNzDQogICAqLw0KDQogIHZhciBTaWRlbmF2ID0gZnVuY3Rpb24gKF9Db21wb25lbnQ4KSB7DQogICAgX2luaGVyaXRzKFNpZGVuYXYsIF9Db21wb25lbnQ4KTsNCg0KICAgIC8qKg0KICAgICAqIENvbnN0cnVjdCBTaWRlbmF2IGluc3RhbmNlIGFuZCBzZXQgdXAgb3ZlcmxheQ0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIFNpZGVuYXYoZWwsIG9wdGlvbnMpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTaWRlbmF2KTsNCg0KICAgICAgdmFyIF90aGlzMzAgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU2lkZW5hdi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNpZGVuYXYpKS5jYWxsKHRoaXMsIFNpZGVuYXYsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzMzAuZWwuTV9TaWRlbmF2ID0gX3RoaXMzMDsNCiAgICAgIF90aGlzMzAuaWQgPSBfdGhpczMwLiRlbC5hdHRyKCdpZCcpOw0KDQogICAgICAvKioNCiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBTaWRlbmF2DQogICAgICAgKiBAbWVtYmVyIFNpZGVuYXYjb3B0aW9ucw0KICAgICAgICogQHByb3Age1N0cmluZ30gW2VkZ2U9J2xlZnQnXSAtIFNpZGUgb2Ygc2NyZWVuIG9uIHdoaWNoIFNpZGVuYXYgYXBwZWFycw0KICAgICAgICogQHByb3Age0Jvb2xlYW59IFtkcmFnZ2FibGU9dHJ1ZV0gLSBBbGxvdyBzd2lwZSBnZXN0dXJlcyB0byBvcGVuL2Nsb3NlIFNpZGVuYXYNCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtpbkR1cmF0aW9uPTI1MF0gLSBMZW5ndGggaW4gbXMgb2YgZW50ZXIgdHJhbnNpdGlvbg0KICAgICAgICogQHByb3Age051bWJlcn0gW291dER1cmF0aW9uPTIwMF0gLSBMZW5ndGggaW4gbXMgb2YgZXhpdCB0cmFuc2l0aW9uDQogICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlblN0YXJ0IC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gc2lkZW5hdiBzdGFydHMgZW50ZXJpbmcNCiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25PcGVuRW5kIC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gc2lkZW5hdiBmaW5pc2hlcyBlbnRlcmluZw0KICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkNsb3NlU3RhcnQgLSBGdW5jdGlvbiBjYWxsZWQgd2hlbiBzaWRlbmF2IHN0YXJ0cyBleGl0aW5nDQogICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ2xvc2VFbmQgLSBGdW5jdGlvbiBjYWxsZWQgd2hlbiBzaWRlbmF2IGZpbmlzaGVzIGV4aXRpbmcNCiAgICAgICAqLw0KICAgICAgX3RoaXMzMC5vcHRpb25zID0gJC5leHRlbmQoe30sIFNpZGVuYXYuZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICAvKioNCiAgICAgICAqIERlc2NyaWJlcyBvcGVuL2Nsb3NlIHN0YXRlIG9mIFNpZGVuYXYNCiAgICAgICAqIEB0eXBlIHtCb29sZWFufQ0KICAgICAgICovDQogICAgICBfdGhpczMwLmlzT3BlbiA9IGZhbHNlOw0KDQogICAgICAvKioNCiAgICAgICAqIERlc2NyaWJlcyBpZiBTaWRlbmF2IGlzIGZpeGVkDQogICAgICAgKiBAdHlwZSB7Qm9vbGVhbn0NCiAgICAgICAqLw0KICAgICAgX3RoaXMzMC5pc0ZpeGVkID0gX3RoaXMzMC5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ3NpZGVuYXYtZml4ZWQnKTsNCg0KICAgICAgLyoqDQogICAgICAgKiBEZXNjcmliZXMgaWYgU2lkZW5hdiBpcyBiZWluZyBkcmFnZ2VlZA0KICAgICAgICogQHR5cGUge0Jvb2xlYW59DQogICAgICAgKi8NCiAgICAgIF90aGlzMzAuaXNEcmFnZ2VkID0gZmFsc2U7DQoNCiAgICAgIC8vIFdpbmRvdyBzaXplIHZhcmlhYmxlcyBmb3Igd2luZG93IHJlc2l6ZSBjaGVja3MNCiAgICAgIF90aGlzMzAubGFzdFdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7DQogICAgICBfdGhpczMwLmxhc3RXaW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQoNCiAgICAgIF90aGlzMzAuX2NyZWF0ZU92ZXJsYXkoKTsNCiAgICAgIF90aGlzMzAuX2NyZWF0ZURyYWdUYXJnZXQoKTsNCiAgICAgIF90aGlzMzAuX3NldHVwRXZlbnRIYW5kbGVycygpOw0KICAgICAgX3RoaXMzMC5fc2V0dXBDbGFzc2VzKCk7DQogICAgICBfdGhpczMwLl9zZXR1cEZpeGVkKCk7DQoNCiAgICAgIFNpZGVuYXYuX3NpZGVuYXZzLnB1c2goX3RoaXMzMCk7DQogICAgICByZXR1cm4gX3RoaXMzMDsNCiAgICB9DQoNCiAgICBfY3JlYXRlQ2xhc3MoU2lkZW5hdiwgW3sNCiAgICAgIGtleTogImRlc3Ryb3kiLA0KDQoNCiAgICAgIC8qKg0KICAgICAgICogVGVhcmRvd24gY29tcG9uZW50DQogICAgICAgKi8NCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkgew0KICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7DQogICAgICAgIHRoaXMuX292ZXJsYXkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9vdmVybGF5KTsNCiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5kcmFnVGFyZ2V0KTsNCiAgICAgICAgdGhpcy5lbC5NX1NpZGVuYXYgPSB1bmRlZmluZWQ7DQogICAgICAgIHRoaXMuZWwuc3R5bGUudHJhbnNmb3JtID0gJyc7DQoNCiAgICAgICAgdmFyIGluZGV4ID0gU2lkZW5hdi5fc2lkZW5hdnMuaW5kZXhPZih0aGlzKTsNCiAgICAgICAgaWYgKGluZGV4ID49IDApIHsNCiAgICAgICAgICBTaWRlbmF2Ll9zaWRlbmF2cy5zcGxpY2UoaW5kZXgsIDEpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2NyZWF0ZU92ZXJsYXkiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVPdmVybGF5KCkgew0KICAgICAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICB0aGlzLl9jbG9zZUJvdW5kID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpOw0KICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3NpZGVuYXYtb3ZlcmxheScpOw0KDQogICAgICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbG9zZUJvdW5kKTsNCg0KICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOw0KICAgICAgICB0aGlzLl9vdmVybGF5ID0gb3ZlcmxheTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICBpZiAoU2lkZW5hdi5fc2lkZW5hdnMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVRyaWdnZXJDbGljayk7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLl9oYW5kbGVEcmFnVGFyZ2V0RHJhZ0JvdW5kID0gdGhpcy5faGFuZGxlRHJhZ1RhcmdldERyYWcuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlRHJhZ1RhcmdldFJlbGVhc2VCb3VuZCA9IHRoaXMuX2hhbmRsZURyYWdUYXJnZXRSZWxlYXNlLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlRHJhZ0JvdW5kID0gdGhpcy5faGFuZGxlQ2xvc2VEcmFnLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlUmVsZWFzZUJvdW5kID0gdGhpcy5faGFuZGxlQ2xvc2VSZWxlYXNlLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlVHJpZ2dlckNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVDbG9zZVRyaWdnZXJDbGljay5iaW5kKHRoaXMpOw0KDQogICAgICAgIHRoaXMuZHJhZ1RhcmdldC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVEcmFnVGFyZ2V0RHJhZ0JvdW5kKTsNCiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRHJhZ1RhcmdldFJlbGVhc2VCb3VuZCk7DQogICAgICAgIHRoaXMuX292ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlQ2xvc2VEcmFnQm91bmQpOw0KICAgICAgICB0aGlzLl9vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlQ2xvc2VSZWxlYXNlQm91bmQpOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZUNsb3NlRHJhZ0JvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZUNsb3NlUmVsZWFzZUJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsb3NlVHJpZ2dlckNsaWNrQm91bmQpOw0KDQogICAgICAgIC8vIEFkZCByZXNpemUgZm9yIHNpZGUgbmF2IGZpeGVkDQogICAgICAgIGlmICh0aGlzLmlzRml4ZWQpIHsNCiAgICAgICAgICB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCA9IHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZS5iaW5kKHRoaXMpOw0KICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfcmVtb3ZlRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIGlmIChTaWRlbmF2Ll9zaWRlbmF2cy5sZW5ndGggPT09IDEpIHsNCiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVHJpZ2dlckNsaWNrKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuZHJhZ1RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVEcmFnVGFyZ2V0RHJhZ0JvdW5kKTsNCiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRHJhZ1RhcmdldFJlbGVhc2VCb3VuZCk7DQogICAgICAgIHRoaXMuX292ZXJsYXkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlQ2xvc2VEcmFnQm91bmQpOw0KICAgICAgICB0aGlzLl9vdmVybGF5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlQ2xvc2VSZWxlYXNlQm91bmQpOw0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZUNsb3NlRHJhZ0JvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZUNsb3NlUmVsZWFzZUJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsb3NlVHJpZ2dlckNsaWNrQm91bmQpOw0KDQogICAgICAgIC8vIFJlbW92ZSByZXNpemUgZm9yIHNpZGUgbmF2IGZpeGVkDQogICAgICAgIGlmICh0aGlzLmlzRml4ZWQpIHsNCiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5faGFuZGxlV2luZG93UmVzaXplQm91bmQpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIFRyaWdnZXIgQ2xpY2sNCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZVRyaWdnZXJDbGljayIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVRyaWdnZXJDbGljayhlKSB7DQogICAgICAgIHZhciAkdHJpZ2dlciA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5zaWRlbmF2LXRyaWdnZXInKTsNCiAgICAgICAgaWYgKGUudGFyZ2V0ICYmICR0cmlnZ2VyLmxlbmd0aCkgew0KICAgICAgICAgIHZhciBzaWRlbmF2SWQgPSBNLmdldElkRnJvbVRyaWdnZXIoJHRyaWdnZXJbMF0pOw0KDQogICAgICAgICAgdmFyIHNpZGVuYXZJbnN0YW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNpZGVuYXZJZCkuTV9TaWRlbmF2Ow0KICAgICAgICAgIGlmIChzaWRlbmF2SW5zdGFuY2UpIHsNCiAgICAgICAgICAgIHNpZGVuYXZJbnN0YW5jZS5vcGVuKCR0cmlnZ2VyKTsNCiAgICAgICAgICB9DQogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0IHZhcmlhYmxlcyBuZWVkZWQgYXQgdGhlIGJlZ2dpbmluZyBvZiBkcmFnDQogICAgICAgKiBhbmQgc3RvcCBhbnkgY3VycmVudCB0cmFuc2l0aW9uLg0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc3RhcnREcmFnIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc3RhcnREcmFnKGUpIHsNCiAgICAgICAgdmFyIGNsaWVudFggPSBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDsNCiAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSB0cnVlOw0KICAgICAgICB0aGlzLl9zdGFydGluZ1hwb3MgPSBjbGllbnRYOw0KICAgICAgICB0aGlzLl94UG9zID0gdGhpcy5fc3RhcnRpbmdYcG9zOw0KICAgICAgICB0aGlzLl90aW1lID0gRGF0ZS5ub3coKTsNCiAgICAgICAgdGhpcy5fd2lkdGggPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoOw0KICAgICAgICB0aGlzLl9vdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICB0aGlzLl9pbml0aWFsU2Nyb2xsVG9wID0gdGhpcy5pc09wZW4gPyB0aGlzLmVsLnNjcm9sbFRvcCA6IE0uZ2V0RG9jdW1lbnRTY3JvbGxUb3AoKTsNCiAgICAgICAgdGhpcy5fdmVydGljYWxseVNjcm9sbGluZyA9IGZhbHNlOw0KICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTsNCiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5fb3ZlcmxheSk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0IHZhcmlhYmxlcyBuZWVkZWQgYXQgZWFjaCBkcmFnIG1vdmUgdXBkYXRlIHRpY2sNCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2RyYWdNb3ZlVXBkYXRlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZHJhZ01vdmVVcGRhdGUoZSkgew0KICAgICAgICB2YXIgY2xpZW50WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYOw0KICAgICAgICB2YXIgY3VycmVudFNjcm9sbFRvcCA9IHRoaXMuaXNPcGVuID8gdGhpcy5lbC5zY3JvbGxUb3AgOiBNLmdldERvY3VtZW50U2Nyb2xsVG9wKCk7DQogICAgICAgIHRoaXMuZGVsdGFYID0gTWF0aC5hYnModGhpcy5feFBvcyAtIGNsaWVudFgpOw0KICAgICAgICB0aGlzLl94UG9zID0gY2xpZW50WDsNCiAgICAgICAgdGhpcy52ZWxvY2l0eVggPSB0aGlzLmRlbHRhWCAvIChEYXRlLm5vdygpIC0gdGhpcy5fdGltZSk7DQogICAgICAgIHRoaXMuX3RpbWUgPSBEYXRlLm5vdygpOw0KICAgICAgICBpZiAodGhpcy5faW5pdGlhbFNjcm9sbFRvcCAhPT0gY3VycmVudFNjcm9sbFRvcCkgew0KICAgICAgICAgIHRoaXMuX3ZlcnRpY2FsbHlTY3JvbGxpbmcgPSB0cnVlOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlcyBEcmFnZ2luZyBvZiBTaWRlbmF2DQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVEcmFnVGFyZ2V0RHJhZyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURyYWdUYXJnZXREcmFnKGUpIHsNCiAgICAgICAgLy8gQ2hlY2sgaWYgZHJhZ2dhYmxlDQogICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRyYWdnYWJsZSB8fCB0aGlzLl9pc0N1cnJlbnRseUZpeGVkKCkgfHwgdGhpcy5fdmVydGljYWxseVNjcm9sbGluZykgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIElmIG5vdCBiZWluZyBkcmFnZ2VkLCBzZXQgaW5pdGlhbCBkcmFnIHN0YXJ0IHZhcmlhYmxlcw0KICAgICAgICBpZiAoIXRoaXMuaXNEcmFnZ2VkKSB7DQogICAgICAgICAgdGhpcy5fc3RhcnREcmFnKGUpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gUnVuIHRvdWNobW92ZSB1cGRhdGVzDQogICAgICAgIHRoaXMuX2RyYWdNb3ZlVXBkYXRlKGUpOw0KDQogICAgICAgIC8vIENhbGN1bGF0ZSByYXcgZGVsdGFYDQogICAgICAgIHZhciB0b3RhbERlbHRhWCA9IHRoaXMuX3hQb3MgLSB0aGlzLl9zdGFydGluZ1hwb3M7DQoNCiAgICAgICAgLy8gZHJhZ0RpcmVjdGlvbiBpcyB0aGUgYXR0ZW1wdGVkIHVzZXIgZHJhZyBkaXJlY3Rpb24NCiAgICAgICAgdmFyIGRyYWdEaXJlY3Rpb24gPSB0b3RhbERlbHRhWCA+IDAgPyAncmlnaHQnIDogJ2xlZnQnOw0KDQogICAgICAgIC8vIERvbid0IGFsbG93IHRvdGFsRGVsdGFYIHRvIGV4Y2VlZCBTaWRlbmF2IHdpZHRoIG9yIGJlIGRyYWdnZWQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbg0KICAgICAgICB0b3RhbERlbHRhWCA9IE1hdGgubWluKHRoaXMuX3dpZHRoLCBNYXRoLmFicyh0b3RhbERlbHRhWCkpOw0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVkZ2UgPT09IGRyYWdEaXJlY3Rpb24pIHsNCiAgICAgICAgICB0b3RhbERlbHRhWCA9IDA7DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAgICogdHJhbnNmb3JtWCBpcyB0aGUgZHJhZyBkaXNwbGFjZW1lbnQNCiAgICAgICAgICogdHJhbnNmb3JtUHJlZml4IGlzIHRoZSBpbml0aWFsIHRyYW5zZm9ybSBwbGFjZW1lbnQNCiAgICAgICAgICogSW52ZXJ0IHZhbHVlcyBpZiBTaWRlbmF2IGlzIHJpZ2h0IGVkZ2UNCiAgICAgICAgICovDQogICAgICAgIHZhciB0cmFuc2Zvcm1YID0gdG90YWxEZWx0YVg7DQogICAgICAgIHZhciB0cmFuc2Zvcm1QcmVmaXggPSAndHJhbnNsYXRlWCgtMTAwJSknOw0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVkZ2UgPT09ICdyaWdodCcpIHsNCiAgICAgICAgICB0cmFuc2Zvcm1QcmVmaXggPSAndHJhbnNsYXRlWCgxMDAlKSc7DQogICAgICAgICAgdHJhbnNmb3JtWCA9IC10cmFuc2Zvcm1YOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQ2FsY3VsYXRlIG9wZW4vY2xvc2UgcGVyY2VudGFnZSBvZiBzaWRlbmF2LCB3aXRoIG9wZW4gPSAxIGFuZCBjbG9zZSA9IDANCiAgICAgICAgdGhpcy5wZXJjZW50T3BlbiA9IE1hdGgubWluKDEsIHRvdGFsRGVsdGFYIC8gdGhpcy5fd2lkdGgpOw0KDQogICAgICAgIC8vIFNldCB0cmFuc2Zvcm0gYW5kIG9wYWNpdHkgc3R5bGVzDQogICAgICAgIHRoaXMuZWwuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtUHJlZml4ICsgIiB0cmFuc2xhdGVYKCIgKyB0cmFuc2Zvcm1YICsgInB4KSI7DQogICAgICAgIHRoaXMuX292ZXJsYXkuc3R5bGUub3BhY2l0eSA9IHRoaXMucGVyY2VudE9wZW47DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIERyYWcgVGFyZ2V0IFJlbGVhc2UNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZURyYWdUYXJnZXRSZWxlYXNlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRHJhZ1RhcmdldFJlbGVhc2UoKSB7DQogICAgICAgIGlmICh0aGlzLmlzRHJhZ2dlZCkgew0KICAgICAgICAgIGlmICh0aGlzLnBlcmNlbnRPcGVuID4gMC4yKSB7DQogICAgICAgICAgICB0aGlzLm9wZW4oKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5fYW5pbWF0ZU91dCgpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHRoaXMuaXNEcmFnZ2VkID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5fdmVydGljYWxseVNjcm9sbGluZyA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIENsb3NlIERyYWcNCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUNsb3NlRHJhZyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNsb3NlRHJhZyhlKSB7DQogICAgICAgIGlmICh0aGlzLmlzT3Blbikgew0KICAgICAgICAgIC8vIENoZWNrIGlmIGRyYWdnYWJsZQ0KICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRyYWdnYWJsZSB8fCB0aGlzLl9pc0N1cnJlbnRseUZpeGVkKCkgfHwgdGhpcy5fdmVydGljYWxseVNjcm9sbGluZykgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIElmIG5vdCBiZWluZyBkcmFnZ2VkLCBzZXQgaW5pdGlhbCBkcmFnIHN0YXJ0IHZhcmlhYmxlcw0KICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdnZWQpIHsNCiAgICAgICAgICAgIHRoaXMuX3N0YXJ0RHJhZyhlKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBSdW4gdG91Y2htb3ZlIHVwZGF0ZXMNCiAgICAgICAgICB0aGlzLl9kcmFnTW92ZVVwZGF0ZShlKTsNCg0KICAgICAgICAgIC8vIENhbGN1bGF0ZSByYXcgZGVsdGFYDQogICAgICAgICAgdmFyIHRvdGFsRGVsdGFYID0gdGhpcy5feFBvcyAtIHRoaXMuX3N0YXJ0aW5nWHBvczsNCg0KICAgICAgICAgIC8vIGRyYWdEaXJlY3Rpb24gaXMgdGhlIGF0dGVtcHRlZCB1c2VyIGRyYWcgZGlyZWN0aW9uDQogICAgICAgICAgdmFyIGRyYWdEaXJlY3Rpb24gPSB0b3RhbERlbHRhWCA+IDAgPyAncmlnaHQnIDogJ2xlZnQnOw0KDQogICAgICAgICAgLy8gRG9uJ3QgYWxsb3cgdG90YWxEZWx0YVggdG8gZXhjZWVkIFNpZGVuYXYgd2lkdGggb3IgYmUgZHJhZ2dlZCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uDQogICAgICAgICAgdG90YWxEZWx0YVggPSBNYXRoLm1pbih0aGlzLl93aWR0aCwgTWF0aC5hYnModG90YWxEZWx0YVgpKTsNCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVkZ2UgIT09IGRyYWdEaXJlY3Rpb24pIHsNCiAgICAgICAgICAgIHRvdGFsRGVsdGFYID0gMDsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgdHJhbnNmb3JtWCA9IC10b3RhbERlbHRhWDsNCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVkZ2UgPT09ICdyaWdodCcpIHsNCiAgICAgICAgICAgIHRyYW5zZm9ybVggPSAtdHJhbnNmb3JtWDsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBDYWxjdWxhdGUgb3Blbi9jbG9zZSBwZXJjZW50YWdlIG9mIHNpZGVuYXYsIHdpdGggb3BlbiA9IDEgYW5kIGNsb3NlID0gMA0KICAgICAgICAgIHRoaXMucGVyY2VudE9wZW4gPSBNYXRoLm1pbigxLCAxIC0gdG90YWxEZWx0YVggLyB0aGlzLl93aWR0aCk7DQoNCiAgICAgICAgICAvLyBTZXQgdHJhbnNmb3JtIGFuZCBvcGFjaXR5IHN0eWxlcw0KICAgICAgICAgIHRoaXMuZWwuc3R5bGUudHJhbnNmb3JtID0gInRyYW5zbGF0ZVgoIiArIHRyYW5zZm9ybVggKyAicHgpIjsNCiAgICAgICAgICB0aGlzLl9vdmVybGF5LnN0eWxlLm9wYWNpdHkgPSB0aGlzLnBlcmNlbnRPcGVuOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIENsb3NlIFJlbGVhc2UNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUNsb3NlUmVsZWFzZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNsb3NlUmVsZWFzZSgpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNPcGVuICYmIHRoaXMuaXNEcmFnZ2VkKSB7DQogICAgICAgICAgaWYgKHRoaXMucGVyY2VudE9wZW4gPiAwLjgpIHsNCiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGVJbigpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLl92ZXJ0aWNhbGx5U2Nyb2xsaW5nID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGVzIGNsb3Npbmcgb2YgU2lkZW5hdiB3aGVuIGVsZW1lbnQgd2l0aCBjbGFzcyAuc2lkZW5hdi1jbG9zZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlQ2xvc2VUcmlnZ2VyQ2xpY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDbG9zZVRyaWdnZXJDbGljayhlKSB7DQogICAgICAgIHZhciAkY2xvc2VUcmlnZ2VyID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLnNpZGVuYXYtY2xvc2UnKTsNCiAgICAgICAgaWYgKCRjbG9zZVRyaWdnZXIubGVuZ3RoICYmICF0aGlzLl9pc0N1cnJlbnRseUZpeGVkKCkpIHsNCiAgICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgV2luZG93IFJlc2l6ZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlV2luZG93UmVzaXplIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2luZG93UmVzaXplKCkgew0KICAgICAgICAvLyBPbmx5IGhhbmRsZSBob3Jpem9udGFsIHJlc2l6ZXMNCiAgICAgICAgaWYgKHRoaXMubGFzdFdpbmRvd1dpZHRoICE9PSB3aW5kb3cuaW5uZXJXaWR0aCkgew0KICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDk5Mikgew0KICAgICAgICAgICAgdGhpcy5vcGVuKCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmxhc3RXaW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOw0KICAgICAgICB0aGlzLmxhc3RXaW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwQ2xhc3NlcyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwQ2xhc3NlcygpIHsNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lZGdlID09PSAncmlnaHQnKSB7DQogICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdyaWdodC1hbGlnbmVkJyk7DQogICAgICAgICAgdGhpcy5kcmFnVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0LWFsaWduZWQnKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVDbGFzc2VzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlQ2xhc3NlcygpIHsNCiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdyaWdodC1hbGlnbmVkJyk7DQogICAgICAgIHRoaXMuZHJhZ1RhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdyaWdodC1hbGlnbmVkJyk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwRml4ZWQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEZpeGVkKCkgew0KICAgICAgICBpZiAodGhpcy5faXNDdXJyZW50bHlGaXhlZCgpKSB7DQogICAgICAgICAgdGhpcy5vcGVuKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfaXNDdXJyZW50bHlGaXhlZCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzQ3VycmVudGx5Rml4ZWQoKSB7DQogICAgICAgIHJldHVybiB0aGlzLmlzRml4ZWQgJiYgd2luZG93LmlubmVyV2lkdGggPiA5OTI7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2NyZWF0ZURyYWdUYXJnZXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVEcmFnVGFyZ2V0KCkgew0KICAgICAgICB2YXIgZHJhZ1RhcmdldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICBkcmFnVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctdGFyZ2V0Jyk7DQogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZHJhZ1RhcmdldCk7DQogICAgICAgIHRoaXMuZHJhZ1RhcmdldCA9IGRyYWdUYXJnZXQ7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX3ByZXZlbnRCb2R5U2Nyb2xsaW5nIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJldmVudEJvZHlTY3JvbGxpbmcoKSB7DQogICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTsNCiAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9lbmFibGVCb2R5U2Nyb2xsaW5nIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZW5hYmxlQm9keVNjcm9sbGluZygpIHsNCiAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5Ow0KICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAib3BlbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbigpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNPcGVuID09PSB0cnVlKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlOw0KDQogICAgICAgIC8vIFJ1biBvbk9wZW5TdGFydCBjYWxsYmFjaw0KICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gSGFuZGxlIGZpeGVkIFNpZGVuYXYNCiAgICAgICAgaWYgKHRoaXMuX2lzQ3VycmVudGx5Rml4ZWQoKSkgew0KICAgICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZWwpOw0KICAgICAgICAgIGFuaW0oew0KICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCwNCiAgICAgICAgICAgIHRyYW5zbGF0ZVg6IDAsDQogICAgICAgICAgICBkdXJhdGlvbjogMCwNCiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMuX2VuYWJsZUJvZHlTY3JvbGxpbmcoKTsNCiAgICAgICAgICB0aGlzLl9vdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQoNCiAgICAgICAgICAvLyBIYW5kbGUgbm9uLWZpeGVkIFNpZGVuYXYNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnByZXZlbnRTY3JvbGxpbmcpIHsNCiAgICAgICAgICAgIHRoaXMuX3ByZXZlbnRCb2R5U2Nyb2xsaW5nKCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dlZCB8fCB0aGlzLnBlcmNlbnRPcGVuICE9IDEpIHsNCiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGVJbigpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImNsb3NlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNPcGVuID09PSBmYWxzZSkgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7DQoNCiAgICAgICAgLy8gUnVuIG9uQ2xvc2VTdGFydCBjYWxsYmFjaw0KICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkNsb3NlU3RhcnQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0LmNhbGwodGhpcywgdGhpcy5lbCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBIYW5kbGUgZml4ZWQgU2lkZW5hdg0KICAgICAgICBpZiAodGhpcy5faXNDdXJyZW50bHlGaXhlZCgpKSB7DQogICAgICAgICAgdmFyIHRyYW5zZm9ybVggPSB0aGlzLm9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnID8gJy0xMDUlJyA6ICcxMDUlJzsNCiAgICAgICAgICB0aGlzLmVsLnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGVYKCIgKyB0cmFuc2Zvcm1YICsgIikiOw0KDQogICAgICAgICAgLy8gSGFuZGxlIG5vbi1maXhlZCBTaWRlbmF2DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5fZW5hYmxlQm9keVNjcm9sbGluZygpOw0KDQogICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dlZCB8fCB0aGlzLnBlcmNlbnRPcGVuICE9IDApIHsNCiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGVPdXQoKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5fb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hbmltYXRlSW4iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlSW4oKSB7DQogICAgICAgIHRoaXMuX2FuaW1hdGVTaWRlbmF2SW4oKTsNCiAgICAgICAgdGhpcy5fYW5pbWF0ZU92ZXJsYXlJbigpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hbmltYXRlU2lkZW5hdkluIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZVNpZGVuYXZJbigpIHsNCiAgICAgICAgdmFyIF90aGlzMzEgPSB0aGlzOw0KDQogICAgICAgIHZhciBzbGlkZU91dFBlcmNlbnQgPSB0aGlzLm9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnID8gLTEgOiAxOw0KICAgICAgICBpZiAodGhpcy5pc0RyYWdnZWQpIHsNCiAgICAgICAgICBzbGlkZU91dFBlcmNlbnQgPSB0aGlzLm9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnID8gc2xpZGVPdXRQZXJjZW50ICsgdGhpcy5wZXJjZW50T3BlbiA6IHNsaWRlT3V0UGVyY2VudCAtIHRoaXMucGVyY2VudE9wZW47DQogICAgICAgIH0NCg0KICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTsNCiAgICAgICAgYW5pbSh7DQogICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCwNCiAgICAgICAgICB0cmFuc2xhdGVYOiBbc2xpZGVPdXRQZXJjZW50ICogMTAwICsgIiUiLCAwXSwNCiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmluRHVyYXRpb24sDQogICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLA0KICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAvLyBSdW4gb25PcGVuRW5kIGNhbGxiYWNrDQogICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMzEub3B0aW9ucy5vbk9wZW5FbmQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgX3RoaXMzMS5vcHRpb25zLm9uT3BlbkVuZC5jYWxsKF90aGlzMzEsIF90aGlzMzEuZWwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2FuaW1hdGVPdmVybGF5SW4iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3ZlcmxheUluKCkgew0KICAgICAgICB2YXIgc3RhcnQgPSAwOw0KICAgICAgICBpZiAodGhpcy5pc0RyYWdnZWQpIHsNCiAgICAgICAgICBzdGFydCA9IHRoaXMucGVyY2VudE9wZW47DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgJCh0aGlzLl9vdmVybGF5KS5jc3Moew0KICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5fb3ZlcmxheSk7DQogICAgICAgIGFuaW0oew0KICAgICAgICAgIHRhcmdldHM6IHRoaXMuX292ZXJsYXksDQogICAgICAgICAgb3BhY2l0eTogW3N0YXJ0LCAxXSwNCiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmluRHVyYXRpb24sDQogICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hbmltYXRlT3V0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZU91dCgpIHsNCiAgICAgICAgdGhpcy5fYW5pbWF0ZVNpZGVuYXZPdXQoKTsNCiAgICAgICAgdGhpcy5fYW5pbWF0ZU92ZXJsYXlPdXQoKTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfYW5pbWF0ZVNpZGVuYXZPdXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlU2lkZW5hdk91dCgpIHsNCiAgICAgICAgdmFyIF90aGlzMzIgPSB0aGlzOw0KDQogICAgICAgIHZhciBlbmRQZXJjZW50ID0gdGhpcy5vcHRpb25zLmVkZ2UgPT09ICdsZWZ0JyA/IC0xIDogMTsNCiAgICAgICAgdmFyIHNsaWRlT3V0UGVyY2VudCA9IDA7DQogICAgICAgIGlmICh0aGlzLmlzRHJhZ2dlZCkgew0KICAgICAgICAgIHNsaWRlT3V0UGVyY2VudCA9IHRoaXMub3B0aW9ucy5lZGdlID09PSAnbGVmdCcgPyBlbmRQZXJjZW50ICsgdGhpcy5wZXJjZW50T3BlbiA6IGVuZFBlcmNlbnQgLSB0aGlzLnBlcmNlbnRPcGVuOw0KICAgICAgICB9DQoNCiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5lbCk7DQogICAgICAgIGFuaW0oew0KICAgICAgICAgIHRhcmdldHM6IHRoaXMuZWwsDQogICAgICAgICAgdHJhbnNsYXRlWDogW3NsaWRlT3V0UGVyY2VudCAqIDEwMCArICIlIiwgZW5kUGVyY2VudCAqIDEwNSArICIlIl0sDQogICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbiwNCiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsDQogICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIC8vIFJ1biBvbk9wZW5FbmQgY2FsbGJhY2sNCiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMzMi5vcHRpb25zLm9uQ2xvc2VFbmQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgX3RoaXMzMi5vcHRpb25zLm9uQ2xvc2VFbmQuY2FsbChfdGhpczMyLCBfdGhpczMyLmVsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hbmltYXRlT3ZlcmxheU91dCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVPdmVybGF5T3V0KCkgew0KICAgICAgICB2YXIgX3RoaXMzMyA9IHRoaXM7DQoNCiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5fb3ZlcmxheSk7DQogICAgICAgIGFuaW0oew0KICAgICAgICAgIHRhcmdldHM6IHRoaXMuX292ZXJsYXksDQogICAgICAgICAgb3BhY2l0eTogMCwNCiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywNCiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgJChfdGhpczMzLl9vdmVybGF5KS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfV0sIFt7DQogICAgICBrZXk6ICJpbml0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX2dldChTaWRlbmF2Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2lkZW5hdiksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBJbnN0YW5jZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRJbnN0YW5jZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHsNCiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7DQogICAgICAgIHJldHVybiBkb21FbGVtLk1fU2lkZW5hdjsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJkZWZhdWx0cyIsDQogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIF9kZWZhdWx0czsNCiAgICAgIH0NCiAgICB9XSk7DQoNCiAgICByZXR1cm4gU2lkZW5hdjsNCiAgfShDb21wb25lbnQpOw0KDQogIC8qKg0KICAgKiBAc3RhdGljDQogICAqIEBtZW1iZXJvZiBTaWRlbmF2DQogICAqIEB0eXBlIHtBcnJheS48U2lkZW5hdj59DQogICAqLw0KDQoNCiAgU2lkZW5hdi5fc2lkZW5hdnMgPSBbXTsNCg0KICB3aW5kb3cuTS5TaWRlbmF2ID0gU2lkZW5hdjsNCg0KICBpZiAoTS5qUXVlcnlMb2FkZWQpIHsNCiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKFNpZGVuYXYsICdzaWRlbmF2JywgJ01fU2lkZW5hdicpOw0KICB9DQp9KShjYXNoLCBNLmFuaW1lKTsNCjsoZnVuY3Rpb24gKCQsIGFuaW0pIHsNCiAgJ3VzZSBzdHJpY3QnOw0KDQogIHZhciBfZGVmYXVsdHMgPSB7DQogICAgdGhyb3R0bGU6IDEwMCwNCiAgICBzY3JvbGxPZmZzZXQ6IDIwMCwgLy8gb2Zmc2V0IC0gMjAwIGFsbG93cyBlbGVtZW50cyBuZWFyIGJvdHRvbSBvZiBwYWdlIHRvIHNjcm9sbA0KICAgIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJywNCiAgICBnZXRBY3RpdmVFbGVtZW50OiBmdW5jdGlvbiAoaWQpIHsNCiAgICAgIHJldHVybiAnYVtocmVmPSIjJyArIGlkICsgJyJdJzsNCiAgICB9DQogIH07DQoNCiAgLyoqDQogICAqIEBjbGFzcw0KICAgKg0KICAgKi8NCg0KICB2YXIgU2Nyb2xsU3B5ID0gZnVuY3Rpb24gKF9Db21wb25lbnQ5KSB7DQogICAgX2luaGVyaXRzKFNjcm9sbFNweSwgX0NvbXBvbmVudDkpOw0KDQogICAgLyoqDQogICAgICogQ29uc3RydWN0IFNjcm9sbFNweSBpbnN0YW5jZQ0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIFNjcm9sbFNweShlbCwgb3B0aW9ucykgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNjcm9sbFNweSk7DQoNCiAgICAgIHZhciBfdGhpczM0ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFNjcm9sbFNweS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNjcm9sbFNweSkpLmNhbGwodGhpcywgU2Nyb2xsU3B5LCBlbCwgb3B0aW9ucykpOw0KDQogICAgICBfdGhpczM0LmVsLk1fU2Nyb2xsU3B5ID0gX3RoaXMzNDsNCg0KICAgICAgLyoqDQogICAgICAgKiBPcHRpb25zIGZvciB0aGUgbW9kYWwNCiAgICAgICAqIEBtZW1iZXIgTW9kYWwjb3B0aW9ucw0KICAgICAgICogQHByb3Age051bWJlcn0gW3Rocm90dGxlPTEwMF0gLSBUaHJvdHRsZSBvZiBzY3JvbGwgaGFuZGxlcg0KICAgICAgICogQHByb3Age051bWJlcn0gW3Njcm9sbE9mZnNldD0yMDBdIC0gT2Zmc2V0IGZvciBjZW50ZXJpbmcgZWxlbWVudCB3aGVuIHNjcm9sbGVkIHRvDQogICAgICAgKiBAcHJvcCB7U3RyaW5nfSBbYWN0aXZlQ2xhc3M9J2FjdGl2ZSddIC0gQ2xhc3MgYXBwbGllZCB0byBhY3RpdmUgZWxlbWVudHMNCiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gW2dldEFjdGl2ZUVsZW1lbnRdIC0gVXNlZCB0byBmaW5kIGFjdGl2ZSBlbGVtZW50DQogICAgICAgKi8NCiAgICAgIF90aGlzMzQub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBTY3JvbGxTcHkuZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICAvLyBzZXR1cA0KICAgICAgU2Nyb2xsU3B5Ll9lbGVtZW50cy5wdXNoKF90aGlzMzQpOw0KICAgICAgU2Nyb2xsU3B5Ll9jb3VudCsrOw0KICAgICAgU2Nyb2xsU3B5Ll9pbmNyZW1lbnQrKzsNCiAgICAgIF90aGlzMzQudGlja0lkID0gLTE7DQogICAgICBfdGhpczM0LmlkID0gU2Nyb2xsU3B5Ll9pbmNyZW1lbnQ7DQogICAgICBfdGhpczM0Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTsNCiAgICAgIF90aGlzMzQuX2hhbmRsZVdpbmRvd1Njcm9sbCgpOw0KICAgICAgcmV0dXJuIF90aGlzMzQ7DQogICAgfQ0KDQogICAgX2NyZWF0ZUNsYXNzKFNjcm9sbFNweSwgW3sNCiAgICAgIGtleTogImRlc3Ryb3kiLA0KDQoNCiAgICAgIC8qKg0KICAgICAgICogVGVhcmRvd24gY29tcG9uZW50DQogICAgICAgKi8NCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkgew0KICAgICAgICBTY3JvbGxTcHkuX2VsZW1lbnRzLnNwbGljZShTY3JvbGxTcHkuX2VsZW1lbnRzLmluZGV4T2YodGhpcyksIDEpOw0KICAgICAgICBTY3JvbGxTcHkuX2VsZW1lbnRzSW5WaWV3LnNwbGljZShTY3JvbGxTcHkuX2VsZW1lbnRzSW5WaWV3LmluZGV4T2YodGhpcyksIDEpOw0KICAgICAgICBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cy5zcGxpY2UoU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMuaW5kZXhPZih0aGlzLiRlbCksIDEpOw0KICAgICAgICBTY3JvbGxTcHkuX2NvdW50LS07DQogICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTsNCiAgICAgICAgJCh0aGlzLm9wdGlvbnMuZ2V0QWN0aXZlRWxlbWVudCh0aGlzLiRlbC5hdHRyKCdpZCcpKSkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTsNCiAgICAgICAgdGhpcy5lbC5NX1Njcm9sbFNweSA9IHVuZGVmaW5lZDsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB2YXIgdGhyb3R0bGVkUmVzaXplID0gTS50aHJvdHRsZSh0aGlzLl9oYW5kbGVXaW5kb3dTY3JvbGwsIDIwMCk7DQogICAgICAgIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kID0gdGhyb3R0bGVkUmVzaXplLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbEJvdW5kID0gdGhpcy5faGFuZGxlV2luZG93U2Nyb2xsLmJpbmQodGhpcyk7DQogICAgICAgIGlmIChTY3JvbGxTcHkuX2NvdW50ID09PSAxKSB7DQogICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbEJvdW5kKTsNCiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5faGFuZGxlVGhyb3R0bGVkUmVzaXplQm91bmQpOw0KICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUcmlnZ2VyQ2xpY2spOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgaWYgKFNjcm9sbFNweS5fY291bnQgPT09IDApIHsNCiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5faGFuZGxlV2luZG93U2Nyb2xsQm91bmQpOw0KICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVUaHJvdHRsZWRSZXNpemVCb3VuZCk7DQogICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVRyaWdnZXJDbGljayk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgVHJpZ2dlciBDbGljaw0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlVHJpZ2dlckNsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlVHJpZ2dlckNsaWNrKGUpIHsNCiAgICAgICAgdmFyICR0cmlnZ2VyID0gJChlLnRhcmdldCk7DQogICAgICAgIGZvciAodmFyIGkgPSBTY3JvbGxTcHkuX2VsZW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICAgICAgdmFyIHNjcm9sbHNweSA9IFNjcm9sbFNweS5fZWxlbWVudHNbaV07DQogICAgICAgICAgaWYgKCR0cmlnZ2VyLmlzKCdhW2hyZWY9IiMnICsgc2Nyb2xsc3B5LiRlbC5hdHRyKCdpZCcpICsgJyJdJykpIHsNCiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBzY3JvbGxzcHkuJGVsLm9mZnNldCgpLnRvcCArIDE7DQoNCiAgICAgICAgICAgIGFuaW0oew0KICAgICAgICAgICAgICB0YXJnZXRzOiBbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSwNCiAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBvZmZzZXQgLSBzY3JvbGxzcHkub3B0aW9ucy5zY3JvbGxPZmZzZXQsDQogICAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAsDQogICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIFdpbmRvdyBTY3JvbGwNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZVdpbmRvd1Njcm9sbCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVdpbmRvd1Njcm9sbCgpIHsNCiAgICAgICAgLy8gdW5pcXVlIHRpY2sgaWQNCiAgICAgICAgU2Nyb2xsU3B5Ll90aWNrcysrOw0KDQogICAgICAgIC8vIHZpZXdwb3J0IHJlY3RhbmdsZQ0KICAgICAgICB2YXIgdG9wID0gTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpLA0KICAgICAgICAgICAgbGVmdCA9IE0uZ2V0RG9jdW1lbnRTY3JvbGxMZWZ0KCksDQogICAgICAgICAgICByaWdodCA9IGxlZnQgKyB3aW5kb3cuaW5uZXJXaWR0aCwNCiAgICAgICAgICAgIGJvdHRvbSA9IHRvcCArIHdpbmRvdy5pbm5lckhlaWdodDsNCg0KICAgICAgICAvLyBkZXRlcm1pbmUgd2hpY2ggZWxlbWVudHMgYXJlIGluIHZpZXcNCiAgICAgICAgdmFyIGludGVyc2VjdGlvbnMgPSBTY3JvbGxTcHkuX2ZpbmRFbGVtZW50cyh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludGVyc2VjdGlvbnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICB2YXIgc2Nyb2xsc3B5ID0gaW50ZXJzZWN0aW9uc1tpXTsNCiAgICAgICAgICB2YXIgbGFzdFRpY2sgPSBzY3JvbGxzcHkudGlja0lkOw0KICAgICAgICAgIGlmIChsYXN0VGljayA8IDApIHsNCiAgICAgICAgICAgIC8vIGVudGVyZWQgaW50byB2aWV3DQogICAgICAgICAgICBzY3JvbGxzcHkuX2VudGVyKCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gdXBkYXRlIHRpY2sgaWQNCiAgICAgICAgICBzY3JvbGxzcHkudGlja0lkID0gU2Nyb2xsU3B5Ll90aWNrczsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBTY3JvbGxTcHkuX2VsZW1lbnRzSW5WaWV3Lmxlbmd0aDsgX2krKykgew0KICAgICAgICAgIHZhciBfc2Nyb2xsc3B5ID0gU2Nyb2xsU3B5Ll9lbGVtZW50c0luVmlld1tfaV07DQogICAgICAgICAgdmFyIF9sYXN0VGljayA9IF9zY3JvbGxzcHkudGlja0lkOw0KICAgICAgICAgIGlmIChfbGFzdFRpY2sgPj0gMCAmJiBfbGFzdFRpY2sgIT09IFNjcm9sbFNweS5fdGlja3MpIHsNCiAgICAgICAgICAgIC8vIGV4aXRlZCBmcm9tIHZpZXcNCiAgICAgICAgICAgIF9zY3JvbGxzcHkuX2V4aXQoKTsNCiAgICAgICAgICAgIF9zY3JvbGxzcHkudGlja0lkID0gLTE7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gcmVtZW1iZXIgZWxlbWVudHMgaW4gdmlldyBmb3IgbmV4dCB0aWNrDQogICAgICAgIFNjcm9sbFNweS5fZWxlbWVudHNJblZpZXcgPSBpbnRlcnNlY3Rpb25zOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEZpbmQgZWxlbWVudHMgdGhhdCBhcmUgd2l0aGluIHRoZSBib3VuZGFyeQ0KICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHRvcA0KICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0DQogICAgICAgKiBAcGFyYW0ge251bWJlcn0gYm90dG9tDQogICAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVmdA0KICAgICAgICogQHJldHVybiB7QXJyYXkuPFNjcm9sbFNweT59ICAgQSBjb2xsZWN0aW9uIG9mIGVsZW1lbnRzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9lbnRlciIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2VudGVyKCkgew0KICAgICAgICBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cyA9IFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAodmFsdWUpIHsNCiAgICAgICAgICByZXR1cm4gdmFsdWUuaGVpZ2h0KCkgIT0gMDsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgaWYgKFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzWzBdKSB7DQogICAgICAgICAgJCh0aGlzLm9wdGlvbnMuZ2V0QWN0aXZlRWxlbWVudChTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50c1swXS5hdHRyKCdpZCcpKSkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTsNCiAgICAgICAgICBpZiAoU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHNbMF1bMF0uTV9TY3JvbGxTcHkgJiYgdGhpcy5pZCA8IFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzWzBdWzBdLk1fU2Nyb2xsU3B5LmlkKSB7DQogICAgICAgICAgICBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cy51bnNoaWZ0KHRoaXMuJGVsKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMucHVzaCh0aGlzLiRlbCk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzLnB1c2godGhpcy4kZWwpOw0KICAgICAgICB9DQoNCiAgICAgICAgJCh0aGlzLm9wdGlvbnMuZ2V0QWN0aXZlRWxlbWVudChTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50c1swXS5hdHRyKCdpZCcpKSkuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfZXhpdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2V4aXQoKSB7DQogICAgICAgIHZhciBfdGhpczM1ID0gdGhpczsNCg0KICAgICAgICBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cyA9IFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAodmFsdWUpIHsNCiAgICAgICAgICByZXR1cm4gdmFsdWUuaGVpZ2h0KCkgIT0gMDsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgaWYgKFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzWzBdKSB7DQogICAgICAgICAgJCh0aGlzLm9wdGlvbnMuZ2V0QWN0aXZlRWxlbWVudChTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50c1swXS5hdHRyKCdpZCcpKSkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTsNCg0KICAgICAgICAgIFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzID0gU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgew0KICAgICAgICAgICAgcmV0dXJuIGVsLmF0dHIoJ2lkJykgIT0gX3RoaXMzNS4kZWwuYXR0cignaWQnKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgICBpZiAoU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHNbMF0pIHsNCiAgICAgICAgICAgIC8vIENoZWNrIGlmIGVtcHR5DQogICAgICAgICAgICAkKHRoaXMub3B0aW9ucy5nZXRBY3RpdmVFbGVtZW50KFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzWzBdLmF0dHIoJ2lkJykpKS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiaW5pdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9nZXQoU2Nyb2xsU3B5Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2Nyb2xsU3B5KSwgImluaXQiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogR2V0IEluc3RhbmNlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImdldEluc3RhbmNlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkgew0KICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDsNCiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9TY3JvbGxTcHk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2ZpbmRFbGVtZW50cyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbmRFbGVtZW50cyh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpIHsNCiAgICAgICAgdmFyIGhpdHMgPSBbXTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBTY3JvbGxTcHkuX2VsZW1lbnRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdmFyIHNjcm9sbHNweSA9IFNjcm9sbFNweS5fZWxlbWVudHNbaV07DQogICAgICAgICAgdmFyIGN1cnJUb3AgPSB0b3AgKyBzY3JvbGxzcHkub3B0aW9ucy5zY3JvbGxPZmZzZXQgfHwgMjAwOw0KDQogICAgICAgICAgaWYgKHNjcm9sbHNweS4kZWwuaGVpZ2h0KCkgPiAwKSB7DQogICAgICAgICAgICB2YXIgZWxUb3AgPSBzY3JvbGxzcHkuJGVsLm9mZnNldCgpLnRvcCwNCiAgICAgICAgICAgICAgICBlbExlZnQgPSBzY3JvbGxzcHkuJGVsLm9mZnNldCgpLmxlZnQsDQogICAgICAgICAgICAgICAgZWxSaWdodCA9IGVsTGVmdCArIHNjcm9sbHNweS4kZWwud2lkdGgoKSwNCiAgICAgICAgICAgICAgICBlbEJvdHRvbSA9IGVsVG9wICsgc2Nyb2xsc3B5LiRlbC5oZWlnaHQoKTsNCg0KICAgICAgICAgICAgdmFyIGlzSW50ZXJzZWN0ID0gIShlbExlZnQgPiByaWdodCB8fCBlbFJpZ2h0IDwgbGVmdCB8fCBlbFRvcCA+IGJvdHRvbSB8fCBlbEJvdHRvbSA8IGN1cnJUb3ApOw0KDQogICAgICAgICAgICBpZiAoaXNJbnRlcnNlY3QpIHsNCiAgICAgICAgICAgICAgaGl0cy5wdXNoKHNjcm9sbHNweSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBoaXRzOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImRlZmF1bHRzIiwNCiAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gX2RlZmF1bHRzOw0KICAgICAgfQ0KICAgIH1dKTsNCg0KICAgIHJldHVybiBTY3JvbGxTcHk7DQogIH0oQ29tcG9uZW50KTsNCg0KICAvKioNCiAgICogQHN0YXRpYw0KICAgKiBAbWVtYmVyb2YgU2Nyb2xsU3B5DQogICAqIEB0eXBlIHtBcnJheS48U2Nyb2xsU3B5Pn0NCiAgICovDQoNCg0KICBTY3JvbGxTcHkuX2VsZW1lbnRzID0gW107DQoNCiAgLyoqDQogICAqIEBzdGF0aWMNCiAgICogQG1lbWJlcm9mIFNjcm9sbFNweQ0KICAgKiBAdHlwZSB7QXJyYXkuPFNjcm9sbFNweT59DQogICAqLw0KICBTY3JvbGxTcHkuX2VsZW1lbnRzSW5WaWV3ID0gW107DQoNCiAgLyoqDQogICAqIEBzdGF0aWMNCiAgICogQG1lbWJlcm9mIFNjcm9sbFNweQ0KICAgKiBAdHlwZSB7QXJyYXkuPGNhc2g+fQ0KICAgKi8NCiAgU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMgPSBbXTsNCg0KICAvKioNCiAgICogQHN0YXRpYw0KICAgKiBAbWVtYmVyb2YgU2Nyb2xsU3B5DQogICAqLw0KICBTY3JvbGxTcHkuX2NvdW50ID0gMDsNCg0KICAvKioNCiAgICogQHN0YXRpYw0KICAgKiBAbWVtYmVyb2YgU2Nyb2xsU3B5DQogICAqLw0KICBTY3JvbGxTcHkuX2luY3JlbWVudCA9IDA7DQoNCiAgLyoqDQogICAqIEBzdGF0aWMNCiAgICogQG1lbWJlcm9mIFNjcm9sbFNweQ0KICAgKi8NCiAgU2Nyb2xsU3B5Ll90aWNrcyA9IDA7DQoNCiAgTS5TY3JvbGxTcHkgPSBTY3JvbGxTcHk7DQoNCiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7DQogICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihTY3JvbGxTcHksICdzY3JvbGxTcHknLCAnTV9TY3JvbGxTcHknKTsNCiAgfQ0KfSkoY2FzaCwgTS5hbmltZSk7DQo7KGZ1bmN0aW9uICgkKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICB2YXIgX2RlZmF1bHRzID0gew0KICAgIGRhdGE6IHt9LCAvLyBBdXRvY29tcGxldGUgZGF0YSBzZXQNCiAgICBsaW1pdDogSW5maW5pdHksIC8vIExpbWl0IG9mIHJlc3VsdHMgdGhlIGF1dG9jb21wbGV0ZSBzaG93cw0KICAgIG9uQXV0b2NvbXBsZXRlOiBudWxsLCAvLyBDYWxsYmFjayBmb3Igd2hlbiBhdXRvY29tcGxldGVkDQogICAgbWluTGVuZ3RoOiAxLCAvLyBNaW4gY2hhcmFjdGVycyBiZWZvcmUgYXV0b2NvbXBsZXRlIHN0YXJ0cw0KICAgIHNvcnRGdW5jdGlvbjogZnVuY3Rpb24gKGEsIGIsIGlucHV0U3RyaW5nKSB7DQogICAgICAvLyBTb3J0IGZ1bmN0aW9uIGZvciBzb3J0aW5nIGF1dG9jb21wbGV0ZSByZXN1bHRzDQogICAgICByZXR1cm4gYS5pbmRleE9mKGlucHV0U3RyaW5nKSAtIGIuaW5kZXhPZihpbnB1dFN0cmluZyk7DQogICAgfQ0KICB9Ow0KDQogIC8qKg0KICAgKiBAY2xhc3MNCiAgICoNCiAgICovDQoNCiAgdmFyIEF1dG9jb21wbGV0ZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MTApIHsNCiAgICBfaW5oZXJpdHMoQXV0b2NvbXBsZXRlLCBfQ29tcG9uZW50MTApOw0KDQogICAgLyoqDQogICAgICogQ29uc3RydWN0IEF1dG9jb21wbGV0ZSBpbnN0YW5jZQ0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIEF1dG9jb21wbGV0ZShlbCwgb3B0aW9ucykgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dG9jb21wbGV0ZSk7DQoNCiAgICAgIHZhciBfdGhpczM2ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEF1dG9jb21wbGV0ZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEF1dG9jb21wbGV0ZSkpLmNhbGwodGhpcywgQXV0b2NvbXBsZXRlLCBlbCwgb3B0aW9ucykpOw0KDQogICAgICBfdGhpczM2LmVsLk1fQXV0b2NvbXBsZXRlID0gX3RoaXMzNjsNCg0KICAgICAgLyoqDQogICAgICAgKiBPcHRpb25zIGZvciB0aGUgYXV0b2NvbXBsZXRlDQogICAgICAgKiBAbWVtYmVyIEF1dG9jb21wbGV0ZSNvcHRpb25zDQogICAgICAgKiBAcHJvcCB7TnVtYmVyfSBkdXJhdGlvbg0KICAgICAgICogQHByb3Age051bWJlcn0gZGlzdA0KICAgICAgICogQHByb3Age251bWJlcn0gc2hpZnQNCiAgICAgICAqIEBwcm9wIHtudW1iZXJ9IHBhZGRpbmcNCiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBmdWxsV2lkdGgNCiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBpbmRpY2F0b3JzDQogICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gbm9XcmFwDQogICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ3ljbGVUbw0KICAgICAgICovDQogICAgICBfdGhpczM2Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQXV0b2NvbXBsZXRlLmRlZmF1bHRzLCBvcHRpb25zKTsNCg0KICAgICAgLy8gU2V0dXANCiAgICAgIF90aGlzMzYuaXNPcGVuID0gZmFsc2U7DQogICAgICBfdGhpczM2LmNvdW50ID0gMDsNCiAgICAgIF90aGlzMzYuYWN0aXZlSW5kZXggPSAtMTsNCiAgICAgIF90aGlzMzYub2xkVmFsOw0KICAgICAgX3RoaXMzNi4kaW5wdXRGaWVsZCA9IF90aGlzMzYuJGVsLmNsb3Nlc3QoJy5pbnB1dC1maWVsZCcpOw0KICAgICAgX3RoaXMzNi4kYWN0aXZlID0gJCgpOw0KICAgICAgX3RoaXMzNi5fbW91c2Vkb3duID0gZmFsc2U7DQogICAgICBfdGhpczM2Ll9zZXR1cERyb3Bkb3duKCk7DQoNCiAgICAgIF90aGlzMzYuX3NldHVwRXZlbnRIYW5kbGVycygpOw0KICAgICAgcmV0dXJuIF90aGlzMzY7DQogICAgfQ0KDQogICAgX2NyZWF0ZUNsYXNzKEF1dG9jb21wbGV0ZSwgW3sNCiAgICAgIGtleTogImRlc3Ryb3kiLA0KDQoNCiAgICAgIC8qKg0KICAgICAgICogVGVhcmRvd24gY29tcG9uZW50DQogICAgICAgKi8NCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkgew0KICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7DQogICAgICAgIHRoaXMuX3JlbW92ZURyb3Bkb3duKCk7DQogICAgICAgIHRoaXMuZWwuTV9BdXRvY29tcGxldGUgPSB1bmRlZmluZWQ7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRCbHVyQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dEJsdXIuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRLZXl1cEFuZEZvY3VzQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dEtleXVwQW5kRm9jdXMuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd24uYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRDbGljay5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZWRvd25BbmRUb3VjaHN0YXJ0Qm91bmQgPSB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZWRvd25BbmRUb3VjaHN0YXJ0LmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNldXBBbmRUb3VjaGVuZEJvdW5kID0gdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2V1cEFuZFRvdWNoZW5kLmJpbmQodGhpcyk7DQoNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5faGFuZGxlSW5wdXRCbHVyQm91bmQpOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlSW5wdXRLZXl1cEFuZEZvY3VzQm91bmQpOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlSW5wdXRLZXl1cEFuZEZvY3VzQm91bmQpOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCk7DQogICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQpOw0KICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZWRvd25BbmRUb3VjaHN0YXJ0Qm91bmQpOw0KICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2V1cEFuZFRvdWNoZW5kQm91bmQpOw0KDQogICAgICAgIGlmICh0eXBlb2Ygd2luZG93Lm9udG91Y2hzdGFydCAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2Vkb3duQW5kVG91Y2hzdGFydEJvdW5kKTsNCiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNldXBBbmRUb3VjaGVuZEJvdW5kKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfcmVtb3ZlRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX2hhbmRsZUlucHV0Qmx1ckJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUlucHV0S2V5dXBBbmRGb2N1c0JvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUlucHV0S2V5dXBBbmRGb2N1c0JvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpOw0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kKTsNCiAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2Vkb3duQW5kVG91Y2hzdGFydEJvdW5kKTsNCiAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNldXBBbmRUb3VjaGVuZEJvdW5kKTsNCg0KICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNlZG93bkFuZFRvdWNoc3RhcnRCb3VuZCk7DQogICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZXVwQW5kVG91Y2hlbmRCb3VuZCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXR1cCBkcm9wZG93bg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBEcm9wZG93biIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRHJvcGRvd24oKSB7DQogICAgICAgIHZhciBfdGhpczM3ID0gdGhpczsNCg0KICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7DQogICAgICAgIHRoaXMuY29udGFpbmVyLmlkID0gImF1dG9jb21wbGV0ZS1vcHRpb25zLSIgKyBNLmd1aWQoKTsNCiAgICAgICAgJCh0aGlzLmNvbnRhaW5lcikuYWRkQ2xhc3MoJ2F1dG9jb21wbGV0ZS1jb250ZW50IGRyb3Bkb3duLWNvbnRlbnQnKTsNCiAgICAgICAgdGhpcy4kaW5wdXRGaWVsZC5hcHBlbmQodGhpcy5jb250YWluZXIpOw0KICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnLCB0aGlzLmNvbnRhaW5lci5pZCk7DQoNCiAgICAgICAgdGhpcy5kcm9wZG93biA9IE0uRHJvcGRvd24uaW5pdCh0aGlzLmVsLCB7DQogICAgICAgICAgYXV0b0ZvY3VzOiBmYWxzZSwNCiAgICAgICAgICBjbG9zZU9uQ2xpY2s6IGZhbHNlLA0KICAgICAgICAgIGNvdmVyVHJpZ2dlcjogZmFsc2UsDQogICAgICAgICAgb25JdGVtQ2xpY2s6IGZ1bmN0aW9uIChpdGVtRWwpIHsNCiAgICAgICAgICAgIF90aGlzMzcuc2VsZWN0T3B0aW9uKCQoaXRlbUVsKSk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBTa2V0Y2h5IHJlbW92YWwgb2YgZHJvcGRvd24gY2xpY2sgaGFuZGxlcg0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5kcm9wZG93bi5faGFuZGxlQ2xpY2tCb3VuZCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVtb3ZlIGRyb3Bkb3duDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVEcm9wZG93biIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZURyb3Bkb3duKCkgew0KICAgICAgICB0aGlzLmNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuY29udGFpbmVyKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgSW5wdXQgQmx1cg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlSW5wdXRCbHVyIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRCbHVyKCkgew0KICAgICAgICBpZiAoIXRoaXMuX21vdXNlZG93bikgew0KICAgICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAgICAgICB0aGlzLl9yZXNldEF1dG9jb21wbGV0ZSgpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIElucHV0IEtleXVwIGFuZCBGb2N1cw0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlSW5wdXRLZXl1cEFuZEZvY3VzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRLZXl1cEFuZEZvY3VzKGUpIHsNCiAgICAgICAgaWYgKGUudHlwZSA9PT0gJ2tleXVwJykgew0KICAgICAgICAgIEF1dG9jb21wbGV0ZS5fa2V5ZG93biA9IGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5jb3VudCA9IDA7DQogICAgICAgIHZhciB2YWwgPSB0aGlzLmVsLnZhbHVlLnRvTG93ZXJDYXNlKCk7DQoNCiAgICAgICAgLy8gRG9uJ3QgY2FwdHVyZSBlbnRlciBvciBhcnJvdyBrZXkgdXNhZ2UuDQogICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzIHx8IGUua2V5Q29kZSA9PT0gMzggfHwgZS5rZXlDb2RlID09PSA0MCkgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENoZWNrIGlmIHRoZSBpbnB1dCBpc24ndCBlbXB0eQ0KICAgICAgICAvLyBDaGVjayBpZiBmb2N1cyB0cmlnZ2VyZWQgYnkgdGFiDQogICAgICAgIGlmICh0aGlzLm9sZFZhbCAhPT0gdmFsICYmIE0udGFiUHJlc3NlZCkgew0KICAgICAgICAgIHRoaXMub3BlbigpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gVXBkYXRlIG9sZFZhbA0KICAgICAgICB0aGlzLm9sZFZhbCA9IHZhbDsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgSW5wdXQgS2V5ZG93bg0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlSW5wdXRLZXlkb3duIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRLZXlkb3duKGUpIHsNCiAgICAgICAgQXV0b2NvbXBsZXRlLl9rZXlkb3duID0gdHJ1ZTsNCg0KICAgICAgICAvLyBBcnJvdyBrZXlzIGFuZCBlbnRlciBrZXkgdXNhZ2UNCiAgICAgICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGUsDQogICAgICAgICAgICBsaUVsZW1lbnQgPSB2b2lkIDAsDQogICAgICAgICAgICBudW1JdGVtcyA9ICQodGhpcy5jb250YWluZXIpLmNoaWxkcmVuKCdsaScpLmxlbmd0aDsNCg0KICAgICAgICAvLyBzZWxlY3QgZWxlbWVudCBvbiBFbnRlcg0KICAgICAgICBpZiAoa2V5Q29kZSA9PT0gTS5rZXlzLkVOVEVSICYmIHRoaXMuYWN0aXZlSW5kZXggPj0gMCkgew0KICAgICAgICAgIGxpRWxlbWVudCA9ICQodGhpcy5jb250YWluZXIpLmNoaWxkcmVuKCdsaScpLmVxKHRoaXMuYWN0aXZlSW5kZXgpOw0KICAgICAgICAgIGlmIChsaUVsZW1lbnQubGVuZ3RoKSB7DQogICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbihsaUVsZW1lbnQpOw0KICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDYXB0dXJlIHVwIGFuZCBkb3duIGtleQ0KICAgICAgICBpZiAoa2V5Q29kZSA9PT0gTS5rZXlzLkFSUk9XX1VQIHx8IGtleUNvZGUgPT09IE0ua2V5cy5BUlJPV19ET1dOKSB7DQogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KDQogICAgICAgICAgaWYgKGtleUNvZGUgPT09IE0ua2V5cy5BUlJPV19VUCAmJiB0aGlzLmFjdGl2ZUluZGV4ID4gMCkgew0KICAgICAgICAgICAgdGhpcy5hY3RpdmVJbmRleC0tOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChrZXlDb2RlID09PSBNLmtleXMuQVJST1dfRE9XTiAmJiB0aGlzLmFjdGl2ZUluZGV4IDwgbnVtSXRlbXMgLSAxKSB7DQogICAgICAgICAgICB0aGlzLmFjdGl2ZUluZGV4Kys7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdGhpcy4kYWN0aXZlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICBpZiAodGhpcy5hY3RpdmVJbmRleCA+PSAwKSB7DQogICAgICAgICAgICB0aGlzLiRhY3RpdmUgPSAkKHRoaXMuY29udGFpbmVyKS5jaGlsZHJlbignbGknKS5lcSh0aGlzLmFjdGl2ZUluZGV4KTsNCiAgICAgICAgICAgIHRoaXMuJGFjdGl2ZS5hZGRDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIElucHV0IENsaWNrDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVJbnB1dENsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRDbGljayhlKSB7DQogICAgICAgIHRoaXMub3BlbigpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBDb250YWluZXIgTW91c2Vkb3duIGFuZCBUb3VjaHN0YXJ0DQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVDb250YWluZXJNb3VzZWRvd25BbmRUb3VjaHN0YXJ0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ29udGFpbmVyTW91c2Vkb3duQW5kVG91Y2hzdGFydChlKSB7DQogICAgICAgIHRoaXMuX21vdXNlZG93biA9IHRydWU7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIENvbnRhaW5lciBNb3VzZXVwIGFuZCBUb3VjaGVuZA0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlQ29udGFpbmVyTW91c2V1cEFuZFRvdWNoZW5kIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ29udGFpbmVyTW91c2V1cEFuZFRvdWNoZW5kKGUpIHsNCiAgICAgICAgdGhpcy5fbW91c2Vkb3duID0gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGlnaGxpZ2h0IHBhcnRpYWwgbWF0Y2gNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hpZ2hsaWdodCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hpZ2hsaWdodChzdHJpbmcsICRlbCkgew0KICAgICAgICB2YXIgaW1nID0gJGVsLmZpbmQoJ2ltZycpOw0KICAgICAgICB2YXIgbWF0Y2hTdGFydCA9ICRlbC50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKCcnICsgc3RyaW5nLnRvTG93ZXJDYXNlKCkgKyAnJyksDQogICAgICAgICAgICBtYXRjaEVuZCA9IG1hdGNoU3RhcnQgKyBzdHJpbmcubGVuZ3RoIC0gMSwNCiAgICAgICAgICAgIGJlZm9yZU1hdGNoID0gJGVsLnRleHQoKS5zbGljZSgwLCBtYXRjaFN0YXJ0KSwNCiAgICAgICAgICAgIG1hdGNoVGV4dCA9ICRlbC50ZXh0KCkuc2xpY2UobWF0Y2hTdGFydCwgbWF0Y2hFbmQgKyAxKSwNCiAgICAgICAgICAgIGFmdGVyTWF0Y2ggPSAkZWwudGV4dCgpLnNsaWNlKG1hdGNoRW5kICsgMSk7DQogICAgICAgICRlbC5odG1sKCI8c3Bhbj4iICsgYmVmb3JlTWF0Y2ggKyAiPHNwYW4gY2xhc3M9J2hpZ2hsaWdodCc+IiArIG1hdGNoVGV4dCArICI8L3NwYW4+IiArIGFmdGVyTWF0Y2ggKyAiPC9zcGFuPiIpOw0KICAgICAgICBpZiAoaW1nLmxlbmd0aCkgew0KICAgICAgICAgICRlbC5wcmVwZW5kKGltZyk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBSZXNldCBjdXJyZW50IGVsZW1lbnQgcG9zaXRpb24NCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3Jlc2V0Q3VycmVudEVsZW1lbnQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNldEN1cnJlbnRFbGVtZW50KCkgew0KICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gLTE7DQogICAgICAgIHRoaXMuJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVzZXQgYXV0b2NvbXBsZXRlIGVsZW1lbnRzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZXNldEF1dG9jb21wbGV0ZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3Jlc2V0QXV0b2NvbXBsZXRlKCkgew0KICAgICAgICAkKHRoaXMuY29udGFpbmVyKS5lbXB0eSgpOw0KICAgICAgICB0aGlzLl9yZXNldEN1cnJlbnRFbGVtZW50KCk7DQogICAgICAgIHRoaXMub2xkVmFsID0gbnVsbDsNCiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsNCiAgICAgICAgdGhpcy5fbW91c2Vkb3duID0gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2VsZWN0IGF1dG9jb21wbGV0ZSBvcHRpb24NCiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgIEF1dG9jb21wbGV0ZSBvcHRpb24gbGlzdCBpdGVtIGVsZW1lbnQNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAic2VsZWN0T3B0aW9uIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RPcHRpb24oZWwpIHsNCiAgICAgICAgdmFyIHRleHQgPSBlbC50ZXh0KCkudHJpbSgpOw0KICAgICAgICB0aGlzLmVsLnZhbHVlID0gdGV4dDsNCiAgICAgICAgdGhpcy4kZWwudHJpZ2dlcignY2hhbmdlJyk7DQogICAgICAgIHRoaXMuX3Jlc2V0QXV0b2NvbXBsZXRlKCk7DQogICAgICAgIHRoaXMuY2xvc2UoKTsNCg0KICAgICAgICAvLyBIYW5kbGUgb25BdXRvY29tcGxldGUgY2FsbGJhY2suDQogICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQXV0b2NvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgdGhpcy5vcHRpb25zLm9uQXV0b2NvbXBsZXRlLmNhbGwodGhpcywgdGV4dCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBSZW5kZXIgZHJvcGRvd24gY29udGVudA0KICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgIGRhdGEgc2V0DQogICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsICBjdXJyZW50IGlucHV0IHZhbHVlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW5kZXJEcm9wZG93biIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckRyb3Bkb3duKGRhdGEsIHZhbCkgew0KICAgICAgICB2YXIgX3RoaXMzOCA9IHRoaXM7DQoNCiAgICAgICAgdGhpcy5fcmVzZXRBdXRvY29tcGxldGUoKTsNCg0KICAgICAgICB2YXIgbWF0Y2hpbmdEYXRhID0gW107DQoNCiAgICAgICAgLy8gR2F0aGVyIGFsbCBtYXRjaGluZyBkYXRhDQogICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7DQogICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBrZXkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgIT09IC0xKSB7DQogICAgICAgICAgICAvLyBCcmVhayBpZiBwYXN0IGxpbWl0DQogICAgICAgICAgICBpZiAodGhpcy5jb3VudCA+PSB0aGlzLm9wdGlvbnMubGltaXQpIHsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBlbnRyeSA9IHsNCiAgICAgICAgICAgICAgZGF0YTogZGF0YVtrZXldLA0KICAgICAgICAgICAgICBrZXk6IGtleQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIG1hdGNoaW5nRGF0YS5wdXNoKGVudHJ5KTsNCg0KICAgICAgICAgICAgdGhpcy5jb3VudCsrOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFNvcnQNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zb3J0RnVuY3Rpb24pIHsNCiAgICAgICAgICB2YXIgc29ydEZ1bmN0aW9uQm91bmQgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICAgICAgcmV0dXJuIF90aGlzMzgub3B0aW9ucy5zb3J0RnVuY3Rpb24oYS5rZXkudG9Mb3dlckNhc2UoKSwgYi5rZXkudG9Mb3dlckNhc2UoKSwgdmFsLnRvTG93ZXJDYXNlKCkpOw0KICAgICAgICAgIH07DQogICAgICAgICAgbWF0Y2hpbmdEYXRhLnNvcnQoc29ydEZ1bmN0aW9uQm91bmQpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gUmVuZGVyDQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2hpbmdEYXRhLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdmFyIF9lbnRyeSA9IG1hdGNoaW5nRGF0YVtpXTsNCiAgICAgICAgICB2YXIgJGF1dG9jb21wbGV0ZU9wdGlvbiA9ICQoJzxsaT48L2xpPicpOw0KICAgICAgICAgIGlmICghIV9lbnRyeS5kYXRhKSB7DQogICAgICAgICAgICAkYXV0b2NvbXBsZXRlT3B0aW9uLmFwcGVuZCgiPGltZyBzcmM9XCIiICsgX2VudHJ5LmRhdGEgKyAiXCIgY2xhc3M9XCJyaWdodCBjaXJjbGVcIj48c3Bhbj4iICsgX2VudHJ5LmtleSArICI8L3NwYW4+Iik7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRhdXRvY29tcGxldGVPcHRpb24uYXBwZW5kKCc8c3Bhbj4nICsgX2VudHJ5LmtleSArICc8L3NwYW4+Jyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgJCh0aGlzLmNvbnRhaW5lcikuYXBwZW5kKCRhdXRvY29tcGxldGVPcHRpb24pOw0KICAgICAgICAgIHRoaXMuX2hpZ2hsaWdodCh2YWwsICRhdXRvY29tcGxldGVPcHRpb24pOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogT3BlbiBBdXRvY29tcGxldGUgRHJvcGRvd24NCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAib3BlbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbigpIHsNCiAgICAgICAgdmFyIHZhbCA9IHRoaXMuZWwudmFsdWUudG9Mb3dlckNhc2UoKTsNCg0KICAgICAgICB0aGlzLl9yZXNldEF1dG9jb21wbGV0ZSgpOw0KDQogICAgICAgIGlmICh2YWwubGVuZ3RoID49IHRoaXMub3B0aW9ucy5taW5MZW5ndGgpIHsNCiAgICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7DQogICAgICAgICAgdGhpcy5fcmVuZGVyRHJvcGRvd24odGhpcy5vcHRpb25zLmRhdGEsIHZhbCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBPcGVuIGRyb3Bkb3duDQogICAgICAgIGlmICghdGhpcy5kcm9wZG93bi5pc09wZW4pIHsNCiAgICAgICAgICB0aGlzLmRyb3Bkb3duLm9wZW4oKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyBSZWNhbGN1bGF0ZSBkcm9wZG93biB3aGVuIGl0cyBhbHJlYWR5IG9wZW4NCiAgICAgICAgICB0aGlzLmRyb3Bkb3duLnJlY2FsY3VsYXRlRGltZW5zaW9ucygpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQ2xvc2UgQXV0b2NvbXBsZXRlIERyb3Bkb3duDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImNsb3NlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHsNCiAgICAgICAgdGhpcy5kcm9wZG93bi5jbG9zZSgpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFVwZGF0ZSBEYXRhDQogICAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJ1cGRhdGVEYXRhIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVEYXRhKGRhdGEpIHsNCiAgICAgICAgdmFyIHZhbCA9IHRoaXMuZWwudmFsdWUudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgdGhpcy5vcHRpb25zLmRhdGEgPSBkYXRhOw0KDQogICAgICAgIGlmICh0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHRoaXMuX3JlbmRlckRyb3Bkb3duKGRhdGEsIHZhbCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9XSwgW3sNCiAgICAgIGtleTogImluaXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7DQogICAgICAgIHJldHVybiBfZ2V0KEF1dG9jb21wbGV0ZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEF1dG9jb21wbGV0ZSksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBJbnN0YW5jZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRJbnN0YW5jZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHsNCiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7DQogICAgICAgIHJldHVybiBkb21FbGVtLk1fQXV0b2NvbXBsZXRlOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImRlZmF1bHRzIiwNCiAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gX2RlZmF1bHRzOw0KICAgICAgfQ0KICAgIH1dKTsNCg0KICAgIHJldHVybiBBdXRvY29tcGxldGU7DQogIH0oQ29tcG9uZW50KTsNCg0KICAvKioNCiAgICogQHN0YXRpYw0KICAgKiBAbWVtYmVyb2YgQXV0b2NvbXBsZXRlDQogICAqLw0KDQoNCiAgQXV0b2NvbXBsZXRlLl9rZXlkb3duID0gZmFsc2U7DQoNCiAgTS5BdXRvY29tcGxldGUgPSBBdXRvY29tcGxldGU7DQoNCiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7DQogICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihBdXRvY29tcGxldGUsICdhdXRvY29tcGxldGUnLCAnTV9BdXRvY29tcGxldGUnKTsNCiAgfQ0KfSkoY2FzaCk7DQo7KGZ1bmN0aW9uICgkKSB7DQogIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSBsYWJlbHMgb2YgdGV4dCBmaWVsZHMNCiAgTS51cGRhdGVUZXh0RmllbGRzID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBpbnB1dF9zZWxlY3RvciA9ICdpbnB1dFt0eXBlPXRleHRdLCBpbnB1dFt0eXBlPXBhc3N3b3JkXSwgaW5wdXRbdHlwZT1lbWFpbF0sIGlucHV0W3R5cGU9dXJsXSwgaW5wdXRbdHlwZT10ZWxdLCBpbnB1dFt0eXBlPW51bWJlcl0sIGlucHV0W3R5cGU9c2VhcmNoXSwgaW5wdXRbdHlwZT1kYXRlXSwgaW5wdXRbdHlwZT10aW1lXSwgdGV4dGFyZWEnOw0KICAgICQoaW5wdXRfc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7DQogICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOw0KICAgICAgaWYgKGVsZW1lbnQudmFsdWUubGVuZ3RoID4gMCB8fCAkKGVsZW1lbnQpLmlzKCc6Zm9jdXMnKSB8fCBlbGVtZW50LmF1dG9mb2N1cyB8fCAkdGhpcy5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSBudWxsKSB7DQogICAgICAgICR0aGlzLnNpYmxpbmdzKCdsYWJlbCcpLmFkZENsYXNzKCdhY3RpdmUnKTsNCiAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC52YWxpZGl0eSkgew0KICAgICAgICAkdGhpcy5zaWJsaW5ncygnbGFiZWwnKS50b2dnbGVDbGFzcygnYWN0aXZlJywgZWxlbWVudC52YWxpZGl0eS5iYWRJbnB1dCA9PT0gdHJ1ZSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAkdGhpcy5zaWJsaW5ncygnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQogICAgICB9DQogICAgfSk7DQogIH07DQoNCiAgTS52YWxpZGF0ZV9maWVsZCA9IGZ1bmN0aW9uIChvYmplY3QpIHsNCiAgICB2YXIgaGFzTGVuZ3RoID0gb2JqZWN0LmF0dHIoJ2RhdGEtbGVuZ3RoJykgIT09IG51bGw7DQogICAgdmFyIGxlbkF0dHIgPSBwYXJzZUludChvYmplY3QuYXR0cignZGF0YS1sZW5ndGgnKSk7DQogICAgdmFyIGxlbiA9IG9iamVjdFswXS52YWx1ZS5sZW5ndGg7DQoNCiAgICBpZiAobGVuID09PSAwICYmIG9iamVjdFswXS52YWxpZGl0eS5iYWRJbnB1dCA9PT0gZmFsc2UgJiYgIW9iamVjdC5pcygnOnJlcXVpcmVkJykpIHsNCiAgICAgIGlmIChvYmplY3QuaGFzQ2xhc3MoJ3ZhbGlkYXRlJykpIHsNCiAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCd2YWxpZCcpOw0KICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTsNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgaWYgKG9iamVjdC5oYXNDbGFzcygndmFsaWRhdGUnKSkgew0KICAgICAgICAvLyBDaGVjayBmb3IgY2hhcmFjdGVyIGNvdW50ZXIgYXR0cmlidXRlcw0KICAgICAgICBpZiAob2JqZWN0LmlzKCc6dmFsaWQnKSAmJiBoYXNMZW5ndGggJiYgbGVuIDw9IGxlbkF0dHIgfHwgb2JqZWN0LmlzKCc6dmFsaWQnKSAmJiAhaGFzTGVuZ3RoKSB7DQogICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7DQogICAgICAgICAgb2JqZWN0LmFkZENsYXNzKCd2YWxpZCcpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygndmFsaWQnKTsNCiAgICAgICAgICBvYmplY3QuYWRkQ2xhc3MoJ2ludmFsaWQnKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfTsNCg0KICBNLnRleHRhcmVhQXV0b1Jlc2l6ZSA9IGZ1bmN0aW9uICgkdGV4dGFyZWEpIHsNCiAgICAvLyBXcmFwIGlmIG5hdGl2ZSBlbGVtZW50DQogICAgaWYgKCR0ZXh0YXJlYSBpbnN0YW5jZW9mIEVsZW1lbnQpIHsNCiAgICAgICR0ZXh0YXJlYSA9ICQoJHRleHRhcmVhKTsNCiAgICB9DQoNCiAgICBpZiAoISR0ZXh0YXJlYS5sZW5ndGgpIHsNCiAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHRleHRhcmVhIGVsZW1lbnQgZm91bmQnKTsNCiAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICAvLyBUZXh0YXJlYSBBdXRvIFJlc2l6ZQ0KICAgIHZhciBoaWRkZW5EaXYgPSAkKCcuaGlkZGVuZGl2JykuZmlyc3QoKTsNCiAgICBpZiAoIWhpZGRlbkRpdi5sZW5ndGgpIHsNCiAgICAgIGhpZGRlbkRpdiA9ICQoJzxkaXYgY2xhc3M9ImhpZGRlbmRpdiBjb21tb24iPjwvZGl2PicpOw0KICAgICAgJCgnYm9keScpLmFwcGVuZChoaWRkZW5EaXYpOw0KICAgIH0NCg0KICAgIC8vIFNldCBmb250IHByb3BlcnRpZXMgb2YgaGlkZGVuRGl2DQogICAgdmFyIGZvbnRGYW1pbHkgPSAkdGV4dGFyZWEuY3NzKCdmb250LWZhbWlseScpOw0KICAgIHZhciBmb250U2l6ZSA9ICR0ZXh0YXJlYS5jc3MoJ2ZvbnQtc2l6ZScpOw0KICAgIHZhciBsaW5lSGVpZ2h0ID0gJHRleHRhcmVhLmNzcygnbGluZS1oZWlnaHQnKTsNCg0KICAgIC8vIEZpcmVmb3ggY2FuJ3QgaGFuZGxlIHBhZGRpbmcgc2hvcnRoYW5kLg0KICAgIHZhciBwYWRkaW5nVG9wID0gJHRleHRhcmVhLmNzcygncGFkZGluZy10b3AnKTsNCiAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gJHRleHRhcmVhLmNzcygncGFkZGluZy1yaWdodCcpOw0KICAgIHZhciBwYWRkaW5nQm90dG9tID0gJHRleHRhcmVhLmNzcygncGFkZGluZy1ib3R0b20nKTsNCiAgICB2YXIgcGFkZGluZ0xlZnQgPSAkdGV4dGFyZWEuY3NzKCdwYWRkaW5nLWxlZnQnKTsNCg0KICAgIGlmIChmb250U2l6ZSkgew0KICAgICAgaGlkZGVuRGl2LmNzcygnZm9udC1zaXplJywgZm9udFNpemUpOw0KICAgIH0NCiAgICBpZiAoZm9udEZhbWlseSkgew0KICAgICAgaGlkZGVuRGl2LmNzcygnZm9udC1mYW1pbHknLCBmb250RmFtaWx5KTsNCiAgICB9DQogICAgaWYgKGxpbmVIZWlnaHQpIHsNCiAgICAgIGhpZGRlbkRpdi5jc3MoJ2xpbmUtaGVpZ2h0JywgbGluZUhlaWdodCk7DQogICAgfQ0KICAgIGlmIChwYWRkaW5nVG9wKSB7DQogICAgICBoaWRkZW5EaXYuY3NzKCdwYWRkaW5nLXRvcCcsIHBhZGRpbmdUb3ApOw0KICAgIH0NCiAgICBpZiAocGFkZGluZ1JpZ2h0KSB7DQogICAgICBoaWRkZW5EaXYuY3NzKCdwYWRkaW5nLXJpZ2h0JywgcGFkZGluZ1JpZ2h0KTsNCiAgICB9DQogICAgaWYgKHBhZGRpbmdCb3R0b20pIHsNCiAgICAgIGhpZGRlbkRpdi5jc3MoJ3BhZGRpbmctYm90dG9tJywgcGFkZGluZ0JvdHRvbSk7DQogICAgfQ0KICAgIGlmIChwYWRkaW5nTGVmdCkgew0KICAgICAgaGlkZGVuRGl2LmNzcygncGFkZGluZy1sZWZ0JywgcGFkZGluZ0xlZnQpOw0KICAgIH0NCg0KICAgIC8vIFNldCBvcmlnaW5hbC1oZWlnaHQsIGlmIG5vbmUNCiAgICBpZiAoISR0ZXh0YXJlYS5kYXRhKCdvcmlnaW5hbC1oZWlnaHQnKSkgew0KICAgICAgJHRleHRhcmVhLmRhdGEoJ29yaWdpbmFsLWhlaWdodCcsICR0ZXh0YXJlYS5oZWlnaHQoKSk7DQogICAgfQ0KDQogICAgaWYgKCR0ZXh0YXJlYS5hdHRyKCd3cmFwJykgPT09ICdvZmYnKSB7DQogICAgICBoaWRkZW5EaXYuY3NzKCdvdmVyZmxvdy13cmFwJywgJ25vcm1hbCcpLmNzcygnd2hpdGUtc3BhY2UnLCAncHJlJyk7DQogICAgfQ0KDQogICAgaGlkZGVuRGl2LnRleHQoJHRleHRhcmVhWzBdLnZhbHVlICsgJ1xuJyk7DQogICAgdmFyIGNvbnRlbnQgPSBoaWRkZW5EaXYuaHRtbCgpLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7DQogICAgaGlkZGVuRGl2Lmh0bWwoY29udGVudCk7DQoNCiAgICAvLyBXaGVuIHRleHRhcmVhIGlzIGhpZGRlbiwgd2lkdGggZ29lcyBjcmF6eS4NCiAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGhhbGYgb2Ygd2luZG93IHNpemUNCg0KICAgIGlmICgkdGV4dGFyZWFbMF0ub2Zmc2V0V2lkdGggPiAwICYmICR0ZXh0YXJlYVswXS5vZmZzZXRIZWlnaHQgPiAwKSB7DQogICAgICBoaWRkZW5EaXYuY3NzKCd3aWR0aCcsICR0ZXh0YXJlYS53aWR0aCgpICsgJ3B4Jyk7DQogICAgfSBlbHNlIHsNCiAgICAgIGhpZGRlbkRpdi5jc3MoJ3dpZHRoJywgd2luZG93LmlubmVyV2lkdGggLyAyICsgJ3B4Jyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVzaXplIGlmIHRoZSBuZXcgaGVpZ2h0IGlzIGdyZWF0ZXIgdGhhbiB0aGUNCiAgICAgKiBvcmlnaW5hbCBoZWlnaHQgb2YgdGhlIHRleHRhcmVhDQogICAgICovDQogICAgaWYgKCR0ZXh0YXJlYS5kYXRhKCdvcmlnaW5hbC1oZWlnaHQnKSA8PSBoaWRkZW5EaXYuaW5uZXJIZWlnaHQoKSkgew0KICAgICAgJHRleHRhcmVhLmNzcygnaGVpZ2h0JywgaGlkZGVuRGl2LmlubmVySGVpZ2h0KCkgKyAncHgnKTsNCiAgICB9IGVsc2UgaWYgKCR0ZXh0YXJlYVswXS52YWx1ZS5sZW5ndGggPCAkdGV4dGFyZWEuZGF0YSgncHJldmlvdXMtbGVuZ3RoJykpIHsNCiAgICAgIC8qKg0KICAgICAgICogSW4gY2FzZSB0aGUgbmV3IGhlaWdodCBpcyBsZXNzIHRoYW4gb3JpZ2luYWwgaGVpZ2h0LCBpdA0KICAgICAgICogbWVhbnMgdGhlIHRleHRhcmVhIGhhcyBsZXNzIHRleHQgdGhhbiBiZWZvcmUNCiAgICAgICAqIFNvIHdlIHNldCB0aGUgaGVpZ2h0IHRvIHRoZSBvcmlnaW5hbCBvbmUNCiAgICAgICAqLw0KICAgICAgJHRleHRhcmVhLmNzcygnaGVpZ2h0JywgJHRleHRhcmVhLmRhdGEoJ29yaWdpbmFsLWhlaWdodCcpICsgJ3B4Jyk7DQogICAgfQ0KICAgICR0ZXh0YXJlYS5kYXRhKCdwcmV2aW91cy1sZW5ndGgnLCAkdGV4dGFyZWFbMF0udmFsdWUubGVuZ3RoKTsNCiAgfTsNCg0KICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7DQogICAgLy8gVGV4dCBiYXNlZCBpbnB1dHMNCiAgICB2YXIgaW5wdXRfc2VsZWN0b3IgPSAnaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1wYXNzd29yZF0sIGlucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFt0eXBlPXVybF0sIGlucHV0W3R5cGU9dGVsXSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXNlYXJjaF0sIGlucHV0W3R5cGU9ZGF0ZV0sIGlucHV0W3R5cGU9dGltZV0sIHRleHRhcmVhJzsNCg0KICAgIC8vIEFkZCBhY3RpdmUgaWYgZm9ybSBhdXRvIGNvbXBsZXRlDQogICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggIT09IDAgfHwgJCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSBudWxsKSB7DQogICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgfQ0KICAgICAgTS52YWxpZGF0ZV9maWVsZCgkKHRoaXMpKTsNCiAgICB9KTsNCg0KICAgIC8vIEFkZCBhY3RpdmUgaWYgaW5wdXQgZWxlbWVudCBoYXMgYmVlbiBwcmUtcG9wdWxhdGVkIG9uIGRvY3VtZW50IHJlYWR5DQogICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgew0KICAgICAgTS51cGRhdGVUZXh0RmllbGRzKCk7DQogICAgfSk7DQoNCiAgICAvLyBIVE1MIERPTSBGT1JNIFJFU0VUIGhhbmRsaW5nDQogICAgJChkb2N1bWVudCkub24oJ3Jlc2V0JywgZnVuY3Rpb24gKGUpIHsNCiAgICAgIHZhciBmb3JtUmVzZXQgPSAkKGUudGFyZ2V0KTsNCiAgICAgIGlmIChmb3JtUmVzZXQuaXMoJ2Zvcm0nKSkgew0KICAgICAgICBmb3JtUmVzZXQuZmluZChpbnB1dF9zZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTsNCiAgICAgICAgZm9ybVJlc2V0LmZpbmQoaW5wdXRfc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGgpIHsNCiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gUmVzZXQgc2VsZWN0IChhZnRlciBuYXRpdmUgcmVzZXQpDQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGZvcm1SZXNldC5maW5kKCdzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGluaXRpYWxpemVkDQogICAgICAgICAgICBpZiAodGhpcy5NX0Zvcm1TZWxlY3QpIHsNCiAgICAgICAgICAgICAgdmFyIHJlc2V0X3RleHQgPSAkKHRoaXMpLmZpbmQoJ29wdGlvbltzZWxlY3RlZF0nKS50ZXh0KCk7DQogICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2lucHV0LnNlbGVjdC1kcm9wZG93bicpWzBdLnZhbHVlID0gcmVzZXRfdGV4dDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfSwgMCk7DQogICAgICB9DQogICAgfSk7DQoNCiAgICAvKioNCiAgICAgKiBBZGQgYWN0aXZlIHdoZW4gZWxlbWVudCBoYXMgZm9jdXMNCiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICovDQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoZSkgew0KICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKGlucHV0X3NlbGVjdG9yKSkgew0KICAgICAgICAkKGUudGFyZ2V0KS5zaWJsaW5ncygnbGFiZWwsIC5wcmVmaXgnKS5hZGRDbGFzcygnYWN0aXZlJyk7DQogICAgICB9DQogICAgfSwgdHJ1ZSk7DQoNCiAgICAvKioNCiAgICAgKiBSZW1vdmUgYWN0aXZlIHdoZW4gZWxlbWVudCBpcyBibHVycmVkDQogICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAqLw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZSkgew0KICAgICAgdmFyICRpbnB1dEVsZW1lbnQgPSAkKGUudGFyZ2V0KTsNCiAgICAgIGlmICgkaW5wdXRFbGVtZW50LmlzKGlucHV0X3NlbGVjdG9yKSkgew0KICAgICAgICB2YXIgc2VsZWN0b3IgPSAnLnByZWZpeCc7DQoNCiAgICAgICAgaWYgKCRpbnB1dEVsZW1lbnRbMF0udmFsdWUubGVuZ3RoID09PSAwICYmICRpbnB1dEVsZW1lbnRbMF0udmFsaWRpdHkuYmFkSW5wdXQgIT09IHRydWUgJiYgJGlucHV0RWxlbWVudC5hdHRyKCdwbGFjZWhvbGRlcicpID09PSBudWxsKSB7DQogICAgICAgICAgc2VsZWN0b3IgKz0gJywgbGFiZWwnOw0KICAgICAgICB9DQogICAgICAgICRpbnB1dEVsZW1lbnQuc2libGluZ3Moc2VsZWN0b3IpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgTS52YWxpZGF0ZV9maWVsZCgkaW5wdXRFbGVtZW50KTsNCiAgICAgIH0NCiAgICB9LCB0cnVlKTsNCg0KICAgIC8vIFJhZGlvIGFuZCBDaGVja2JveCBmb2N1cyBjbGFzcw0KICAgIHZhciByYWRpb19jaGVja2JveCA9ICdpbnB1dFt0eXBlPXJhZGlvXSwgaW5wdXRbdHlwZT1jaGVja2JveF0nOw0KICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIHJhZGlvX2NoZWNrYm94LCBmdW5jdGlvbiAoZSkgew0KICAgICAgLy8gVEFCLCBjaGVjayBpZiB0YWJiaW5nIHRvIHJhZGlvIG9yIGNoZWNrYm94Lg0KICAgICAgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5UQUIpIHsNCiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygndGFiYmVkJyk7DQogICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7DQogICAgICAgICR0aGlzLm9uZSgnYmx1cicsIGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygndGFiYmVkJyk7DQogICAgICAgIH0pOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfSk7DQoNCiAgICB2YXIgdGV4dF9hcmVhX3NlbGVjdG9yID0gJy5tYXRlcmlhbGl6ZS10ZXh0YXJlYSc7DQogICAgJCh0ZXh0X2FyZWFfc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAgdmFyICR0ZXh0YXJlYSA9ICQodGhpcyk7DQogICAgICAvKioNCiAgICAgICAqIFJlc2l6ZSB0ZXh0YXJlYSBvbiBkb2N1bWVudCBsb2FkIGFmdGVyIHN0b3JpbmcNCiAgICAgICAqIHRoZSBvcmlnaW5hbCBoZWlnaHQgYW5kIHRoZSBvcmlnaW5hbCBsZW5ndGgNCiAgICAgICAqLw0KICAgICAgJHRleHRhcmVhLmRhdGEoJ29yaWdpbmFsLWhlaWdodCcsICR0ZXh0YXJlYS5oZWlnaHQoKSk7DQogICAgICAkdGV4dGFyZWEuZGF0YSgncHJldmlvdXMtbGVuZ3RoJywgdGhpcy52YWx1ZS5sZW5ndGgpOw0KICAgICAgTS50ZXh0YXJlYUF1dG9SZXNpemUoJHRleHRhcmVhKTsNCiAgICB9KTsNCg0KICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIHRleHRfYXJlYV9zZWxlY3RvciwgZnVuY3Rpb24gKCkgew0KICAgICAgTS50ZXh0YXJlYUF1dG9SZXNpemUoJCh0aGlzKSk7DQogICAgfSk7DQogICAgJChkb2N1bWVudCkub24oJ2tleWRvd24nLCB0ZXh0X2FyZWFfc2VsZWN0b3IsIGZ1bmN0aW9uICgpIHsNCiAgICAgIE0udGV4dGFyZWFBdXRvUmVzaXplKCQodGhpcykpOw0KICAgIH0pOw0KDQogICAgLy8gRmlsZSBJbnB1dCBQYXRoDQogICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcuZmlsZS1maWVsZCBpbnB1dFt0eXBlPSJmaWxlIl0nLCBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgZmlsZV9maWVsZCA9ICQodGhpcykuY2xvc2VzdCgnLmZpbGUtZmllbGQnKTsNCiAgICAgIHZhciBwYXRoX2lucHV0ID0gZmlsZV9maWVsZC5maW5kKCdpbnB1dC5maWxlLXBhdGgnKTsNCiAgICAgIHZhciBmaWxlcyA9ICQodGhpcylbMF0uZmlsZXM7DQogICAgICB2YXIgZmlsZV9uYW1lcyA9IFtdOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICBmaWxlX25hbWVzLnB1c2goZmlsZXNbaV0ubmFtZSk7DQogICAgICB9DQogICAgICBwYXRoX2lucHV0WzBdLnZhbHVlID0gZmlsZV9uYW1lcy5qb2luKCcsICcpOw0KICAgICAgcGF0aF9pbnB1dC50cmlnZ2VyKCdjaGFuZ2UnKTsNCiAgICB9KTsNCiAgfSk7IC8vIEVuZCBvZiAkKGRvY3VtZW50KS5yZWFkeQ0KfSkoY2FzaCk7DQo7KGZ1bmN0aW9uICgkLCBhbmltKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICB2YXIgX2RlZmF1bHRzID0gew0KICAgIGluZGljYXRvcnM6IHRydWUsDQogICAgaGVpZ2h0OiA0MDAsDQogICAgZHVyYXRpb246IDUwMCwNCiAgICBpbnRlcnZhbDogNjAwMA0KICB9Ow0KDQogIC8qKg0KICAgKiBAY2xhc3MNCiAgICoNCiAgICovDQoNCiAgdmFyIFNsaWRlciA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MTEpIHsNCiAgICBfaW5oZXJpdHMoU2xpZGVyLCBfQ29tcG9uZW50MTEpOw0KDQogICAgLyoqDQogICAgICogQ29uc3RydWN0IFNsaWRlciBpbnN0YW5jZSBhbmQgc2V0IHVwIG92ZXJsYXkNCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsDQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBTbGlkZXIoZWwsIG9wdGlvbnMpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTbGlkZXIpOw0KDQogICAgICB2YXIgX3RoaXMzOSA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTbGlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTbGlkZXIpKS5jYWxsKHRoaXMsIFNsaWRlciwgZWwsIG9wdGlvbnMpKTsNCg0KICAgICAgX3RoaXMzOS5lbC5NX1NsaWRlciA9IF90aGlzMzk7DQoNCiAgICAgIC8qKg0KICAgICAgICogT3B0aW9ucyBmb3IgdGhlIG1vZGFsDQogICAgICAgKiBAbWVtYmVyIFNsaWRlciNvcHRpb25zDQogICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2luZGljYXRvcnM9dHJ1ZV0gLSBTaG93IGluZGljYXRvcnMNCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtoZWlnaHQ9NDAwXSAtIGhlaWdodCBvZiBzbGlkZXINCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtkdXJhdGlvbj01MDBdIC0gTGVuZ3RoIGluIG1zIG9mIHNsaWRlIHRyYW5zaXRpb24NCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtpbnRlcnZhbD02MDAwXSAtIExlbmd0aCBpbiBtcyBvZiBzbGlkZSBpbnRlcnZhbA0KICAgICAgICovDQogICAgICBfdGhpczM5Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgU2xpZGVyLmRlZmF1bHRzLCBvcHRpb25zKTsNCg0KICAgICAgLy8gc2V0dXANCiAgICAgIF90aGlzMzkuJHNsaWRlciA9IF90aGlzMzkuJGVsLmZpbmQoJy5zbGlkZXMnKTsNCiAgICAgIF90aGlzMzkuJHNsaWRlcyA9IF90aGlzMzkuJHNsaWRlci5jaGlsZHJlbignbGknKTsNCiAgICAgIF90aGlzMzkuYWN0aXZlSW5kZXggPSBfdGhpczM5LiRzbGlkZXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7DQogICAgICAgIHJldHVybiAkKGl0ZW0pLmhhc0NsYXNzKCdhY3RpdmUnKTsNCiAgICAgIH0pLmZpcnN0KCkuaW5kZXgoKTsNCiAgICAgIGlmIChfdGhpczM5LmFjdGl2ZUluZGV4ICE9IC0xKSB7DQogICAgICAgIF90aGlzMzkuJGFjdGl2ZSA9IF90aGlzMzkuJHNsaWRlcy5lcShfdGhpczM5LmFjdGl2ZUluZGV4KTsNCiAgICAgIH0NCg0KICAgICAgX3RoaXMzOS5fc2V0U2xpZGVySGVpZ2h0KCk7DQoNCiAgICAgIC8vIFNldCBpbml0aWFsIHBvc2l0aW9ucyBvZiBjYXB0aW9ucw0KICAgICAgX3RoaXMzOS4kc2xpZGVzLmZpbmQoJy5jYXB0aW9uJykuZWFjaChmdW5jdGlvbiAoZWwpIHsNCiAgICAgICAgX3RoaXMzOS5fYW5pbWF0ZUNhcHRpb25JbihlbCwgMCk7DQogICAgICB9KTsNCg0KICAgICAgLy8gTW92ZSBpbWcgc3JjIGludG8gYmFja2dyb3VuZC1pbWFnZQ0KICAgICAgX3RoaXMzOS4kc2xpZGVzLmZpbmQoJ2ltZycpLmVhY2goZnVuY3Rpb24gKGVsKSB7DQogICAgICAgIHZhciBwbGFjZWhvbGRlckJhc2U2NCA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQkFQLy8vd0FBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09JzsNCiAgICAgICAgaWYgKCQoZWwpLmF0dHIoJ3NyYycpICE9PSBwbGFjZWhvbGRlckJhc2U2NCkgew0KICAgICAgICAgICQoZWwpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoIicgKyAkKGVsKS5hdHRyKCdzcmMnKSArICciKScpOw0KICAgICAgICAgICQoZWwpLmF0dHIoJ3NyYycsIHBsYWNlaG9sZGVyQmFzZTY0KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQoNCiAgICAgIF90aGlzMzkuX3NldHVwSW5kaWNhdG9ycygpOw0KDQogICAgICAvLyBTaG93IGFjdGl2ZSBzbGlkZQ0KICAgICAgaWYgKF90aGlzMzkuJGFjdGl2ZSkgew0KICAgICAgICBfdGhpczM5LiRhY3RpdmUuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBfdGhpczM5LiRzbGlkZXMuZmlyc3QoKS5hZGRDbGFzcygnYWN0aXZlJyk7DQogICAgICAgIGFuaW0oew0KICAgICAgICAgIHRhcmdldHM6IF90aGlzMzkuJHNsaWRlcy5maXJzdCgpWzBdLA0KICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgZHVyYXRpb246IF90aGlzMzkub3B0aW9ucy5kdXJhdGlvbiwNCiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcNCiAgICAgICAgfSk7DQoNCiAgICAgICAgX3RoaXMzOS5hY3RpdmVJbmRleCA9IDA7DQogICAgICAgIF90aGlzMzkuJGFjdGl2ZSA9IF90aGlzMzkuJHNsaWRlcy5lcShfdGhpczM5LmFjdGl2ZUluZGV4KTsNCg0KICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9ycw0KICAgICAgICBpZiAoX3RoaXMzOS5vcHRpb25zLmluZGljYXRvcnMpIHsNCiAgICAgICAgICBfdGhpczM5LiRpbmRpY2F0b3JzLmVxKF90aGlzMzkuYWN0aXZlSW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvLyBBZGp1c3QgaGVpZ2h0IHRvIGN1cnJlbnQgc2xpZGUNCiAgICAgIF90aGlzMzkuJGFjdGl2ZS5maW5kKCdpbWcnKS5lYWNoKGZ1bmN0aW9uIChlbCkgew0KICAgICAgICBhbmltKHsNCiAgICAgICAgICB0YXJnZXRzOiBfdGhpczM5LiRhY3RpdmUuZmluZCgnLmNhcHRpb24nKVswXSwNCiAgICAgICAgICBvcGFjaXR5OiAxLA0KICAgICAgICAgIHRyYW5zbGF0ZVg6IDAsDQogICAgICAgICAgdHJhbnNsYXRlWTogMCwNCiAgICAgICAgICBkdXJhdGlvbjogX3RoaXMzOS5vcHRpb25zLmR1cmF0aW9uLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KDQogICAgICBfdGhpczM5Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTsNCg0KICAgICAgLy8gYXV0byBzY3JvbGwNCiAgICAgIF90aGlzMzkuc3RhcnQoKTsNCiAgICAgIHJldHVybiBfdGhpczM5Ow0KICAgIH0NCg0KICAgIF9jcmVhdGVDbGFzcyhTbGlkZXIsIFt7DQogICAgICBrZXk6ICJkZXN0cm95IiwNCg0KDQogICAgICAvKioNCiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudA0KICAgICAgICovDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsNCiAgICAgICAgdGhpcy5wYXVzZSgpOw0KICAgICAgICB0aGlzLl9yZW1vdmVJbmRpY2F0b3JzKCk7DQogICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTsNCiAgICAgICAgdGhpcy5lbC5NX1NsaWRlciA9IHVuZGVmaW5lZDsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB2YXIgX3RoaXM0MCA9IHRoaXM7DQoNCiAgICAgICAgdGhpcy5faGFuZGxlSW50ZXJ2YWxCb3VuZCA9IHRoaXMuX2hhbmRsZUludGVydmFsLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZUluZGljYXRvckNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVJbmRpY2F0b3JDbGljay5iaW5kKHRoaXMpOw0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycykgew0KICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMuZWFjaChmdW5jdGlvbiAoZWwpIHsNCiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXM0MC5faGFuZGxlSW5kaWNhdG9yQ2xpY2tCb3VuZCk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3JlbW92ZUV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB2YXIgX3RoaXM0MSA9IHRoaXM7DQoNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKSB7DQogICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5lYWNoKGZ1bmN0aW9uIChlbCkgew0KICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGhpczQxLl9oYW5kbGVJbmRpY2F0b3JDbGlja0JvdW5kKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBpbmRpY2F0b3IgY2xpY2sNCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUluZGljYXRvckNsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5kaWNhdG9yQ2xpY2soZSkgew0KICAgICAgICB2YXIgY3VyckluZGV4ID0gJChlLnRhcmdldCkuaW5kZXgoKTsNCiAgICAgICAgdGhpcy5zZXQoY3VyckluZGV4KTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgSW50ZXJ2YWwNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUludGVydmFsIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW50ZXJ2YWwoKSB7DQogICAgICAgIHZhciBuZXdBY3RpdmVJbmRleCA9IHRoaXMuJHNsaWRlci5maW5kKCcuYWN0aXZlJykuaW5kZXgoKTsNCiAgICAgICAgaWYgKHRoaXMuJHNsaWRlcy5sZW5ndGggPT09IG5ld0FjdGl2ZUluZGV4ICsgMSkgbmV3QWN0aXZlSW5kZXggPSAwOw0KICAgICAgICAvLyBsb29wIHRvIHN0YXJ0DQogICAgICAgIGVsc2UgbmV3QWN0aXZlSW5kZXggKz0gMTsNCg0KICAgICAgICB0aGlzLnNldChuZXdBY3RpdmVJbmRleCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQW5pbWF0ZSBpbiBjYXB0aW9uDQogICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNhcHRpb24NCiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkdXJhdGlvbg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfYW5pbWF0ZUNhcHRpb25JbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVDYXB0aW9uSW4oY2FwdGlvbiwgZHVyYXRpb24pIHsNCiAgICAgICAgdmFyIGFuaW1PcHRpb25zID0gew0KICAgICAgICAgIHRhcmdldHM6IGNhcHRpb24sDQogICAgICAgICAgb3BhY2l0eTogMCwNCiAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sDQogICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnDQogICAgICAgIH07DQoNCiAgICAgICAgaWYgKCQoY2FwdGlvbikuaGFzQ2xhc3MoJ2NlbnRlci1hbGlnbicpKSB7DQogICAgICAgICAgYW5pbU9wdGlvbnMudHJhbnNsYXRlWSA9IC0xMDA7DQogICAgICAgIH0gZWxzZSBpZiAoJChjYXB0aW9uKS5oYXNDbGFzcygncmlnaHQtYWxpZ24nKSkgew0KICAgICAgICAgIGFuaW1PcHRpb25zLnRyYW5zbGF0ZVggPSAxMDA7DQogICAgICAgIH0gZWxzZSBpZiAoJChjYXB0aW9uKS5oYXNDbGFzcygnbGVmdC1hbGlnbicpKSB7DQogICAgICAgICAgYW5pbU9wdGlvbnMudHJhbnNsYXRlWCA9IC0xMDA7DQogICAgICAgIH0NCg0KICAgICAgICBhbmltKGFuaW1PcHRpb25zKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXQgaGVpZ2h0IG9mIHNsaWRlcg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0U2xpZGVySGVpZ2h0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0U2xpZGVySGVpZ2h0KCkgew0KICAgICAgICAvLyBJZiBmdWxsc2NyZWVuLCBkbyBub3RoaW5nDQogICAgICAgIGlmICghdGhpcy4kZWwuaGFzQ2xhc3MoJ2Z1bGxzY3JlZW4nKSkgew0KICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycykgew0KICAgICAgICAgICAgLy8gQWRkIGhlaWdodCBpZiBpbmRpY2F0b3JzIGFyZSBwcmVzZW50DQogICAgICAgICAgICB0aGlzLiRlbC5jc3MoJ2hlaWdodCcsIHRoaXMub3B0aW9ucy5oZWlnaHQgKyA0MCArICdweCcpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRlbC5jc3MoJ2hlaWdodCcsIHRoaXMub3B0aW9ucy5oZWlnaHQgKyAncHgnKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy4kc2xpZGVyLmNzcygnaGVpZ2h0JywgdGhpcy5vcHRpb25zLmhlaWdodCArICdweCcpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgaW5kaWNhdG9ycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBJbmRpY2F0b3JzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBJbmRpY2F0b3JzKCkgew0KICAgICAgICB2YXIgX3RoaXM0MiA9IHRoaXM7DQoNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKSB7DQogICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycyA9ICQoJzx1bCBjbGFzcz0iaW5kaWNhdG9ycyI+PC91bD4nKTsNCiAgICAgICAgICB0aGlzLiRzbGlkZXMuZWFjaChmdW5jdGlvbiAoZWwsIGluZGV4KSB7DQogICAgICAgICAgICB2YXIgJGluZGljYXRvciA9ICQoJzxsaSBjbGFzcz0iaW5kaWNhdG9yLWl0ZW0iPjwvbGk+Jyk7DQogICAgICAgICAgICBfdGhpczQyLiRpbmRpY2F0b3JzLmFwcGVuZCgkaW5kaWNhdG9yWzBdKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQodGhpcy4kaW5kaWNhdG9yc1swXSk7DQogICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycyA9IHRoaXMuJGluZGljYXRvcnMuY2hpbGRyZW4oJ2xpLmluZGljYXRvci1pdGVtJyk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBSZW1vdmUgaW5kaWNhdG9ycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfcmVtb3ZlSW5kaWNhdG9ycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUluZGljYXRvcnMoKSB7DQogICAgICAgIHRoaXMuJGVsLmZpbmQoJ3VsLmluZGljYXRvcnMnKS5yZW1vdmUoKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBDeWNsZSB0byBudGggaXRlbQ0KICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4DQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogInNldCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0KGluZGV4KSB7DQogICAgICAgIHZhciBfdGhpczQzID0gdGhpczsNCg0KICAgICAgICAvLyBXcmFwIGFyb3VuZCBpbmRpY2VzLg0KICAgICAgICBpZiAoaW5kZXggPj0gdGhpcy4kc2xpZGVzLmxlbmd0aCkgaW5kZXggPSAwO2Vsc2UgaWYgKGluZGV4IDwgMCkgaW5kZXggPSB0aGlzLiRzbGlkZXMubGVuZ3RoIC0gMTsNCg0KICAgICAgICAvLyBPbmx5IGRvIGlmIGluZGV4IGNoYW5nZXMNCiAgICAgICAgaWYgKHRoaXMuYWN0aXZlSW5kZXggIT0gaW5kZXgpIHsNCiAgICAgICAgICB0aGlzLiRhY3RpdmUgPSB0aGlzLiRzbGlkZXMuZXEodGhpcy5hY3RpdmVJbmRleCk7DQogICAgICAgICAgdmFyICRjYXB0aW9uID0gdGhpcy4kYWN0aXZlLmZpbmQoJy5jYXB0aW9uJyk7DQogICAgICAgICAgdGhpcy4kYWN0aXZlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCg0KICAgICAgICAgIGFuaW0oew0KICAgICAgICAgICAgdGFyZ2V0czogdGhpcy4kYWN0aXZlWzBdLA0KICAgICAgICAgICAgb3BhY2l0eTogMCwNCiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuZHVyYXRpb24sDQogICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsDQogICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICBfdGhpczQzLiRzbGlkZXMubm90KCcuYWN0aXZlJykuZWFjaChmdW5jdGlvbiAoZWwpIHsNCiAgICAgICAgICAgICAgICBhbmltKHsNCiAgICAgICAgICAgICAgICAgIHRhcmdldHM6IGVsLA0KICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCwNCiAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVg6IDAsDQogICAgICAgICAgICAgICAgICB0cmFuc2xhdGVZOiAwLA0KICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAsDQogICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICB0aGlzLl9hbmltYXRlQ2FwdGlvbkluKCRjYXB0aW9uWzBdLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24pOw0KDQogICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnMNCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmluZGljYXRvcnMpIHsNCiAgICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMuZXEodGhpcy5hY3RpdmVJbmRleCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGFuaW0oew0KICAgICAgICAgICAgdGFyZ2V0czogdGhpcy4kc2xpZGVzLmVxKGluZGV4KVswXSwNCiAgICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmR1cmF0aW9uLA0KICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnDQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICBhbmltKHsNCiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuJHNsaWRlcy5lcShpbmRleCkuZmluZCgnLmNhcHRpb24nKVswXSwNCiAgICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgICB0cmFuc2xhdGVYOiAwLA0KICAgICAgICAgICAgdHJhbnNsYXRlWTogMCwNCiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuZHVyYXRpb24sDQogICAgICAgICAgICBkZWxheTogdGhpcy5vcHRpb25zLmR1cmF0aW9uLA0KICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnDQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICB0aGlzLiRzbGlkZXMuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gaW5kZXg7DQoNCiAgICAgICAgICAvLyBSZXNldCBpbnRlcnZhbA0KICAgICAgICAgIHRoaXMuc3RhcnQoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFBhdXNlIHNsaWRlciBpbnRlcnZhbA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJwYXVzZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7DQogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU3RhcnQgc2xpZGVyIGludGVydmFsDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogInN0YXJ0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHsNCiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTsNCiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuX2hhbmRsZUludGVydmFsQm91bmQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiArIHRoaXMub3B0aW9ucy5pbnRlcnZhbCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogTW92ZSB0byBuZXh0IHNsaWRlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIm5leHQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5leHQoKSB7DQogICAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMuYWN0aXZlSW5kZXggKyAxOw0KDQogICAgICAgIC8vIFdyYXAgYXJvdW5kIGluZGljZXMuDQogICAgICAgIGlmIChuZXdJbmRleCA+PSB0aGlzLiRzbGlkZXMubGVuZ3RoKSBuZXdJbmRleCA9IDA7ZWxzZSBpZiAobmV3SW5kZXggPCAwKSBuZXdJbmRleCA9IHRoaXMuJHNsaWRlcy5sZW5ndGggLSAxOw0KDQogICAgICAgIHRoaXMuc2V0KG5ld0luZGV4KTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBNb3ZlIHRvIHByZXZpb3VzIHNsaWRlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogInByZXYiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByZXYoKSB7DQogICAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMuYWN0aXZlSW5kZXggLSAxOw0KDQogICAgICAgIC8vIFdyYXAgYXJvdW5kIGluZGljZXMuDQogICAgICAgIGlmIChuZXdJbmRleCA+PSB0aGlzLiRzbGlkZXMubGVuZ3RoKSBuZXdJbmRleCA9IDA7ZWxzZSBpZiAobmV3SW5kZXggPCAwKSBuZXdJbmRleCA9IHRoaXMuJHNsaWRlcy5sZW5ndGggLSAxOw0KDQogICAgICAgIHRoaXMuc2V0KG5ld0luZGV4KTsNCiAgICAgIH0NCiAgICB9XSwgW3sNCiAgICAgIGtleTogImluaXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7DQogICAgICAgIHJldHVybiBfZ2V0KFNsaWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNsaWRlciksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBJbnN0YW5jZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRJbnN0YW5jZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHsNCiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7DQogICAgICAgIHJldHVybiBkb21FbGVtLk1fU2xpZGVyOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImRlZmF1bHRzIiwNCiAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gX2RlZmF1bHRzOw0KICAgICAgfQ0KICAgIH1dKTsNCg0KICAgIHJldHVybiBTbGlkZXI7DQogIH0oQ29tcG9uZW50KTsNCg0KICBNLlNsaWRlciA9IFNsaWRlcjsNCg0KICBpZiAoTS5qUXVlcnlMb2FkZWQpIHsNCiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKFNsaWRlciwgJ3NsaWRlcicsICdNX1NsaWRlcicpOw0KICB9DQp9KShjYXNoLCBNLmFuaW1lKTsNCjsoZnVuY3Rpb24gKCQsIGFuaW0pIHsNCiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jYXJkJywgZnVuY3Rpb24gKGUpIHsNCiAgICBpZiAoJCh0aGlzKS5jaGlsZHJlbignLmNhcmQtcmV2ZWFsJykubGVuZ3RoKSB7DQogICAgICB2YXIgJGNhcmQgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY2FyZCcpOw0KICAgICAgaWYgKCRjYXJkLmRhdGEoJ2luaXRpYWxPdmVyZmxvdycpID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgJGNhcmQuZGF0YSgnaW5pdGlhbE92ZXJmbG93JywgJGNhcmQuY3NzKCdvdmVyZmxvdycpID09PSB1bmRlZmluZWQgPyAnJyA6ICRjYXJkLmNzcygnb3ZlcmZsb3cnKSk7DQogICAgICB9DQogICAgICB2YXIgJGNhcmRSZXZlYWwgPSAkKHRoaXMpLmZpbmQoJy5jYXJkLXJldmVhbCcpOw0KICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKCQoJy5jYXJkLXJldmVhbCAuY2FyZC10aXRsZScpKSB8fCAkKGUudGFyZ2V0KS5pcygkKCcuY2FyZC1yZXZlYWwgLmNhcmQtdGl0bGUgaScpKSkgew0KICAgICAgICAvLyBNYWtlIFJldmVhbCBhbmltYXRlIGRvd24gYW5kIGRpc3BsYXkgbm9uZQ0KICAgICAgICBhbmltKHsNCiAgICAgICAgICB0YXJnZXRzOiAkY2FyZFJldmVhbFswXSwNCiAgICAgICAgICB0cmFuc2xhdGVZOiAwLA0KICAgICAgICAgIGR1cmF0aW9uOiAyMjUsDQogICAgICAgICAgZWFzaW5nOiAnZWFzZUluT3V0UXVhZCcsDQogICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChhbmltKSB7DQogICAgICAgICAgICB2YXIgZWwgPSBhbmltLmFuaW1hdGFibGVzWzBdLnRhcmdldDsNCiAgICAgICAgICAgICQoZWwpLmNzcyh7IGRpc3BsYXk6ICdub25lJyB9KTsNCiAgICAgICAgICAgICRjYXJkLmNzcygnb3ZlcmZsb3cnLCAkY2FyZC5kYXRhKCdpbml0aWFsT3ZlcmZsb3cnKSk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSBpZiAoJChlLnRhcmdldCkuaXMoJCgnLmNhcmQgLmFjdGl2YXRvcicpKSB8fCAkKGUudGFyZ2V0KS5pcygkKCcuY2FyZCAuYWN0aXZhdG9yIGknKSkpIHsNCiAgICAgICAgJGNhcmQuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTsNCiAgICAgICAgJGNhcmRSZXZlYWwuY3NzKHsgZGlzcGxheTogJ2Jsb2NrJyB9KTsNCiAgICAgICAgYW5pbSh7DQogICAgICAgICAgdGFyZ2V0czogJGNhcmRSZXZlYWxbMF0sDQogICAgICAgICAgdHJhbnNsYXRlWTogJy0xMDAlJywNCiAgICAgICAgICBkdXJhdGlvbjogMzAwLA0KICAgICAgICAgIGVhc2luZzogJ2Vhc2VJbk91dFF1YWQnDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0NCiAgfSk7DQp9KShjYXNoLCBNLmFuaW1lKTsNCjsoZnVuY3Rpb24gKCQpIHsNCiAgJ3VzZSBzdHJpY3QnOw0KDQogIHZhciBfZGVmYXVsdHMgPSB7DQogICAgZGF0YTogW10sDQogICAgcGxhY2Vob2xkZXI6ICcnLA0KICAgIHNlY29uZGFyeVBsYWNlaG9sZGVyOiAnJywNCiAgICBhdXRvY29tcGxldGVPcHRpb25zOiB7fSwNCiAgICBsaW1pdDogSW5maW5pdHksDQogICAgb25DaGlwQWRkOiBudWxsLA0KICAgIG9uQ2hpcFNlbGVjdDogbnVsbCwNCiAgICBvbkNoaXBEZWxldGU6IG51bGwNCiAgfTsNCg0KICAvKioNCiAgICogQHR5cGVkZWYge09iamVjdH0gY2hpcA0KICAgKiBAcHJvcGVydHkge1N0cmluZ30gdGFnICBjaGlwIHRhZyBzdHJpbmcNCiAgICogQHByb3BlcnR5IHtTdHJpbmd9IFtpbWFnZV0gIGNoaXAgYXZhdGFyIGltYWdlIHN0cmluZw0KICAgKi8NCg0KICAvKioNCiAgICogQGNsYXNzDQogICAqDQogICAqLw0KDQogIHZhciBDaGlwcyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MTIpIHsNCiAgICBfaW5oZXJpdHMoQ2hpcHMsIF9Db21wb25lbnQxMik7DQoNCiAgICAvKioNCiAgICAgKiBDb25zdHJ1Y3QgQ2hpcHMgaW5zdGFuY2UgYW5kIHNldCB1cCBvdmVybGF5DQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtIHtFbGVtZW50fSBlbA0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zDQogICAgICovDQogICAgZnVuY3Rpb24gQ2hpcHMoZWwsIG9wdGlvbnMpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDaGlwcyk7DQoNCiAgICAgIHZhciBfdGhpczQ0ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENoaXBzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2hpcHMpKS5jYWxsKHRoaXMsIENoaXBzLCBlbCwgb3B0aW9ucykpOw0KDQogICAgICBfdGhpczQ0LmVsLk1fQ2hpcHMgPSBfdGhpczQ0Ow0KDQogICAgICAvKioNCiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBtb2RhbA0KICAgICAgICogQG1lbWJlciBDaGlwcyNvcHRpb25zDQogICAgICAgKiBAcHJvcCB7QXJyYXl9IGRhdGENCiAgICAgICAqIEBwcm9wIHtTdHJpbmd9IHBsYWNlaG9sZGVyDQogICAgICAgKiBAcHJvcCB7U3RyaW5nfSBzZWNvbmRhcnlQbGFjZWhvbGRlcg0KICAgICAgICogQHByb3Age09iamVjdH0gYXV0b2NvbXBsZXRlT3B0aW9ucw0KICAgICAgICovDQogICAgICBfdGhpczQ0Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQ2hpcHMuZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICBfdGhpczQ0LiRlbC5hZGRDbGFzcygnY2hpcHMgaW5wdXQtZmllbGQnKTsNCiAgICAgIF90aGlzNDQuY2hpcHNEYXRhID0gW107DQogICAgICBfdGhpczQ0LiRjaGlwcyA9ICQoKTsNCiAgICAgIF90aGlzNDQuX3NldHVwSW5wdXQoKTsNCiAgICAgIF90aGlzNDQuaGFzQXV0b2NvbXBsZXRlID0gT2JqZWN0LmtleXMoX3RoaXM0NC5vcHRpb25zLmF1dG9jb21wbGV0ZU9wdGlvbnMpLmxlbmd0aCA+IDA7DQoNCiAgICAgIC8vIFNldCBpbnB1dCBpZA0KICAgICAgaWYgKCFfdGhpczQ0LiRpbnB1dC5hdHRyKCdpZCcpKSB7DQogICAgICAgIF90aGlzNDQuJGlucHV0LmF0dHIoJ2lkJywgTS5ndWlkKCkpOw0KICAgICAgfQ0KDQogICAgICAvLyBSZW5kZXIgaW5pdGlhbCBjaGlwcw0KICAgICAgaWYgKF90aGlzNDQub3B0aW9ucy5kYXRhLmxlbmd0aCkgew0KICAgICAgICBfdGhpczQ0LmNoaXBzRGF0YSA9IF90aGlzNDQub3B0aW9ucy5kYXRhOw0KICAgICAgICBfdGhpczQ0Ll9yZW5kZXJDaGlwcyhfdGhpczQ0LmNoaXBzRGF0YSk7DQogICAgICB9DQoNCiAgICAgIC8vIFNldHVwIGF1dG9jb21wbGV0ZSBpZiBuZWVkZWQNCiAgICAgIGlmIChfdGhpczQ0Lmhhc0F1dG9jb21wbGV0ZSkgew0KICAgICAgICBfdGhpczQ0Ll9zZXR1cEF1dG9jb21wbGV0ZSgpOw0KICAgICAgfQ0KDQogICAgICBfdGhpczQ0Ll9zZXRQbGFjZWhvbGRlcigpOw0KICAgICAgX3RoaXM0NC5fc2V0dXBMYWJlbCgpOw0KICAgICAgX3RoaXM0NC5fc2V0dXBFdmVudEhhbmRsZXJzKCk7DQogICAgICByZXR1cm4gX3RoaXM0NDsNCiAgICB9DQoNCiAgICBfY3JlYXRlQ2xhc3MoQ2hpcHMsIFt7DQogICAgICBrZXk6ICJnZXREYXRhIiwNCg0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBDaGlwcyBEYXRhDQogICAgICAgKi8NCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREYXRhKCkgew0KICAgICAgICByZXR1cm4gdGhpcy5jaGlwc0RhdGE7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogVGVhcmRvd24gY29tcG9uZW50DQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImRlc3Ryb3kiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7DQogICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTsNCiAgICAgICAgdGhpcy4kY2hpcHMucmVtb3ZlKCk7DQogICAgICAgIHRoaXMuZWwuTV9DaGlwcyA9IHVuZGVmaW5lZDsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLl9oYW5kbGVDaGlwQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUNoaXBDbGljay5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bi5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dEZvY3VzQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dEZvY3VzLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZUlucHV0Qmx1ckJvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRCbHVyLmJpbmQodGhpcyk7DQoNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNoaXBDbGlja0JvdW5kKTsNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIENoaXBzLl9oYW5kbGVDaGlwc0tleWRvd24pOw0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIENoaXBzLl9oYW5kbGVDaGlwc0tleXVwKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgQ2hpcHMuX2hhbmRsZUNoaXBzQmx1ciwgdHJ1ZSk7DQogICAgICAgIHRoaXMuJGlucHV0WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlSW5wdXRGb2N1c0JvdW5kKTsNCiAgICAgICAgdGhpcy4kaW5wdXRbMF0uYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX2hhbmRsZUlucHV0Qmx1ckJvdW5kKTsNCiAgICAgICAgdGhpcy4kaW5wdXRbMF0uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3JlbW92ZUV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2hpcENsaWNrQm91bmQpOw0KICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgQ2hpcHMuX2hhbmRsZUNoaXBzS2V5ZG93bik7DQogICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgQ2hpcHMuX2hhbmRsZUNoaXBzS2V5dXApOw0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBDaGlwcy5faGFuZGxlQ2hpcHNCbHVyLCB0cnVlKTsNCiAgICAgICAgdGhpcy4kaW5wdXRbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9oYW5kbGVJbnB1dEZvY3VzQm91bmQpOw0KICAgICAgICB0aGlzLiRpbnB1dFswXS5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5faGFuZGxlSW5wdXRCbHVyQm91bmQpOw0KICAgICAgICB0aGlzLiRpbnB1dFswXS5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBDaGlwIENsaWNrDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVDaGlwQ2xpY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDaGlwQ2xpY2soZSkgew0KICAgICAgICB2YXIgJGNoaXAgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY2hpcCcpOw0KICAgICAgICB2YXIgY2xpY2tlZENsb3NlID0gJChlLnRhcmdldCkuaXMoJy5jbG9zZScpOw0KICAgICAgICBpZiAoJGNoaXAubGVuZ3RoKSB7DQogICAgICAgICAgdmFyIGluZGV4ID0gJGNoaXAuaW5kZXgoKTsNCiAgICAgICAgICBpZiAoY2xpY2tlZENsb3NlKSB7DQogICAgICAgICAgICAvLyBkZWxldGUgY2hpcA0KICAgICAgICAgICAgdGhpcy5kZWxldGVDaGlwKGluZGV4KTsNCiAgICAgICAgICAgIHRoaXMuJGlucHV0WzBdLmZvY3VzKCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIHNlbGVjdCBjaGlwDQogICAgICAgICAgICB0aGlzLnNlbGVjdENoaXAoaW5kZXgpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIERlZmF1bHQgaGFuZGxlIGNsaWNrIHRvIGZvY3VzIG9uIGlucHV0DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kaW5wdXRbMF0uZm9jdXMoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBDaGlwcyBLZXlkb3duDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVJbnB1dEZvY3VzIiwNCg0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBJbnB1dCBGb2N1cw0KICAgICAgICovDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUlucHV0Rm9jdXMoKSB7DQogICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdmb2N1cycpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBJbnB1dCBCbHVyDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVJbnB1dEJsdXIiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dEJsdXIoKSB7DQogICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCdmb2N1cycpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBJbnB1dCBLZXlkb3duDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVJbnB1dEtleWRvd24iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dEtleWRvd24oZSkgew0KICAgICAgICBDaGlwcy5fa2V5ZG93biA9IHRydWU7DQoNCiAgICAgICAgLy8gZW50ZXINCiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHsNCiAgICAgICAgICAvLyBPdmVycmlkZSBlbnRlciBpZiBhdXRvY29tcGxldGluZy4NCiAgICAgICAgICBpZiAodGhpcy5oYXNBdXRvY29tcGxldGUgJiYgdGhpcy5hdXRvY29tcGxldGUgJiYgdGhpcy5hdXRvY29tcGxldGUuaXNPcGVuKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgIHRoaXMuYWRkQ2hpcCh7DQogICAgICAgICAgICB0YWc6IHRoaXMuJGlucHV0WzBdLnZhbHVlDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy4kaW5wdXRbMF0udmFsdWUgPSAnJzsNCg0KICAgICAgICAgIC8vIGRlbGV0ZSBvciBsZWZ0DQogICAgICAgIH0gZWxzZSBpZiAoKGUua2V5Q29kZSA9PT0gOCB8fCBlLmtleUNvZGUgPT09IDM3KSAmJiB0aGlzLiRpbnB1dFswXS52YWx1ZSA9PT0gJycgJiYgdGhpcy5jaGlwc0RhdGEubGVuZ3RoKSB7DQogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgIHRoaXMuc2VsZWN0Q2hpcCh0aGlzLmNoaXBzRGF0YS5sZW5ndGggLSAxKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFJlbmRlciBDaGlwDQogICAgICAgKiBAcGFyYW0ge2NoaXB9IGNoaXANCiAgICAgICAqIEByZXR1cm4ge0VsZW1lbnR9DQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW5kZXJDaGlwIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVuZGVyQ2hpcChjaGlwKSB7DQogICAgICAgIGlmICghY2hpcC50YWcpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgcmVuZGVyZWRDaGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgIHZhciBjbG9zZUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7DQogICAgICAgIHJlbmRlcmVkQ2hpcC5jbGFzc0xpc3QuYWRkKCdjaGlwJyk7DQogICAgICAgIHJlbmRlcmVkQ2hpcC50ZXh0Q29udGVudCA9IGNoaXAudGFnOw0KICAgICAgICByZW5kZXJlZENoaXAuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApOw0KICAgICAgICAkKGNsb3NlSWNvbikuYWRkQ2xhc3MoJ21hdGVyaWFsLWljb25zIGNsb3NlJyk7DQogICAgICAgIGNsb3NlSWNvbi50ZXh0Q29udGVudCA9ICdjbG9zZSc7DQoNCiAgICAgICAgLy8gYXR0YWNoIGltYWdlIGlmIG5lZWRlZA0KICAgICAgICBpZiAoY2hpcC5pbWFnZSkgew0KICAgICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsNCiAgICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBjaGlwLmltYWdlKTsNCiAgICAgICAgICByZW5kZXJlZENoaXAuaW5zZXJ0QmVmb3JlKGltZywgcmVuZGVyZWRDaGlwLmZpcnN0Q2hpbGQpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmVuZGVyZWRDaGlwLmFwcGVuZENoaWxkKGNsb3NlSWNvbik7DQogICAgICAgIHJldHVybiByZW5kZXJlZENoaXA7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVuZGVyIENoaXBzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW5kZXJDaGlwcyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckNoaXBzKCkgew0KICAgICAgICB0aGlzLiRjaGlwcy5yZW1vdmUoKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaXBzRGF0YS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHZhciBjaGlwRWwgPSB0aGlzLl9yZW5kZXJDaGlwKHRoaXMuY2hpcHNEYXRhW2ldKTsNCiAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQoY2hpcEVsKTsNCiAgICAgICAgICB0aGlzLiRjaGlwcy5hZGQoY2hpcEVsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIG1vdmUgaW5wdXQgdG8gZW5kDQogICAgICAgIHRoaXMuJGVsLmFwcGVuZCh0aGlzLiRpbnB1dFswXSk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgQXV0b2NvbXBsZXRlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cEF1dG9jb21wbGV0ZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwQXV0b2NvbXBsZXRlKCkgew0KICAgICAgICB2YXIgX3RoaXM0NSA9IHRoaXM7DQoNCiAgICAgICAgdGhpcy5vcHRpb25zLmF1dG9jb21wbGV0ZU9wdGlvbnMub25BdXRvY29tcGxldGUgPSBmdW5jdGlvbiAodmFsKSB7DQogICAgICAgICAgX3RoaXM0NS5hZGRDaGlwKHsNCiAgICAgICAgICAgIHRhZzogdmFsDQogICAgICAgICAgfSk7DQogICAgICAgICAgX3RoaXM0NS4kaW5wdXRbMF0udmFsdWUgPSAnJzsNCiAgICAgICAgICBfdGhpczQ1LiRpbnB1dFswXS5mb2N1cygpOw0KICAgICAgICB9Ow0KDQogICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlID0gTS5BdXRvY29tcGxldGUuaW5pdCh0aGlzLiRpbnB1dFswXSwgdGhpcy5vcHRpb25zLmF1dG9jb21wbGV0ZU9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFNldHVwIElucHV0DQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cElucHV0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBJbnB1dCgpIHsNCiAgICAgICAgdGhpcy4kaW5wdXQgPSB0aGlzLiRlbC5maW5kKCdpbnB1dCcpOw0KICAgICAgICBpZiAoIXRoaXMuJGlucHV0Lmxlbmd0aCkgew0KICAgICAgICAgIHRoaXMuJGlucHV0ID0gJCgnPGlucHV0PjwvaW5wdXQ+Jyk7DQogICAgICAgICAgdGhpcy4kZWwuYXBwZW5kKHRoaXMuJGlucHV0KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuJGlucHV0LmFkZENsYXNzKCdpbnB1dCcpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFNldHVwIExhYmVsDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cExhYmVsIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBMYWJlbCgpIHsNCiAgICAgICAgdGhpcy4kbGFiZWwgPSB0aGlzLiRlbC5maW5kKCdsYWJlbCcpOw0KICAgICAgICBpZiAodGhpcy4kbGFiZWwubGVuZ3RoKSB7DQogICAgICAgICAgdGhpcy4kbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCB0aGlzLiRpbnB1dC5hdHRyKCdpZCcpKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFNldCBwbGFjZWhvbGRlcg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0UGxhY2Vob2xkZXIiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRQbGFjZWhvbGRlcigpIHsNCiAgICAgICAgaWYgKHRoaXMuY2hpcHNEYXRhICE9PSB1bmRlZmluZWQgJiYgIXRoaXMuY2hpcHNEYXRhLmxlbmd0aCAmJiB0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIpIHsNCiAgICAgICAgICAkKHRoaXMuJGlucHV0KS5wcm9wKCdwbGFjZWhvbGRlcicsIHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcik7DQogICAgICAgIH0gZWxzZSBpZiAoKHRoaXMuY2hpcHNEYXRhID09PSB1bmRlZmluZWQgfHwgISF0aGlzLmNoaXBzRGF0YS5sZW5ndGgpICYmIHRoaXMub3B0aW9ucy5zZWNvbmRhcnlQbGFjZWhvbGRlcikgew0KICAgICAgICAgICQodGhpcy4kaW5wdXQpLnByb3AoJ3BsYWNlaG9sZGVyJywgdGhpcy5vcHRpb25zLnNlY29uZGFyeVBsYWNlaG9sZGVyKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIENoZWNrIGlmIGNoaXAgaXMgdmFsaWQNCiAgICAgICAqIEBwYXJhbSB7Y2hpcH0gY2hpcA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaXNWYWxpZCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzVmFsaWQoY2hpcCkgew0KICAgICAgICBpZiAoY2hpcC5oYXNPd25Qcm9wZXJ0eSgndGFnJykgJiYgY2hpcC50YWcgIT09ICcnKSB7DQogICAgICAgICAgdmFyIGV4aXN0cyA9IGZhbHNlOw0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlwc0RhdGEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmNoaXBzRGF0YVtpXS50YWcgPT09IGNoaXAudGFnKSB7DQogICAgICAgICAgICAgIGV4aXN0cyA9IHRydWU7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gIWV4aXN0czsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBBZGQgY2hpcA0KICAgICAgICogQHBhcmFtIHtjaGlwfSBjaGlwDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImFkZENoaXAiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZENoaXAoY2hpcCkgew0KICAgICAgICBpZiAoIXRoaXMuX2lzVmFsaWQoY2hpcCkgfHwgdGhpcy5jaGlwc0RhdGEubGVuZ3RoID49IHRoaXMub3B0aW9ucy5saW1pdCkgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciByZW5kZXJlZENoaXAgPSB0aGlzLl9yZW5kZXJDaGlwKGNoaXApOw0KICAgICAgICB0aGlzLiRjaGlwcy5hZGQocmVuZGVyZWRDaGlwKTsNCiAgICAgICAgdGhpcy5jaGlwc0RhdGEucHVzaChjaGlwKTsNCiAgICAgICAgJCh0aGlzLiRpbnB1dCkuYmVmb3JlKHJlbmRlcmVkQ2hpcCk7DQogICAgICAgIHRoaXMuX3NldFBsYWNlaG9sZGVyKCk7DQoNCiAgICAgICAgLy8gZmlyZSBjaGlwQWRkIGNhbGxiYWNrDQogICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2hpcEFkZCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNoaXBBZGQuY2FsbCh0aGlzLCB0aGlzLiRlbCwgcmVuZGVyZWRDaGlwKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIERlbGV0ZSBjaGlwDQogICAgICAgKiBAcGFyYW0ge051bWJlcn0gY2hpcA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJkZWxldGVDaGlwIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVDaGlwKGNoaXBJbmRleCkgew0KICAgICAgICB2YXIgJGNoaXAgPSB0aGlzLiRjaGlwcy5lcShjaGlwSW5kZXgpOw0KICAgICAgICB0aGlzLiRjaGlwcy5lcShjaGlwSW5kZXgpLnJlbW92ZSgpOw0KICAgICAgICB0aGlzLiRjaGlwcyA9IHRoaXMuJGNoaXBzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsNCiAgICAgICAgICByZXR1cm4gJChlbCkuaW5kZXgoKSA+PSAwOw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5jaGlwc0RhdGEuc3BsaWNlKGNoaXBJbmRleCwgMSk7DQogICAgICAgIHRoaXMuX3NldFBsYWNlaG9sZGVyKCk7DQoNCiAgICAgICAgLy8gZmlyZSBjaGlwRGVsZXRlIGNhbGxiYWNrDQogICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2hpcERlbGV0ZSA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNoaXBEZWxldGUuY2FsbCh0aGlzLCB0aGlzLiRlbCwgJGNoaXBbMF0pOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2VsZWN0IGNoaXANCiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjaGlwDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogInNlbGVjdENoaXAiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdENoaXAoY2hpcEluZGV4KSB7DQogICAgICAgIHZhciAkY2hpcCA9IHRoaXMuJGNoaXBzLmVxKGNoaXBJbmRleCk7DQogICAgICAgIHRoaXMuX3NlbGVjdGVkQ2hpcCA9ICRjaGlwOw0KICAgICAgICAkY2hpcFswXS5mb2N1cygpOw0KDQogICAgICAgIC8vIGZpcmUgY2hpcFNlbGVjdCBjYWxsYmFjaw0KICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkNoaXBTZWxlY3QgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICB0aGlzLm9wdGlvbnMub25DaGlwU2VsZWN0LmNhbGwodGhpcywgdGhpcy4kZWwsICRjaGlwWzBdKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiaW5pdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9nZXQoQ2hpcHMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDaGlwcyksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBJbnN0YW5jZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRJbnN0YW5jZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHsNCiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7DQogICAgICAgIHJldHVybiBkb21FbGVtLk1fQ2hpcHM7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUNoaXBzS2V5ZG93biIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNoaXBzS2V5ZG93bihlKSB7DQogICAgICAgIENoaXBzLl9rZXlkb3duID0gdHJ1ZTsNCg0KICAgICAgICB2YXIgJGNoaXBzID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmNoaXBzJyk7DQogICAgICAgIHZhciBjaGlwc0tleWRvd24gPSBlLnRhcmdldCAmJiAkY2hpcHMubGVuZ3RoOw0KDQogICAgICAgIC8vIERvbid0IGhhbmRsZSBrZXlkb3duIGlucHV0cyBvbiBpbnB1dCBhbmQgdGV4dGFyZWENCiAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKCdpbnB1dCwgdGV4dGFyZWEnKSB8fCAhY2hpcHNLZXlkb3duKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGN1cnJDaGlwcyA9ICRjaGlwc1swXS5NX0NoaXBzOw0KDQogICAgICAgIC8vIGJhY2tzcGFjZSBhbmQgZGVsZXRlDQogICAgICAgIGlmIChlLmtleUNvZGUgPT09IDggfHwgZS5rZXlDb2RlID09PSA0Nikgew0KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCg0KICAgICAgICAgIHZhciBzZWxlY3RJbmRleCA9IGN1cnJDaGlwcy5jaGlwc0RhdGEubGVuZ3RoOw0KICAgICAgICAgIGlmIChjdXJyQ2hpcHMuX3NlbGVjdGVkQ2hpcCkgew0KICAgICAgICAgICAgdmFyIGluZGV4ID0gY3VyckNoaXBzLl9zZWxlY3RlZENoaXAuaW5kZXgoKTsNCiAgICAgICAgICAgIGN1cnJDaGlwcy5kZWxldGVDaGlwKGluZGV4KTsNCiAgICAgICAgICAgIGN1cnJDaGlwcy5fc2VsZWN0ZWRDaGlwID0gbnVsbDsNCg0KICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHNlbGVjdEluZGV4IGRvZXNuJ3QgZ28gbmVnYXRpdmUNCiAgICAgICAgICAgIHNlbGVjdEluZGV4ID0gTWF0aC5tYXgoaW5kZXggLSAxLCAwKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoY3VyckNoaXBzLmNoaXBzRGF0YS5sZW5ndGgpIHsNCiAgICAgICAgICAgIGN1cnJDaGlwcy5zZWxlY3RDaGlwKHNlbGVjdEluZGV4KTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBsZWZ0IGFycm93IGtleQ0KICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzcpIHsNCiAgICAgICAgICBpZiAoY3VyckNoaXBzLl9zZWxlY3RlZENoaXApIHsNCiAgICAgICAgICAgIHZhciBfc2VsZWN0SW5kZXggPSBjdXJyQ2hpcHMuX3NlbGVjdGVkQ2hpcC5pbmRleCgpIC0gMTsNCiAgICAgICAgICAgIGlmIChfc2VsZWN0SW5kZXggPCAwKSB7DQogICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGN1cnJDaGlwcy5zZWxlY3RDaGlwKF9zZWxlY3RJbmRleCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gcmlnaHQgYXJyb3cga2V5DQogICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOSkgew0KICAgICAgICAgIGlmIChjdXJyQ2hpcHMuX3NlbGVjdGVkQ2hpcCkgew0KICAgICAgICAgICAgdmFyIF9zZWxlY3RJbmRleDIgPSBjdXJyQ2hpcHMuX3NlbGVjdGVkQ2hpcC5pbmRleCgpICsgMTsNCg0KICAgICAgICAgICAgaWYgKF9zZWxlY3RJbmRleDIgPj0gY3VyckNoaXBzLmNoaXBzRGF0YS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgY3VyckNoaXBzLiRpbnB1dFswXS5mb2N1cygpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgY3VyckNoaXBzLnNlbGVjdENoaXAoX3NlbGVjdEluZGV4Mik7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIENoaXBzIEtleXVwDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVDaGlwc0tleXVwIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2hpcHNLZXl1cChlKSB7DQogICAgICAgIENoaXBzLl9rZXlkb3duID0gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIENoaXBzIEJsdXINCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUNoaXBzQmx1ciIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNoaXBzQmx1cihlKSB7DQogICAgICAgIGlmICghQ2hpcHMuX2tleWRvd24pIHsNCiAgICAgICAgICB2YXIgJGNoaXBzID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmNoaXBzJyk7DQogICAgICAgICAgdmFyIGN1cnJDaGlwcyA9ICRjaGlwc1swXS5NX0NoaXBzOw0KDQogICAgICAgICAgY3VyckNoaXBzLl9zZWxlY3RlZENoaXAgPSBudWxsOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiZGVmYXVsdHMiLA0KICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBfZGVmYXVsdHM7DQogICAgICB9DQogICAgfV0pOw0KDQogICAgcmV0dXJuIENoaXBzOw0KICB9KENvbXBvbmVudCk7DQoNCiAgLyoqDQogICAqIEBzdGF0aWMNCiAgICogQG1lbWJlcm9mIENoaXBzDQogICAqLw0KDQoNCiAgQ2hpcHMuX2tleWRvd24gPSBmYWxzZTsNCg0KICBNLkNoaXBzID0gQ2hpcHM7DQoNCiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7DQogICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihDaGlwcywgJ2NoaXBzJywgJ01fQ2hpcHMnKTsNCiAgfQ0KDQogICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHsNCiAgICAvLyBIYW5kbGUgcmVtb3ZhbCBvZiBzdGF0aWMgY2hpcHMuDQogICAgJChkb2N1bWVudC5ib2R5KS5vbignY2xpY2snLCAnLmNoaXAgLmNsb3NlJywgZnVuY3Rpb24gKCkgew0KICAgICAgdmFyICRjaGlwcyA9ICQodGhpcykuY2xvc2VzdCgnLmNoaXBzJyk7DQogICAgICBpZiAoJGNoaXBzLmxlbmd0aCAmJiAkY2hpcHNbMF0uTV9DaGlwcykgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jaGlwJykucmVtb3ZlKCk7DQogICAgfSk7DQogIH0pOw0KfSkoY2FzaCk7DQo7KGZ1bmN0aW9uICgkKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICB2YXIgX2RlZmF1bHRzID0gew0KICAgIHRvcDogMCwNCiAgICBib3R0b206IEluZmluaXR5LA0KICAgIG9mZnNldDogMCwNCiAgICBvblBvc2l0aW9uQ2hhbmdlOiBudWxsDQogIH07DQoNCiAgLyoqDQogICAqIEBjbGFzcw0KICAgKg0KICAgKi8NCg0KICB2YXIgUHVzaHBpbiA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MTMpIHsNCiAgICBfaW5oZXJpdHMoUHVzaHBpbiwgX0NvbXBvbmVudDEzKTsNCg0KICAgIC8qKg0KICAgICAqIENvbnN0cnVjdCBQdXNocGluIGluc3RhbmNlDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtIHtFbGVtZW50fSBlbA0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zDQogICAgICovDQogICAgZnVuY3Rpb24gUHVzaHBpbihlbCwgb3B0aW9ucykgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFB1c2hwaW4pOw0KDQogICAgICB2YXIgX3RoaXM0NiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQdXNocGluLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHVzaHBpbikpLmNhbGwodGhpcywgUHVzaHBpbiwgZWwsIG9wdGlvbnMpKTsNCg0KICAgICAgX3RoaXM0Ni5lbC5NX1B1c2hwaW4gPSBfdGhpczQ2Ow0KDQogICAgICAvKioNCiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBtb2RhbA0KICAgICAgICogQG1lbWJlciBQdXNocGluI29wdGlvbnMNCiAgICAgICAqLw0KICAgICAgX3RoaXM0Ni5vcHRpb25zID0gJC5leHRlbmQoe30sIFB1c2hwaW4uZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICBfdGhpczQ2Lm9yaWdpbmFsT2Zmc2V0ID0gX3RoaXM0Ni5lbC5vZmZzZXRUb3A7DQogICAgICBQdXNocGluLl9wdXNocGlucy5wdXNoKF90aGlzNDYpOw0KICAgICAgX3RoaXM0Ni5fc2V0dXBFdmVudEhhbmRsZXJzKCk7DQogICAgICBfdGhpczQ2Ll91cGRhdGVQb3NpdGlvbigpOw0KICAgICAgcmV0dXJuIF90aGlzNDY7DQogICAgfQ0KDQogICAgX2NyZWF0ZUNsYXNzKFB1c2hwaW4sIFt7DQogICAgICBrZXk6ICJkZXN0cm95IiwNCg0KDQogICAgICAvKioNCiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudA0KICAgICAgICovDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsNCiAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSBudWxsOw0KICAgICAgICB0aGlzLl9yZW1vdmVQaW5DbGFzc2VzKCk7DQogICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTsNCg0KICAgICAgICAvLyBSZW1vdmUgcHVzaHBpbiBJbnN0DQogICAgICAgIHZhciBpbmRleCA9IFB1c2hwaW4uX3B1c2hwaW5zLmluZGV4T2YodGhpcyk7DQogICAgICAgIFB1c2hwaW4uX3B1c2hwaW5zLnNwbGljZShpbmRleCwgMSk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgUHVzaHBpbi5fdXBkYXRlRWxlbWVudHMpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgUHVzaHBpbi5fdXBkYXRlRWxlbWVudHMpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl91cGRhdGVQb3NpdGlvbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZVBvc2l0aW9uKCkgew0KICAgICAgICB2YXIgc2Nyb2xsZWQgPSBNLmdldERvY3VtZW50U2Nyb2xsVG9wKCkgKyB0aGlzLm9wdGlvbnMub2Zmc2V0Ow0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG9wIDw9IHNjcm9sbGVkICYmIHRoaXMub3B0aW9ucy5ib3R0b20gPj0gc2Nyb2xsZWQgJiYgIXRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdwaW5uZWQnKSkgew0KICAgICAgICAgIHRoaXMuX3JlbW92ZVBpbkNsYXNzZXMoKTsNCg0KICAgICAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0gdGhpcy5vcHRpb25zLm9mZnNldCArICJweCI7DQogICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdwaW5uZWQnKTsNCg0KICAgICAgICAgIC8vIG9uUG9zaXRpb25DaGFuZ2UgY2FsbGJhY2sNCiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vblBvc2l0aW9uQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICB0aGlzLm9wdGlvbnMub25Qb3NpdGlvbkNoYW5nZS5jYWxsKHRoaXMsICdwaW5uZWQnKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBBZGQgcGluLXRvcCAod2hlbiBzY3JvbGxlZCBwb3NpdGlvbiBpcyBhYm92ZSB0b3ApDQogICAgICAgIGlmIChzY3JvbGxlZCA8IHRoaXMub3B0aW9ucy50b3AgJiYgIXRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdwaW4tdG9wJykpIHsNCiAgICAgICAgICB0aGlzLl9yZW1vdmVQaW5DbGFzc2VzKCk7DQogICAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSAwOw0KICAgICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgncGluLXRvcCcpOw0KDQogICAgICAgICAgLy8gb25Qb3NpdGlvbkNoYW5nZSBjYWxsYmFjaw0KICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uUG9zaXRpb25DaGFuZ2UgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vblBvc2l0aW9uQ2hhbmdlLmNhbGwodGhpcywgJ3Bpbi10b3AnKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBBZGQgcGluLWJvdHRvbSAod2hlbiBzY3JvbGxlZCBwb3NpdGlvbiBpcyBiZWxvdyBib3R0b20pDQogICAgICAgIGlmIChzY3JvbGxlZCA+IHRoaXMub3B0aW9ucy5ib3R0b20gJiYgIXRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdwaW4tYm90dG9tJykpIHsNCiAgICAgICAgICB0aGlzLl9yZW1vdmVQaW5DbGFzc2VzKCk7DQogICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdwaW4tYm90dG9tJyk7DQogICAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSB0aGlzLm9wdGlvbnMuYm90dG9tIC0gdGhpcy5vcmlnaW5hbE9mZnNldCArICJweCI7DQoNCiAgICAgICAgICAvLyBvblBvc2l0aW9uQ2hhbmdlIGNhbGxiYWNrDQogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25Qb3NpdGlvbkNoYW5nZSA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uUG9zaXRpb25DaGFuZ2UuY2FsbCh0aGlzLCAncGluLWJvdHRvbScpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVQaW5DbGFzc2VzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlUGluQ2xhc3NlcygpIHsNCiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdwaW4tdG9wJywgJ3Bpbm5lZCcsICdwaW4tYm90dG9tJyk7DQogICAgICB9DQogICAgfV0sIFt7DQogICAgICBrZXk6ICJpbml0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX2dldChQdXNocGluLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHVzaHBpbiksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBJbnN0YW5jZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRJbnN0YW5jZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHsNCiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7DQogICAgICAgIHJldHVybiBkb21FbGVtLk1fUHVzaHBpbjsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfdXBkYXRlRWxlbWVudHMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVFbGVtZW50cygpIHsNCiAgICAgICAgZm9yICh2YXIgZWxJbmRleCBpbiBQdXNocGluLl9wdXNocGlucykgew0KICAgICAgICAgIHZhciBwSW5zdGFuY2UgPSBQdXNocGluLl9wdXNocGluc1tlbEluZGV4XTsNCiAgICAgICAgICBwSW5zdGFuY2UuX3VwZGF0ZVBvc2l0aW9uKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJkZWZhdWx0cyIsDQogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIF9kZWZhdWx0czsNCiAgICAgIH0NCiAgICB9XSk7DQoNCiAgICByZXR1cm4gUHVzaHBpbjsNCiAgfShDb21wb25lbnQpOw0KDQogIC8qKg0KICAgKiBAc3RhdGljDQogICAqIEBtZW1iZXJvZiBQdXNocGluDQogICAqLw0KDQoNCiAgUHVzaHBpbi5fcHVzaHBpbnMgPSBbXTsNCg0KICBNLlB1c2hwaW4gPSBQdXNocGluOw0KDQogIGlmIChNLmpRdWVyeUxvYWRlZCkgew0KICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoUHVzaHBpbiwgJ3B1c2hwaW4nLCAnTV9QdXNocGluJyk7DQogIH0NCn0pKGNhc2gpOw0KOyhmdW5jdGlvbiAoJCwgYW5pbSkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgdmFyIF9kZWZhdWx0cyA9IHsNCiAgICBkaXJlY3Rpb246ICd0b3AnLA0KICAgIGhvdmVyRW5hYmxlZDogdHJ1ZSwNCiAgICB0b29sYmFyRW5hYmxlZDogZmFsc2UNCiAgfTsNCg0KICAkLmZuLnJldmVyc2UgPSBbXS5yZXZlcnNlOw0KDQogIC8qKg0KICAgKiBAY2xhc3MNCiAgICoNCiAgICovDQoNCiAgdmFyIEZsb2F0aW5nQWN0aW9uQnV0dG9uID0gZnVuY3Rpb24gKF9Db21wb25lbnQxNCkgew0KICAgIF9pbmhlcml0cyhGbG9hdGluZ0FjdGlvbkJ1dHRvbiwgX0NvbXBvbmVudDE0KTsNCg0KICAgIC8qKg0KICAgICAqIENvbnN0cnVjdCBGbG9hdGluZ0FjdGlvbkJ1dHRvbiBpbnN0YW5jZQ0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIEZsb2F0aW5nQWN0aW9uQnV0dG9uKGVsLCBvcHRpb25zKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmxvYXRpbmdBY3Rpb25CdXR0b24pOw0KDQogICAgICB2YXIgX3RoaXM0NyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGbG9hdGluZ0FjdGlvbkJ1dHRvbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZsb2F0aW5nQWN0aW9uQnV0dG9uKSkuY2FsbCh0aGlzLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbiwgZWwsIG9wdGlvbnMpKTsNCg0KICAgICAgX3RoaXM0Ny5lbC5NX0Zsb2F0aW5nQWN0aW9uQnV0dG9uID0gX3RoaXM0NzsNCg0KICAgICAgLyoqDQogICAgICAgKiBPcHRpb25zIGZvciB0aGUgZmFiDQogICAgICAgKiBAbWVtYmVyIEZsb2F0aW5nQWN0aW9uQnV0dG9uI29wdGlvbnMNCiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbZGlyZWN0aW9uXSAtIERpcmVjdGlvbiBmYWIgbWVudSBvcGVucw0KICAgICAgICogQHByb3Age0Jvb2xlYW59IFtob3ZlckVuYWJsZWQ9dHJ1ZV0gLSBFbmFibGUgaG92ZXIgdnMgY2xpY2sNCiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbdG9vbGJhckVuYWJsZWQ9ZmFsc2VdIC0gRW5hYmxlIHRvb2xiYXIgdHJhbnNpdGlvbg0KICAgICAgICovDQogICAgICBfdGhpczQ3Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgRmxvYXRpbmdBY3Rpb25CdXR0b24uZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICBfdGhpczQ3LmlzT3BlbiA9IGZhbHNlOw0KICAgICAgX3RoaXM0Ny4kYW5jaG9yID0gX3RoaXM0Ny4kZWwuY2hpbGRyZW4oJ2EnKS5maXJzdCgpOw0KICAgICAgX3RoaXM0Ny4kbWVudSA9IF90aGlzNDcuJGVsLmNoaWxkcmVuKCd1bCcpLmZpcnN0KCk7DQogICAgICBfdGhpczQ3LiRmbG9hdGluZ0J0bnMgPSBfdGhpczQ3LiRlbC5maW5kKCd1bCAuYnRuLWZsb2F0aW5nJyk7DQogICAgICBfdGhpczQ3LiRmbG9hdGluZ0J0bnNSZXZlcnNlID0gX3RoaXM0Ny4kZWwuZmluZCgndWwgLmJ0bi1mbG9hdGluZycpLnJldmVyc2UoKTsNCiAgICAgIF90aGlzNDcub2Zmc2V0WSA9IDA7DQogICAgICBfdGhpczQ3Lm9mZnNldFggPSAwOw0KDQogICAgICBfdGhpczQ3LiRlbC5hZGRDbGFzcygiZGlyZWN0aW9uLSIgKyBfdGhpczQ3Lm9wdGlvbnMuZGlyZWN0aW9uKTsNCiAgICAgIGlmIChfdGhpczQ3Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAndG9wJykgew0KICAgICAgICBfdGhpczQ3Lm9mZnNldFkgPSA0MDsNCiAgICAgIH0gZWxzZSBpZiAoX3RoaXM0Ny5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykgew0KICAgICAgICBfdGhpczQ3Lm9mZnNldFggPSAtNDA7DQogICAgICB9IGVsc2UgaWYgKF90aGlzNDcub3B0aW9ucy5kaXJlY3Rpb24gPT09ICdib3R0b20nKSB7DQogICAgICAgIF90aGlzNDcub2Zmc2V0WSA9IC00MDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIF90aGlzNDcub2Zmc2V0WCA9IDQwOw0KICAgICAgfQ0KICAgICAgX3RoaXM0Ny5fc2V0dXBFdmVudEhhbmRsZXJzKCk7DQogICAgICByZXR1cm4gX3RoaXM0NzsNCiAgICB9DQoNCiAgICBfY3JlYXRlQ2xhc3MoRmxvYXRpbmdBY3Rpb25CdXR0b24sIFt7DQogICAgICBrZXk6ICJkZXN0cm95IiwNCg0KDQogICAgICAvKioNCiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudA0KICAgICAgICovDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsNCiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpOw0KICAgICAgICB0aGlzLmVsLk1fRmxvYXRpbmdBY3Rpb25CdXR0b24gPSB1bmRlZmluZWQ7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdGhpcy5faGFuZGxlRkFCQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUZBQkNsaWNrLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZU9wZW5Cb3VuZCA9IHRoaXMub3Blbi5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLl9oYW5kbGVDbG9zZUJvdW5kID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpOw0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaG92ZXJFbmFibGVkICYmICF0aGlzLm9wdGlvbnMudG9vbGJhckVuYWJsZWQpIHsNCiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLl9oYW5kbGVPcGVuQm91bmQpOw0KICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZUNsb3NlQm91bmQpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVGQUJDbGlja0JvdW5kKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfcmVtb3ZlRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaG92ZXJFbmFibGVkICYmICF0aGlzLm9wdGlvbnMudG9vbGJhckVuYWJsZWQpIHsNCiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLl9oYW5kbGVPcGVuQm91bmQpOw0KICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZUNsb3NlQm91bmQpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVGQUJDbGlja0JvdW5kKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBGQUIgQ2xpY2sNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUZBQkNsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRkFCQ2xpY2soKSB7DQogICAgICAgIGlmICh0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLm9wZW4oKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBEb2N1bWVudCBDbGljaw0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlRG9jdW1lbnRDbGljayIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURvY3VtZW50Q2xpY2soZSkgew0KICAgICAgICBpZiAoISQoZS50YXJnZXQpLmNsb3Nlc3QodGhpcy4kbWVudSkubGVuZ3RoKSB7DQogICAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogT3BlbiBGQUINCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAib3BlbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbigpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50b29sYmFyRW5hYmxlZCkgew0KICAgICAgICAgIHRoaXMuX2FuaW1hdGVJblRvb2xiYXIoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLl9hbmltYXRlSW5GQUIoKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQ2xvc2UgRkFCDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImNsb3NlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHsNCiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG9vbGJhckVuYWJsZWQpIHsNCiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5faGFuZGxlQ2xvc2VCb3VuZCwgdHJ1ZSk7DQogICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCwgdHJ1ZSk7DQogICAgICAgICAgdGhpcy5fYW5pbWF0ZU91dFRvb2xiYXIoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLl9hbmltYXRlT3V0RkFCKCk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBDbGFzc2ljIEZBQiBNZW51IG9wZW4NCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2FuaW1hdGVJbkZBQiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbkZBQigpIHsNCiAgICAgICAgdmFyIF90aGlzNDggPSB0aGlzOw0KDQogICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdhY3RpdmUnKTsNCg0KICAgICAgICB2YXIgdGltZSA9IDA7DQogICAgICAgIHRoaXMuJGZsb2F0aW5nQnRuc1JldmVyc2UuZWFjaChmdW5jdGlvbiAoZWwpIHsNCiAgICAgICAgICBhbmltKHsNCiAgICAgICAgICAgIHRhcmdldHM6IGVsLA0KICAgICAgICAgICAgb3BhY2l0eTogMSwNCiAgICAgICAgICAgIHNjYWxlOiBbMC40LCAxXSwNCiAgICAgICAgICAgIHRyYW5zbGF0ZVk6IFtfdGhpczQ4Lm9mZnNldFksIDBdLA0KICAgICAgICAgICAgdHJhbnNsYXRlWDogW190aGlzNDgub2Zmc2V0WCwgMF0sDQogICAgICAgICAgICBkdXJhdGlvbjogMjc1LA0KICAgICAgICAgICAgZGVsYXk6IHRpbWUsDQogICAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRpbWUgKz0gNDA7DQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIENsYXNzaWMgRkFCIE1lbnUgY2xvc2UNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2FuaW1hdGVPdXRGQUIiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3V0RkFCKCkgew0KICAgICAgICB2YXIgX3RoaXM0OSA9IHRoaXM7DQoNCiAgICAgICAgdGhpcy4kZmxvYXRpbmdCdG5zUmV2ZXJzZS5lYWNoKGZ1bmN0aW9uIChlbCkgew0KICAgICAgICAgIGFuaW0ucmVtb3ZlKGVsKTsNCiAgICAgICAgICBhbmltKHsNCiAgICAgICAgICAgIHRhcmdldHM6IGVsLA0KICAgICAgICAgICAgb3BhY2l0eTogMCwNCiAgICAgICAgICAgIHNjYWxlOiAwLjQsDQogICAgICAgICAgICB0cmFuc2xhdGVZOiBfdGhpczQ5Lm9mZnNldFksDQogICAgICAgICAgICB0cmFuc2xhdGVYOiBfdGhpczQ5Lm9mZnNldFgsDQogICAgICAgICAgICBkdXJhdGlvbjogMTc1LA0KICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLA0KICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgX3RoaXM0OS4kZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBUb29sYmFyIHRyYW5zaXRpb24gTWVudSBvcGVuDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hbmltYXRlSW5Ub29sYmFyIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUluVG9vbGJhcigpIHsNCiAgICAgICAgdmFyIF90aGlzNTAgPSB0aGlzOw0KDQogICAgICAgIHZhciBzY2FsZUZhY3RvciA9IHZvaWQgMDsNCiAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7DQogICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQogICAgICAgIHZhciBidG5SZWN0ID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICAgICAgdmFyIGJhY2tkcm9wID0gJCgnPGRpdiBjbGFzcz0iZmFiLWJhY2tkcm9wIj48L2Rpdj4nKTsNCiAgICAgICAgdmFyIGZhYkNvbG9yID0gdGhpcy4kYW5jaG9yLmNzcygnYmFja2dyb3VuZC1jb2xvcicpOw0KICAgICAgICB0aGlzLiRhbmNob3IuYXBwZW5kKGJhY2tkcm9wKTsNCg0KICAgICAgICB0aGlzLm9mZnNldFggPSBidG5SZWN0LmxlZnQgLSB3aW5kb3dXaWR0aCAvIDIgKyBidG5SZWN0LndpZHRoIC8gMjsNCiAgICAgICAgdGhpcy5vZmZzZXRZID0gd2luZG93SGVpZ2h0IC0gYnRuUmVjdC5ib3R0b207DQogICAgICAgIHNjYWxlRmFjdG9yID0gd2luZG93V2lkdGggLyBiYWNrZHJvcFswXS5jbGllbnRXaWR0aDsNCiAgICAgICAgdGhpcy5idG5Cb3R0b20gPSBidG5SZWN0LmJvdHRvbTsNCiAgICAgICAgdGhpcy5idG5MZWZ0ID0gYnRuUmVjdC5sZWZ0Ow0KICAgICAgICB0aGlzLmJ0bldpZHRoID0gYnRuUmVjdC53aWR0aDsNCg0KICAgICAgICAvLyBTZXQgaW5pdGlhbCBzdGF0ZQ0KICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcygnYWN0aXZlJyk7DQogICAgICAgIHRoaXMuJGVsLmNzcyh7DQogICAgICAgICAgJ3RleHQtYWxpZ24nOiAnY2VudGVyJywNCiAgICAgICAgICB3aWR0aDogJzEwMCUnLA0KICAgICAgICAgIGJvdHRvbTogMCwNCiAgICAgICAgICBsZWZ0OiAwLA0KICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoJyArIHRoaXMub2Zmc2V0WCArICdweCknLA0KICAgICAgICAgIHRyYW5zaXRpb246ICdub25lJw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy4kYW5jaG9yLmNzcyh7DQogICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgnICsgLXRoaXMub2Zmc2V0WSArICdweCknLA0KICAgICAgICAgIHRyYW5zaXRpb246ICdub25lJw0KICAgICAgICB9KTsNCiAgICAgICAgYmFja2Ryb3AuY3NzKHsNCiAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGZhYkNvbG9yDQogICAgICAgIH0pOw0KDQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIF90aGlzNTAuJGVsLmNzcyh7DQogICAgICAgICAgICB0cmFuc2Zvcm06ICcnLA0KICAgICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAuMnMgY3ViaWMtYmV6aWVyKDAuNTUwLCAwLjA4NSwgMC42ODAsIDAuNTMwKSwgYmFja2dyb3VuZC1jb2xvciAwcyBsaW5lYXIgLjJzJw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIF90aGlzNTAuJGFuY2hvci5jc3Moew0KICAgICAgICAgICAgb3ZlcmZsb3c6ICd2aXNpYmxlJywNCiAgICAgICAgICAgIHRyYW5zZm9ybTogJycsDQogICAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIC4ycycNCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgX3RoaXM1MC4kZWwuY3NzKHsNCiAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLA0KICAgICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGZhYkNvbG9yDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGJhY2tkcm9wLmNzcyh7DQogICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKCcgKyBzY2FsZUZhY3RvciArICcpJywNCiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAuMnMgY3ViaWMtYmV6aWVyKDAuNTUwLCAwLjA1NSwgMC42NzUsIDAuMTkwKScNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgX3RoaXM1MC4kbWVudS5jaGlsZHJlbignbGknKS5jaGlsZHJlbignYScpLmNzcyh7DQogICAgICAgICAgICAgIG9wYWNpdHk6IDENCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBTY3JvbGwgdG8gY2xvc2UuDQogICAgICAgICAgICBfdGhpczUwLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQgPSBfdGhpczUwLl9oYW5kbGVEb2N1bWVudENsaWNrLmJpbmQoX3RoaXM1MCk7DQogICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX3RoaXM1MC5faGFuZGxlQ2xvc2VCb3VuZCwgdHJ1ZSk7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXM1MC5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kLCB0cnVlKTsNCiAgICAgICAgICB9LCAxMDApOw0KICAgICAgICB9LCAwKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBUb29sYmFyIHRyYW5zaXRpb24gTWVudSBjbG9zZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfYW5pbWF0ZU91dFRvb2xiYXIiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3V0VG9vbGJhcigpIHsNCiAgICAgICAgdmFyIF90aGlzNTEgPSB0aGlzOw0KDQogICAgICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOw0KICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0Ow0KICAgICAgICB2YXIgYmFja2Ryb3AgPSB0aGlzLiRlbC5maW5kKCcuZmFiLWJhY2tkcm9wJyk7DQogICAgICAgIHZhciBmYWJDb2xvciA9IHRoaXMuJGFuY2hvci5jc3MoJ2JhY2tncm91bmQtY29sb3InKTsNCg0KICAgICAgICB0aGlzLm9mZnNldFggPSB0aGlzLmJ0bkxlZnQgLSB3aW5kb3dXaWR0aCAvIDIgKyB0aGlzLmJ0bldpZHRoIC8gMjsNCiAgICAgICAgdGhpcy5vZmZzZXRZID0gd2luZG93SGVpZ2h0IC0gdGhpcy5idG5Cb3R0b207DQoNCiAgICAgICAgLy8gSGlkZSBiYWNrZHJvcA0KICAgICAgICB0aGlzLiRlbC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgIHRoaXMuJGVsLmNzcyh7DQogICAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOiAndHJhbnNwYXJlbnQnLA0KICAgICAgICAgIHRyYW5zaXRpb246ICdub25lJw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy4kYW5jaG9yLmNzcyh7DQogICAgICAgICAgdHJhbnNpdGlvbjogJ25vbmUnDQogICAgICAgIH0pOw0KICAgICAgICBiYWNrZHJvcC5jc3Moew0KICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDApJywNCiAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGZhYkNvbG9yDQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLiRtZW51LmNoaWxkcmVuKCdsaScpLmNoaWxkcmVuKCdhJykuY3NzKHsNCiAgICAgICAgICBvcGFjaXR5OiAnJw0KICAgICAgICB9KTsNCg0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBiYWNrZHJvcC5yZW1vdmUoKTsNCg0KICAgICAgICAgIC8vIFNldCBpbml0aWFsIHN0YXRlLg0KICAgICAgICAgIF90aGlzNTEuJGVsLmNzcyh7DQogICAgICAgICAgICAndGV4dC1hbGlnbic6ICcnLA0KICAgICAgICAgICAgd2lkdGg6ICcnLA0KICAgICAgICAgICAgYm90dG9tOiAnJywNCiAgICAgICAgICAgIGxlZnQ6ICcnLA0KICAgICAgICAgICAgb3ZlcmZsb3c6ICcnLA0KICAgICAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOiAnJywNCiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKCcgKyAtX3RoaXM1MS5vZmZzZXRYICsgJ3B4LDAsMCknDQogICAgICAgICAgfSk7DQogICAgICAgICAgX3RoaXM1MS4kYW5jaG9yLmNzcyh7DQogICAgICAgICAgICBvdmVyZmxvdzogJycsDQogICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgwLCcgKyBfdGhpczUxLm9mZnNldFkgKyAncHgsMCknDQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIF90aGlzNTEuJGVsLmNzcyh7DQogICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKDAsMCwwKScsDQogICAgICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzJw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBfdGhpczUxLiRhbmNob3IuY3NzKHsNCiAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwwLDApJywNCiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAuMnMgY3ViaWMtYmV6aWVyKDAuNTUwLCAwLjA1NSwgMC42NzUsIDAuMTkwKScNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0sIDIwKTsNCiAgICAgICAgfSwgMjAwKTsNCiAgICAgIH0NCiAgICB9XSwgW3sNCiAgICAgIGtleTogImluaXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7DQogICAgICAgIHJldHVybiBfZ2V0KEZsb2F0aW5nQWN0aW9uQnV0dG9uLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRmxvYXRpbmdBY3Rpb25CdXR0b24pLCAiaW5pdCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBHZXQgSW5zdGFuY2UNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiZ2V0SW5zdGFuY2UiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7DQogICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsOw0KICAgICAgICByZXR1cm4gZG9tRWxlbS5NX0Zsb2F0aW5nQWN0aW9uQnV0dG9uOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImRlZmF1bHRzIiwNCiAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gX2RlZmF1bHRzOw0KICAgICAgfQ0KICAgIH1dKTsNCg0KICAgIHJldHVybiBGbG9hdGluZ0FjdGlvbkJ1dHRvbjsNCiAgfShDb21wb25lbnQpOw0KDQogIE0uRmxvYXRpbmdBY3Rpb25CdXR0b24gPSBGbG9hdGluZ0FjdGlvbkJ1dHRvbjsNCg0KICBpZiAoTS5qUXVlcnlMb2FkZWQpIHsNCiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKEZsb2F0aW5nQWN0aW9uQnV0dG9uLCAnZmxvYXRpbmdBY3Rpb25CdXR0b24nLCAnTV9GbG9hdGluZ0FjdGlvbkJ1dHRvbicpOw0KICB9DQp9KShjYXNoLCBNLmFuaW1lKTsNCjsoZnVuY3Rpb24gKCQpIHsNCiAgJ3VzZSBzdHJpY3QnOw0KDQogIHZhciBfZGVmYXVsdHMgPSB7DQogICAgLy8gQ2xvc2Ugd2hlbiBkYXRlIGlzIHNlbGVjdGVkDQogICAgYXV0b0Nsb3NlOiBmYWxzZSwNCg0KICAgIC8vIHRoZSBkZWZhdWx0IG91dHB1dCBmb3JtYXQgZm9yIHRoZSBpbnB1dCBmaWVsZCB2YWx1ZQ0KICAgIGZvcm1hdDogJ21tbSBkZCwgeXl5eScsDQoNCiAgICAvLyBVc2VkIHRvIGNyZWF0ZSBkYXRlIG9iamVjdCBmcm9tIGN1cnJlbnQgaW5wdXQgc3RyaW5nDQogICAgcGFyc2U6IG51bGwsDQoNCiAgICAvLyBUaGUgaW5pdGlhbCBkYXRlIHRvIHZpZXcgd2hlbiBmaXJzdCBvcGVuZWQNCiAgICBkZWZhdWx0RGF0ZTogbnVsbCwNCg0KICAgIC8vIE1ha2UgdGhlIGBkZWZhdWx0RGF0ZWAgdGhlIGluaXRpYWwgc2VsZWN0ZWQgdmFsdWUNCiAgICBzZXREZWZhdWx0RGF0ZTogZmFsc2UsDQoNCiAgICBkaXNhYmxlV2Vla2VuZHM6IGZhbHNlLA0KDQogICAgZGlzYWJsZURheUZuOiBudWxsLA0KDQogICAgLy8gRmlyc3QgZGF5IG9mIHdlZWsgKDA6IFN1bmRheSwgMTogTW9uZGF5IGV0YykNCiAgICBmaXJzdERheTogMCwNCg0KICAgIC8vIFRoZSBlYXJsaWVzdCBkYXRlIHRoYXQgY2FuIGJlIHNlbGVjdGVkDQogICAgbWluRGF0ZTogbnVsbCwNCiAgICAvLyBUaGVsYXRlc3QgZGF0ZSB0aGF0IGNhbiBiZSBzZWxlY3RlZA0KICAgIG1heERhdGU6IG51bGwsDQoNCiAgICAvLyBOdW1iZXIgb2YgeWVhcnMgZWl0aGVyIHNpZGUsIG9yIGFycmF5IG9mIHVwcGVyL2xvd2VyIHJhbmdlDQogICAgeWVhclJhbmdlOiAxMCwNCg0KICAgIC8vIHVzZWQgaW50ZXJuYWxseSAoZG9uJ3QgY29uZmlnIG91dHNpZGUpDQogICAgbWluWWVhcjogMCwNCiAgICBtYXhZZWFyOiA5OTk5LA0KICAgIG1pbk1vbnRoOiB1bmRlZmluZWQsDQogICAgbWF4TW9udGg6IHVuZGVmaW5lZCwNCg0KICAgIHN0YXJ0UmFuZ2U6IG51bGwsDQogICAgZW5kUmFuZ2U6IG51bGwsDQoNCiAgICBpc1JUTDogZmFsc2UsDQoNCiAgICAvLyBSZW5kZXIgdGhlIG1vbnRoIGFmdGVyIHllYXIgaW4gdGhlIGNhbGVuZGFyIHRpdGxlDQogICAgc2hvd01vbnRoQWZ0ZXJZZWFyOiBmYWxzZSwNCg0KICAgIC8vIFJlbmRlciBkYXlzIG9mIHRoZSBjYWxlbmRhciBncmlkIHRoYXQgZmFsbCBpbiB0aGUgbmV4dCBvciBwcmV2aW91cyBtb250aA0KICAgIHNob3dEYXlzSW5OZXh0QW5kUHJldmlvdXNNb250aHM6IGZhbHNlLA0KDQogICAgLy8gU3BlY2lmeSBhIERPTSBlbGVtZW50IHRvIHJlbmRlciB0aGUgY2FsZW5kYXIgaW4NCiAgICBjb250YWluZXI6IG51bGwsDQoNCiAgICAvLyBTaG93IGNsZWFyIGJ1dHRvbg0KICAgIHNob3dDbGVhckJ0bjogZmFsc2UsDQoNCiAgICAvLyBpbnRlcm5hdGlvbmFsaXphdGlvbg0KICAgIGkxOG46IHsNCiAgICAgIGNhbmNlbDogJ0NhbmNlbCcsDQogICAgICBjbGVhcjogJ0NsZWFyJywNCiAgICAgIGRvbmU6ICdPaycsDQogICAgICBwcmV2aW91c01vbnRoOiAnw6LigqzCuScsDQogICAgICBuZXh0TW9udGg6ICfDouKCrMK6JywNCiAgICAgIG1vbnRoczogWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10sDQogICAgICBtb250aHNTaG9ydDogWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddLA0KICAgICAgd2Vla2RheXM6IFsnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknXSwNCiAgICAgIHdlZWtkYXlzU2hvcnQ6IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J10sDQogICAgICB3ZWVrZGF5c0FiYnJldjogWydTJywgJ00nLCAnVCcsICdXJywgJ1QnLCAnRicsICdTJ10NCiAgICB9LA0KDQogICAgLy8gZXZlbnRzIGFycmF5DQogICAgZXZlbnRzOiBbXSwNCg0KICAgIC8vIGNhbGxiYWNrIGZ1bmN0aW9uDQogICAgb25TZWxlY3Q6IG51bGwsDQogICAgb25PcGVuOiBudWxsLA0KICAgIG9uQ2xvc2U6IG51bGwsDQogICAgb25EcmF3OiBudWxsDQogIH07DQoNCiAgLyoqDQogICAqIEBjbGFzcw0KICAgKg0KICAgKi8NCg0KICB2YXIgRGF0ZXBpY2tlciA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MTUpIHsNCiAgICBfaW5oZXJpdHMoRGF0ZXBpY2tlciwgX0NvbXBvbmVudDE1KTsNCg0KICAgIC8qKg0KICAgICAqIENvbnN0cnVjdCBEYXRlcGlja2VyIGluc3RhbmNlIGFuZCBzZXQgdXAgb3ZlcmxheQ0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIERhdGVwaWNrZXIoZWwsIG9wdGlvbnMpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEYXRlcGlja2VyKTsNCg0KICAgICAgdmFyIF90aGlzNTIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRGF0ZXBpY2tlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKERhdGVwaWNrZXIpKS5jYWxsKHRoaXMsIERhdGVwaWNrZXIsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzNTIuZWwuTV9EYXRlcGlja2VyID0gX3RoaXM1MjsNCg0KICAgICAgX3RoaXM1Mi5vcHRpb25zID0gJC5leHRlbmQoe30sIERhdGVwaWNrZXIuZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICAvLyBtYWtlIHN1cmUgaTE4biBkZWZhdWx0cyBhcmUgbm90IGxvc3Qgd2hlbiBvbmx5IGZldyBpMThuIG9wdGlvbiBwcm9wZXJ0aWVzIGFyZSBwYXNzZWQNCiAgICAgIGlmICghIW9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaTE4bicpICYmIHR5cGVvZiBvcHRpb25zLmkxOG4gPT09ICdvYmplY3QnKSB7DQogICAgICAgIF90aGlzNTIub3B0aW9ucy5pMThuID0gJC5leHRlbmQoe30sIERhdGVwaWNrZXIuZGVmYXVsdHMuaTE4biwgb3B0aW9ucy5pMThuKTsNCiAgICAgIH0NCg0KICAgICAgLy8gUmVtb3ZlIHRpbWUgY29tcG9uZW50IGZyb20gbWluRGF0ZSBhbmQgbWF4RGF0ZSBvcHRpb25zDQogICAgICBpZiAoX3RoaXM1Mi5vcHRpb25zLm1pbkRhdGUpIF90aGlzNTIub3B0aW9ucy5taW5EYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApOw0KICAgICAgaWYgKF90aGlzNTIub3B0aW9ucy5tYXhEYXRlKSBfdGhpczUyLm9wdGlvbnMubWF4RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTsNCg0KICAgICAgX3RoaXM1Mi5pZCA9IE0uZ3VpZCgpOw0KDQogICAgICBfdGhpczUyLl9zZXR1cFZhcmlhYmxlcygpOw0KICAgICAgX3RoaXM1Mi5faW5zZXJ0SFRNTEludG9ET00oKTsNCiAgICAgIF90aGlzNTIuX3NldHVwTW9kYWwoKTsNCg0KICAgICAgX3RoaXM1Mi5fc2V0dXBFdmVudEhhbmRsZXJzKCk7DQoNCiAgICAgIGlmICghX3RoaXM1Mi5vcHRpb25zLmRlZmF1bHREYXRlKSB7DQogICAgICAgIF90aGlzNTIub3B0aW9ucy5kZWZhdWx0RGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UoX3RoaXM1Mi5lbC52YWx1ZSkpOw0KICAgICAgfQ0KDQogICAgICB2YXIgZGVmRGF0ZSA9IF90aGlzNTIub3B0aW9ucy5kZWZhdWx0RGF0ZTsNCiAgICAgIGlmIChEYXRlcGlja2VyLl9pc0RhdGUoZGVmRGF0ZSkpIHsNCiAgICAgICAgaWYgKF90aGlzNTIub3B0aW9ucy5zZXREZWZhdWx0RGF0ZSkgew0KICAgICAgICAgIF90aGlzNTIuc2V0RGF0ZShkZWZEYXRlLCB0cnVlKTsNCiAgICAgICAgICBfdGhpczUyLnNldElucHV0VmFsdWUoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBfdGhpczUyLmdvdG9EYXRlKGRlZkRhdGUpOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBfdGhpczUyLmdvdG9EYXRlKG5ldyBEYXRlKCkpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIERlc2NyaWJlcyBvcGVuL2Nsb3NlIHN0YXRlIG9mIGRhdGVwaWNrZXINCiAgICAgICAqIEB0eXBlIHtCb29sZWFufQ0KICAgICAgICovDQogICAgICBfdGhpczUyLmlzT3BlbiA9IGZhbHNlOw0KICAgICAgcmV0dXJuIF90aGlzNTI7DQogICAgfQ0KDQogICAgX2NyZWF0ZUNsYXNzKERhdGVwaWNrZXIsIFt7DQogICAgICBrZXk6ICJkZXN0cm95IiwNCg0KDQogICAgICAvKioNCiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudA0KICAgICAgICovDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsNCiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpOw0KICAgICAgICB0aGlzLm1vZGFsLmRlc3Ryb3koKTsNCiAgICAgICAgJCh0aGlzLm1vZGFsRWwpLnJlbW92ZSgpOw0KICAgICAgICB0aGlzLmRlc3Ryb3lTZWxlY3RzKCk7DQogICAgICAgIHRoaXMuZWwuTV9EYXRlcGlja2VyID0gdW5kZWZpbmVkOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImRlc3Ryb3lTZWxlY3RzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95U2VsZWN0cygpIHsNCiAgICAgICAgdmFyIG9sZFllYXJTZWxlY3QgPSB0aGlzLmNhbGVuZGFyRWwucXVlcnlTZWxlY3RvcignLm9yaWctc2VsZWN0LXllYXInKTsNCiAgICAgICAgaWYgKG9sZFllYXJTZWxlY3QpIHsNCiAgICAgICAgICBNLkZvcm1TZWxlY3QuZ2V0SW5zdGFuY2Uob2xkWWVhclNlbGVjdCkuZGVzdHJveSgpOw0KICAgICAgICB9DQogICAgICAgIHZhciBvbGRNb250aFNlbGVjdCA9IHRoaXMuY2FsZW5kYXJFbC5xdWVyeVNlbGVjdG9yKCcub3JpZy1zZWxlY3QtbW9udGgnKTsNCiAgICAgICAgaWYgKG9sZE1vbnRoU2VsZWN0KSB7DQogICAgICAgICAgTS5Gb3JtU2VsZWN0LmdldEluc3RhbmNlKG9sZE1vbnRoU2VsZWN0KS5kZXN0cm95KCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfaW5zZXJ0SFRNTEludG9ET00iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pbnNlcnRIVE1MSW50b0RPTSgpIHsNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaG93Q2xlYXJCdG4pIHsNCiAgICAgICAgICAkKHRoaXMuY2xlYXJCdG4pLmNzcyh7IHZpc2liaWxpdHk6ICcnIH0pOw0KICAgICAgICAgIHRoaXMuY2xlYXJCdG4uaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmkxOG4uY2xlYXI7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmRvbmVCdG4uaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmkxOG4uZG9uZTsNCiAgICAgICAgdGhpcy5jYW5jZWxCdG4uaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmkxOG4uY2FuY2VsOw0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29udGFpbmVyKSB7DQogICAgICAgICAgdGhpcy4kbW9kYWxFbC5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtb2RhbEVsLmluc2VydEJlZm9yZSh0aGlzLmVsKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cE1vZGFsIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBNb2RhbCgpIHsNCiAgICAgICAgdmFyIF90aGlzNTMgPSB0aGlzOw0KDQogICAgICAgIHRoaXMubW9kYWxFbC5pZCA9ICdtb2RhbC0nICsgdGhpcy5pZDsNCiAgICAgICAgdGhpcy5tb2RhbCA9IE0uTW9kYWwuaW5pdCh0aGlzLm1vZGFsRWwsIHsNCiAgICAgICAgICBvbkNsb3NlRW5kOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBfdGhpczUzLmlzT3BlbiA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAidG9TdHJpbmciLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKGZvcm1hdCkgew0KICAgICAgICB2YXIgX3RoaXM1NCA9IHRoaXM7DQoNCiAgICAgICAgZm9ybWF0ID0gZm9ybWF0IHx8IHRoaXMub3B0aW9ucy5mb3JtYXQ7DQogICAgICAgIGlmICghRGF0ZXBpY2tlci5faXNEYXRlKHRoaXMuZGF0ZSkpIHsNCiAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgZm9ybWF0QXJyYXkgPSBmb3JtYXQuc3BsaXQoLyhkezEsNH18bXsxLDR9fHl7NH18eXl8IS4pL2cpOw0KICAgICAgICB2YXIgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdEFycmF5Lm1hcChmdW5jdGlvbiAobGFiZWwpIHsNCiAgICAgICAgICBpZiAoX3RoaXM1NC5mb3JtYXRzW2xhYmVsXSkgew0KICAgICAgICAgICAgcmV0dXJuIF90aGlzNTQuZm9ybWF0c1tsYWJlbF0oKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gbGFiZWw7DQogICAgICAgIH0pLmpvaW4oJycpOw0KICAgICAgICByZXR1cm4gZm9ybWF0dGVkRGF0ZTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJzZXREYXRlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREYXRlKGRhdGUsIHByZXZlbnRPblNlbGVjdCkgew0KICAgICAgICBpZiAoIWRhdGUpIHsNCiAgICAgICAgICB0aGlzLmRhdGUgPSBudWxsOw0KICAgICAgICAgIHRoaXMuX3JlbmRlckRhdGVEaXNwbGF5KCk7DQogICAgICAgICAgcmV0dXJuIHRoaXMuZHJhdygpOw0KICAgICAgICB9DQogICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZShkYXRlKSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFEYXRlcGlja2VyLl9pc0RhdGUoZGF0ZSkpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgbWluID0gdGhpcy5vcHRpb25zLm1pbkRhdGUsDQogICAgICAgICAgICBtYXggPSB0aGlzLm9wdGlvbnMubWF4RGF0ZTsNCg0KICAgICAgICBpZiAoRGF0ZXBpY2tlci5faXNEYXRlKG1pbikgJiYgZGF0ZSA8IG1pbikgew0KICAgICAgICAgIGRhdGUgPSBtaW47DQogICAgICAgIH0gZWxzZSBpZiAoRGF0ZXBpY2tlci5faXNEYXRlKG1heCkgJiYgZGF0ZSA+IG1heCkgew0KICAgICAgICAgIGRhdGUgPSBtYXg7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmRhdGUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7DQoNCiAgICAgICAgdGhpcy5fcmVuZGVyRGF0ZURpc3BsYXkoKTsNCg0KICAgICAgICBEYXRlcGlja2VyLl9zZXRUb1N0YXJ0T2ZEYXkodGhpcy5kYXRlKTsNCiAgICAgICAgdGhpcy5nb3RvRGF0ZSh0aGlzLmRhdGUpOw0KDQogICAgICAgIGlmICghcHJldmVudE9uU2VsZWN0ICYmIHR5cGVvZiB0aGlzLm9wdGlvbnMub25TZWxlY3QgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICB0aGlzLm9wdGlvbnMub25TZWxlY3QuY2FsbCh0aGlzLCB0aGlzLmRhdGUpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAic2V0SW5wdXRWYWx1ZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SW5wdXRWYWx1ZSgpIHsNCiAgICAgICAgdGhpcy5lbC52YWx1ZSA9IHRoaXMudG9TdHJpbmcoKTsNCiAgICAgICAgdGhpcy4kZWwudHJpZ2dlcignY2hhbmdlJywgeyBmaXJlZEJ5OiB0aGlzIH0pOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW5kZXJEYXRlRGlzcGxheSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckRhdGVEaXNwbGF5KCkgew0KICAgICAgICB2YXIgZGlzcGxheURhdGUgPSBEYXRlcGlja2VyLl9pc0RhdGUodGhpcy5kYXRlKSA/IHRoaXMuZGF0ZSA6IG5ldyBEYXRlKCk7DQogICAgICAgIHZhciBpMThuID0gdGhpcy5vcHRpb25zLmkxOG47DQogICAgICAgIHZhciBkYXkgPSBpMThuLndlZWtkYXlzU2hvcnRbZGlzcGxheURhdGUuZ2V0RGF5KCldOw0KICAgICAgICB2YXIgbW9udGggPSBpMThuLm1vbnRoc1Nob3J0W2Rpc3BsYXlEYXRlLmdldE1vbnRoKCldOw0KICAgICAgICB2YXIgZGF0ZSA9IGRpc3BsYXlEYXRlLmdldERhdGUoKTsNCiAgICAgICAgdGhpcy55ZWFyVGV4dEVsLmlubmVySFRNTCA9IGRpc3BsYXlEYXRlLmdldEZ1bGxZZWFyKCk7DQogICAgICAgIHRoaXMuZGF0ZVRleHRFbC5pbm5lckhUTUwgPSBkYXkgKyAiLCAiICsgbW9udGggKyAiICIgKyBkYXRlOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIGNoYW5nZSB2aWV3IHRvIGEgc3BlY2lmaWMgZGF0ZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnb3RvRGF0ZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ290b0RhdGUoZGF0ZSkgew0KICAgICAgICB2YXIgbmV3Q2FsZW5kYXIgPSB0cnVlOw0KDQogICAgICAgIGlmICghRGF0ZXBpY2tlci5faXNEYXRlKGRhdGUpKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHRoaXMuY2FsZW5kYXJzKSB7DQogICAgICAgICAgdmFyIGZpcnN0VmlzaWJsZURhdGUgPSBuZXcgRGF0ZSh0aGlzLmNhbGVuZGFyc1swXS55ZWFyLCB0aGlzLmNhbGVuZGFyc1swXS5tb250aCwgMSksDQogICAgICAgICAgICAgIGxhc3RWaXNpYmxlRGF0ZSA9IG5ldyBEYXRlKHRoaXMuY2FsZW5kYXJzW3RoaXMuY2FsZW5kYXJzLmxlbmd0aCAtIDFdLnllYXIsIHRoaXMuY2FsZW5kYXJzW3RoaXMuY2FsZW5kYXJzLmxlbmd0aCAtIDFdLm1vbnRoLCAxKSwNCiAgICAgICAgICAgICAgdmlzaWJsZURhdGUgPSBkYXRlLmdldFRpbWUoKTsNCiAgICAgICAgICAvLyBnZXQgdGhlIGVuZCBvZiB0aGUgbW9udGgNCiAgICAgICAgICBsYXN0VmlzaWJsZURhdGUuc2V0TW9udGgobGFzdFZpc2libGVEYXRlLmdldE1vbnRoKCkgKyAxKTsNCiAgICAgICAgICBsYXN0VmlzaWJsZURhdGUuc2V0RGF0ZShsYXN0VmlzaWJsZURhdGUuZ2V0RGF0ZSgpIC0gMSk7DQogICAgICAgICAgbmV3Q2FsZW5kYXIgPSB2aXNpYmxlRGF0ZSA8IGZpcnN0VmlzaWJsZURhdGUuZ2V0VGltZSgpIHx8IGxhc3RWaXNpYmxlRGF0ZS5nZXRUaW1lKCkgPCB2aXNpYmxlRGF0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChuZXdDYWxlbmRhcikgew0KICAgICAgICAgIHRoaXMuY2FsZW5kYXJzID0gW3sNCiAgICAgICAgICAgIG1vbnRoOiBkYXRlLmdldE1vbnRoKCksDQogICAgICAgICAgICB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKCkNCiAgICAgICAgICB9XTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiYWRqdXN0Q2FsZW5kYXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGp1c3RDYWxlbmRhcnMoKSB7DQogICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdID0gdGhpcy5hZGp1c3RDYWxlbmRhcih0aGlzLmNhbGVuZGFyc1swXSk7DQogICAgICAgIHRoaXMuZHJhdygpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImFkanVzdENhbGVuZGFyIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGp1c3RDYWxlbmRhcihjYWxlbmRhcikgew0KICAgICAgICBpZiAoY2FsZW5kYXIubW9udGggPCAwKSB7DQogICAgICAgICAgY2FsZW5kYXIueWVhciAtPSBNYXRoLmNlaWwoTWF0aC5hYnMoY2FsZW5kYXIubW9udGgpIC8gMTIpOw0KICAgICAgICAgIGNhbGVuZGFyLm1vbnRoICs9IDEyOw0KICAgICAgICB9DQogICAgICAgIGlmIChjYWxlbmRhci5tb250aCA+IDExKSB7DQogICAgICAgICAgY2FsZW5kYXIueWVhciArPSBNYXRoLmZsb29yKE1hdGguYWJzKGNhbGVuZGFyLm1vbnRoKSAvIDEyKTsNCiAgICAgICAgICBjYWxlbmRhci5tb250aCAtPSAxMjsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gY2FsZW5kYXI7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAibmV4dE1vbnRoIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0TW9udGgoKSB7DQogICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoKys7DQogICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAicHJldk1vbnRoIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmV2TW9udGgoKSB7DQogICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoLS07DQogICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAicmVuZGVyIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoeWVhciwgbW9udGgsIHJhbmRJZCkgew0KICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucywNCiAgICAgICAgICAgIG5vdyA9IG5ldyBEYXRlKCksDQogICAgICAgICAgICBkYXlzID0gRGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoeWVhciwgbW9udGgpLA0KICAgICAgICAgICAgYmVmb3JlID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpLmdldERheSgpLA0KICAgICAgICAgICAgZGF0YSA9IFtdLA0KICAgICAgICAgICAgcm93ID0gW107DQogICAgICAgIERhdGVwaWNrZXIuX3NldFRvU3RhcnRPZkRheShub3cpOw0KICAgICAgICBpZiAob3B0cy5maXJzdERheSA+IDApIHsNCiAgICAgICAgICBiZWZvcmUgLT0gb3B0cy5maXJzdERheTsNCiAgICAgICAgICBpZiAoYmVmb3JlIDwgMCkgew0KICAgICAgICAgICAgYmVmb3JlICs9IDc7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHZhciBwcmV2aW91c01vbnRoID0gbW9udGggPT09IDAgPyAxMSA6IG1vbnRoIC0gMSwNCiAgICAgICAgICAgIG5leHRNb250aCA9IG1vbnRoID09PSAxMSA/IDAgOiBtb250aCArIDEsDQogICAgICAgICAgICB5ZWFyT2ZQcmV2aW91c01vbnRoID0gbW9udGggPT09IDAgPyB5ZWFyIC0gMSA6IHllYXIsDQogICAgICAgICAgICB5ZWFyT2ZOZXh0TW9udGggPSBtb250aCA9PT0gMTEgPyB5ZWFyICsgMSA6IHllYXIsDQogICAgICAgICAgICBkYXlzSW5QcmV2aW91c01vbnRoID0gRGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoeWVhck9mUHJldmlvdXNNb250aCwgcHJldmlvdXNNb250aCk7DQogICAgICAgIHZhciBjZWxscyA9IGRheXMgKyBiZWZvcmUsDQogICAgICAgICAgICBhZnRlciA9IGNlbGxzOw0KICAgICAgICB3aGlsZSAoYWZ0ZXIgPiA3KSB7DQogICAgICAgICAgYWZ0ZXIgLT0gNzsNCiAgICAgICAgfQ0KICAgICAgICBjZWxscyArPSA3IC0gYWZ0ZXI7DQogICAgICAgIHZhciBpc1dlZWtTZWxlY3RlZCA9IGZhbHNlOw0KICAgICAgICBmb3IgKHZhciBpID0gMCwgciA9IDA7IGkgPCBjZWxsczsgaSsrKSB7DQogICAgICAgICAgdmFyIGRheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxICsgKGkgLSBiZWZvcmUpKSwNCiAgICAgICAgICAgICAgaXNTZWxlY3RlZCA9IERhdGVwaWNrZXIuX2lzRGF0ZSh0aGlzLmRhdGUpID8gRGF0ZXBpY2tlci5fY29tcGFyZURhdGVzKGRheSwgdGhpcy5kYXRlKSA6IGZhbHNlLA0KICAgICAgICAgICAgICBpc1RvZGF5ID0gRGF0ZXBpY2tlci5fY29tcGFyZURhdGVzKGRheSwgbm93KSwNCiAgICAgICAgICAgICAgaGFzRXZlbnQgPSBvcHRzLmV2ZW50cy5pbmRleE9mKGRheS50b0RhdGVTdHJpbmcoKSkgIT09IC0xID8gdHJ1ZSA6IGZhbHNlLA0KICAgICAgICAgICAgICBpc0VtcHR5ID0gaSA8IGJlZm9yZSB8fCBpID49IGRheXMgKyBiZWZvcmUsDQogICAgICAgICAgICAgIGRheU51bWJlciA9IDEgKyAoaSAtIGJlZm9yZSksDQogICAgICAgICAgICAgIG1vbnRoTnVtYmVyID0gbW9udGgsDQogICAgICAgICAgICAgIHllYXJOdW1iZXIgPSB5ZWFyLA0KICAgICAgICAgICAgICBpc1N0YXJ0UmFuZ2UgPSBvcHRzLnN0YXJ0UmFuZ2UgJiYgRGF0ZXBpY2tlci5fY29tcGFyZURhdGVzKG9wdHMuc3RhcnRSYW5nZSwgZGF5KSwNCiAgICAgICAgICAgICAgaXNFbmRSYW5nZSA9IG9wdHMuZW5kUmFuZ2UgJiYgRGF0ZXBpY2tlci5fY29tcGFyZURhdGVzKG9wdHMuZW5kUmFuZ2UsIGRheSksDQogICAgICAgICAgICAgIGlzSW5SYW5nZSA9IG9wdHMuc3RhcnRSYW5nZSAmJiBvcHRzLmVuZFJhbmdlICYmIG9wdHMuc3RhcnRSYW5nZSA8IGRheSAmJiBkYXkgPCBvcHRzLmVuZFJhbmdlLA0KICAgICAgICAgICAgICBpc0Rpc2FibGVkID0gb3B0cy5taW5EYXRlICYmIGRheSA8IG9wdHMubWluRGF0ZSB8fCBvcHRzLm1heERhdGUgJiYgZGF5ID4gb3B0cy5tYXhEYXRlIHx8IG9wdHMuZGlzYWJsZVdlZWtlbmRzICYmIERhdGVwaWNrZXIuX2lzV2Vla2VuZChkYXkpIHx8IG9wdHMuZGlzYWJsZURheUZuICYmIG9wdHMuZGlzYWJsZURheUZuKGRheSk7DQoNCiAgICAgICAgICBpZiAoaXNFbXB0eSkgew0KICAgICAgICAgICAgaWYgKGkgPCBiZWZvcmUpIHsNCiAgICAgICAgICAgICAgZGF5TnVtYmVyID0gZGF5c0luUHJldmlvdXNNb250aCArIGRheU51bWJlcjsNCiAgICAgICAgICAgICAgbW9udGhOdW1iZXIgPSBwcmV2aW91c01vbnRoOw0KICAgICAgICAgICAgICB5ZWFyTnVtYmVyID0geWVhck9mUHJldmlvdXNNb250aDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGRheU51bWJlciA9IGRheU51bWJlciAtIGRheXM7DQogICAgICAgICAgICAgIG1vbnRoTnVtYmVyID0gbmV4dE1vbnRoOw0KICAgICAgICAgICAgICB5ZWFyTnVtYmVyID0geWVhck9mTmV4dE1vbnRoOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBkYXlDb25maWcgPSB7DQogICAgICAgICAgICBkYXk6IGRheU51bWJlciwNCiAgICAgICAgICAgIG1vbnRoOiBtb250aE51bWJlciwNCiAgICAgICAgICAgIHllYXI6IHllYXJOdW1iZXIsDQogICAgICAgICAgICBoYXNFdmVudDogaGFzRXZlbnQsDQogICAgICAgICAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLA0KICAgICAgICAgICAgaXNUb2RheTogaXNUb2RheSwNCiAgICAgICAgICAgIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsDQogICAgICAgICAgICBpc0VtcHR5OiBpc0VtcHR5LA0KICAgICAgICAgICAgaXNTdGFydFJhbmdlOiBpc1N0YXJ0UmFuZ2UsDQogICAgICAgICAgICBpc0VuZFJhbmdlOiBpc0VuZFJhbmdlLA0KICAgICAgICAgICAgaXNJblJhbmdlOiBpc0luUmFuZ2UsDQogICAgICAgICAgICBzaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzOiBvcHRzLnNob3dEYXlzSW5OZXh0QW5kUHJldmlvdXNNb250aHMNCiAgICAgICAgICB9Ow0KDQogICAgICAgICAgcm93LnB1c2godGhpcy5yZW5kZXJEYXkoZGF5Q29uZmlnKSk7DQoNCiAgICAgICAgICBpZiAoKytyID09PSA3KSB7DQogICAgICAgICAgICBkYXRhLnB1c2godGhpcy5yZW5kZXJSb3cocm93LCBvcHRzLmlzUlRMLCBpc1dlZWtTZWxlY3RlZCkpOw0KICAgICAgICAgICAgcm93ID0gW107DQogICAgICAgICAgICByID0gMDsNCiAgICAgICAgICAgIGlzV2Vla1NlbGVjdGVkID0gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0aGlzLnJlbmRlclRhYmxlKG9wdHMsIGRhdGEsIHJhbmRJZCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAicmVuZGVyRGF5IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJEYXkob3B0cykgew0KICAgICAgICB2YXIgYXJyID0gW107DQogICAgICAgIHZhciBhcmlhU2VsZWN0ZWQgPSAnZmFsc2UnOw0KICAgICAgICBpZiAob3B0cy5pc0VtcHR5KSB7DQogICAgICAgICAgaWYgKG9wdHMuc2hvd0RheXNJbk5leHRBbmRQcmV2aW91c01vbnRocykgew0KICAgICAgICAgICAgYXJyLnB1c2goJ2lzLW91dHNpZGUtY3VycmVudC1tb250aCcpOw0KICAgICAgICAgICAgYXJyLnB1c2goJ2lzLXNlbGVjdGlvbi1kaXNhYmxlZCcpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gJzx0ZCBjbGFzcz0iaXMtZW1wdHkiPjwvdGQ+JzsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKG9wdHMuaXNEaXNhYmxlZCkgew0KICAgICAgICAgIGFyci5wdXNoKCdpcy1kaXNhYmxlZCcpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKG9wdHMuaXNUb2RheSkgew0KICAgICAgICAgIGFyci5wdXNoKCdpcy10b2RheScpOw0KICAgICAgICB9DQogICAgICAgIGlmIChvcHRzLmlzU2VsZWN0ZWQpIHsNCiAgICAgICAgICBhcnIucHVzaCgnaXMtc2VsZWN0ZWQnKTsNCiAgICAgICAgICBhcmlhU2VsZWN0ZWQgPSAndHJ1ZSc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG9wdHMuaGFzRXZlbnQpIHsNCiAgICAgICAgICBhcnIucHVzaCgnaGFzLWV2ZW50Jyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG9wdHMuaXNJblJhbmdlKSB7DQogICAgICAgICAgYXJyLnB1c2goJ2lzLWlucmFuZ2UnKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAob3B0cy5pc1N0YXJ0UmFuZ2UpIHsNCiAgICAgICAgICBhcnIucHVzaCgnaXMtc3RhcnRyYW5nZScpOw0KICAgICAgICB9DQogICAgICAgIGlmIChvcHRzLmlzRW5kUmFuZ2UpIHsNCiAgICAgICAgICBhcnIucHVzaCgnaXMtZW5kcmFuZ2UnKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gIjx0ZCBkYXRhLWRheT1cIiIgKyBvcHRzLmRheSArICJcIiBjbGFzcz1cIiIgKyBhcnIuam9pbignICcpICsgIlwiIGFyaWEtc2VsZWN0ZWQ9XCIiICsgYXJpYVNlbGVjdGVkICsgIlwiPiIgKyAoIjxidXR0b24gY2xhc3M9XCJkYXRlcGlja2VyLWRheS1idXR0b25cIiB0eXBlPVwiYnV0dG9uXCIgZGF0YS15ZWFyPVwiIiArIG9wdHMueWVhciArICJcIiBkYXRhLW1vbnRoPVwiIiArIG9wdHMubW9udGggKyAiXCIgZGF0YS1kYXk9XCIiICsgb3B0cy5kYXkgKyAiXCI+IiArIG9wdHMuZGF5ICsgIjwvYnV0dG9uPiIpICsgJzwvdGQ+JzsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJyZW5kZXJSb3ciLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclJvdyhkYXlzLCBpc1JUTCwgaXNSb3dTZWxlY3RlZCkgew0KICAgICAgICByZXR1cm4gJzx0ciBjbGFzcz0iZGF0ZXBpY2tlci1yb3cnICsgKGlzUm93U2VsZWN0ZWQgPyAnIGlzLXNlbGVjdGVkJyA6ICcnKSArICciPicgKyAoaXNSVEwgPyBkYXlzLnJldmVyc2UoKSA6IGRheXMpLmpvaW4oJycpICsgJzwvdHI+JzsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJyZW5kZXJUYWJsZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVGFibGUob3B0cywgZGF0YSwgcmFuZElkKSB7DQogICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz0iZGF0ZXBpY2tlci10YWJsZS13cmFwcGVyIj48dGFibGUgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBjbGFzcz0iZGF0ZXBpY2tlci10YWJsZSIgcm9sZT0iZ3JpZCIgYXJpYS1sYWJlbGxlZGJ5PSInICsgcmFuZElkICsgJyI+JyArIHRoaXMucmVuZGVySGVhZChvcHRzKSArIHRoaXMucmVuZGVyQm9keShkYXRhKSArICc8L3RhYmxlPjwvZGl2Pic7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAicmVuZGVySGVhZCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVySGVhZChvcHRzKSB7DQogICAgICAgIHZhciBpID0gdm9pZCAwLA0KICAgICAgICAgICAgYXJyID0gW107DQogICAgICAgIGZvciAoaSA9IDA7IGkgPCA3OyBpKyspIHsNCiAgICAgICAgICBhcnIucHVzaCgiPHRoIHNjb3BlPVwiY29sXCI+PGFiYnIgdGl0bGU9XCIiICsgdGhpcy5yZW5kZXJEYXlOYW1lKG9wdHMsIGkpICsgIlwiPiIgKyB0aGlzLnJlbmRlckRheU5hbWUob3B0cywgaSwgdHJ1ZSkgKyAiPC9hYmJyPjwvdGg+Iik7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuICc8dGhlYWQ+PHRyPicgKyAob3B0cy5pc1JUTCA/IGFyci5yZXZlcnNlKCkgOiBhcnIpLmpvaW4oJycpICsgJzwvdHI+PC90aGVhZD4nOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogInJlbmRlckJvZHkiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckJvZHkocm93cykgew0KICAgICAgICByZXR1cm4gJzx0Ym9keT4nICsgcm93cy5qb2luKCcnKSArICc8L3Rib2R5Pic7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAicmVuZGVyVGl0bGUiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRpdGxlKGluc3RhbmNlLCBjLCB5ZWFyLCBtb250aCwgcmVmWWVhciwgcmFuZElkKSB7DQogICAgICAgIHZhciBpID0gdm9pZCAwLA0KICAgICAgICAgICAgaiA9IHZvaWQgMCwNCiAgICAgICAgICAgIGFyciA9IHZvaWQgMCwNCiAgICAgICAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMsDQogICAgICAgICAgICBpc01pblllYXIgPSB5ZWFyID09PSBvcHRzLm1pblllYXIsDQogICAgICAgICAgICBpc01heFllYXIgPSB5ZWFyID09PSBvcHRzLm1heFllYXIsDQogICAgICAgICAgICBodG1sID0gJzxkaXYgaWQ9IicgKyByYW5kSWQgKyAnIiBjbGFzcz0iZGF0ZXBpY2tlci1jb250cm9scyIgcm9sZT0iaGVhZGluZyIgYXJpYS1saXZlPSJhc3NlcnRpdmUiPicsDQogICAgICAgICAgICBtb250aEh0bWwgPSB2b2lkIDAsDQogICAgICAgICAgICB5ZWFySHRtbCA9IHZvaWQgMCwNCiAgICAgICAgICAgIHByZXYgPSB0cnVlLA0KICAgICAgICAgICAgbmV4dCA9IHRydWU7DQoNCiAgICAgICAgZm9yIChhcnIgPSBbXSwgaSA9IDA7IGkgPCAxMjsgaSsrKSB7DQogICAgICAgICAgYXJyLnB1c2goJzxvcHRpb24gdmFsdWU9IicgKyAoeWVhciA9PT0gcmVmWWVhciA/IGkgLSBjIDogMTIgKyBpIC0gYykgKyAnIicgKyAoaSA9PT0gbW9udGggPyAnIHNlbGVjdGVkPSJzZWxlY3RlZCInIDogJycpICsgKGlzTWluWWVhciAmJiBpIDwgb3B0cy5taW5Nb250aCB8fCBpc01heFllYXIgJiYgaSA+IG9wdHMubWF4TW9udGggPyAnZGlzYWJsZWQ9ImRpc2FibGVkIicgOiAnJykgKyAnPicgKyBvcHRzLmkxOG4ubW9udGhzW2ldICsgJzwvb3B0aW9uPicpOw0KICAgICAgICB9DQoNCiAgICAgICAgbW9udGhIdG1sID0gJzxzZWxlY3QgY2xhc3M9ImRhdGVwaWNrZXItc2VsZWN0IG9yaWctc2VsZWN0LW1vbnRoIiB0YWJpbmRleD0iLTEiPicgKyBhcnIuam9pbignJykgKyAnPC9zZWxlY3Q+JzsNCg0KICAgICAgICBpZiAoJC5pc0FycmF5KG9wdHMueWVhclJhbmdlKSkgew0KICAgICAgICAgIGkgPSBvcHRzLnllYXJSYW5nZVswXTsNCiAgICAgICAgICBqID0gb3B0cy55ZWFyUmFuZ2VbMV0gKyAxOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGkgPSB5ZWFyIC0gb3B0cy55ZWFyUmFuZ2U7DQogICAgICAgICAgaiA9IDEgKyB5ZWFyICsgb3B0cy55ZWFyUmFuZ2U7DQogICAgICAgIH0NCg0KICAgICAgICBmb3IgKGFyciA9IFtdOyBpIDwgaiAmJiBpIDw9IG9wdHMubWF4WWVhcjsgaSsrKSB7DQogICAgICAgICAgaWYgKGkgPj0gb3B0cy5taW5ZZWFyKSB7DQogICAgICAgICAgICBhcnIucHVzaCgiPG9wdGlvbiB2YWx1ZT1cIiIgKyBpICsgIlwiICIgKyAoaSA9PT0geWVhciA/ICdzZWxlY3RlZD0ic2VsZWN0ZWQiJyA6ICcnKSArICI+IiArIGkgKyAiPC9vcHRpb24+Iik7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgeWVhckh0bWwgPSAiPHNlbGVjdCBjbGFzcz1cImRhdGVwaWNrZXItc2VsZWN0IG9yaWctc2VsZWN0LXllYXJcIiB0YWJpbmRleD1cIi0xXCI+IiArIGFyci5qb2luKCcnKSArICI8L3NlbGVjdD4iOw0KDQogICAgICAgIHZhciBsZWZ0QXJyb3cgPSAnPHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTUuNDEgMTYuMDlsLTQuNTgtNC41OSA0LjU4LTQuNTlMMTQgNS41bC02IDYgNiA2eiIvPjxwYXRoIGQ9Ik0wLS41aDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+JzsNCiAgICAgICAgaHRtbCArPSAiPGJ1dHRvbiBjbGFzcz1cIm1vbnRoLXByZXYiICsgKHByZXYgPyAnJyA6ICcgaXMtZGlzYWJsZWQnKSArICJcIiB0eXBlPVwiYnV0dG9uXCI+IiArIGxlZnRBcnJvdyArICI8L2J1dHRvbj4iOw0KDQogICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InNlbGVjdHMtY29udGFpbmVyIj4nOw0KICAgICAgICBpZiAob3B0cy5zaG93TW9udGhBZnRlclllYXIpIHsNCiAgICAgICAgICBodG1sICs9IHllYXJIdG1sICsgbW9udGhIdG1sOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGh0bWwgKz0gbW9udGhIdG1sICsgeWVhckh0bWw7DQogICAgICAgIH0NCiAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsNCg0KICAgICAgICBpZiAoaXNNaW5ZZWFyICYmIChtb250aCA9PT0gMCB8fCBvcHRzLm1pbk1vbnRoID49IG1vbnRoKSkgew0KICAgICAgICAgIHByZXYgPSBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChpc01heFllYXIgJiYgKG1vbnRoID09PSAxMSB8fCBvcHRzLm1heE1vbnRoIDw9IG1vbnRoKSkgew0KICAgICAgICAgIG5leHQgPSBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciByaWdodEFycm93ID0gJzxzdmcgZmlsbD0iIzAwMDAwMCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTguNTkgMTYuMzRsNC41OC00LjU5LTQuNTgtNC41OUwxMCA1Ljc1bDYgNi02IDZ6Ii8+PHBhdGggZD0iTTAtLjI1aDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+JzsNCiAgICAgICAgaHRtbCArPSAiPGJ1dHRvbiBjbGFzcz1cIm1vbnRoLW5leHQiICsgKG5leHQgPyAnJyA6ICcgaXMtZGlzYWJsZWQnKSArICJcIiB0eXBlPVwiYnV0dG9uXCI+IiArIHJpZ2h0QXJyb3cgKyAiPC9idXR0b24+IjsNCg0KICAgICAgICByZXR1cm4gaHRtbCArPSAnPC9kaXY+JzsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiByZWZyZXNoIHRoZSBIVE1MDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImRyYXciLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoZm9yY2UpIHsNCiAgICAgICAgaWYgKCF0aGlzLmlzT3BlbiAmJiAhZm9yY2UpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMsDQogICAgICAgICAgICBtaW5ZZWFyID0gb3B0cy5taW5ZZWFyLA0KICAgICAgICAgICAgbWF4WWVhciA9IG9wdHMubWF4WWVhciwNCiAgICAgICAgICAgIG1pbk1vbnRoID0gb3B0cy5taW5Nb250aCwNCiAgICAgICAgICAgIG1heE1vbnRoID0gb3B0cy5tYXhNb250aCwNCiAgICAgICAgICAgIGh0bWwgPSAnJywNCiAgICAgICAgICAgIHJhbmRJZCA9IHZvaWQgMDsNCg0KICAgICAgICBpZiAodGhpcy5feSA8PSBtaW5ZZWFyKSB7DQogICAgICAgICAgdGhpcy5feSA9IG1pblllYXI7DQogICAgICAgICAgaWYgKCFpc05hTihtaW5Nb250aCkgJiYgdGhpcy5fbSA8IG1pbk1vbnRoKSB7DQogICAgICAgICAgICB0aGlzLl9tID0gbWluTW9udGg7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLl95ID49IG1heFllYXIpIHsNCiAgICAgICAgICB0aGlzLl95ID0gbWF4WWVhcjsNCiAgICAgICAgICBpZiAoIWlzTmFOKG1heE1vbnRoKSAmJiB0aGlzLl9tID4gbWF4TW9udGgpIHsNCiAgICAgICAgICAgIHRoaXMuX20gPSBtYXhNb250aDsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByYW5kSWQgPSAnZGF0ZXBpY2tlci10aXRsZS0nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikucmVwbGFjZSgvW15hLXpdKy9nLCAnJykuc3Vic3RyKDAsIDIpOw0KDQogICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgMTsgYysrKSB7DQogICAgICAgICAgdGhpcy5fcmVuZGVyRGF0ZURpc3BsYXkoKTsNCiAgICAgICAgICBodG1sICs9IHRoaXMucmVuZGVyVGl0bGUodGhpcywgYywgdGhpcy5jYWxlbmRhcnNbY10ueWVhciwgdGhpcy5jYWxlbmRhcnNbY10ubW9udGgsIHRoaXMuY2FsZW5kYXJzWzBdLnllYXIsIHJhbmRJZCkgKyB0aGlzLnJlbmRlcih0aGlzLmNhbGVuZGFyc1tjXS55ZWFyLCB0aGlzLmNhbGVuZGFyc1tjXS5tb250aCwgcmFuZElkKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuZGVzdHJveVNlbGVjdHMoKTsNCg0KICAgICAgICB0aGlzLmNhbGVuZGFyRWwuaW5uZXJIVE1MID0gaHRtbDsNCg0KICAgICAgICAvLyBJbml0IE1hdGVyaWFsaXplIFNlbGVjdA0KICAgICAgICB2YXIgeWVhclNlbGVjdCA9IHRoaXMuY2FsZW5kYXJFbC5xdWVyeVNlbGVjdG9yKCcub3JpZy1zZWxlY3QteWVhcicpOw0KICAgICAgICB2YXIgbW9udGhTZWxlY3QgPSB0aGlzLmNhbGVuZGFyRWwucXVlcnlTZWxlY3RvcignLm9yaWctc2VsZWN0LW1vbnRoJyk7DQogICAgICAgIE0uRm9ybVNlbGVjdC5pbml0KHllYXJTZWxlY3QsIHsNCiAgICAgICAgICBjbGFzc2VzOiAnc2VsZWN0LXllYXInLA0KICAgICAgICAgIGRyb3Bkb3duT3B0aW9uczogeyBjb250YWluZXI6IGRvY3VtZW50LmJvZHksIGNvbnN0cmFpbldpZHRoOiBmYWxzZSB9DQogICAgICAgIH0pOw0KICAgICAgICBNLkZvcm1TZWxlY3QuaW5pdChtb250aFNlbGVjdCwgew0KICAgICAgICAgIGNsYXNzZXM6ICdzZWxlY3QtbW9udGgnLA0KICAgICAgICAgIGRyb3Bkb3duT3B0aW9uczogeyBjb250YWluZXI6IGRvY3VtZW50LmJvZHksIGNvbnN0cmFpbldpZHRoOiBmYWxzZSB9DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIEFkZCBjaGFuZ2UgaGFuZGxlcnMgZm9yIHNlbGVjdA0KICAgICAgICB5ZWFyU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZVllYXJDaGFuZ2UuYmluZCh0aGlzKSk7DQogICAgICAgIG1vbnRoU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZU1vbnRoQ2hhbmdlLmJpbmQodGhpcykpOw0KDQogICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uRHJhdyA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkRyYXcodGhpcyk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bi5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dENsaWNrLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZUlucHV0Q2hhbmdlQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dENoYW5nZS5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLl9oYW5kbGVDYWxlbmRhckNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVDYWxlbmRhckNsaWNrLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2ZpbmlzaFNlbGVjdGlvbkJvdW5kID0gdGhpcy5fZmluaXNoU2VsZWN0aW9uLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZU1vbnRoQ2hhbmdlID0gdGhpcy5faGFuZGxlTW9udGhDaGFuZ2UuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5fY2xvc2VCb3VuZCA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTsNCg0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZUlucHV0Q2hhbmdlQm91bmQpOw0KICAgICAgICB0aGlzLmNhbGVuZGFyRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDYWxlbmRhckNsaWNrQm91bmQpOw0KICAgICAgICB0aGlzLmRvbmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9maW5pc2hTZWxlY3Rpb25Cb3VuZCk7DQogICAgICAgIHRoaXMuY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xvc2VCb3VuZCk7DQoNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaG93Q2xlYXJCdG4pIHsNCiAgICAgICAgICB0aGlzLl9oYW5kbGVDbGVhckNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVDbGVhckNsaWNrLmJpbmQodGhpcyk7DQogICAgICAgICAgdGhpcy5jbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsZWFyQ2xpY2tCb3VuZCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBWYXJpYWJsZXMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cFZhcmlhYmxlcygpIHsNCiAgICAgICAgdmFyIF90aGlzNTUgPSB0aGlzOw0KDQogICAgICAgIHRoaXMuJG1vZGFsRWwgPSAkKERhdGVwaWNrZXIuX3RlbXBsYXRlKTsNCiAgICAgICAgdGhpcy5tb2RhbEVsID0gdGhpcy4kbW9kYWxFbFswXTsNCg0KICAgICAgICB0aGlzLmNhbGVuZGFyRWwgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGVwaWNrZXItY2FsZW5kYXInKTsNCg0KICAgICAgICB0aGlzLnllYXJUZXh0RWwgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnllYXItdGV4dCcpOw0KICAgICAgICB0aGlzLmRhdGVUZXh0RWwgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGUtdGV4dCcpOw0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNob3dDbGVhckJ0bikgew0KICAgICAgICAgIHRoaXMuY2xlYXJCdG4gPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGVwaWNrZXItY2xlYXInKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmRvbmVCdG4gPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGVwaWNrZXItZG9uZScpOw0KICAgICAgICB0aGlzLmNhbmNlbEJ0biA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcuZGF0ZXBpY2tlci1jYW5jZWwnKTsNCg0KICAgICAgICB0aGlzLmZvcm1hdHMgPSB7DQogICAgICAgICAgZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIF90aGlzNTUuZGF0ZS5nZXREYXRlKCk7DQogICAgICAgICAgfSwNCiAgICAgICAgICBkZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIGQgPSBfdGhpczU1LmRhdGUuZ2V0RGF0ZSgpOw0KICAgICAgICAgICAgcmV0dXJuIChkIDwgMTAgPyAnMCcgOiAnJykgKyBkOw0KICAgICAgICAgIH0sDQogICAgICAgICAgZGRkOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gX3RoaXM1NS5vcHRpb25zLmkxOG4ud2Vla2RheXNTaG9ydFtfdGhpczU1LmRhdGUuZ2V0RGF5KCldOw0KICAgICAgICAgIH0sDQogICAgICAgICAgZGRkZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIF90aGlzNTUub3B0aW9ucy5pMThuLndlZWtkYXlzW190aGlzNTUuZGF0ZS5nZXREYXkoKV07DQogICAgICAgICAgfSwNCiAgICAgICAgICBtOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gX3RoaXM1NS5kYXRlLmdldE1vbnRoKCkgKyAxOw0KICAgICAgICAgIH0sDQogICAgICAgICAgbW06IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBtID0gX3RoaXM1NS5kYXRlLmdldE1vbnRoKCkgKyAxOw0KICAgICAgICAgICAgcmV0dXJuIChtIDwgMTAgPyAnMCcgOiAnJykgKyBtOw0KICAgICAgICAgIH0sDQogICAgICAgICAgbW1tOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gX3RoaXM1NS5vcHRpb25zLmkxOG4ubW9udGhzU2hvcnRbX3RoaXM1NS5kYXRlLmdldE1vbnRoKCldOw0KICAgICAgICAgIH0sDQogICAgICAgICAgbW1tbTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIF90aGlzNTUub3B0aW9ucy5pMThuLm1vbnRoc1tfdGhpczU1LmRhdGUuZ2V0TW9udGgoKV07DQogICAgICAgICAgfSwNCiAgICAgICAgICB5eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuICgnJyArIF90aGlzNTUuZGF0ZS5nZXRGdWxsWWVhcigpKS5zbGljZSgyKTsNCiAgICAgICAgICB9LA0KICAgICAgICAgIHl5eXk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiBfdGhpczU1LmRhdGUuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9oYW5kbGVJbnB1dENoYW5nZUJvdW5kKTsNCiAgICAgICAgdGhpcy5jYWxlbmRhckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2FsZW5kYXJDbGlja0JvdW5kKTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlSW5wdXRDbGljayIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUlucHV0Q2xpY2soKSB7DQogICAgICAgIHRoaXMub3BlbigpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVJbnB1dEtleWRvd24iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dEtleWRvd24oZSkgew0KICAgICAgICBpZiAoZS53aGljaCA9PT0gTS5rZXlzLkVOVEVSKSB7DQogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgIHRoaXMub3BlbigpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUNhbGVuZGFyQ2xpY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDYWxlbmRhckNsaWNrKGUpIHsNCiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciAkdGFyZ2V0ID0gJChlLnRhcmdldCk7DQogICAgICAgIGlmICghJHRhcmdldC5oYXNDbGFzcygnaXMtZGlzYWJsZWQnKSkgew0KICAgICAgICAgIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKCdkYXRlcGlja2VyLWRheS1idXR0b24nKSAmJiAhJHRhcmdldC5oYXNDbGFzcygnaXMtZW1wdHknKSAmJiAhJHRhcmdldC5wYXJlbnQoKS5oYXNDbGFzcygnaXMtZGlzYWJsZWQnKSkgew0KICAgICAgICAgICAgdGhpcy5zZXREYXRlKG5ldyBEYXRlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15ZWFyJyksIGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1tb250aCcpLCBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGF5JykpKTsNCiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXV0b0Nsb3NlKSB7DQogICAgICAgICAgICAgIHRoaXMuX2ZpbmlzaFNlbGVjdGlvbigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSBpZiAoJHRhcmdldC5jbG9zZXN0KCcubW9udGgtcHJldicpLmxlbmd0aCkgew0KICAgICAgICAgICAgdGhpcy5wcmV2TW9udGgoKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKCR0YXJnZXQuY2xvc2VzdCgnLm1vbnRoLW5leHQnKS5sZW5ndGgpIHsNCiAgICAgICAgICAgIHRoaXMubmV4dE1vbnRoKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUNsZWFyQ2xpY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDbGVhckNsaWNrKCkgew0KICAgICAgICB0aGlzLmRhdGUgPSBudWxsOw0KICAgICAgICB0aGlzLnNldElucHV0VmFsdWUoKTsNCiAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVNb250aENoYW5nZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU1vbnRoQ2hhbmdlKGUpIHsNCiAgICAgICAgdGhpcy5nb3RvTW9udGgoZS50YXJnZXQudmFsdWUpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVZZWFyQ2hhbmdlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlWWVhckNoYW5nZShlKSB7DQogICAgICAgIHRoaXMuZ290b1llYXIoZS50YXJnZXQudmFsdWUpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIGNoYW5nZSB2aWV3IHRvIGEgc3BlY2lmaWMgbW9udGggKHplcm8taW5kZXgsIGUuZy4gMDogSmFudWFyeSkNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiZ290b01vbnRoIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnb3RvTW9udGgobW9udGgpIHsNCiAgICAgICAgaWYgKCFpc05hTihtb250aCkpIHsNCiAgICAgICAgICB0aGlzLmNhbGVuZGFyc1swXS5tb250aCA9IHBhcnNlSW50KG1vbnRoLCAxMCk7DQogICAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIGNoYW5nZSB2aWV3IHRvIGEgc3BlY2lmaWMgZnVsbCB5ZWFyIChlLmcuICIyMDEyIikNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiZ290b1llYXIiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdvdG9ZZWFyKHllYXIpIHsNCiAgICAgICAgaWYgKCFpc05hTih5ZWFyKSkgew0KICAgICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLnllYXIgPSBwYXJzZUludCh5ZWFyLCAxMCk7DQogICAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVJbnB1dENoYW5nZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUlucHV0Q2hhbmdlKGUpIHsNCiAgICAgICAgdmFyIGRhdGUgPSB2b2lkIDA7DQoNCiAgICAgICAgLy8gUHJldmVudCBjaGFuZ2UgZXZlbnQgZnJvbSBiZWluZyBmaXJlZCB3aGVuIHRyaWdnZXJlZCBieSB0aGUgcGx1Z2luDQogICAgICAgIGlmIChlLmZpcmVkQnkgPT09IHRoaXMpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYXJzZSkgew0KICAgICAgICAgIGRhdGUgPSB0aGlzLm9wdGlvbnMucGFyc2UodGhpcy5lbC52YWx1ZSwgdGhpcy5vcHRpb25zLmZvcm1hdCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UodGhpcy5lbC52YWx1ZSkpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKERhdGVwaWNrZXIuX2lzRGF0ZShkYXRlKSkgew0KICAgICAgICAgIHRoaXMuc2V0RGF0ZShkYXRlKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogInJlbmRlckRheU5hbWUiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckRheU5hbWUob3B0cywgZGF5LCBhYmJyKSB7DQogICAgICAgIGRheSArPSBvcHRzLmZpcnN0RGF5Ow0KICAgICAgICB3aGlsZSAoZGF5ID49IDcpIHsNCiAgICAgICAgICBkYXkgLT0gNzsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gYWJiciA/IG9wdHMuaTE4bi53ZWVrZGF5c0FiYnJldltkYXldIDogb3B0cy5pMThuLndlZWtkYXlzW2RheV07DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0IGlucHV0IHZhbHVlIHRvIHRoZSBzZWxlY3RlZCBkYXRlIGFuZCBjbG9zZSBEYXRlcGlja2VyDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9maW5pc2hTZWxlY3Rpb24iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9maW5pc2hTZWxlY3Rpb24oKSB7DQogICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgpOw0KICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogT3BlbiBEYXRlcGlja2VyDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIm9wZW4iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7DQogICAgICAgIGlmICh0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTsNCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25PcGVuID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgdGhpcy5vcHRpb25zLm9uT3Blbi5jYWxsKHRoaXMpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuZHJhdygpOw0KICAgICAgICB0aGlzLm1vZGFsLm9wZW4oKTsNCiAgICAgICAgcmV0dXJuIHRoaXM7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQ2xvc2UgRGF0ZXBpY2tlcg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJjbG9zZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7DQogICAgICAgIGlmICghdGhpcy5pc09wZW4pIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlOw0KICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkNsb3NlID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2UuY2FsbCh0aGlzKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLm1vZGFsLmNsb3NlKCk7DQogICAgICAgIHJldHVybiB0aGlzOw0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiaW5pdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9nZXQoRGF0ZXBpY2tlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKERhdGVwaWNrZXIpLCAiaW5pdCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfaXNEYXRlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNEYXRlKG9iaikgew0KICAgICAgICByZXR1cm4gKC9EYXRlLy50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSAmJiAhaXNOYU4ob2JqLmdldFRpbWUoKSkNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfaXNXZWVrZW5kIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNXZWVrZW5kKGRhdGUpIHsNCiAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7DQogICAgICAgIHJldHVybiBkYXkgPT09IDAgfHwgZGF5ID09PSA2Ow0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXRUb1N0YXJ0T2ZEYXkiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRUb1N0YXJ0T2ZEYXkoZGF0ZSkgew0KICAgICAgICBpZiAoRGF0ZXBpY2tlci5faXNEYXRlKGRhdGUpKSBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9nZXREYXlzSW5Nb250aCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoKSB7DQogICAgICAgIHJldHVybiBbMzEsIERhdGVwaWNrZXIuX2lzTGVhcFllYXIoeWVhcikgPyAyOSA6IDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV1bbW9udGhdOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9pc0xlYXBZZWFyIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNMZWFwWWVhcih5ZWFyKSB7DQogICAgICAgIC8vIHNvbHV0aW9uIGJ5IE1hdHRpIFZpcmtrdW5lbjogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDg4MTk1MQ0KICAgICAgICByZXR1cm4geWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMCB8fCB5ZWFyICUgNDAwID09PSAwOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9jb21wYXJlRGF0ZXMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jb21wYXJlRGF0ZXMoYSwgYikgew0KICAgICAgICAvLyB3ZWFrIGRhdGUgY29tcGFyaXNvbiAodXNlIHNldFRvU3RhcnRPZkRheShkYXRlKSB0byBlbnN1cmUgY29ycmVjdCByZXN1bHQpDQogICAgICAgIHJldHVybiBhLmdldFRpbWUoKSA9PT0gYi5nZXRUaW1lKCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX3NldFRvU3RhcnRPZkRheSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFRvU3RhcnRPZkRheShkYXRlKSB7DQogICAgICAgIGlmIChEYXRlcGlja2VyLl9pc0RhdGUoZGF0ZSkpIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogR2V0IEluc3RhbmNlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImdldEluc3RhbmNlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkgew0KICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDsNCiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9EYXRlcGlja2VyOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImRlZmF1bHRzIiwNCiAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gX2RlZmF1bHRzOw0KICAgICAgfQ0KICAgIH1dKTsNCg0KICAgIHJldHVybiBEYXRlcGlja2VyOw0KICB9KENvbXBvbmVudCk7DQoNCiAgRGF0ZXBpY2tlci5fdGVtcGxhdGUgPSBbJzxkaXYgY2xhc3M9ICJtb2RhbCBkYXRlcGlja2VyLW1vZGFsIj4nLCAnPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCBkYXRlcGlja2VyLWNvbnRhaW5lciI+JywgJzxkaXYgY2xhc3M9ImRhdGVwaWNrZXItZGF0ZS1kaXNwbGF5Ij4nLCAnPHNwYW4gY2xhc3M9InllYXItdGV4dCI+PC9zcGFuPicsICc8c3BhbiBjbGFzcz0iZGF0ZS10ZXh0Ij48L3NwYW4+JywgJzwvZGl2PicsICc8ZGl2IGNsYXNzPSJkYXRlcGlja2VyLWNhbGVuZGFyLWNvbnRhaW5lciI+JywgJzxkaXYgY2xhc3M9ImRhdGVwaWNrZXItY2FsZW5kYXIiPjwvZGl2PicsICc8ZGl2IGNsYXNzPSJkYXRlcGlja2VyLWZvb3RlciI+JywgJzxidXR0b24gY2xhc3M9ImJ0bi1mbGF0IGRhdGVwaWNrZXItY2xlYXIgd2F2ZXMtZWZmZWN0IiBzdHlsZT0idmlzaWJpbGl0eTogaGlkZGVuOyIgdHlwZT0iYnV0dG9uIj48L2J1dHRvbj4nLCAnPGRpdiBjbGFzcz0iY29uZmlybWF0aW9uLWJ0bnMiPicsICc8YnV0dG9uIGNsYXNzPSJidG4tZmxhdCBkYXRlcGlja2VyLWNhbmNlbCB3YXZlcy1lZmZlY3QiIHR5cGU9ImJ1dHRvbiI+PC9idXR0b24+JywgJzxidXR0b24gY2xhc3M9ImJ0bi1mbGF0IGRhdGVwaWNrZXItZG9uZSB3YXZlcy1lZmZlY3QiIHR5cGU9ImJ1dHRvbiI+PC9idXR0b24+JywgJzwvZGl2PicsICc8L2Rpdj4nLCAnPC9kaXY+JywgJzwvZGl2PicsICc8L2Rpdj4nXS5qb2luKCcnKTsNCg0KICBNLkRhdGVwaWNrZXIgPSBEYXRlcGlja2VyOw0KDQogIGlmIChNLmpRdWVyeUxvYWRlZCkgew0KICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoRGF0ZXBpY2tlciwgJ2RhdGVwaWNrZXInLCAnTV9EYXRlcGlja2VyJyk7DQogIH0NCn0pKGNhc2gpOw0KOyhmdW5jdGlvbiAoJCkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgdmFyIF9kZWZhdWx0cyA9IHsNCiAgICBkaWFsUmFkaXVzOiAxMzUsDQogICAgb3V0ZXJSYWRpdXM6IDEwNSwNCiAgICBpbm5lclJhZGl1czogNzAsDQogICAgdGlja1JhZGl1czogMjAsDQogICAgZHVyYXRpb246IDM1MCwNCiAgICBjb250YWluZXI6IG51bGwsDQogICAgZGVmYXVsdFRpbWU6ICdub3cnLCAvLyBkZWZhdWx0IHRpbWUsICdub3cnIG9yICcxMzoxNCcgZS5nLg0KICAgIGZyb21Ob3c6IDAsIC8vIE1pbGxpc2Vjb25kIG9mZnNldCBmcm9tIHRoZSBkZWZhdWx0VGltZQ0KICAgIHNob3dDbGVhckJ0bjogZmFsc2UsDQoNCiAgICAvLyBpbnRlcm5hdGlvbmFsaXphdGlvbg0KICAgIGkxOG46IHsNCiAgICAgIGNhbmNlbDogJ0NhbmNlbCcsDQogICAgICBjbGVhcjogJ0NsZWFyJywNCiAgICAgIGRvbmU6ICdPaycNCiAgICB9LA0KDQogICAgYXV0b0Nsb3NlOiBmYWxzZSwgLy8gYXV0byBjbG9zZSB3aGVuIG1pbnV0ZSBpcyBzZWxlY3RlZA0KICAgIHR3ZWx2ZUhvdXI6IHRydWUsIC8vIGNoYW5nZSB0byAxMiBob3VyIEFNL1BNIGNsb2NrIGZyb20gMjQgaG91cg0KICAgIHZpYnJhdGU6IHRydWUsIC8vIHZpYnJhdGUgdGhlIGRldmljZSB3aGVuIGRyYWdnaW5nIGNsb2NrIGhhbmQNCg0KICAgIC8vIENhbGxiYWNrcw0KICAgIG9uT3BlblN0YXJ0OiBudWxsLA0KICAgIG9uT3BlbkVuZDogbnVsbCwNCiAgICBvbkNsb3NlU3RhcnQ6IG51bGwsDQogICAgb25DbG9zZUVuZDogbnVsbCwNCiAgICBvblNlbGVjdDogbnVsbA0KICB9Ow0KDQogIC8qKg0KICAgKiBAY2xhc3MNCiAgICoNCiAgICovDQoNCiAgdmFyIFRpbWVwaWNrZXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDE2KSB7DQogICAgX2luaGVyaXRzKFRpbWVwaWNrZXIsIF9Db21wb25lbnQxNik7DQoNCiAgICBmdW5jdGlvbiBUaW1lcGlja2VyKGVsLCBvcHRpb25zKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGltZXBpY2tlcik7DQoNCiAgICAgIHZhciBfdGhpczU2ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFRpbWVwaWNrZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUaW1lcGlja2VyKSkuY2FsbCh0aGlzLCBUaW1lcGlja2VyLCBlbCwgb3B0aW9ucykpOw0KDQogICAgICBfdGhpczU2LmVsLk1fVGltZXBpY2tlciA9IF90aGlzNTY7DQoNCiAgICAgIF90aGlzNTYub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBUaW1lcGlja2VyLmRlZmF1bHRzLCBvcHRpb25zKTsNCg0KICAgICAgX3RoaXM1Ni5pZCA9IE0uZ3VpZCgpOw0KICAgICAgX3RoaXM1Ni5faW5zZXJ0SFRNTEludG9ET00oKTsNCiAgICAgIF90aGlzNTYuX3NldHVwTW9kYWwoKTsNCiAgICAgIF90aGlzNTYuX3NldHVwVmFyaWFibGVzKCk7DQogICAgICBfdGhpczU2Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTsNCg0KICAgICAgX3RoaXM1Ni5fY2xvY2tTZXR1cCgpOw0KICAgICAgX3RoaXM1Ni5fcGlja2VyU2V0dXAoKTsNCiAgICAgIHJldHVybiBfdGhpczU2Ow0KICAgIH0NCg0KICAgIF9jcmVhdGVDbGFzcyhUaW1lcGlja2VyLCBbew0KICAgICAga2V5OiAiZGVzdHJveSIsDQoNCg0KICAgICAgLyoqDQogICAgICAgKiBUZWFyZG93biBjb21wb25lbnQNCiAgICAgICAqLw0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7DQogICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTsNCiAgICAgICAgdGhpcy5tb2RhbC5kZXN0cm95KCk7DQogICAgICAgICQodGhpcy5tb2RhbEVsKS5yZW1vdmUoKTsNCiAgICAgICAgdGhpcy5lbC5NX1RpbWVwaWNrZXIgPSB1bmRlZmluZWQ7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd24uYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRDbGljay5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLl9oYW5kbGVDbG9ja0NsaWNrU3RhcnRCb3VuZCA9IHRoaXMuX2hhbmRsZUNsb2NrQ2xpY2tTdGFydC5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrTW92ZUJvdW5kID0gdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja01vdmUuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0VuZEJvdW5kID0gdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0VuZC5iaW5kKHRoaXMpOw0KDQogICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQpOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCk7DQogICAgICAgIHRoaXMucGxhdGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlQ2xvY2tDbGlja1N0YXJ0Qm91bmQpOw0KICAgICAgICB0aGlzLnBsYXRlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9oYW5kbGVDbG9ja0NsaWNrU3RhcnRCb3VuZCk7DQoNCiAgICAgICAgJCh0aGlzLnNwYW5Ib3Vycykub24oJ2NsaWNrJywgdGhpcy5zaG93Vmlldy5iaW5kKHRoaXMsICdob3VycycpKTsNCiAgICAgICAgJCh0aGlzLnNwYW5NaW51dGVzKS5vbignY2xpY2snLCB0aGlzLnNob3dWaWV3LmJpbmQodGhpcywgJ21pbnV0ZXMnKSk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX3JlbW92ZUV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVJbnB1dENsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRDbGljaygpIHsNCiAgICAgICAgdGhpcy5vcGVuKCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUlucHV0S2V5ZG93biIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUlucHV0S2V5ZG93bihlKSB7DQogICAgICAgIGlmIChlLndoaWNoID09PSBNLmtleXMuRU5URVIpIHsNCiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgdGhpcy5vcGVuKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlQ2xvY2tDbGlja1N0YXJ0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2xvY2tDbGlja1N0YXJ0KGUpIHsNCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICB2YXIgY2xvY2tQbGF0ZUJSID0gdGhpcy5wbGF0ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICAgICAgdmFyIG9mZnNldCA9IHsgeDogY2xvY2tQbGF0ZUJSLmxlZnQsIHk6IGNsb2NrUGxhdGVCUi50b3AgfTsNCg0KICAgICAgICB0aGlzLngwID0gb2Zmc2V0LnggKyB0aGlzLm9wdGlvbnMuZGlhbFJhZGl1czsNCiAgICAgICAgdGhpcy55MCA9IG9mZnNldC55ICsgdGhpcy5vcHRpb25zLmRpYWxSYWRpdXM7DQogICAgICAgIHRoaXMubW92ZWQgPSBmYWxzZTsNCiAgICAgICAgdmFyIGNsaWNrUG9zID0gVGltZXBpY2tlci5fUG9zKGUpOw0KICAgICAgICB0aGlzLmR4ID0gY2xpY2tQb3MueCAtIHRoaXMueDA7DQogICAgICAgIHRoaXMuZHkgPSBjbGlja1Bvcy55IC0gdGhpcy55MDsNCg0KICAgICAgICAvLyBTZXQgY2xvY2sgaGFuZHMNCiAgICAgICAgdGhpcy5zZXRIYW5kKHRoaXMuZHgsIHRoaXMuZHksIGZhbHNlKTsNCg0KICAgICAgICAvLyBNb3VzZW1vdmUgb24gZG9jdW1lbnQNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja01vdmVCb3VuZCk7DQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlQm91bmQpOw0KDQogICAgICAgIC8vIE1vdXNldXAgb24gZG9jdW1lbnQNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tFbmRCb3VuZCk7DQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0VuZEJvdW5kKTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlRG9jdW1lbnRDbGlja01vdmUiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVEb2N1bWVudENsaWNrTW92ZShlKSB7DQogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgdmFyIGNsaWNrUG9zID0gVGltZXBpY2tlci5fUG9zKGUpOw0KICAgICAgICB2YXIgeCA9IGNsaWNrUG9zLnggLSB0aGlzLngwOw0KICAgICAgICB2YXIgeSA9IGNsaWNrUG9zLnkgLSB0aGlzLnkwOw0KICAgICAgICB0aGlzLm1vdmVkID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZXRIYW5kKHgsIHksIGZhbHNlLCB0cnVlKTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlRG9jdW1lbnRDbGlja0VuZCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURvY3VtZW50Q2xpY2tFbmQoZSkgew0KICAgICAgICB2YXIgX3RoaXM1NyA9IHRoaXM7DQoNCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0VuZEJvdW5kKTsNCiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrRW5kQm91bmQpOw0KICAgICAgICB2YXIgY2xpY2tQb3MgPSBUaW1lcGlja2VyLl9Qb3MoZSk7DQogICAgICAgIHZhciB4ID0gY2xpY2tQb3MueCAtIHRoaXMueDA7DQogICAgICAgIHZhciB5ID0gY2xpY2tQb3MueSAtIHRoaXMueTA7DQogICAgICAgIGlmICh0aGlzLm1vdmVkICYmIHggPT09IHRoaXMuZHggJiYgeSA9PT0gdGhpcy5keSkgew0KICAgICAgICAgIHRoaXMuc2V0SGFuZCh4LCB5KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICh0aGlzLmN1cnJlbnRWaWV3ID09PSAnaG91cnMnKSB7DQogICAgICAgICAgdGhpcy5zaG93VmlldygnbWludXRlcycsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAvIDIpOw0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5hdXRvQ2xvc2UpIHsNCiAgICAgICAgICAkKHRoaXMubWludXRlc1ZpZXcpLmFkZENsYXNzKCd0aW1lcGlja2VyLWRpYWwtb3V0Jyk7DQogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBfdGhpczU3LmRvbmUoKTsNCiAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gLyAyKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uU2VsZWN0ID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgdGhpcy5vcHRpb25zLm9uU2VsZWN0LmNhbGwodGhpcywgdGhpcy5ob3VycywgdGhpcy5taW51dGVzKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFVuYmluZCBtb3VzZW1vdmUgZXZlbnQNCiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja01vdmVCb3VuZCk7DQogICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlQm91bmQpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9pbnNlcnRIVE1MSW50b0RPTSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2luc2VydEhUTUxJbnRvRE9NKCkgew0KICAgICAgICB0aGlzLiRtb2RhbEVsID0gJChUaW1lcGlja2VyLl90ZW1wbGF0ZSk7DQogICAgICAgIHRoaXMubW9kYWxFbCA9IHRoaXMuJG1vZGFsRWxbMF07DQogICAgICAgIHRoaXMubW9kYWxFbC5pZCA9ICdtb2RhbC0nICsgdGhpcy5pZDsNCg0KICAgICAgICAvLyBBcHBlbmQgcG9wb3ZlciB0byBpbnB1dCBieSBkZWZhdWx0DQogICAgICAgIHZhciBjb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmNvbnRhaW5lcik7DQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29udGFpbmVyICYmICEhY29udGFpbmVyRWwpIHsNCiAgICAgICAgICB0aGlzLiRtb2RhbEVsLmFwcGVuZFRvKGNvbnRhaW5lckVsKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtb2RhbEVsLmluc2VydEJlZm9yZSh0aGlzLmVsKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cE1vZGFsIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBNb2RhbCgpIHsNCiAgICAgICAgdmFyIF90aGlzNTggPSB0aGlzOw0KDQogICAgICAgIHRoaXMubW9kYWwgPSBNLk1vZGFsLmluaXQodGhpcy5tb2RhbEVsLCB7DQogICAgICAgICAgb25PcGVuU3RhcnQ6IHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydCwNCiAgICAgICAgICBvbk9wZW5FbmQ6IHRoaXMub3B0aW9ucy5vbk9wZW5FbmQsDQogICAgICAgICAgb25DbG9zZVN0YXJ0OiB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0LA0KICAgICAgICAgIG9uQ2xvc2VFbmQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXM1OC5vcHRpb25zLm9uQ2xvc2VFbmQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgX3RoaXM1OC5vcHRpb25zLm9uQ2xvc2VFbmQuY2FsbChfdGhpczU4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF90aGlzNTguaXNPcGVuID0gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBWYXJpYWJsZXMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cFZhcmlhYmxlcygpIHsNCiAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9ICdob3Vycyc7DQogICAgICAgIHRoaXMudmlicmF0ZSA9IG5hdmlnYXRvci52aWJyYXRlID8gJ3ZpYnJhdGUnIDogbmF2aWdhdG9yLndlYmtpdFZpYnJhdGUgPyAnd2Via2l0VmlicmF0ZScgOiBudWxsOw0KDQogICAgICAgIHRoaXMuX2NhbnZhcyA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcudGltZXBpY2tlci1jYW52YXMnKTsNCiAgICAgICAgdGhpcy5wbGF0ZSA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcudGltZXBpY2tlci1wbGF0ZScpOw0KDQogICAgICAgIHRoaXMuaG91cnNWaWV3ID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy50aW1lcGlja2VyLWhvdXJzJyk7DQogICAgICAgIHRoaXMubWludXRlc1ZpZXcgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItbWludXRlcycpOw0KICAgICAgICB0aGlzLnNwYW5Ib3VycyA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcudGltZXBpY2tlci1zcGFuLWhvdXJzJyk7DQogICAgICAgIHRoaXMuc3Bhbk1pbnV0ZXMgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItc3Bhbi1taW51dGVzJyk7DQogICAgICAgIHRoaXMuc3BhbkFtUG0gPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItc3Bhbi1hbS1wbScpOw0KICAgICAgICB0aGlzLmZvb3RlciA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcudGltZXBpY2tlci1mb290ZXInKTsNCiAgICAgICAgdGhpcy5hbU9yUG0gPSAnUE0nOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9waWNrZXJTZXR1cCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3BpY2tlclNldHVwKCkgew0KICAgICAgICB2YXIgJGNsZWFyQnRuID0gJCgiPGJ1dHRvbiBjbGFzcz1cImJ0bi1mbGF0IHRpbWVwaWNrZXItY2xlYXIgd2F2ZXMtZWZmZWN0XCIgc3R5bGU9XCJ2aXNpYmlsaXR5OiBoaWRkZW47XCIgdHlwZT1cImJ1dHRvblwiIHRhYmluZGV4PVwiIiArICh0aGlzLm9wdGlvbnMudHdlbHZlSG91ciA/ICczJyA6ICcxJykgKyAiXCI+IiArIHRoaXMub3B0aW9ucy5pMThuLmNsZWFyICsgIjwvYnV0dG9uPiIpLmFwcGVuZFRvKHRoaXMuZm9vdGVyKS5vbignY2xpY2snLCB0aGlzLmNsZWFyLmJpbmQodGhpcykpOw0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNob3dDbGVhckJ0bikgew0KICAgICAgICAgICRjbGVhckJ0bi5jc3MoeyB2aXNpYmlsaXR5OiAnJyB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBjb25maXJtYXRpb25CdG5zQ29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz0iY29uZmlybWF0aW9uLWJ0bnMiPjwvZGl2PicpOw0KICAgICAgICAkKCc8YnV0dG9uIGNsYXNzPSJidG4tZmxhdCB0aW1lcGlja2VyLWNsb3NlIHdhdmVzLWVmZmVjdCIgdHlwZT0iYnV0dG9uIiB0YWJpbmRleD0iJyArICh0aGlzLm9wdGlvbnMudHdlbHZlSG91ciA/ICczJyA6ICcxJykgKyAnIj4nICsgdGhpcy5vcHRpb25zLmkxOG4uY2FuY2VsICsgJzwvYnV0dG9uPicpLmFwcGVuZFRvKGNvbmZpcm1hdGlvbkJ0bnNDb250YWluZXIpLm9uKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7DQogICAgICAgICQoJzxidXR0b24gY2xhc3M9ImJ0bi1mbGF0IHRpbWVwaWNrZXItY2xvc2Ugd2F2ZXMtZWZmZWN0IiB0eXBlPSJidXR0b24iIHRhYmluZGV4PSInICsgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyID8gJzMnIDogJzEnKSArICciPicgKyB0aGlzLm9wdGlvbnMuaTE4bi5kb25lICsgJzwvYnV0dG9uPicpLmFwcGVuZFRvKGNvbmZpcm1hdGlvbkJ0bnNDb250YWluZXIpLm9uKCdjbGljaycsIHRoaXMuZG9uZS5iaW5kKHRoaXMpKTsNCiAgICAgICAgY29uZmlybWF0aW9uQnRuc0NvbnRhaW5lci5hcHBlbmRUbyh0aGlzLmZvb3Rlcik7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2Nsb2NrU2V0dXAiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jbG9ja1NldHVwKCkgew0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHsNCiAgICAgICAgICB0aGlzLiRhbUJ0biA9ICQoJzxkaXYgY2xhc3M9ImFtLWJ0biI+QU08L2Rpdj4nKTsNCiAgICAgICAgICB0aGlzLiRwbUJ0biA9ICQoJzxkaXYgY2xhc3M9InBtLWJ0biI+UE08L2Rpdj4nKTsNCiAgICAgICAgICB0aGlzLiRhbUJ0bi5vbignY2xpY2snLCB0aGlzLl9oYW5kbGVBbVBtQ2xpY2suYmluZCh0aGlzKSkuYXBwZW5kVG8odGhpcy5zcGFuQW1QbSk7DQogICAgICAgICAgdGhpcy4kcG1CdG4ub24oJ2NsaWNrJywgdGhpcy5faGFuZGxlQW1QbUNsaWNrLmJpbmQodGhpcykpLmFwcGVuZFRvKHRoaXMuc3BhbkFtUG0pOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5fYnVpbGRIb3Vyc1ZpZXcoKTsNCiAgICAgICAgdGhpcy5fYnVpbGRNaW51dGVzVmlldygpOw0KICAgICAgICB0aGlzLl9idWlsZFNWR0Nsb2NrKCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2J1aWxkU1ZHQ2xvY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9idWlsZFNWR0Nsb2NrKCkgew0KICAgICAgICAvLyBEcmF3IGNsb2NrIGhhbmRzIGFuZCBvdGhlcnMNCiAgICAgICAgdmFyIGRpYWxSYWRpdXMgPSB0aGlzLm9wdGlvbnMuZGlhbFJhZGl1czsNCiAgICAgICAgdmFyIHRpY2tSYWRpdXMgPSB0aGlzLm9wdGlvbnMudGlja1JhZGl1czsNCiAgICAgICAgdmFyIGRpYW1ldGVyID0gZGlhbFJhZGl1cyAqIDI7DQoNCiAgICAgICAgdmFyIHN2ZyA9IFRpbWVwaWNrZXIuX2NyZWF0ZVNWR0VsKCdzdmcnKTsNCiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndGltZXBpY2tlci1zdmcnKTsNCiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBkaWFtZXRlcik7DQogICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGRpYW1ldGVyKTsNCiAgICAgICAgdmFyIGcgPSBUaW1lcGlja2VyLl9jcmVhdGVTVkdFbCgnZycpOw0KICAgICAgICBnLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgZGlhbFJhZGl1cyArICcsJyArIGRpYWxSYWRpdXMgKyAnKScpOw0KICAgICAgICB2YXIgYmVhcmluZyA9IFRpbWVwaWNrZXIuX2NyZWF0ZVNWR0VsKCdjaXJjbGUnKTsNCiAgICAgICAgYmVhcmluZy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3RpbWVwaWNrZXItY2FudmFzLWJlYXJpbmcnKTsNCiAgICAgICAgYmVhcmluZy5zZXRBdHRyaWJ1dGUoJ2N4JywgMCk7DQogICAgICAgIGJlYXJpbmcuc2V0QXR0cmlidXRlKCdjeScsIDApOw0KICAgICAgICBiZWFyaW5nLnNldEF0dHJpYnV0ZSgncicsIDQpOw0KICAgICAgICB2YXIgaGFuZCA9IFRpbWVwaWNrZXIuX2NyZWF0ZVNWR0VsKCdsaW5lJyk7DQogICAgICAgIGhhbmQuc2V0QXR0cmlidXRlKCd4MScsIDApOw0KICAgICAgICBoYW5kLnNldEF0dHJpYnV0ZSgneTEnLCAwKTsNCiAgICAgICAgdmFyIGJnID0gVGltZXBpY2tlci5fY3JlYXRlU1ZHRWwoJ2NpcmNsZScpOw0KICAgICAgICBiZy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3RpbWVwaWNrZXItY2FudmFzLWJnJyk7DQogICAgICAgIGJnLnNldEF0dHJpYnV0ZSgncicsIHRpY2tSYWRpdXMpOw0KICAgICAgICBnLmFwcGVuZENoaWxkKGhhbmQpOw0KICAgICAgICBnLmFwcGVuZENoaWxkKGJnKTsNCiAgICAgICAgZy5hcHBlbmRDaGlsZChiZWFyaW5nKTsNCiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGcpOw0KICAgICAgICB0aGlzLl9jYW52YXMuYXBwZW5kQ2hpbGQoc3ZnKTsNCg0KICAgICAgICB0aGlzLmhhbmQgPSBoYW5kOw0KICAgICAgICB0aGlzLmJnID0gYmc7DQogICAgICAgIHRoaXMuYmVhcmluZyA9IGJlYXJpbmc7DQogICAgICAgIHRoaXMuZyA9IGc7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2J1aWxkSG91cnNWaWV3IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYnVpbGRIb3Vyc1ZpZXcoKSB7DQogICAgICAgIHZhciAkdGljayA9ICQoJzxkaXYgY2xhc3M9InRpbWVwaWNrZXItdGljayI+PC9kaXY+Jyk7DQogICAgICAgIC8vIEhvdXJzIHZpZXcNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyKSB7DQogICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCAxMzsgaSArPSAxKSB7DQogICAgICAgICAgICB2YXIgdGljayA9ICR0aWNrLmNsb25lKCk7DQogICAgICAgICAgICB2YXIgcmFkaWFuID0gaSAvIDYgKiBNYXRoLlBJOw0KICAgICAgICAgICAgdmFyIHJhZGl1cyA9IHRoaXMub3B0aW9ucy5vdXRlclJhZGl1czsNCiAgICAgICAgICAgIHRpY2suY3NzKHsNCiAgICAgICAgICAgICAgbGVmdDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgKyBNYXRoLnNpbihyYWRpYW4pICogcmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMgKyAncHgnLA0KICAgICAgICAgICAgICB0b3A6IHRoaXMub3B0aW9ucy5kaWFsUmFkaXVzIC0gTWF0aC5jb3MocmFkaWFuKSAqIHJhZGl1cyAtIHRoaXMub3B0aW9ucy50aWNrUmFkaXVzICsgJ3B4Jw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aWNrLmh0bWwoaSA9PT0gMCA/ICcwMCcgOiBpKTsNCiAgICAgICAgICAgIHRoaXMuaG91cnNWaWV3LmFwcGVuZENoaWxkKHRpY2tbMF0pOw0KICAgICAgICAgICAgLy8gdGljay5vbihtb3VzZWRvd25FdmVudCwgbW91c2Vkb3duKTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgMjQ7IF9pMiArPSAxKSB7DQogICAgICAgICAgICB2YXIgX3RpY2sgPSAkdGljay5jbG9uZSgpOw0KICAgICAgICAgICAgdmFyIF9yYWRpYW4gPSBfaTIgLyA2ICogTWF0aC5QSTsNCiAgICAgICAgICAgIHZhciBpbm5lciA9IF9pMiA+IDAgJiYgX2kyIDwgMTM7DQogICAgICAgICAgICB2YXIgX3JhZGl1cyA9IGlubmVyID8gdGhpcy5vcHRpb25zLmlubmVyUmFkaXVzIDogdGhpcy5vcHRpb25zLm91dGVyUmFkaXVzOw0KICAgICAgICAgICAgX3RpY2suY3NzKHsNCiAgICAgICAgICAgICAgbGVmdDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgKyBNYXRoLnNpbihfcmFkaWFuKSAqIF9yYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyArICdweCcsDQogICAgICAgICAgICAgIHRvcDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgLSBNYXRoLmNvcyhfcmFkaWFuKSAqIF9yYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyArICdweCcNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgX3RpY2suaHRtbChfaTIgPT09IDAgPyAnMDAnIDogX2kyKTsNCiAgICAgICAgICAgIHRoaXMuaG91cnNWaWV3LmFwcGVuZENoaWxkKF90aWNrWzBdKTsNCiAgICAgICAgICAgIC8vIHRpY2sub24obW91c2Vkb3duRXZlbnQsIG1vdXNlZG93bik7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2J1aWxkTWludXRlc1ZpZXciLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9idWlsZE1pbnV0ZXNWaWV3KCkgew0KICAgICAgICB2YXIgJHRpY2sgPSAkKCc8ZGl2IGNsYXNzPSJ0aW1lcGlja2VyLXRpY2siPjwvZGl2PicpOw0KICAgICAgICAvLyBNaW51dGVzIHZpZXcNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA2MDsgaSArPSA1KSB7DQogICAgICAgICAgdmFyIHRpY2sgPSAkdGljay5jbG9uZSgpOw0KICAgICAgICAgIHZhciByYWRpYW4gPSBpIC8gMzAgKiBNYXRoLlBJOw0KICAgICAgICAgIHRpY2suY3NzKHsNCiAgICAgICAgICAgIGxlZnQ6IHRoaXMub3B0aW9ucy5kaWFsUmFkaXVzICsgTWF0aC5zaW4ocmFkaWFuKSAqIHRoaXMub3B0aW9ucy5vdXRlclJhZGl1cyAtIHRoaXMub3B0aW9ucy50aWNrUmFkaXVzICsgJ3B4JywNCiAgICAgICAgICAgIHRvcDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgLSBNYXRoLmNvcyhyYWRpYW4pICogdGhpcy5vcHRpb25zLm91dGVyUmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMgKyAncHgnDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGljay5odG1sKFRpbWVwaWNrZXIuX2FkZExlYWRpbmdaZXJvKGkpKTsNCiAgICAgICAgICB0aGlzLm1pbnV0ZXNWaWV3LmFwcGVuZENoaWxkKHRpY2tbMF0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUFtUG1DbGljayIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUFtUG1DbGljayhlKSB7DQogICAgICAgIHZhciAkYnRuQ2xpY2tlZCA9ICQoZS50YXJnZXQpOw0KICAgICAgICB0aGlzLmFtT3JQbSA9ICRidG5DbGlja2VkLmhhc0NsYXNzKCdhbS1idG4nKSA/ICdBTScgOiAnUE0nOw0KICAgICAgICB0aGlzLl91cGRhdGVBbVBtVmlldygpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl91cGRhdGVBbVBtVmlldyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZUFtUG1WaWV3KCkgew0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHsNCiAgICAgICAgICB0aGlzLiRhbUJ0bi50b2dnbGVDbGFzcygndGV4dC1wcmltYXJ5JywgdGhpcy5hbU9yUG0gPT09ICdBTScpOw0KICAgICAgICAgIHRoaXMuJHBtQnRuLnRvZ2dsZUNsYXNzKCd0ZXh0LXByaW1hcnknLCB0aGlzLmFtT3JQbSA9PT0gJ1BNJyk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJfdXBkYXRlVGltZUZyb21JbnB1dCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZVRpbWVGcm9tSW5wdXQoKSB7DQogICAgICAgIC8vIEdldCB0aGUgdGltZQ0KICAgICAgICB2YXIgdmFsdWUgPSAoKHRoaXMuZWwudmFsdWUgfHwgdGhpcy5vcHRpb25zLmRlZmF1bHRUaW1lIHx8ICcnKSArICcnKS5zcGxpdCgnOicpOw0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIgJiYgISh0eXBlb2YgdmFsdWVbMV0gPT09ICd1bmRlZmluZWQnKSkgew0KICAgICAgICAgIGlmICh2YWx1ZVsxXS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoJ0FNJykgPiAwKSB7DQogICAgICAgICAgICB0aGlzLmFtT3JQbSA9ICdBTSc7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuYW1PclBtID0gJ1BNJzsNCiAgICAgICAgICB9DQogICAgICAgICAgdmFsdWVbMV0gPSB2YWx1ZVsxXS5yZXBsYWNlKCdBTScsICcnKS5yZXBsYWNlKCdQTScsICcnKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodmFsdWVbMF0gPT09ICdub3cnKSB7DQogICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCtuZXcgRGF0ZSgpICsgdGhpcy5vcHRpb25zLmZyb21Ob3cpOw0KICAgICAgICAgIHZhbHVlID0gW25vdy5nZXRIb3VycygpLCBub3cuZ2V0TWludXRlcygpXTsNCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHsNCiAgICAgICAgICAgIHRoaXMuYW1PclBtID0gdmFsdWVbMF0gPj0gMTIgJiYgdmFsdWVbMF0gPCAyNCA/ICdQTScgOiAnQU0nOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmhvdXJzID0gK3ZhbHVlWzBdIHx8IDA7DQogICAgICAgIHRoaXMubWludXRlcyA9ICt2YWx1ZVsxXSB8fCAwOw0KICAgICAgICB0aGlzLnNwYW5Ib3Vycy5pbm5lckhUTUwgPSB0aGlzLmhvdXJzOw0KICAgICAgICB0aGlzLnNwYW5NaW51dGVzLmlubmVySFRNTCA9IFRpbWVwaWNrZXIuX2FkZExlYWRpbmdaZXJvKHRoaXMubWludXRlcyk7DQoNCiAgICAgICAgdGhpcy5fdXBkYXRlQW1QbVZpZXcoKTsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJzaG93VmlldyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd1ZpZXcodmlldywgZGVsYXkpIHsNCiAgICAgICAgaWYgKHZpZXcgPT09ICdtaW51dGVzJyAmJiAkKHRoaXMuaG91cnNWaWV3KS5jc3MoJ3Zpc2liaWxpdHknKSA9PT0gJ3Zpc2libGUnKSB7DQogICAgICAgICAgLy8gcmFpc2VDYWxsYmFjayh0aGlzLm9wdGlvbnMuYmVmb3JlSG91clNlbGVjdCk7DQogICAgICAgIH0NCiAgICAgICAgdmFyIGlzSG91cnMgPSB2aWV3ID09PSAnaG91cnMnLA0KICAgICAgICAgICAgbmV4dFZpZXcgPSBpc0hvdXJzID8gdGhpcy5ob3Vyc1ZpZXcgOiB0aGlzLm1pbnV0ZXNWaWV3LA0KICAgICAgICAgICAgaGlkZVZpZXcgPSBpc0hvdXJzID8gdGhpcy5taW51dGVzVmlldyA6IHRoaXMuaG91cnNWaWV3Ow0KICAgICAgICB0aGlzLmN1cnJlbnRWaWV3ID0gdmlldzsNCg0KICAgICAgICAkKHRoaXMuc3BhbkhvdXJzKS50b2dnbGVDbGFzcygndGV4dC1wcmltYXJ5JywgaXNIb3Vycyk7DQogICAgICAgICQodGhpcy5zcGFuTWludXRlcykudG9nZ2xlQ2xhc3MoJ3RleHQtcHJpbWFyeScsICFpc0hvdXJzKTsNCg0KICAgICAgICAvLyBUcmFuc2l0aW9uIHZpZXcNCiAgICAgICAgaGlkZVZpZXcuY2xhc3NMaXN0LmFkZCgndGltZXBpY2tlci1kaWFsLW91dCcpOw0KICAgICAgICAkKG5leHRWaWV3KS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpLnJlbW92ZUNsYXNzKCd0aW1lcGlja2VyLWRpYWwtb3V0Jyk7DQoNCiAgICAgICAgLy8gUmVzZXQgY2xvY2sgaGFuZA0KICAgICAgICB0aGlzLnJlc2V0Q2xvY2soZGVsYXkpOw0KDQogICAgICAgIC8vIEFmdGVyIHRyYW5zaXRpb25zIGVuZGVkDQogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRvZ2dsZVZpZXdUaW1lcik7DQogICAgICAgIHRoaXMudG9nZ2xlVmlld1RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgJChoaWRlVmlldykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpOw0KICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24pOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogInJlc2V0Q2xvY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0Q2xvY2soZGVsYXkpIHsNCiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmN1cnJlbnRWaWV3LA0KICAgICAgICAgICAgdmFsdWUgPSB0aGlzW3ZpZXddLA0KICAgICAgICAgICAgaXNIb3VycyA9IHZpZXcgPT09ICdob3VycycsDQogICAgICAgICAgICB1bml0ID0gTWF0aC5QSSAvIChpc0hvdXJzID8gNiA6IDMwKSwNCiAgICAgICAgICAgIHJhZGlhbiA9IHZhbHVlICogdW5pdCwNCiAgICAgICAgICAgIHJhZGl1cyA9IGlzSG91cnMgJiYgdmFsdWUgPiAwICYmIHZhbHVlIDwgMTMgPyB0aGlzLm9wdGlvbnMuaW5uZXJSYWRpdXMgOiB0aGlzLm9wdGlvbnMub3V0ZXJSYWRpdXMsDQogICAgICAgICAgICB4ID0gTWF0aC5zaW4ocmFkaWFuKSAqIHJhZGl1cywNCiAgICAgICAgICAgIHkgPSAtTWF0aC5jb3MocmFkaWFuKSAqIHJhZGl1cywNCiAgICAgICAgICAgIHNlbGYgPSB0aGlzOw0KDQogICAgICAgIGlmIChkZWxheSkgew0KICAgICAgICAgICQodGhpcy5jYW52YXMpLmFkZENsYXNzKCd0aW1lcGlja2VyLWNhbnZhcy1vdXQnKTsNCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICQoc2VsZi5jYW52YXMpLnJlbW92ZUNsYXNzKCd0aW1lcGlja2VyLWNhbnZhcy1vdXQnKTsNCiAgICAgICAgICAgIHNlbGYuc2V0SGFuZCh4LCB5KTsNCiAgICAgICAgICB9LCBkZWxheSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5zZXRIYW5kKHgsIHkpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAic2V0SGFuZCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SGFuZCh4LCB5LCByb3VuZEJ5NSkgew0KICAgICAgICB2YXIgX3RoaXM1OSA9IHRoaXM7DQoNCiAgICAgICAgdmFyIHJhZGlhbiA9IE1hdGguYXRhbjIoeCwgLXkpLA0KICAgICAgICAgICAgaXNIb3VycyA9IHRoaXMuY3VycmVudFZpZXcgPT09ICdob3VycycsDQogICAgICAgICAgICB1bml0ID0gTWF0aC5QSSAvIChpc0hvdXJzIHx8IHJvdW5kQnk1ID8gNiA6IDMwKSwNCiAgICAgICAgICAgIHogPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSksDQogICAgICAgICAgICBpbm5lciA9IGlzSG91cnMgJiYgeiA8ICh0aGlzLm9wdGlvbnMub3V0ZXJSYWRpdXMgKyB0aGlzLm9wdGlvbnMuaW5uZXJSYWRpdXMpIC8gMiwNCiAgICAgICAgICAgIHJhZGl1cyA9IGlubmVyID8gdGhpcy5vcHRpb25zLmlubmVyUmFkaXVzIDogdGhpcy5vcHRpb25zLm91dGVyUmFkaXVzOw0KDQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHdlbHZlSG91cikgew0KICAgICAgICAgIHJhZGl1cyA9IHRoaXMub3B0aW9ucy5vdXRlclJhZGl1czsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFJhZGlhbiBzaG91bGQgaW4gcmFuZ2UgWzAsIDJQSV0NCiAgICAgICAgaWYgKHJhZGlhbiA8IDApIHsNCiAgICAgICAgICByYWRpYW4gPSBNYXRoLlBJICogMiArIHJhZGlhbjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEdldCB0aGUgcm91bmQgdmFsdWUNCiAgICAgICAgdmFyIHZhbHVlID0gTWF0aC5yb3VuZChyYWRpYW4gLyB1bml0KTsNCg0KICAgICAgICAvLyBHZXQgdGhlIHJvdW5kIHJhZGlhbg0KICAgICAgICByYWRpYW4gPSB2YWx1ZSAqIHVuaXQ7DQoNCiAgICAgICAgLy8gQ29ycmVjdCB0aGUgaG91cnMgb3IgbWludXRlcw0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHsNCiAgICAgICAgICBpZiAoaXNIb3Vycykgew0KICAgICAgICAgICAgaWYgKHZhbHVlID09PSAwKSB2YWx1ZSA9IDEyOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAocm91bmRCeTUpIHZhbHVlICo9IDU7DQogICAgICAgICAgICBpZiAodmFsdWUgPT09IDYwKSB2YWx1ZSA9IDA7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChpc0hvdXJzKSB7DQogICAgICAgICAgICBpZiAodmFsdWUgPT09IDEyKSB7DQogICAgICAgICAgICAgIHZhbHVlID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhbHVlID0gaW5uZXIgPyB2YWx1ZSA9PT0gMCA/IDEyIDogdmFsdWUgOiB2YWx1ZSA9PT0gMCA/IDAgOiB2YWx1ZSArIDEyOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAocm91bmRCeTUpIHsNCiAgICAgICAgICAgICAgdmFsdWUgKj0gNTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gNjApIHsNCiAgICAgICAgICAgICAgdmFsdWUgPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIE9uY2UgaG91cnMgb3IgbWludXRlcyBjaGFuZ2VkLCB2aWJyYXRlIHRoZSBkZXZpY2UNCiAgICAgICAgaWYgKHRoaXNbdGhpcy5jdXJyZW50Vmlld10gIT09IHZhbHVlKSB7DQogICAgICAgICAgaWYgKHRoaXMudmlicmF0ZSAmJiB0aGlzLm9wdGlvbnMudmlicmF0ZSkgew0KICAgICAgICAgICAgLy8gRG8gbm90IHZpYnJhdGUgdG9vIGZyZXF1ZW50bHkNCiAgICAgICAgICAgIGlmICghdGhpcy52aWJyYXRlVGltZXIpIHsNCiAgICAgICAgICAgICAgbmF2aWdhdG9yW3RoaXMudmlicmF0ZV0oMTApOw0KICAgICAgICAgICAgICB0aGlzLnZpYnJhdGVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIF90aGlzNTkudmlicmF0ZVRpbWVyID0gbnVsbDsNCiAgICAgICAgICAgICAgfSwgMTAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzW3RoaXMuY3VycmVudFZpZXddID0gdmFsdWU7DQogICAgICAgIGlmIChpc0hvdXJzKSB7DQogICAgICAgICAgdGhpc1snc3BhbkhvdXJzJ10uaW5uZXJIVE1MID0gdmFsdWU7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpc1snc3Bhbk1pbnV0ZXMnXS5pbm5lckhUTUwgPSBUaW1lcGlja2VyLl9hZGRMZWFkaW5nWmVybyh2YWx1ZSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBTZXQgY2xvY2sgaGFuZCBhbmQgb3RoZXJzJyBwb3NpdGlvbg0KICAgICAgICB2YXIgY3gxID0gTWF0aC5zaW4ocmFkaWFuKSAqIChyYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyksDQogICAgICAgICAgICBjeTEgPSAtTWF0aC5jb3MocmFkaWFuKSAqIChyYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyksDQogICAgICAgICAgICBjeDIgPSBNYXRoLnNpbihyYWRpYW4pICogcmFkaXVzLA0KICAgICAgICAgICAgY3kyID0gLU1hdGguY29zKHJhZGlhbikgKiByYWRpdXM7DQogICAgICAgIHRoaXMuaGFuZC5zZXRBdHRyaWJ1dGUoJ3gyJywgY3gxKTsNCiAgICAgICAgdGhpcy5oYW5kLnNldEF0dHJpYnV0ZSgneTInLCBjeTEpOw0KICAgICAgICB0aGlzLmJnLnNldEF0dHJpYnV0ZSgnY3gnLCBjeDIpOw0KICAgICAgICB0aGlzLmJnLnNldEF0dHJpYnV0ZSgnY3knLCBjeTIpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIm9wZW4iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7DQogICAgICAgIGlmICh0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5fdXBkYXRlVGltZUZyb21JbnB1dCgpOw0KICAgICAgICB0aGlzLnNob3dWaWV3KCdob3VycycpOw0KDQogICAgICAgIHRoaXMubW9kYWwub3BlbigpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImNsb3NlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHsNCiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7DQogICAgICAgIHRoaXMubW9kYWwuY2xvc2UoKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBGaW5pc2ggdGltZXBpY2tlciBzZWxlY3Rpb24uDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImRvbmUiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRvbmUoZSwgY2xlYXJWYWx1ZSkgew0KICAgICAgICAvLyBTZXQgaW5wdXQgdmFsdWUNCiAgICAgICAgdmFyIGxhc3QgPSB0aGlzLmVsLnZhbHVlOw0KICAgICAgICB2YXIgdmFsdWUgPSBjbGVhclZhbHVlID8gJycgOiBUaW1lcGlja2VyLl9hZGRMZWFkaW5nWmVybyh0aGlzLmhvdXJzKSArICc6JyArIFRpbWVwaWNrZXIuX2FkZExlYWRpbmdaZXJvKHRoaXMubWludXRlcyk7DQogICAgICAgIHRoaXMudGltZSA9IHZhbHVlOw0KICAgICAgICBpZiAoIWNsZWFyVmFsdWUgJiYgdGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHsNCiAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgIiAiICsgdGhpcy5hbU9yUG07DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5lbC52YWx1ZSA9IHZhbHVlOw0KDQogICAgICAgIC8vIFRyaWdnZXIgY2hhbmdlIGV2ZW50DQogICAgICAgIGlmICh2YWx1ZSAhPT0gbGFzdCkgew0KICAgICAgICAgIHRoaXMuJGVsLnRyaWdnZXIoJ2NoYW5nZScpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgICB0aGlzLmVsLmZvY3VzKCk7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiY2xlYXIiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkgew0KICAgICAgICB0aGlzLmRvbmUobnVsbCwgdHJ1ZSk7DQogICAgICB9DQogICAgfV0sIFt7DQogICAgICBrZXk6ICJpbml0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX2dldChUaW1lcGlja2VyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGltZXBpY2tlciksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hZGRMZWFkaW5nWmVybyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZExlYWRpbmdaZXJvKG51bSkgew0KICAgICAgICByZXR1cm4gKG51bSA8IDEwID8gJzAnIDogJycpICsgbnVtOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogIl9jcmVhdGVTVkdFbCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZVNWR0VsKG5hbWUpIHsNCiAgICAgICAgdmFyIHN2Z05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJzsNCiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgbmFtZSk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQHR5cGVkZWYge09iamVjdH0gUG9pbnQNCiAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB4IFRoZSBYIENvb3JkaW5hdGUNCiAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB5IFRoZSBZIENvb3JkaW5hdGUNCiAgICAgICAqLw0KDQogICAgICAvKioNCiAgICAgICAqIEdldCB4IHBvc2l0aW9uIG9mIG1vdXNlIG9yIHRvdWNoIGV2ZW50DQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKiBAcmV0dXJuIHtQb2ludH0geCBhbmQgeSBsb2NhdGlvbg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfUG9zIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfUG9zKGUpIHsNCiAgICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoID49IDEpIHsNCiAgICAgICAgICByZXR1cm4geyB4OiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WCwgeTogZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFkgfTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBtb3VzZSBldmVudA0KICAgICAgICByZXR1cm4geyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9Ow0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEdldCBJbnN0YW5jZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRJbnN0YW5jZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHsNCiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7DQogICAgICAgIHJldHVybiBkb21FbGVtLk1fVGltZXBpY2tlcjsNCiAgICAgIH0NCiAgICB9LCB7DQogICAgICBrZXk6ICJkZWZhdWx0cyIsDQogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIF9kZWZhdWx0czsNCiAgICAgIH0NCiAgICB9XSk7DQoNCiAgICByZXR1cm4gVGltZXBpY2tlcjsNCiAgfShDb21wb25lbnQpOw0KDQogIFRpbWVwaWNrZXIuX3RlbXBsYXRlID0gWyc8ZGl2IGNsYXNzPSAibW9kYWwgdGltZXBpY2tlci1tb2RhbCI+JywgJzxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQgdGltZXBpY2tlci1jb250YWluZXIiPicsICc8ZGl2IGNsYXNzPSJ0aW1lcGlja2VyLWRpZ2l0YWwtZGlzcGxheSI+JywgJzxkaXYgY2xhc3M9InRpbWVwaWNrZXItdGV4dC1jb250YWluZXIiPicsICc8ZGl2IGNsYXNzPSJ0aW1lcGlja2VyLWRpc3BsYXktY29sdW1uIj4nLCAnPHNwYW4gY2xhc3M9InRpbWVwaWNrZXItc3Bhbi1ob3VycyB0ZXh0LXByaW1hcnkiPjwvc3Bhbj4nLCAnOicsICc8c3BhbiBjbGFzcz0idGltZXBpY2tlci1zcGFuLW1pbnV0ZXMiPjwvc3Bhbj4nLCAnPC9kaXY+JywgJzxkaXYgY2xhc3M9InRpbWVwaWNrZXItZGlzcGxheS1jb2x1bW4gdGltZXBpY2tlci1kaXNwbGF5LWFtLXBtIj4nLCAnPGRpdiBjbGFzcz0idGltZXBpY2tlci1zcGFuLWFtLXBtIj48L2Rpdj4nLCAnPC9kaXY+JywgJzwvZGl2PicsICc8L2Rpdj4nLCAnPGRpdiBjbGFzcz0idGltZXBpY2tlci1hbmFsb2ctZGlzcGxheSI+JywgJzxkaXYgY2xhc3M9InRpbWVwaWNrZXItcGxhdGUiPicsICc8ZGl2IGNsYXNzPSJ0aW1lcGlja2VyLWNhbnZhcyI+PC9kaXY+JywgJzxkaXYgY2xhc3M9InRpbWVwaWNrZXItZGlhbCB0aW1lcGlja2VyLWhvdXJzIj48L2Rpdj4nLCAnPGRpdiBjbGFzcz0idGltZXBpY2tlci1kaWFsIHRpbWVwaWNrZXItbWludXRlcyB0aW1lcGlja2VyLWRpYWwtb3V0Ij48L2Rpdj4nLCAnPC9kaXY+JywgJzxkaXYgY2xhc3M9InRpbWVwaWNrZXItZm9vdGVyIj48L2Rpdj4nLCAnPC9kaXY+JywgJzwvZGl2PicsICc8L2Rpdj4nXS5qb2luKCcnKTsNCg0KICBNLlRpbWVwaWNrZXIgPSBUaW1lcGlja2VyOw0KDQogIGlmIChNLmpRdWVyeUxvYWRlZCkgew0KICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoVGltZXBpY2tlciwgJ3RpbWVwaWNrZXInLCAnTV9UaW1lcGlja2VyJyk7DQogIH0NCn0pKGNhc2gpOw0KOyhmdW5jdGlvbiAoJCkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgdmFyIF9kZWZhdWx0cyA9IHt9Ow0KDQogIC8qKg0KICAgKiBAY2xhc3MNCiAgICoNCiAgICovDQoNCiAgdmFyIENoYXJhY3RlckNvdW50ZXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDE3KSB7DQogICAgX2luaGVyaXRzKENoYXJhY3RlckNvdW50ZXIsIF9Db21wb25lbnQxNyk7DQoNCiAgICAvKioNCiAgICAgKiBDb25zdHJ1Y3QgQ2hhcmFjdGVyQ291bnRlciBpbnN0YW5jZQ0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIENoYXJhY3RlckNvdW50ZXIoZWwsIG9wdGlvbnMpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDaGFyYWN0ZXJDb3VudGVyKTsNCg0KICAgICAgdmFyIF90aGlzNjAgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2hhcmFjdGVyQ291bnRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENoYXJhY3RlckNvdW50ZXIpKS5jYWxsKHRoaXMsIENoYXJhY3RlckNvdW50ZXIsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzNjAuZWwuTV9DaGFyYWN0ZXJDb3VudGVyID0gX3RoaXM2MDsNCg0KICAgICAgLyoqDQogICAgICAgKiBPcHRpb25zIGZvciB0aGUgY2hhcmFjdGVyIGNvdW50ZXINCiAgICAgICAqLw0KICAgICAgX3RoaXM2MC5vcHRpb25zID0gJC5leHRlbmQoe30sIENoYXJhY3RlckNvdW50ZXIuZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICBfdGhpczYwLmlzSW52YWxpZCA9IGZhbHNlOw0KICAgICAgX3RoaXM2MC5pc1ZhbGlkTGVuZ3RoID0gZmFsc2U7DQogICAgICBfdGhpczYwLl9zZXR1cENvdW50ZXIoKTsNCiAgICAgIF90aGlzNjAuX3NldHVwRXZlbnRIYW5kbGVycygpOw0KICAgICAgcmV0dXJuIF90aGlzNjA7DQogICAgfQ0KDQogICAgX2NyZWF0ZUNsYXNzKENoYXJhY3RlckNvdW50ZXIsIFt7DQogICAgICBrZXk6ICJkZXN0cm95IiwNCg0KDQogICAgICAvKioNCiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudA0KICAgICAgICovDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsNCiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpOw0KICAgICAgICB0aGlzLmVsLkNoYXJhY3RlckNvdW50ZXIgPSB1bmRlZmluZWQ7DQogICAgICAgIHRoaXMuX3JlbW92ZUNvdW50ZXIoKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLl9oYW5kbGVVcGRhdGVDb3VudGVyQm91bmQgPSB0aGlzLnVwZGF0ZUNvdW50ZXIuYmluZCh0aGlzKTsNCg0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlVXBkYXRlQ291bnRlckJvdW5kLCB0cnVlKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX2hhbmRsZVVwZGF0ZUNvdW50ZXJCb3VuZCwgdHJ1ZSk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZVVwZGF0ZUNvdW50ZXJCb3VuZCwgdHJ1ZSk7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLl9oYW5kbGVVcGRhdGVDb3VudGVyQm91bmQsIHRydWUpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFNldHVwIGNvdW50ZXIgZWxlbWVudA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBDb3VudGVyIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBDb3VudGVyKCkgew0KICAgICAgICB0aGlzLmNvdW50ZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsNCiAgICAgICAgJCh0aGlzLmNvdW50ZXJFbCkuYWRkQ2xhc3MoJ2NoYXJhY3Rlci1jb3VudGVyJykuY3NzKHsNCiAgICAgICAgICBmbG9hdDogJ3JpZ2h0JywNCiAgICAgICAgICAnZm9udC1zaXplJzogJzEycHgnLA0KICAgICAgICAgIGhlaWdodDogMQ0KICAgICAgICB9KTsNCg0KICAgICAgICB0aGlzLiRlbC5wYXJlbnQoKS5hcHBlbmQodGhpcy5jb3VudGVyRWwpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFJlbW92ZSBjb3VudGVyIGVsZW1lbnQNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3JlbW92ZUNvdW50ZXIiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVDb3VudGVyKCkgew0KICAgICAgICAkKHRoaXMuY291bnRlckVsKS5yZW1vdmUoKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBVcGRhdGUgY291bnRlcg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJ1cGRhdGVDb3VudGVyIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVDb3VudGVyKCkgew0KICAgICAgICB2YXIgbWF4TGVuZ3RoID0gK3RoaXMuJGVsLmF0dHIoJ2RhdGEtbGVuZ3RoJyksDQogICAgICAgICAgICBhY3R1YWxMZW5ndGggPSB0aGlzLmVsLnZhbHVlLmxlbmd0aDsNCiAgICAgICAgdGhpcy5pc1ZhbGlkTGVuZ3RoID0gYWN0dWFsTGVuZ3RoIDw9IG1heExlbmd0aDsNCiAgICAgICAgdmFyIGNvdW50ZXJTdHJpbmcgPSBhY3R1YWxMZW5ndGg7DQoNCiAgICAgICAgaWYgKG1heExlbmd0aCkgew0KICAgICAgICAgIGNvdW50ZXJTdHJpbmcgKz0gJy8nICsgbWF4TGVuZ3RoOw0KICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlSW5wdXQoKTsNCiAgICAgICAgfQ0KDQogICAgICAgICQodGhpcy5jb3VudGVyRWwpLmh0bWwoY291bnRlclN0cmluZyk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQWRkIHZhbGlkYXRpb24gY2xhc3Nlcw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfdmFsaWRhdGVJbnB1dCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3ZhbGlkYXRlSW5wdXQoKSB7DQogICAgICAgIGlmICh0aGlzLmlzVmFsaWRMZW5ndGggJiYgdGhpcy5pc0ludmFsaWQpIHsNCiAgICAgICAgICB0aGlzLmlzSW52YWxpZCA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7DQogICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNWYWxpZExlbmd0aCAmJiAhdGhpcy5pc0ludmFsaWQpIHsNCiAgICAgICAgICB0aGlzLmlzSW52YWxpZCA9IHRydWU7DQogICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ3ZhbGlkJyk7DQogICAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ2ludmFsaWQnKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiaW5pdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9nZXQoQ2hhcmFjdGVyQ291bnRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENoYXJhY3RlckNvdW50ZXIpLCAiaW5pdCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBHZXQgSW5zdGFuY2UNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiZ2V0SW5zdGFuY2UiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7DQogICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsOw0KICAgICAgICByZXR1cm4gZG9tRWxlbS5NX0NoYXJhY3RlckNvdW50ZXI7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiZGVmYXVsdHMiLA0KICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBfZGVmYXVsdHM7DQogICAgICB9DQogICAgfV0pOw0KDQogICAgcmV0dXJuIENoYXJhY3RlckNvdW50ZXI7DQogIH0oQ29tcG9uZW50KTsNCg0KICBNLkNoYXJhY3RlckNvdW50ZXIgPSBDaGFyYWN0ZXJDb3VudGVyOw0KDQogIGlmIChNLmpRdWVyeUxvYWRlZCkgew0KICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoQ2hhcmFjdGVyQ291bnRlciwgJ2NoYXJhY3RlckNvdW50ZXInLCAnTV9DaGFyYWN0ZXJDb3VudGVyJyk7DQogIH0NCn0pKGNhc2gpOw0KOyhmdW5jdGlvbiAoJCkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgdmFyIF9kZWZhdWx0cyA9IHsNCiAgICBkdXJhdGlvbjogMjAwLCAvLyBtcw0KICAgIGRpc3Q6IC0xMDAsIC8vIHpvb20gc2NhbGUgVE9ETzogbWFrZSB0aGlzIG1vcmUgaW50dWl0aXZlIGFzIGFuIG9wdGlvbg0KICAgIHNoaWZ0OiAwLCAvLyBzcGFjaW5nIGZvciBjZW50ZXIgaW1hZ2UNCiAgICBwYWRkaW5nOiAwLCAvLyBQYWRkaW5nIGJldHdlZW4gbm9uIGNlbnRlciBpdGVtcw0KICAgIG51bVZpc2libGU6IDUsIC8vIE51bWJlciBvZiB2aXNpYmxlIGl0ZW1zIGluIGNhcm91c2VsDQogICAgZnVsbFdpZHRoOiBmYWxzZSwgLy8gQ2hhbmdlIHRvIGZ1bGwgd2lkdGggc3R5bGVzDQogICAgaW5kaWNhdG9yczogZmFsc2UsIC8vIFRvZ2dsZSBpbmRpY2F0b3JzDQogICAgbm9XcmFwOiBmYWxzZSwgLy8gRG9uJ3Qgd3JhcCBhcm91bmQgYW5kIGN5Y2xlIHRocm91Z2ggaXRlbXMuDQogICAgb25DeWNsZVRvOiBudWxsIC8vIENhbGxiYWNrIGZvciB3aGVuIGEgbmV3IHNsaWRlIGlzIGN5Y2xlZCB0by4NCiAgfTsNCg0KICAvKioNCiAgICogQGNsYXNzDQogICAqDQogICAqLw0KDQogIHZhciBDYXJvdXNlbCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MTgpIHsNCiAgICBfaW5oZXJpdHMoQ2Fyb3VzZWwsIF9Db21wb25lbnQxOCk7DQoNCiAgICAvKioNCiAgICAgKiBDb25zdHJ1Y3QgQ2Fyb3VzZWwgaW5zdGFuY2UNCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsDQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBDYXJvdXNlbChlbCwgb3B0aW9ucykgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhcm91c2VsKTsNCg0KICAgICAgdmFyIF90aGlzNjEgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2Fyb3VzZWwuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDYXJvdXNlbCkpLmNhbGwodGhpcywgQ2Fyb3VzZWwsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzNjEuZWwuTV9DYXJvdXNlbCA9IF90aGlzNjE7DQoNCiAgICAgIC8qKg0KICAgICAgICogT3B0aW9ucyBmb3IgdGhlIGNhcm91c2VsDQogICAgICAgKiBAbWVtYmVyIENhcm91c2VsI29wdGlvbnMNCiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IGR1cmF0aW9uDQogICAgICAgKiBAcHJvcCB7TnVtYmVyfSBkaXN0DQogICAgICAgKiBAcHJvcCB7TnVtYmVyfSBzaGlmdA0KICAgICAgICogQHByb3Age051bWJlcn0gcGFkZGluZw0KICAgICAgICogQHByb3Age051bWJlcn0gbnVtVmlzaWJsZQ0KICAgICAgICogQHByb3Age0Jvb2xlYW59IGZ1bGxXaWR0aA0KICAgICAgICogQHByb3Age0Jvb2xlYW59IGluZGljYXRvcnMNCiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBub1dyYXANCiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DeWNsZVRvDQogICAgICAgKi8NCiAgICAgIF90aGlzNjEub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBDYXJvdXNlbC5kZWZhdWx0cywgb3B0aW9ucyk7DQoNCiAgICAgIC8vIFNldHVwDQogICAgICBfdGhpczYxLmhhc011bHRpcGxlU2xpZGVzID0gX3RoaXM2MS4kZWwuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5sZW5ndGggPiAxOw0KICAgICAgX3RoaXM2MS5zaG93SW5kaWNhdG9ycyA9IF90aGlzNjEub3B0aW9ucy5pbmRpY2F0b3JzICYmIF90aGlzNjEuaGFzTXVsdGlwbGVTbGlkZXM7DQogICAgICBfdGhpczYxLm5vV3JhcCA9IF90aGlzNjEub3B0aW9ucy5ub1dyYXAgfHwgIV90aGlzNjEuaGFzTXVsdGlwbGVTbGlkZXM7DQogICAgICBfdGhpczYxLnByZXNzZWQgPSBmYWxzZTsNCiAgICAgIF90aGlzNjEuZHJhZ2dlZCA9IGZhbHNlOw0KICAgICAgX3RoaXM2MS5vZmZzZXQgPSBfdGhpczYxLnRhcmdldCA9IDA7DQogICAgICBfdGhpczYxLmltYWdlcyA9IFtdOw0KICAgICAgX3RoaXM2MS5pdGVtV2lkdGggPSBfdGhpczYxLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLmZpcnN0KCkuaW5uZXJXaWR0aCgpOw0KICAgICAgX3RoaXM2MS5pdGVtSGVpZ2h0ID0gX3RoaXM2MS4kZWwuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5maXJzdCgpLmlubmVySGVpZ2h0KCk7DQogICAgICBfdGhpczYxLmRpbSA9IF90aGlzNjEuaXRlbVdpZHRoICogMiArIF90aGlzNjEub3B0aW9ucy5wYWRkaW5nIHx8IDE7IC8vIE1ha2Ugc3VyZSBkaW0gaXMgbm9uIHplcm8gZm9yIGRpdmlzaW9ucy4NCiAgICAgIF90aGlzNjEuX2F1dG9TY3JvbGxCb3VuZCA9IF90aGlzNjEuX2F1dG9TY3JvbGwuYmluZChfdGhpczYxKTsNCiAgICAgIF90aGlzNjEuX3RyYWNrQm91bmQgPSBfdGhpczYxLl90cmFjay5iaW5kKF90aGlzNjEpOw0KDQogICAgICAvLyBGdWxsIFdpZHRoIGNhcm91c2VsIHNldHVwDQogICAgICBpZiAoX3RoaXM2MS5vcHRpb25zLmZ1bGxXaWR0aCkgew0KICAgICAgICBfdGhpczYxLm9wdGlvbnMuZGlzdCA9IDA7DQogICAgICAgIF90aGlzNjEuX3NldENhcm91c2VsSGVpZ2h0KCk7DQoNCiAgICAgICAgLy8gT2Zmc2V0IGZpeGVkIGl0ZW1zIHdoZW4gaW5kaWNhdG9ycy4NCiAgICAgICAgaWYgKF90aGlzNjEuc2hvd0luZGljYXRvcnMpIHsNCiAgICAgICAgICBfdGhpczYxLiRlbC5maW5kKCcuY2Fyb3VzZWwtZml4ZWQtaXRlbScpLmFkZENsYXNzKCd3aXRoLWluZGljYXRvcnMnKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvLyBJdGVyYXRlIHRocm91Z2ggc2xpZGVzDQogICAgICBfdGhpczYxLiRpbmRpY2F0b3JzID0gJCgnPHVsIGNsYXNzPSJpbmRpY2F0b3JzIj48L3VsPicpOw0KICAgICAgX3RoaXM2MS4kZWwuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uIChlbCwgaSkgew0KICAgICAgICBfdGhpczYxLmltYWdlcy5wdXNoKGVsKTsNCiAgICAgICAgaWYgKF90aGlzNjEuc2hvd0luZGljYXRvcnMpIHsNCiAgICAgICAgICB2YXIgJGluZGljYXRvciA9ICQoJzxsaSBjbGFzcz0iaW5kaWNhdG9yLWl0ZW0iPjwvbGk+Jyk7DQoNCiAgICAgICAgICAvLyBBZGQgYWN0aXZlIHRvIGZpcnN0IGJ5IGRlZmF1bHQuDQogICAgICAgICAgaWYgKGkgPT09IDApIHsNCiAgICAgICAgICAgICRpbmRpY2F0b3JbMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgX3RoaXM2MS4kaW5kaWNhdG9ycy5hcHBlbmQoJGluZGljYXRvcik7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgaWYgKF90aGlzNjEuc2hvd0luZGljYXRvcnMpIHsNCiAgICAgICAgX3RoaXM2MS4kZWwuYXBwZW5kKF90aGlzNjEuJGluZGljYXRvcnMpOw0KICAgICAgfQ0KICAgICAgX3RoaXM2MS5jb3VudCA9IF90aGlzNjEuaW1hZ2VzLmxlbmd0aDsNCg0KICAgICAgLy8gQ2FwIG51bVZpc2libGUgYXQgY291bnQNCiAgICAgIF90aGlzNjEub3B0aW9ucy5udW1WaXNpYmxlID0gTWF0aC5taW4oX3RoaXM2MS5jb3VudCwgX3RoaXM2MS5vcHRpb25zLm51bVZpc2libGUpOw0KDQogICAgICAvLyBTZXR1cCBjcm9zcyBicm93c2VyIHN0cmluZw0KICAgICAgX3RoaXM2MS54Zm9ybSA9ICd0cmFuc2Zvcm0nOw0KICAgICAgWyd3ZWJraXQnLCAnTW96JywgJ08nLCAnbXMnXS5ldmVyeShmdW5jdGlvbiAocHJlZml4KSB7DQogICAgICAgIHZhciBlID0gcHJlZml4ICsgJ1RyYW5zZm9ybSc7DQogICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuYm9keS5zdHlsZVtlXSAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICBfdGhpczYxLnhmb3JtID0gZTsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9KTsNCg0KICAgICAgX3RoaXM2MS5fc2V0dXBFdmVudEhhbmRsZXJzKCk7DQogICAgICBfdGhpczYxLl9zY3JvbGwoX3RoaXM2MS5vZmZzZXQpOw0KICAgICAgcmV0dXJuIF90aGlzNjE7DQogICAgfQ0KDQogICAgX2NyZWF0ZUNsYXNzKENhcm91c2VsLCBbew0KICAgICAga2V5OiAiZGVzdHJveSIsDQoNCg0KICAgICAgLyoqDQogICAgICAgKiBUZWFyZG93biBjb21wb25lbnQNCiAgICAgICAqLw0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7DQogICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTsNCiAgICAgICAgdGhpcy5lbC5NX0Nhcm91c2VsID0gdW5kZWZpbmVkOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cEV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIHZhciBfdGhpczYyID0gdGhpczsNCg0KICAgICAgICB0aGlzLl9oYW5kbGVDYXJvdXNlbFRhcEJvdW5kID0gdGhpcy5faGFuZGxlQ2Fyb3VzZWxUYXAuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlQ2Fyb3VzZWxEcmFnQm91bmQgPSB0aGlzLl9oYW5kbGVDYXJvdXNlbERyYWcuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlQ2Fyb3VzZWxSZWxlYXNlQm91bmQgPSB0aGlzLl9oYW5kbGVDYXJvdXNlbFJlbGVhc2UuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlQ2Fyb3VzZWxDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlQ2Fyb3VzZWxDbGljay5iaW5kKHRoaXMpOw0KDQogICAgICAgIGlmICh0eXBlb2Ygd2luZG93Lm9udG91Y2hzdGFydCAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFRhcEJvdW5kKTsNCiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZUNhcm91c2VsRHJhZ0JvdW5kKTsNCiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxSZWxlYXNlQm91bmQpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFRhcEJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbERyYWdCb3VuZCk7DQogICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZUNhcm91c2VsUmVsZWFzZUJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxSZWxlYXNlQm91bmQpOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxDbGlja0JvdW5kKTsNCg0KICAgICAgICBpZiAodGhpcy5zaG93SW5kaWNhdG9ycyAmJiB0aGlzLiRpbmRpY2F0b3JzKSB7DQogICAgICAgICAgdGhpcy5faGFuZGxlSW5kaWNhdG9yQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUluZGljYXRvckNsaWNrLmJpbmQodGhpcyk7DQogICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5maW5kKCcuaW5kaWNhdG9yLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uIChlbCwgaSkgew0KICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGhpczYyLl9oYW5kbGVJbmRpY2F0b3JDbGlja0JvdW5kKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFJlc2l6ZQ0KICAgICAgICB2YXIgdGhyb3R0bGVkUmVzaXplID0gTS50aHJvdHRsZSh0aGlzLl9oYW5kbGVSZXNpemUsIDIwMCk7DQogICAgICAgIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kID0gdGhyb3R0bGVkUmVzaXplLmJpbmQodGhpcyk7DQoNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3JlbW92ZUV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB2YXIgX3RoaXM2MyA9IHRoaXM7DQoNCiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cub250b3VjaHN0YXJ0ICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZUNhcm91c2VsVGFwQm91bmQpOw0KICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxEcmFnQm91bmQpOw0KICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFJlbGVhc2VCb3VuZCk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFRhcEJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbERyYWdCb3VuZCk7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZUNhcm91c2VsUmVsZWFzZUJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxSZWxlYXNlQm91bmQpOw0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxDbGlja0JvdW5kKTsNCg0KICAgICAgICBpZiAodGhpcy5zaG93SW5kaWNhdG9ycyAmJiB0aGlzLiRpbmRpY2F0b3JzKSB7DQogICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5maW5kKCcuaW5kaWNhdG9yLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uIChlbCwgaSkgew0KICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGhpczYzLl9oYW5kbGVJbmRpY2F0b3JDbGlja0JvdW5kKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVUaHJvdHRsZWRSZXNpemVCb3VuZCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIENhcm91c2VsIFRhcA0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlQ2Fyb3VzZWxUYXAiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDYXJvdXNlbFRhcChlKSB7DQogICAgICAgIC8vIEZpeGVzIGZpcmVmb3ggZHJhZ2dhYmxlIGltYWdlIGJ1Zw0KICAgICAgICBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJyAmJiAkKGUudGFyZ2V0KS5pcygnaW1nJykpIHsNCiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5wcmVzc2VkID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5kcmFnZ2VkID0gZmFsc2U7DQogICAgICAgIHRoaXMudmVydGljYWxEcmFnZ2VkID0gZmFsc2U7DQogICAgICAgIHRoaXMucmVmZXJlbmNlID0gdGhpcy5feHBvcyhlKTsNCiAgICAgICAgdGhpcy5yZWZlcmVuY2VZID0gdGhpcy5feXBvcyhlKTsNCg0KICAgICAgICB0aGlzLnZlbG9jaXR5ID0gdGhpcy5hbXBsaXR1ZGUgPSAwOw0KICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5vZmZzZXQ7DQogICAgICAgIHRoaXMudGltZXN0YW1wID0gRGF0ZS5ub3coKTsNCiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpY2tlcik7DQogICAgICAgIHRoaXMudGlja2VyID0gc2V0SW50ZXJ2YWwodGhpcy5fdHJhY2tCb3VuZCwgMTAwKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgQ2Fyb3VzZWwgRHJhZw0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlQ2Fyb3VzZWxEcmFnIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2Fyb3VzZWxEcmFnKGUpIHsNCiAgICAgICAgdmFyIHggPSB2b2lkIDAsDQogICAgICAgICAgICB5ID0gdm9pZCAwLA0KICAgICAgICAgICAgZGVsdGEgPSB2b2lkIDAsDQogICAgICAgICAgICBkZWx0YVkgPSB2b2lkIDA7DQogICAgICAgIGlmICh0aGlzLnByZXNzZWQpIHsNCiAgICAgICAgICB4ID0gdGhpcy5feHBvcyhlKTsNCiAgICAgICAgICB5ID0gdGhpcy5feXBvcyhlKTsNCiAgICAgICAgICBkZWx0YSA9IHRoaXMucmVmZXJlbmNlIC0geDsNCiAgICAgICAgICBkZWx0YVkgPSBNYXRoLmFicyh0aGlzLnJlZmVyZW5jZVkgLSB5KTsNCiAgICAgICAgICBpZiAoZGVsdGFZIDwgMzAgJiYgIXRoaXMudmVydGljYWxEcmFnZ2VkKSB7DQogICAgICAgICAgICAvLyBJZiB2ZXJ0aWNhbCBzY3JvbGxpbmcgZG9uJ3QgYWxsb3cgZHJhZ2dpbmcuDQogICAgICAgICAgICBpZiAoZGVsdGEgPiAyIHx8IGRlbHRhIDwgLTIpIHsNCiAgICAgICAgICAgICAgdGhpcy5kcmFnZ2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgdGhpcy5yZWZlcmVuY2UgPSB4Ow0KICAgICAgICAgICAgICB0aGlzLl9zY3JvbGwodGhpcy5vZmZzZXQgKyBkZWx0YSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRyYWdnZWQpIHsNCiAgICAgICAgICAgIC8vIElmIGRyYWdnaW5nIGRvbid0IGFsbG93IHZlcnRpY2FsIHNjcm9sbC4NCiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIFZlcnRpY2FsIHNjcm9sbGluZy4NCiAgICAgICAgICAgIHRoaXMudmVydGljYWxEcmFnZ2VkID0gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAodGhpcy5kcmFnZ2VkKSB7DQogICAgICAgICAgLy8gSWYgZHJhZ2dpbmcgZG9uJ3QgYWxsb3cgdmVydGljYWwgc2Nyb2xsLg0KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBDYXJvdXNlbCBSZWxlYXNlDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVDYXJvdXNlbFJlbGVhc2UiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDYXJvdXNlbFJlbGVhc2UoZSkgew0KICAgICAgICBpZiAodGhpcy5wcmVzc2VkKSB7DQogICAgICAgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpY2tlcik7DQogICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5vZmZzZXQ7DQogICAgICAgIGlmICh0aGlzLnZlbG9jaXR5ID4gMTAgfHwgdGhpcy52ZWxvY2l0eSA8IC0xMCkgew0KICAgICAgICAgIHRoaXMuYW1wbGl0dWRlID0gMC45ICogdGhpcy52ZWxvY2l0eTsNCiAgICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMub2Zmc2V0ICsgdGhpcy5hbXBsaXR1ZGU7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy50YXJnZXQgPSBNYXRoLnJvdW5kKHRoaXMudGFyZ2V0IC8gdGhpcy5kaW0pICogdGhpcy5kaW07DQoNCiAgICAgICAgLy8gTm8gd3JhcCBvZiBpdGVtcy4NCiAgICAgICAgaWYgKHRoaXMubm9XcmFwKSB7DQogICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID49IHRoaXMuZGltICogKHRoaXMuY291bnQgLSAxKSkgew0KICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLmRpbSAqICh0aGlzLmNvdW50IC0gMSk7DQogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldCA8IDApIHsNCiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gMDsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5hbXBsaXR1ZGUgPSB0aGlzLnRhcmdldCAtIHRoaXMub2Zmc2V0Ow0KICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IERhdGUubm93KCk7DQogICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9hdXRvU2Nyb2xsQm91bmQpOw0KDQogICAgICAgIGlmICh0aGlzLmRyYWdnZWQpIHsNCiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIENhcm91c2VsIENMaWNrDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVDYXJvdXNlbENsaWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2Fyb3VzZWxDbGljayhlKSB7DQogICAgICAgIC8vIERpc2FibGUgY2xpY2tzIGlmIGNhcm91c2VsIHdhcyBkcmFnZ2VkLg0KICAgICAgICBpZiAodGhpcy5kcmFnZ2VkKSB7DQogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuZnVsbFdpZHRoKSB7DQogICAgICAgICAgdmFyIGNsaWNrZWRJbmRleCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jYXJvdXNlbC1pdGVtJykuaW5kZXgoKTsNCiAgICAgICAgICB2YXIgZGlmZiA9IHRoaXMuX3dyYXAodGhpcy5jZW50ZXIpIC0gY2xpY2tlZEluZGV4Ow0KDQogICAgICAgICAgLy8gRGlzYWJsZSBjbGlja3MgaWYgY2Fyb3VzZWwgd2FzIHNoaWZ0ZWQgYnkgY2xpY2sNCiAgICAgICAgICBpZiAoZGlmZiAhPT0gMCkgew0KICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5fY3ljbGVUbyhjbGlja2VkSW5kZXgpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIEluZGljYXRvciBDTGljaw0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlSW5kaWNhdG9yQ2xpY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbmRpY2F0b3JDbGljayhlKSB7DQogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7DQoNCiAgICAgICAgdmFyIGluZGljYXRvciA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5pbmRpY2F0b3ItaXRlbScpOw0KICAgICAgICBpZiAoaW5kaWNhdG9yLmxlbmd0aCkgew0KICAgICAgICAgIHRoaXMuX2N5Y2xlVG8oaW5kaWNhdG9yLmluZGV4KCkpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIFRocm90dGxlIFJlc2l6ZQ0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlUmVzaXplIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlUmVzaXplKGUpIHsNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5mdWxsV2lkdGgpIHsNCiAgICAgICAgICB0aGlzLml0ZW1XaWR0aCA9IHRoaXMuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtJykuZmlyc3QoKS5pbm5lcldpZHRoKCk7DQogICAgICAgICAgdGhpcy5pbWFnZUhlaWdodCA9IHRoaXMuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtLmFjdGl2ZScpLmhlaWdodCgpOw0KICAgICAgICAgIHRoaXMuZGltID0gdGhpcy5pdGVtV2lkdGggKiAyICsgdGhpcy5vcHRpb25zLnBhZGRpbmc7DQogICAgICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLmNlbnRlciAqIDIgKiB0aGlzLml0ZW1XaWR0aDsNCiAgICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMub2Zmc2V0Ow0KICAgICAgICAgIHRoaXMuX3NldENhcm91c2VsSGVpZ2h0KHRydWUpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuX3Njcm9sbCgpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0IGNhcm91c2VsIGhlaWdodCBiYXNlZCBvbiBmaXJzdCBzbGlkZQ0KICAgICAgICogQHBhcmFtIHtCb29sZWFtfSBpbWFnZU9ubHkgLSB0cnVlIGZvciBpbWFnZSBzbGlkZXMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldENhcm91c2VsSGVpZ2h0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0Q2Fyb3VzZWxIZWlnaHQoaW1hZ2VPbmx5KSB7DQogICAgICAgIHZhciBfdGhpczY0ID0gdGhpczsNCg0KICAgICAgICB2YXIgZmlyc3RTbGlkZSA9IHRoaXMuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtLmFjdGl2ZScpLmxlbmd0aCA/IHRoaXMuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtLmFjdGl2ZScpLmZpcnN0KCkgOiB0aGlzLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLmZpcnN0KCk7DQogICAgICAgIHZhciBmaXJzdEltYWdlID0gZmlyc3RTbGlkZS5maW5kKCdpbWcnKS5maXJzdCgpOw0KICAgICAgICBpZiAoZmlyc3RJbWFnZS5sZW5ndGgpIHsNCiAgICAgICAgICBpZiAoZmlyc3RJbWFnZVswXS5jb21wbGV0ZSkgew0KICAgICAgICAgICAgLy8gSWYgaW1hZ2Ugd29uJ3QgdHJpZ2dlciB0aGUgbG9hZCBldmVudA0KICAgICAgICAgICAgdmFyIGltYWdlSGVpZ2h0ID0gZmlyc3RJbWFnZS5oZWlnaHQoKTsNCiAgICAgICAgICAgIGlmIChpbWFnZUhlaWdodCA+IDApIHsNCiAgICAgICAgICAgICAgdGhpcy4kZWwuY3NzKCdoZWlnaHQnLCBpbWFnZUhlaWdodCArICdweCcpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgLy8gSWYgaW1hZ2Ugc3RpbGwgaGFzIG5vIGhlaWdodCwgdXNlIHRoZSBuYXR1cmFsIGRpbWVuc2lvbnMgdG8gY2FsY3VsYXRlDQogICAgICAgICAgICAgIHZhciBuYXR1cmFsV2lkdGggPSBmaXJzdEltYWdlWzBdLm5hdHVyYWxXaWR0aDsNCiAgICAgICAgICAgICAgdmFyIG5hdHVyYWxIZWlnaHQgPSBmaXJzdEltYWdlWzBdLm5hdHVyYWxIZWlnaHQ7DQogICAgICAgICAgICAgIHZhciBhZGp1c3RlZEhlaWdodCA9IHRoaXMuJGVsLndpZHRoKCkgLyBuYXR1cmFsV2lkdGggKiBuYXR1cmFsSGVpZ2h0Ow0KICAgICAgICAgICAgICB0aGlzLiRlbC5jc3MoJ2hlaWdodCcsIGFkanVzdGVkSGVpZ2h0ICsgJ3B4Jyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIEdldCBoZWlnaHQgd2hlbiBpbWFnZSBpcyBsb2FkZWQgbm9ybWFsbHkNCiAgICAgICAgICAgIGZpcnN0SW1hZ2Uub25lKCdsb2FkJywgZnVuY3Rpb24gKGVsLCBpKSB7DQogICAgICAgICAgICAgIF90aGlzNjQuJGVsLmNzcygnaGVpZ2h0JywgZWwub2Zmc2V0SGVpZ2h0ICsgJ3B4Jyk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAoIWltYWdlT25seSkgew0KICAgICAgICAgIHZhciBzbGlkZUhlaWdodCA9IGZpcnN0U2xpZGUuaGVpZ2h0KCk7DQogICAgICAgICAgdGhpcy4kZWwuY3NzKCdoZWlnaHQnLCBzbGlkZUhlaWdodCArICdweCcpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogR2V0IHggcG9zaXRpb24gZnJvbSBldmVudA0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfeHBvcyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3hwb3MoZSkgew0KICAgICAgICAvLyB0b3VjaCBldmVudA0KICAgICAgICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPj0gMSkgew0KICAgICAgICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIG1vdXNlIGV2ZW50DQogICAgICAgIHJldHVybiBlLmNsaWVudFg7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogR2V0IHkgcG9zaXRpb24gZnJvbSBldmVudA0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfeXBvcyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3lwb3MoZSkgew0KICAgICAgICAvLyB0b3VjaCBldmVudA0KICAgICAgICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPj0gMSkgew0KICAgICAgICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIG1vdXNlIGV2ZW50DQogICAgICAgIHJldHVybiBlLmNsaWVudFk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogV3JhcCBpbmRleA0KICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHgNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3dyYXAiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF93cmFwKHgpIHsNCiAgICAgICAgcmV0dXJuIHggPj0gdGhpcy5jb3VudCA/IHggJSB0aGlzLmNvdW50IDogeCA8IDAgPyB0aGlzLl93cmFwKHRoaXMuY291bnQgKyB4ICUgdGhpcy5jb3VudCkgOiB4Ow0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFRyYWNrcyBzY3JvbGxpbmcgaW5mb3JtYXRpb24NCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3RyYWNrIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdHJhY2soKSB7DQogICAgICAgIHZhciBub3cgPSB2b2lkIDAsDQogICAgICAgICAgICBlbGFwc2VkID0gdm9pZCAwLA0KICAgICAgICAgICAgZGVsdGEgPSB2b2lkIDAsDQogICAgICAgICAgICB2ID0gdm9pZCAwOw0KDQogICAgICAgIG5vdyA9IERhdGUubm93KCk7DQogICAgICAgIGVsYXBzZWQgPSBub3cgLSB0aGlzLnRpbWVzdGFtcDsNCiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBub3c7DQogICAgICAgIGRlbHRhID0gdGhpcy5vZmZzZXQgLSB0aGlzLmZyYW1lOw0KICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5vZmZzZXQ7DQoNCiAgICAgICAgdiA9IDEwMDAgKiBkZWx0YSAvICgxICsgZWxhcHNlZCk7DQogICAgICAgIHRoaXMudmVsb2NpdHkgPSAwLjggKiB2ICsgMC4yICogdGhpcy52ZWxvY2l0eTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBBdXRvIHNjcm9sbHMgdG8gbmVhcmVzdCBjYXJvdXNlbCBpdGVtLg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfYXV0b1Njcm9sbCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2F1dG9TY3JvbGwoKSB7DQogICAgICAgIHZhciBlbGFwc2VkID0gdm9pZCAwLA0KICAgICAgICAgICAgZGVsdGEgPSB2b2lkIDA7DQoNCiAgICAgICAgaWYgKHRoaXMuYW1wbGl0dWRlKSB7DQogICAgICAgICAgZWxhcHNlZCA9IERhdGUubm93KCkgLSB0aGlzLnRpbWVzdGFtcDsNCiAgICAgICAgICBkZWx0YSA9IHRoaXMuYW1wbGl0dWRlICogTWF0aC5leHAoLWVsYXBzZWQgLyB0aGlzLm9wdGlvbnMuZHVyYXRpb24pOw0KICAgICAgICAgIGlmIChkZWx0YSA+IDIgfHwgZGVsdGEgPCAtMikgew0KICAgICAgICAgICAgdGhpcy5fc2Nyb2xsKHRoaXMudGFyZ2V0IC0gZGVsdGEpOw0KICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2F1dG9TY3JvbGxCb3VuZCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuX3Njcm9sbCh0aGlzLnRhcmdldCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2Nyb2xsIHRvIHRhcmdldA0KICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHgNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3Njcm9sbCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3Njcm9sbCh4KSB7DQogICAgICAgIHZhciBfdGhpczY1ID0gdGhpczsNCg0KICAgICAgICAvLyBUcmFjayBzY3JvbGxpbmcgc3RhdGUNCiAgICAgICAgaWYgKCF0aGlzLiRlbC5oYXNDbGFzcygnc2Nyb2xsaW5nJykpIHsNCiAgICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3Njcm9sbGluZycpOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLnNjcm9sbGluZ1RpbWVvdXQgIT0gbnVsbCkgew0KICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zY3JvbGxpbmdUaW1lb3V0KTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnNjcm9sbGluZ1RpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgX3RoaXM2NS4kZWwucmVtb3ZlQ2xhc3MoJ3Njcm9sbGluZycpOw0KICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24pOw0KDQogICAgICAgIC8vIFN0YXJ0IGFjdHVhbCBzY3JvbGwNCiAgICAgICAgdmFyIGkgPSB2b2lkIDAsDQogICAgICAgICAgICBoYWxmID0gdm9pZCAwLA0KICAgICAgICAgICAgZGVsdGEgPSB2b2lkIDAsDQogICAgICAgICAgICBkaXIgPSB2b2lkIDAsDQogICAgICAgICAgICB0d2VlbiA9IHZvaWQgMCwNCiAgICAgICAgICAgIGVsID0gdm9pZCAwLA0KICAgICAgICAgICAgYWxpZ25tZW50ID0gdm9pZCAwLA0KICAgICAgICAgICAgelRyYW5zbGF0aW9uID0gdm9pZCAwLA0KICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSB2b2lkIDAsDQogICAgICAgICAgICBjZW50ZXJUd2VlbmVkT3BhY2l0eSA9IHZvaWQgMDsNCiAgICAgICAgdmFyIGxhc3RDZW50ZXIgPSB0aGlzLmNlbnRlcjsNCiAgICAgICAgdmFyIG51bVZpc2libGVPZmZzZXQgPSAxIC8gdGhpcy5vcHRpb25zLm51bVZpc2libGU7DQoNCiAgICAgICAgdGhpcy5vZmZzZXQgPSB0eXBlb2YgeCA9PT0gJ251bWJlcicgPyB4IDogdGhpcy5vZmZzZXQ7DQogICAgICAgIHRoaXMuY2VudGVyID0gTWF0aC5mbG9vcigodGhpcy5vZmZzZXQgKyB0aGlzLmRpbSAvIDIpIC8gdGhpcy5kaW0pOw0KICAgICAgICBkZWx0YSA9IHRoaXMub2Zmc2V0IC0gdGhpcy5jZW50ZXIgKiB0aGlzLmRpbTsNCiAgICAgICAgZGlyID0gZGVsdGEgPCAwID8gMSA6IC0xOw0KICAgICAgICB0d2VlbiA9IC1kaXIgKiBkZWx0YSAqIDIgLyB0aGlzLmRpbTsNCiAgICAgICAgaGFsZiA9IHRoaXMuY291bnQgPj4gMTsNCg0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZ1bGxXaWR0aCkgew0KICAgICAgICAgIGFsaWdubWVudCA9ICd0cmFuc2xhdGVYKDApJzsNCiAgICAgICAgICBjZW50ZXJUd2VlbmVkT3BhY2l0eSA9IDE7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgYWxpZ25tZW50ID0gJ3RyYW5zbGF0ZVgoJyArICh0aGlzLmVsLmNsaWVudFdpZHRoIC0gdGhpcy5pdGVtV2lkdGgpIC8gMiArICdweCkgJzsNCiAgICAgICAgICBhbGlnbm1lbnQgKz0gJ3RyYW5zbGF0ZVkoJyArICh0aGlzLmVsLmNsaWVudEhlaWdodCAtIHRoaXMuaXRlbUhlaWdodCkgLyAyICsgJ3B4KSc7DQogICAgICAgICAgY2VudGVyVHdlZW5lZE9wYWNpdHkgPSAxIC0gbnVtVmlzaWJsZU9mZnNldCAqIHR3ZWVuOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU2V0IGluZGljYXRvciBhY3RpdmUNCiAgICAgICAgaWYgKHRoaXMuc2hvd0luZGljYXRvcnMpIHsNCiAgICAgICAgICB2YXIgZGlmZiA9IHRoaXMuY2VudGVyICUgdGhpcy5jb3VudDsNCiAgICAgICAgICB2YXIgYWN0aXZlSW5kaWNhdG9yID0gdGhpcy4kaW5kaWNhdG9ycy5maW5kKCcuaW5kaWNhdG9yLWl0ZW0uYWN0aXZlJyk7DQogICAgICAgICAgaWYgKGFjdGl2ZUluZGljYXRvci5pbmRleCgpICE9PSBkaWZmKSB7DQogICAgICAgICAgICBhY3RpdmVJbmRpY2F0b3IucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5maW5kKCcuaW5kaWNhdG9yLWl0ZW0nKS5lcShkaWZmKVswXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBjZW50ZXINCiAgICAgICAgLy8gRG9uJ3Qgc2hvdyB3cmFwcGVkIGl0ZW1zLg0KICAgICAgICBpZiAoIXRoaXMubm9XcmFwIHx8IHRoaXMuY2VudGVyID49IDAgJiYgdGhpcy5jZW50ZXIgPCB0aGlzLmNvdW50KSB7DQogICAgICAgICAgZWwgPSB0aGlzLmltYWdlc1t0aGlzLl93cmFwKHRoaXMuY2VudGVyKV07DQoNCiAgICAgICAgICAvLyBBZGQgYWN0aXZlIGNsYXNzIHRvIGNlbnRlciBpdGVtLg0KICAgICAgICAgIGlmICghJChlbCkuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7DQogICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOw0KICAgICAgICAgIH0NCiAgICAgICAgICB2YXIgdHJhbnNmb3JtU3RyaW5nID0gYWxpZ25tZW50ICsgIiB0cmFuc2xhdGVYKCIgKyAtZGVsdGEgLyAyICsgInB4KSB0cmFuc2xhdGVYKCIgKyBkaXIgKiB0aGlzLm9wdGlvbnMuc2hpZnQgKiB0d2VlbiAqIGkgKyAicHgpIHRyYW5zbGF0ZVooIiArIHRoaXMub3B0aW9ucy5kaXN0ICogdHdlZW4gKyAicHgpIjsNCiAgICAgICAgICB0aGlzLl91cGRhdGVJdGVtU3R5bGUoZWwsIGNlbnRlclR3ZWVuZWRPcGFjaXR5LCAwLCB0cmFuc2Zvcm1TdHJpbmcpOw0KICAgICAgICB9DQoNCiAgICAgICAgZm9yIChpID0gMTsgaSA8PSBoYWxmOyArK2kpIHsNCiAgICAgICAgICAvLyByaWdodCBzaWRlDQogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5mdWxsV2lkdGgpIHsNCiAgICAgICAgICAgIHpUcmFuc2xhdGlvbiA9IHRoaXMub3B0aW9ucy5kaXN0Ow0KICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSBpID09PSBoYWxmICYmIGRlbHRhIDwgMCA/IDEgLSB0d2VlbiA6IDE7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHpUcmFuc2xhdGlvbiA9IHRoaXMub3B0aW9ucy5kaXN0ICogKGkgKiAyICsgdHdlZW4gKiBkaXIpOw0KICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSAxIC0gbnVtVmlzaWJsZU9mZnNldCAqIChpICogMiArIHR3ZWVuICogZGlyKTsNCiAgICAgICAgICB9DQogICAgICAgICAgLy8gRG9uJ3Qgc2hvdyB3cmFwcGVkIGl0ZW1zLg0KICAgICAgICAgIGlmICghdGhpcy5ub1dyYXAgfHwgdGhpcy5jZW50ZXIgKyBpIDwgdGhpcy5jb3VudCkgew0KICAgICAgICAgICAgZWwgPSB0aGlzLmltYWdlc1t0aGlzLl93cmFwKHRoaXMuY2VudGVyICsgaSldOw0KICAgICAgICAgICAgdmFyIF90cmFuc2Zvcm1TdHJpbmcgPSBhbGlnbm1lbnQgKyAiIHRyYW5zbGF0ZVgoIiArICh0aGlzLm9wdGlvbnMuc2hpZnQgKyAodGhpcy5kaW0gKiBpIC0gZGVsdGEpIC8gMikgKyAicHgpIHRyYW5zbGF0ZVooIiArIHpUcmFuc2xhdGlvbiArICJweCkiOw0KICAgICAgICAgICAgdGhpcy5fdXBkYXRlSXRlbVN0eWxlKGVsLCB0d2VlbmVkT3BhY2l0eSwgLWksIF90cmFuc2Zvcm1TdHJpbmcpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIGxlZnQgc2lkZQ0KICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZnVsbFdpZHRoKSB7DQogICAgICAgICAgICB6VHJhbnNsYXRpb24gPSB0aGlzLm9wdGlvbnMuZGlzdDsNCiAgICAgICAgICAgIHR3ZWVuZWRPcGFjaXR5ID0gaSA9PT0gaGFsZiAmJiBkZWx0YSA+IDAgPyAxIC0gdHdlZW4gOiAxOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB6VHJhbnNsYXRpb24gPSB0aGlzLm9wdGlvbnMuZGlzdCAqIChpICogMiAtIHR3ZWVuICogZGlyKTsNCiAgICAgICAgICAgIHR3ZWVuZWRPcGFjaXR5ID0gMSAtIG51bVZpc2libGVPZmZzZXQgKiAoaSAqIDIgLSB0d2VlbiAqIGRpcik7DQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIERvbid0IHNob3cgd3JhcHBlZCBpdGVtcy4NCiAgICAgICAgICBpZiAoIXRoaXMubm9XcmFwIHx8IHRoaXMuY2VudGVyIC0gaSA+PSAwKSB7DQogICAgICAgICAgICBlbCA9IHRoaXMuaW1hZ2VzW3RoaXMuX3dyYXAodGhpcy5jZW50ZXIgLSBpKV07DQogICAgICAgICAgICB2YXIgX3RyYW5zZm9ybVN0cmluZzIgPSBhbGlnbm1lbnQgKyAiIHRyYW5zbGF0ZVgoIiArICgtdGhpcy5vcHRpb25zLnNoaWZ0ICsgKC10aGlzLmRpbSAqIGkgLSBkZWx0YSkgLyAyKSArICJweCkgdHJhbnNsYXRlWigiICsgelRyYW5zbGF0aW9uICsgInB4KSI7DQogICAgICAgICAgICB0aGlzLl91cGRhdGVJdGVtU3R5bGUoZWwsIHR3ZWVuZWRPcGFjaXR5LCAtaSwgX3RyYW5zZm9ybVN0cmluZzIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGNlbnRlcg0KICAgICAgICAvLyBEb24ndCBzaG93IHdyYXBwZWQgaXRlbXMuDQogICAgICAgIGlmICghdGhpcy5ub1dyYXAgfHwgdGhpcy5jZW50ZXIgPj0gMCAmJiB0aGlzLmNlbnRlciA8IHRoaXMuY291bnQpIHsNCiAgICAgICAgICBlbCA9IHRoaXMuaW1hZ2VzW3RoaXMuX3dyYXAodGhpcy5jZW50ZXIpXTsNCiAgICAgICAgICB2YXIgX3RyYW5zZm9ybVN0cmluZzMgPSBhbGlnbm1lbnQgKyAiIHRyYW5zbGF0ZVgoIiArIC1kZWx0YSAvIDIgKyAicHgpIHRyYW5zbGF0ZVgoIiArIGRpciAqIHRoaXMub3B0aW9ucy5zaGlmdCAqIHR3ZWVuICsgInB4KSB0cmFuc2xhdGVaKCIgKyB0aGlzLm9wdGlvbnMuZGlzdCAqIHR3ZWVuICsgInB4KSI7DQogICAgICAgICAgdGhpcy5fdXBkYXRlSXRlbVN0eWxlKGVsLCBjZW50ZXJUd2VlbmVkT3BhY2l0eSwgMCwgX3RyYW5zZm9ybVN0cmluZzMpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gb25DeWNsZVRvIGNhbGxiYWNrDQogICAgICAgIHZhciAkY3Vyckl0ZW0gPSB0aGlzLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLmVxKHRoaXMuX3dyYXAodGhpcy5jZW50ZXIpKTsNCiAgICAgICAgaWYgKGxhc3RDZW50ZXIgIT09IHRoaXMuY2VudGVyICYmIHR5cGVvZiB0aGlzLm9wdGlvbnMub25DeWNsZVRvID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ3ljbGVUby5jYWxsKHRoaXMsICRjdXJySXRlbVswXSwgdGhpcy5kcmFnZ2VkKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIE9uZSB0aW1lIGNhbGxiYWNrDQogICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbmVUaW1lQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICB0aGlzLm9uZVRpbWVDYWxsYmFjay5jYWxsKHRoaXMsICRjdXJySXRlbVswXSwgdGhpcy5kcmFnZ2VkKTsNCiAgICAgICAgICB0aGlzLm9uZVRpbWVDYWxsYmFjayA9IG51bGw7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBDeWNsZSB0byB0YXJnZXQNCiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwNCiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBvcGFjaXR5DQogICAgICAgKiBAcGFyYW0ge051bWJlcn0gekluZGV4DQogICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHJhbnNmb3JtDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl91cGRhdGVJdGVtU3R5bGUiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVJdGVtU3R5bGUoZWwsIG9wYWNpdHksIHpJbmRleCwgdHJhbnNmb3JtKSB7DQogICAgICAgIGVsLnN0eWxlW3RoaXMueGZvcm1dID0gdHJhbnNmb3JtOw0KICAgICAgICBlbC5zdHlsZS56SW5kZXggPSB6SW5kZXg7DQogICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5Ow0KICAgICAgICBlbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEN5Y2xlIHRvIHRhcmdldA0KICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IG4NCiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9jeWNsZVRvIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3ljbGVUbyhuLCBjYWxsYmFjaykgew0KICAgICAgICB2YXIgZGlmZiA9IHRoaXMuY2VudGVyICUgdGhpcy5jb3VudCAtIG47DQoNCiAgICAgICAgLy8gQWNjb3VudCBmb3Igd3JhcGFyb3VuZC4NCiAgICAgICAgaWYgKCF0aGlzLm5vV3JhcCkgew0KICAgICAgICAgIGlmIChkaWZmIDwgMCkgew0KICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpZmYgKyB0aGlzLmNvdW50KSA8IE1hdGguYWJzKGRpZmYpKSB7DQogICAgICAgICAgICAgIGRpZmYgKz0gdGhpcy5jb3VudDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2UgaWYgKGRpZmYgPiAwKSB7DQogICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGlmZiAtIHRoaXMuY291bnQpIDwgZGlmZikgew0KICAgICAgICAgICAgICBkaWZmIC09IHRoaXMuY291bnQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLmRpbSAqIE1hdGgucm91bmQodGhpcy5vZmZzZXQgLyB0aGlzLmRpbSk7DQogICAgICAgIC8vIE5leHQNCiAgICAgICAgaWYgKGRpZmYgPCAwKSB7DQogICAgICAgICAgdGhpcy50YXJnZXQgKz0gdGhpcy5kaW0gKiBNYXRoLmFicyhkaWZmKTsNCg0KICAgICAgICAgIC8vIFByZXYNCiAgICAgICAgfSBlbHNlIGlmIChkaWZmID4gMCkgew0KICAgICAgICAgIHRoaXMudGFyZ2V0IC09IHRoaXMuZGltICogZGlmZjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFNldCBvbmUgdGltZSBjYWxsYmFjaw0KICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgdGhpcy5vbmVUaW1lQ2FsbGJhY2sgPSBjYWxsYmFjazsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFNjcm9sbA0KICAgICAgICBpZiAodGhpcy5vZmZzZXQgIT09IHRoaXMudGFyZ2V0KSB7DQogICAgICAgICAgdGhpcy5hbXBsaXR1ZGUgPSB0aGlzLnRhcmdldCAtIHRoaXMub2Zmc2V0Ow0KICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gRGF0ZS5ub3coKTsNCiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fYXV0b1Njcm9sbEJvdW5kKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEN5Y2xlIHRvIG5leHQgaXRlbQ0KICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IFtuXQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJuZXh0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0KG4pIHsNCiAgICAgICAgaWYgKG4gPT09IHVuZGVmaW5lZCB8fCBpc05hTihuKSkgew0KICAgICAgICAgIG4gPSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jZW50ZXIgKyBuOw0KICAgICAgICBpZiAoaW5kZXggPiB0aGlzLmNvdW50IHx8IGluZGV4IDwgMCkgew0KICAgICAgICAgIGlmICh0aGlzLm5vV3JhcCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGluZGV4ID0gdGhpcy5fd3JhcChpbmRleCk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5fY3ljbGVUbyhpbmRleCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogQ3ljbGUgdG8gcHJldmlvdXMgaXRlbQ0KICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IFtuXQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJwcmV2IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmV2KG4pIHsNCiAgICAgICAgaWYgKG4gPT09IHVuZGVmaW5lZCB8fCBpc05hTihuKSkgew0KICAgICAgICAgIG4gPSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jZW50ZXIgLSBuOw0KICAgICAgICBpZiAoaW5kZXggPiB0aGlzLmNvdW50IHx8IGluZGV4IDwgMCkgew0KICAgICAgICAgIGlmICh0aGlzLm5vV3JhcCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGluZGV4ID0gdGhpcy5fd3JhcChpbmRleCk7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLl9jeWNsZVRvKGluZGV4KTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBDeWNsZSB0byBudGggaXRlbQ0KICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IFtuXQ0KICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAic2V0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQobiwgY2FsbGJhY2spIHsNCiAgICAgICAgaWYgKG4gPT09IHVuZGVmaW5lZCB8fCBpc05hTihuKSkgew0KICAgICAgICAgIG4gPSAwOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKG4gPiB0aGlzLmNvdW50IHx8IG4gPCAwKSB7DQogICAgICAgICAgaWYgKHRoaXMubm9XcmFwKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KDQogICAgICAgICAgbiA9IHRoaXMuX3dyYXAobik7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLl9jeWNsZVRvKG4sIGNhbGxiYWNrKTsNCiAgICAgIH0NCiAgICB9XSwgW3sNCiAgICAgIGtleTogImluaXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7DQogICAgICAgIHJldHVybiBfZ2V0KENhcm91c2VsLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2Fyb3VzZWwpLCAiaW5pdCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBHZXQgSW5zdGFuY2UNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiZ2V0SW5zdGFuY2UiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7DQogICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsOw0KICAgICAgICByZXR1cm4gZG9tRWxlbS5NX0Nhcm91c2VsOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImRlZmF1bHRzIiwNCiAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gX2RlZmF1bHRzOw0KICAgICAgfQ0KICAgIH1dKTsNCg0KICAgIHJldHVybiBDYXJvdXNlbDsNCiAgfShDb21wb25lbnQpOw0KDQogIE0uQ2Fyb3VzZWwgPSBDYXJvdXNlbDsNCg0KICBpZiAoTS5qUXVlcnlMb2FkZWQpIHsNCiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKENhcm91c2VsLCAnY2Fyb3VzZWwnLCAnTV9DYXJvdXNlbCcpOw0KICB9DQp9KShjYXNoKTsNCjsoZnVuY3Rpb24gKCQpIHsNCiAgJ3VzZSBzdHJpY3QnOw0KDQogIHZhciBfZGVmYXVsdHMgPSB7DQogICAgb25PcGVuOiB1bmRlZmluZWQsDQogICAgb25DbG9zZTogdW5kZWZpbmVkDQogIH07DQoNCiAgLyoqDQogICAqIEBjbGFzcw0KICAgKg0KICAgKi8NCg0KICB2YXIgVGFwVGFyZ2V0ID0gZnVuY3Rpb24gKF9Db21wb25lbnQxOSkgew0KICAgIF9pbmhlcml0cyhUYXBUYXJnZXQsIF9Db21wb25lbnQxOSk7DQoNCiAgICAvKioNCiAgICAgKiBDb25zdHJ1Y3QgVGFwVGFyZ2V0IGluc3RhbmNlDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtIHtFbGVtZW50fSBlbA0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zDQogICAgICovDQogICAgZnVuY3Rpb24gVGFwVGFyZ2V0KGVsLCBvcHRpb25zKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFwVGFyZ2V0KTsNCg0KICAgICAgdmFyIF90aGlzNjYgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVGFwVGFyZ2V0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGFwVGFyZ2V0KSkuY2FsbCh0aGlzLCBUYXBUYXJnZXQsIGVsLCBvcHRpb25zKSk7DQoNCiAgICAgIF90aGlzNjYuZWwuTV9UYXBUYXJnZXQgPSBfdGhpczY2Ow0KDQogICAgICAvKioNCiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBzZWxlY3QNCiAgICAgICAqIEBtZW1iZXIgVGFwVGFyZ2V0I29wdGlvbnMNCiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25PcGVuIC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIHdoZW4gZmVhdHVyZSBkaXNjb3ZlcnkgaXMgb3BlbmVkDQogICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ2xvc2UgLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgd2hlbiBmZWF0dXJlIGRpc2NvdmVyeSBpcyBjbG9zZWQNCiAgICAgICAqLw0KICAgICAgX3RoaXM2Ni5vcHRpb25zID0gJC5leHRlbmQoe30sIFRhcFRhcmdldC5kZWZhdWx0cywgb3B0aW9ucyk7DQoNCiAgICAgIF90aGlzNjYuaXNPcGVuID0gZmFsc2U7DQoNCiAgICAgIC8vIHNldHVwDQogICAgICBfdGhpczY2LiRvcmlnaW4gPSAkKCcjJyArIF90aGlzNjYuJGVsLmF0dHIoJ2RhdGEtdGFyZ2V0JykpOw0KICAgICAgX3RoaXM2Ni5fc2V0dXAoKTsNCg0KICAgICAgX3RoaXM2Ni5fY2FsY3VsYXRlUG9zaXRpb25pbmcoKTsNCiAgICAgIF90aGlzNjYuX3NldHVwRXZlbnRIYW5kbGVycygpOw0KICAgICAgcmV0dXJuIF90aGlzNjY7DQogICAgfQ0KDQogICAgX2NyZWF0ZUNsYXNzKFRhcFRhcmdldCwgW3sNCiAgICAgIGtleTogImRlc3Ryb3kiLA0KDQoNCiAgICAgIC8qKg0KICAgICAgICogVGVhcmRvd24gY29tcG9uZW50DQogICAgICAgKi8NCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkgew0KICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7DQogICAgICAgIHRoaXMuZWwuVGFwVGFyZ2V0ID0gdW5kZWZpbmVkOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zZXR1cEV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2suYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlVGFyZ2V0Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZVRhcmdldENsaWNrLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZU9yaWdpbkNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVPcmlnaW5DbGljay5iaW5kKHRoaXMpOw0KDQogICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUYXJnZXRDbGlja0JvdW5kKTsNCiAgICAgICAgdGhpcy5vcmlnaW5FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZU9yaWdpbkNsaWNrQm91bmQpOw0KDQogICAgICAgIC8vIFJlc2l6ZQ0KICAgICAgICB2YXIgdGhyb3R0bGVkUmVzaXplID0gTS50aHJvdHRsZSh0aGlzLl9oYW5kbGVSZXNpemUsIDIwMCk7DQogICAgICAgIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kID0gdGhyb3R0bGVkUmVzaXplLmJpbmQodGhpcyk7DQoNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3JlbW92ZUV2ZW50SGFuZGxlcnMiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkgew0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVGFyZ2V0Q2xpY2tCb3VuZCk7DQogICAgICAgIHRoaXMub3JpZ2luRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVPcmlnaW5DbGlja0JvdW5kKTsNCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgVGFyZ2V0IENsaWNrDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVUYXJnZXRDbGljayIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVRhcmdldENsaWNrKGUpIHsNCiAgICAgICAgdGhpcy5vcGVuKCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogSGFuZGxlIE9yaWdpbiBDbGljaw0KICAgICAgICogQHBhcmFtIHtFdmVudH0gZQ0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlT3JpZ2luQ2xpY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVPcmlnaW5DbGljayhlKSB7DQogICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgUmVzaXplDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVSZXNpemUiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVSZXNpemUoZSkgew0KICAgICAgICB0aGlzLl9jYWxjdWxhdGVQb3NpdGlvbmluZygpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBSZXNpemUNCiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZURvY3VtZW50Q2xpY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVEb2N1bWVudENsaWNrKGUpIHsNCiAgICAgICAgaWYgKCEkKGUudGFyZ2V0KS5jbG9zZXN0KCcudGFwLXRhcmdldC13cmFwcGVyJykubGVuZ3RoKSB7DQogICAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgVGFwIFRhcmdldA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXAiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cCgpIHsNCiAgICAgICAgLy8gQ3JlYXRpbmcgdGFwIHRhcmdldA0KICAgICAgICB0aGlzLndyYXBwZXIgPSB0aGlzLiRlbC5wYXJlbnQoKVswXTsNCiAgICAgICAgdGhpcy53YXZlRWwgPSAkKHRoaXMud3JhcHBlcikuZmluZCgnLnRhcC10YXJnZXQtd2F2ZScpWzBdOw0KICAgICAgICB0aGlzLm9yaWdpbkVsID0gJCh0aGlzLndyYXBwZXIpLmZpbmQoJy50YXAtdGFyZ2V0LW9yaWdpbicpWzBdOw0KICAgICAgICB0aGlzLmNvbnRlbnRFbCA9IHRoaXMuJGVsLmZpbmQoJy50YXAtdGFyZ2V0LWNvbnRlbnQnKVswXTsNCg0KICAgICAgICAvLyBDcmVhdGluZyB3cmFwcGVyDQogICAgICAgIGlmICghJCh0aGlzLndyYXBwZXIpLmhhc0NsYXNzKCcudGFwLXRhcmdldC13cmFwcGVyJykpIHsNCiAgICAgICAgICB0aGlzLndyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICB0aGlzLndyYXBwZXIuY2xhc3NMaXN0LmFkZCgndGFwLXRhcmdldC13cmFwcGVyJyk7DQogICAgICAgICAgdGhpcy4kZWwuYmVmb3JlKCQodGhpcy53cmFwcGVyKSk7DQogICAgICAgICAgdGhpcy53cmFwcGVyLmFwcGVuZCh0aGlzLmVsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENyZWF0aW5nIGNvbnRlbnQNCiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnRFbCkgew0KICAgICAgICAgIHRoaXMuY29udGVudEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgdGhpcy5jb250ZW50RWwuY2xhc3NMaXN0LmFkZCgndGFwLXRhcmdldC1jb250ZW50Jyk7DQogICAgICAgICAgdGhpcy4kZWwuYXBwZW5kKHRoaXMuY29udGVudEVsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENyZWF0aW5nIGZvcmVncm91bmQgd2F2ZQ0KICAgICAgICBpZiAoIXRoaXMud2F2ZUVsKSB7DQogICAgICAgICAgdGhpcy53YXZlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICB0aGlzLndhdmVFbC5jbGFzc0xpc3QuYWRkKCd0YXAtdGFyZ2V0LXdhdmUnKTsNCg0KICAgICAgICAgIC8vIENyZWF0aW5nIG9yaWdpbg0KICAgICAgICAgIGlmICghdGhpcy5vcmlnaW5FbCkgew0KICAgICAgICAgICAgdGhpcy5vcmlnaW5FbCA9IHRoaXMuJG9yaWdpbi5jbG9uZSh0cnVlLCB0cnVlKTsNCiAgICAgICAgICAgIHRoaXMub3JpZ2luRWwuYWRkQ2xhc3MoJ3RhcC10YXJnZXQtb3JpZ2luJyk7DQogICAgICAgICAgICB0aGlzLm9yaWdpbkVsLnJlbW92ZUF0dHIoJ2lkJyk7DQogICAgICAgICAgICB0aGlzLm9yaWdpbkVsLnJlbW92ZUF0dHIoJ3N0eWxlJyk7DQogICAgICAgICAgICB0aGlzLm9yaWdpbkVsID0gdGhpcy5vcmlnaW5FbFswXTsNCiAgICAgICAgICAgIHRoaXMud2F2ZUVsLmFwcGVuZCh0aGlzLm9yaWdpbkVsKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kKHRoaXMud2F2ZUVsKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIENhbGN1bGF0ZSBwb3NpdGlvbmluZw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfY2FsY3VsYXRlUG9zaXRpb25pbmciLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jYWxjdWxhdGVQb3NpdGlvbmluZygpIHsNCiAgICAgICAgLy8gRWxlbWVudCBvciBwYXJlbnQgaXMgZml4ZWQgcG9zaXRpb24/DQogICAgICAgIHZhciBpc0ZpeGVkID0gdGhpcy4kb3JpZ2luLmNzcygncG9zaXRpb24nKSA9PT0gJ2ZpeGVkJzsNCiAgICAgICAgaWYgKCFpc0ZpeGVkKSB7DQogICAgICAgICAgdmFyIHBhcmVudHMgPSB0aGlzLiRvcmlnaW4ucGFyZW50cygpOw0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyZW50cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaXNGaXhlZCA9ICQocGFyZW50c1tpXSkuY3NzKCdwb3NpdGlvbicpID09ICdmaXhlZCc7DQogICAgICAgICAgICBpZiAoaXNGaXhlZCkgew0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDYWxjdWxhdGluZyBvcmlnaW4NCiAgICAgICAgdmFyIG9yaWdpbldpZHRoID0gdGhpcy4kb3JpZ2luLm91dGVyV2lkdGgoKTsNCiAgICAgICAgdmFyIG9yaWdpbkhlaWdodCA9IHRoaXMuJG9yaWdpbi5vdXRlckhlaWdodCgpOw0KICAgICAgICB2YXIgb3JpZ2luVG9wID0gaXNGaXhlZCA/IHRoaXMuJG9yaWdpbi5vZmZzZXQoKS50b3AgLSBNLmdldERvY3VtZW50U2Nyb2xsVG9wKCkgOiB0aGlzLiRvcmlnaW4ub2Zmc2V0KCkudG9wOw0KICAgICAgICB2YXIgb3JpZ2luTGVmdCA9IGlzRml4ZWQgPyB0aGlzLiRvcmlnaW4ub2Zmc2V0KCkubGVmdCAtIE0uZ2V0RG9jdW1lbnRTY3JvbGxMZWZ0KCkgOiB0aGlzLiRvcmlnaW4ub2Zmc2V0KCkubGVmdDsNCg0KICAgICAgICAvLyBDYWxjdWxhdGluZyBzY3JlZW4NCiAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7DQogICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQogICAgICAgIHZhciBjZW50ZXJYID0gd2luZG93V2lkdGggLyAyOw0KICAgICAgICB2YXIgY2VudGVyWSA9IHdpbmRvd0hlaWdodCAvIDI7DQogICAgICAgIHZhciBpc0xlZnQgPSBvcmlnaW5MZWZ0IDw9IGNlbnRlclg7DQogICAgICAgIHZhciBpc1JpZ2h0ID0gb3JpZ2luTGVmdCA+IGNlbnRlclg7DQogICAgICAgIHZhciBpc1RvcCA9IG9yaWdpblRvcCA8PSBjZW50ZXJZOw0KICAgICAgICB2YXIgaXNCb3R0b20gPSBvcmlnaW5Ub3AgPiBjZW50ZXJZOw0KICAgICAgICB2YXIgaXNDZW50ZXJYID0gb3JpZ2luTGVmdCA+PSB3aW5kb3dXaWR0aCAqIDAuMjUgJiYgb3JpZ2luTGVmdCA8PSB3aW5kb3dXaWR0aCAqIDAuNzU7DQoNCiAgICAgICAgLy8gQ2FsY3VsYXRpbmcgdGFwIHRhcmdldA0KICAgICAgICB2YXIgdGFwVGFyZ2V0V2lkdGggPSB0aGlzLiRlbC5vdXRlcldpZHRoKCk7DQogICAgICAgIHZhciB0YXBUYXJnZXRIZWlnaHQgPSB0aGlzLiRlbC5vdXRlckhlaWdodCgpOw0KICAgICAgICB2YXIgdGFwVGFyZ2V0VG9wID0gb3JpZ2luVG9wICsgb3JpZ2luSGVpZ2h0IC8gMiAtIHRhcFRhcmdldEhlaWdodCAvIDI7DQogICAgICAgIHZhciB0YXBUYXJnZXRMZWZ0ID0gb3JpZ2luTGVmdCArIG9yaWdpbldpZHRoIC8gMiAtIHRhcFRhcmdldFdpZHRoIC8gMjsNCiAgICAgICAgdmFyIHRhcFRhcmdldFBvc2l0aW9uID0gaXNGaXhlZCA/ICdmaXhlZCcgOiAnYWJzb2x1dGUnOw0KDQogICAgICAgIC8vIENhbGN1bGF0aW5nIGNvbnRlbnQNCiAgICAgICAgdmFyIHRhcFRhcmdldFRleHRXaWR0aCA9IGlzQ2VudGVyWCA/IHRhcFRhcmdldFdpZHRoIDogdGFwVGFyZ2V0V2lkdGggLyAyICsgb3JpZ2luV2lkdGg7DQogICAgICAgIHZhciB0YXBUYXJnZXRUZXh0SGVpZ2h0ID0gdGFwVGFyZ2V0SGVpZ2h0IC8gMjsNCiAgICAgICAgdmFyIHRhcFRhcmdldFRleHRUb3AgPSBpc1RvcCA/IHRhcFRhcmdldEhlaWdodCAvIDIgOiAwOw0KICAgICAgICB2YXIgdGFwVGFyZ2V0VGV4dEJvdHRvbSA9IDA7DQogICAgICAgIHZhciB0YXBUYXJnZXRUZXh0TGVmdCA9IGlzTGVmdCAmJiAhaXNDZW50ZXJYID8gdGFwVGFyZ2V0V2lkdGggLyAyIC0gb3JpZ2luV2lkdGggOiAwOw0KICAgICAgICB2YXIgdGFwVGFyZ2V0VGV4dFJpZ2h0ID0gMDsNCiAgICAgICAgdmFyIHRhcFRhcmdldFRleHRQYWRkaW5nID0gb3JpZ2luV2lkdGg7DQogICAgICAgIHZhciB0YXBUYXJnZXRUZXh0QWxpZ24gPSBpc0JvdHRvbSA/ICdib3R0b20nIDogJ3RvcCc7DQoNCiAgICAgICAgLy8gQ2FsY3VsYXRpbmcgd2F2ZQ0KICAgICAgICB2YXIgdGFwVGFyZ2V0V2F2ZVdpZHRoID0gb3JpZ2luV2lkdGggPiBvcmlnaW5IZWlnaHQgPyBvcmlnaW5XaWR0aCAqIDIgOiBvcmlnaW5XaWR0aCAqIDI7DQogICAgICAgIHZhciB0YXBUYXJnZXRXYXZlSGVpZ2h0ID0gdGFwVGFyZ2V0V2F2ZVdpZHRoOw0KICAgICAgICB2YXIgdGFwVGFyZ2V0V2F2ZVRvcCA9IHRhcFRhcmdldEhlaWdodCAvIDIgLSB0YXBUYXJnZXRXYXZlSGVpZ2h0IC8gMjsNCiAgICAgICAgdmFyIHRhcFRhcmdldFdhdmVMZWZ0ID0gdGFwVGFyZ2V0V2lkdGggLyAyIC0gdGFwVGFyZ2V0V2F2ZVdpZHRoIC8gMjsNCg0KICAgICAgICAvLyBTZXR0aW5nIHRhcCB0YXJnZXQNCiAgICAgICAgdmFyIHRhcFRhcmdldFdyYXBwZXJDc3NPYmogPSB7fTsNCiAgICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai50b3AgPSBpc1RvcCA/IHRhcFRhcmdldFRvcCArICdweCcgOiAnJzsNCiAgICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai5yaWdodCA9IGlzUmlnaHQgPyB3aW5kb3dXaWR0aCAtIHRhcFRhcmdldExlZnQgLSB0YXBUYXJnZXRXaWR0aCArICdweCcgOiAnJzsNCiAgICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai5ib3R0b20gPSBpc0JvdHRvbSA/IHdpbmRvd0hlaWdodCAtIHRhcFRhcmdldFRvcCAtIHRhcFRhcmdldEhlaWdodCArICdweCcgOiAnJzsNCiAgICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai5sZWZ0ID0gaXNMZWZ0ID8gdGFwVGFyZ2V0TGVmdCArICdweCcgOiAnJzsNCiAgICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai5wb3NpdGlvbiA9IHRhcFRhcmdldFBvc2l0aW9uOw0KICAgICAgICAkKHRoaXMud3JhcHBlcikuY3NzKHRhcFRhcmdldFdyYXBwZXJDc3NPYmopOw0KDQogICAgICAgIC8vIFNldHRpbmcgY29udGVudA0KICAgICAgICAkKHRoaXMuY29udGVudEVsKS5jc3Moew0KICAgICAgICAgIHdpZHRoOiB0YXBUYXJnZXRUZXh0V2lkdGggKyAncHgnLA0KICAgICAgICAgIGhlaWdodDogdGFwVGFyZ2V0VGV4dEhlaWdodCArICdweCcsDQogICAgICAgICAgdG9wOiB0YXBUYXJnZXRUZXh0VG9wICsgJ3B4JywNCiAgICAgICAgICByaWdodDogdGFwVGFyZ2V0VGV4dFJpZ2h0ICsgJ3B4JywNCiAgICAgICAgICBib3R0b206IHRhcFRhcmdldFRleHRCb3R0b20gKyAncHgnLA0KICAgICAgICAgIGxlZnQ6IHRhcFRhcmdldFRleHRMZWZ0ICsgJ3B4JywNCiAgICAgICAgICBwYWRkaW5nOiB0YXBUYXJnZXRUZXh0UGFkZGluZyArICdweCcsDQogICAgICAgICAgdmVydGljYWxBbGlnbjogdGFwVGFyZ2V0VGV4dEFsaWduDQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIFNldHRpbmcgd2F2ZQ0KICAgICAgICAkKHRoaXMud2F2ZUVsKS5jc3Moew0KICAgICAgICAgIHRvcDogdGFwVGFyZ2V0V2F2ZVRvcCArICdweCcsDQogICAgICAgICAgbGVmdDogdGFwVGFyZ2V0V2F2ZUxlZnQgKyAncHgnLA0KICAgICAgICAgIHdpZHRoOiB0YXBUYXJnZXRXYXZlV2lkdGggKyAncHgnLA0KICAgICAgICAgIGhlaWdodDogdGFwVGFyZ2V0V2F2ZUhlaWdodCArICdweCcNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogT3BlbiBUYXBUYXJnZXQNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAib3BlbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbigpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gb25PcGVuIGNhbGxiYWNrDQogICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uT3BlbiA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW4uY2FsbCh0aGlzLCB0aGlzLiRvcmlnaW5bMF0pOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlOw0KICAgICAgICB0aGlzLndyYXBwZXIuY2xhc3NMaXN0LmFkZCgnb3BlbicpOw0KDQogICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQsIHRydWUpOw0KICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBDbG9zZSBUYXAgVGFyZ2V0DQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImNsb3NlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHsNCiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIG9uQ2xvc2UgY2FsbGJhY2sNCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DbG9zZSA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNsb3NlLmNhbGwodGhpcywgdGhpcy4kb3JpZ2luWzBdKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7DQogICAgICAgIHRoaXMud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7DQoNCiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCwgdHJ1ZSk7DQogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQpOw0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiaW5pdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9nZXQoVGFwVGFyZ2V0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGFwVGFyZ2V0KSwgImluaXQiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogR2V0IEluc3RhbmNlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogImdldEluc3RhbmNlIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkgew0KICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDsNCiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9UYXBUYXJnZXQ7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiZGVmYXVsdHMiLA0KICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBfZGVmYXVsdHM7DQogICAgICB9DQogICAgfV0pOw0KDQogICAgcmV0dXJuIFRhcFRhcmdldDsNCiAgfShDb21wb25lbnQpOw0KDQogIE0uVGFwVGFyZ2V0ID0gVGFwVGFyZ2V0Ow0KDQogIGlmIChNLmpRdWVyeUxvYWRlZCkgew0KICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoVGFwVGFyZ2V0LCAndGFwVGFyZ2V0JywgJ01fVGFwVGFyZ2V0Jyk7DQogIH0NCn0pKGNhc2gpOw0KOyhmdW5jdGlvbiAoJCkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgdmFyIF9kZWZhdWx0cyA9IHsNCiAgICBjbGFzc2VzOiAnJywNCiAgICBkcm9wZG93bk9wdGlvbnM6IHt9DQogIH07DQoNCiAgLyoqDQogICAqIEBjbGFzcw0KICAgKg0KICAgKi8NCg0KICB2YXIgRm9ybVNlbGVjdCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MjApIHsNCiAgICBfaW5oZXJpdHMoRm9ybVNlbGVjdCwgX0NvbXBvbmVudDIwKTsNCg0KICAgIC8qKg0KICAgICAqIENvbnN0cnVjdCBGb3JtU2VsZWN0IGluc3RhbmNlDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtIHtFbGVtZW50fSBlbA0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zDQogICAgICovDQogICAgZnVuY3Rpb24gRm9ybVNlbGVjdChlbCwgb3B0aW9ucykgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvcm1TZWxlY3QpOw0KDQogICAgICAvLyBEb24ndCBpbml0IGlmIGJyb3dzZXIgZGVmYXVsdCB2ZXJzaW9uDQogICAgICB2YXIgX3RoaXM2NyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGb3JtU2VsZWN0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRm9ybVNlbGVjdCkpLmNhbGwodGhpcywgRm9ybVNlbGVjdCwgZWwsIG9wdGlvbnMpKTsNCg0KICAgICAgaWYgKF90aGlzNjcuJGVsLmhhc0NsYXNzKCdicm93c2VyLWRlZmF1bHQnKSkgew0KICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXM2Nyk7DQogICAgICB9DQoNCiAgICAgIF90aGlzNjcuZWwuTV9Gb3JtU2VsZWN0ID0gX3RoaXM2NzsNCg0KICAgICAgLyoqDQogICAgICAgKiBPcHRpb25zIGZvciB0aGUgc2VsZWN0DQogICAgICAgKiBAbWVtYmVyIEZvcm1TZWxlY3Qjb3B0aW9ucw0KICAgICAgICovDQogICAgICBfdGhpczY3Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgRm9ybVNlbGVjdC5kZWZhdWx0cywgb3B0aW9ucyk7DQoNCiAgICAgIF90aGlzNjcuaXNNdWx0aXBsZSA9IF90aGlzNjcuJGVsLnByb3AoJ211bHRpcGxlJyk7DQoNCiAgICAgIC8vIFNldHVwDQogICAgICBfdGhpczY3LmVsLnRhYkluZGV4ID0gLTE7DQogICAgICBfdGhpczY3Ll9rZXlzU2VsZWN0ZWQgPSB7fTsNCiAgICAgIF90aGlzNjcuX3ZhbHVlRGljdCA9IHt9OyAvLyBNYXBzIGtleSB0byBvcmlnaW5hbCBhbmQgZ2VuZXJhdGVkIG9wdGlvbiBlbGVtZW50Lg0KICAgICAgX3RoaXM2Ny5fc2V0dXBEcm9wZG93bigpOw0KDQogICAgICBfdGhpczY3Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTsNCiAgICAgIHJldHVybiBfdGhpczY3Ow0KICAgIH0NCg0KICAgIF9jcmVhdGVDbGFzcyhGb3JtU2VsZWN0LCBbew0KICAgICAga2V5OiAiZGVzdHJveSIsDQoNCg0KICAgICAgLyoqDQogICAgICAgKiBUZWFyZG93biBjb21wb25lbnQNCiAgICAgICAqLw0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7DQogICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTsNCiAgICAgICAgdGhpcy5fcmVtb3ZlRHJvcGRvd24oKTsNCiAgICAgICAgdGhpcy5lbC5NX0Zvcm1TZWxlY3QgPSB1bmRlZmluZWQ7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdmFyIF90aGlzNjggPSB0aGlzOw0KDQogICAgICAgIHRoaXMuX2hhbmRsZVNlbGVjdENoYW5nZUJvdW5kID0gdGhpcy5faGFuZGxlU2VsZWN0Q2hhbmdlLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZU9wdGlvbkNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVPcHRpb25DbGljay5iaW5kKHRoaXMpOw0KICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dENsaWNrLmJpbmQodGhpcyk7DQoNCiAgICAgICAgJCh0aGlzLmRyb3Bkb3duT3B0aW9ucykuZmluZCgnbGk6bm90KC5vcHRncm91cCknKS5lYWNoKGZ1bmN0aW9uIChlbCkgew0KICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXM2OC5faGFuZGxlT3B0aW9uQ2xpY2tCb3VuZCk7DQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZVNlbGVjdENoYW5nZUJvdW5kKTsNCiAgICAgICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVFdmVudEhhbmRsZXJzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdmFyIF90aGlzNjkgPSB0aGlzOw0KDQogICAgICAgICQodGhpcy5kcm9wZG93bk9wdGlvbnMpLmZpbmQoJ2xpOm5vdCgub3B0Z3JvdXApJykuZWFjaChmdW5jdGlvbiAoZWwpIHsNCiAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIF90aGlzNjkuX2hhbmRsZU9wdGlvbkNsaWNrQm91bmQpOw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9oYW5kbGVTZWxlY3RDaGFuZ2VCb3VuZCk7DQogICAgICAgIHRoaXMuaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBTZWxlY3QgQ2hhbmdlDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVTZWxlY3RDaGFuZ2UiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVTZWxlY3RDaGFuZ2UoZSkgew0KICAgICAgICB0aGlzLl9zZXRWYWx1ZVRvSW5wdXQoKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgT3B0aW9uIENsaWNrDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVPcHRpb25DbGljayIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU9wdGlvbkNsaWNrKGUpIHsNCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICB2YXIgb3B0aW9uID0gJChlLnRhcmdldCkuY2xvc2VzdCgnbGknKVswXTsNCiAgICAgICAgdmFyIGtleSA9IG9wdGlvbi5pZDsNCiAgICAgICAgaWYgKCEkKG9wdGlvbikuaGFzQ2xhc3MoJ2Rpc2FibGVkJykgJiYgISQob3B0aW9uKS5oYXNDbGFzcygnb3B0Z3JvdXAnKSAmJiBrZXkubGVuZ3RoKSB7DQogICAgICAgICAgdmFyIHNlbGVjdGVkID0gdHJ1ZTsNCg0KICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGlwbGUpIHsNCiAgICAgICAgICAgIC8vIERlc2VsZWN0IHBsYWNlaG9sZGVyIG9wdGlvbiBpZiBzdGlsbCBzZWxlY3RlZC4NCiAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlck9wdGlvbiA9ICQodGhpcy5kcm9wZG93bk9wdGlvbnMpLmZpbmQoJ2xpLmRpc2FibGVkLnNlbGVjdGVkJyk7DQogICAgICAgICAgICBpZiAocGxhY2Vob2xkZXJPcHRpb24ubGVuZ3RoKSB7DQogICAgICAgICAgICAgIHBsYWNlaG9sZGVyT3B0aW9uLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOw0KICAgICAgICAgICAgICBwbGFjZWhvbGRlck9wdGlvbi5maW5kKCdpbnB1dFt0eXBlPSJjaGVja2JveCJdJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTsNCiAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlRW50cnlGcm9tQXJyYXkocGxhY2Vob2xkZXJPcHRpb25bMF0uaWQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2VsZWN0ZWQgPSB0aGlzLl90b2dnbGVFbnRyeUZyb21BcnJheShrZXkpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkKHRoaXMuZHJvcGRvd25PcHRpb25zKS5maW5kKCdsaScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOw0KICAgICAgICAgICAgJChvcHRpb24pLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcsIHNlbGVjdGVkKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBTZXQgc2VsZWN0ZWQgb24gb3JpZ2luYWwgc2VsZWN0IG9wdGlvbg0KICAgICAgICAgICQodGhpcy5fdmFsdWVEaWN0W2tleV0uZWwpLnByb3AoJ3NlbGVjdGVkJywgc2VsZWN0ZWQpOw0KICAgICAgICAgIHRoaXMuJGVsLnRyaWdnZXIoJ2NoYW5nZScpOw0KICAgICAgICB9DQoNCiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgSW5wdXQgQ2xpY2sNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZUlucHV0Q2xpY2siLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dENsaWNrKCkgew0KICAgICAgICBpZiAodGhpcy5kcm9wZG93biAmJiB0aGlzLmRyb3Bkb3duLmlzT3Blbikgew0KICAgICAgICAgIHRoaXMuX3NldFZhbHVlVG9JbnB1dCgpOw0KICAgICAgICAgIHRoaXMuX3NldFNlbGVjdGVkU3RhdGVzKCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBTZXR1cCBkcm9wZG93bg0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfc2V0dXBEcm9wZG93biIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRHJvcGRvd24oKSB7DQogICAgICAgIHZhciBfdGhpczcwID0gdGhpczsNCg0KICAgICAgICB0aGlzLndyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgJCh0aGlzLndyYXBwZXIpLmFkZENsYXNzKCdzZWxlY3Qtd3JhcHBlciAnICsgdGhpcy5vcHRpb25zLmNsYXNzZXMpOw0KICAgICAgICB0aGlzLiRlbC5iZWZvcmUoJCh0aGlzLndyYXBwZXIpKTsNCiAgICAgICAgdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuZWwpOw0KDQogICAgICAgIGlmICh0aGlzLmVsLmRpc2FibGVkKSB7DQogICAgICAgICAgdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDcmVhdGUgZHJvcGRvd24NCiAgICAgICAgdGhpcy4kc2VsZWN0T3B0aW9ucyA9IHRoaXMuJGVsLmNoaWxkcmVuKCdvcHRpb24sIG9wdGdyb3VwJyk7DQogICAgICAgIHRoaXMuZHJvcGRvd25PcHRpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsNCiAgICAgICAgdGhpcy5kcm9wZG93bk9wdGlvbnMuaWQgPSAic2VsZWN0LW9wdGlvbnMtIiArIE0uZ3VpZCgpOw0KICAgICAgICAkKHRoaXMuZHJvcGRvd25PcHRpb25zKS5hZGRDbGFzcygnZHJvcGRvd24tY29udGVudCBzZWxlY3QtZHJvcGRvd24gJyArICh0aGlzLmlzTXVsdGlwbGUgPyAnbXVsdGlwbGUtc2VsZWN0LWRyb3Bkb3duJyA6ICcnKSk7DQoNCiAgICAgICAgLy8gQ3JlYXRlIGRyb3Bkb3duIHN0cnVjdHVyZS4NCiAgICAgICAgaWYgKHRoaXMuJHNlbGVjdE9wdGlvbnMubGVuZ3RoKSB7DQogICAgICAgICAgdGhpcy4kc2VsZWN0T3B0aW9ucy5lYWNoKGZ1bmN0aW9uIChlbCkgew0KICAgICAgICAgICAgaWYgKCQoZWwpLmlzKCdvcHRpb24nKSkgew0KICAgICAgICAgICAgICAvLyBEaXJlY3QgZGVzY2VuZGFudCBvcHRpb24uDQogICAgICAgICAgICAgIHZhciBvcHRpb25FbCA9IHZvaWQgMDsNCiAgICAgICAgICAgICAgaWYgKF90aGlzNzAuaXNNdWx0aXBsZSkgew0KICAgICAgICAgICAgICAgIG9wdGlvbkVsID0gX3RoaXM3MC5fYXBwZW5kT3B0aW9uV2l0aEljb24oX3RoaXM3MC4kZWwsIGVsLCAnbXVsdGlwbGUnKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBvcHRpb25FbCA9IF90aGlzNzAuX2FwcGVuZE9wdGlvbldpdGhJY29uKF90aGlzNzAuJGVsLCBlbCk7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBfdGhpczcwLl9hZGRPcHRpb25Ub1ZhbHVlRGljdChlbCwgb3B0aW9uRWwpOw0KICAgICAgICAgICAgfSBlbHNlIGlmICgkKGVsKS5pcygnb3B0Z3JvdXAnKSkgew0KICAgICAgICAgICAgICAvLyBPcHRncm91cC4NCiAgICAgICAgICAgICAgdmFyIHNlbGVjdE9wdGlvbnMgPSAkKGVsKS5jaGlsZHJlbignb3B0aW9uJyk7DQogICAgICAgICAgICAgICQoX3RoaXM3MC5kcm9wZG93bk9wdGlvbnMpLmFwcGVuZCgkKCc8bGkgY2xhc3M9Im9wdGdyb3VwIj48c3Bhbj4nICsgZWwuZ2V0QXR0cmlidXRlKCdsYWJlbCcpICsgJzwvc3Bhbj48L2xpPicpWzBdKTsNCg0KICAgICAgICAgICAgICBzZWxlY3RPcHRpb25zLmVhY2goZnVuY3Rpb24gKGVsKSB7DQogICAgICAgICAgICAgICAgdmFyIG9wdGlvbkVsID0gX3RoaXM3MC5fYXBwZW5kT3B0aW9uV2l0aEljb24oX3RoaXM3MC4kZWwsIGVsLCAnb3B0Z3JvdXAtb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgX3RoaXM3MC5fYWRkT3B0aW9uVG9WYWx1ZURpY3QoZWwsIG9wdGlvbkVsKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLiRlbC5hZnRlcih0aGlzLmRyb3Bkb3duT3B0aW9ucyk7DQoNCiAgICAgICAgLy8gQWRkIGlucHV0IGRyb3Bkb3duDQogICAgICAgIHRoaXMuaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOw0KICAgICAgICAkKHRoaXMuaW5wdXQpLmFkZENsYXNzKCdzZWxlY3QtZHJvcGRvd24gZHJvcGRvd24tdHJpZ2dlcicpOw0KICAgICAgICB0aGlzLmlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7DQogICAgICAgIHRoaXMuaW5wdXQuc2V0QXR0cmlidXRlKCdyZWFkb25seScsICd0cnVlJyk7DQogICAgICAgIHRoaXMuaW5wdXQuc2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcsIHRoaXMuZHJvcGRvd25PcHRpb25zLmlkKTsNCiAgICAgICAgaWYgKHRoaXMuZWwuZGlzYWJsZWQpIHsNCiAgICAgICAgICAkKHRoaXMuaW5wdXQpLnByb3AoJ2Rpc2FibGVkJywgJ3RydWUnKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuJGVsLmJlZm9yZSh0aGlzLmlucHV0KTsNCiAgICAgICAgdGhpcy5fc2V0VmFsdWVUb0lucHV0KCk7DQoNCiAgICAgICAgLy8gQWRkIGNhcmV0DQogICAgICAgIHZhciBkcm9wZG93bkljb24gPSAkKCc8c3ZnIGNsYXNzPSJjYXJldCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTcgMTBsNSA1IDUtNXoiLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+Jyk7DQogICAgICAgIHRoaXMuJGVsLmJlZm9yZShkcm9wZG93bkljb25bMF0pOw0KDQogICAgICAgIC8vIEluaXRpYWxpemUgZHJvcGRvd24NCiAgICAgICAgaWYgKCF0aGlzLmVsLmRpc2FibGVkKSB7DQogICAgICAgICAgdmFyIGRyb3Bkb3duT3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMuZHJvcGRvd25PcHRpb25zKTsNCg0KICAgICAgICAgIC8vIEFkZCBjYWxsYmFjayBmb3IgY2VudGVyaW5nIHNlbGVjdGVkIG9wdGlvbiB3aGVuIGRyb3Bkb3duIGNvbnRlbnQgaXMgc2Nyb2xsYWJsZQ0KICAgICAgICAgIGRyb3Bkb3duT3B0aW9ucy5vbk9wZW5FbmQgPSBmdW5jdGlvbiAoZWwpIHsNCiAgICAgICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbiA9ICQoX3RoaXM3MC5kcm9wZG93bk9wdGlvbnMpLmZpbmQoJy5zZWxlY3RlZCcpLmZpcnN0KCk7DQogICAgICAgICAgICBpZiAoX3RoaXM3MC5kcm9wZG93bi5pc1Njcm9sbGFibGUgJiYgc2VsZWN0ZWRPcHRpb24ubGVuZ3RoKSB7DQogICAgICAgICAgICAgIHZhciBzY3JvbGxPZmZzZXQgPSBzZWxlY3RlZE9wdGlvblswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBfdGhpczcwLmRyb3Bkb3duT3B0aW9ucy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7IC8vIHNjcm9sbCB0byBzZWxlY3RlZCBvcHRpb24NCiAgICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0IC09IF90aGlzNzAuZHJvcGRvd25PcHRpb25zLmNsaWVudEhlaWdodCAvIDI7IC8vIGNlbnRlciBpbiBkcm9wZG93bg0KICAgICAgICAgICAgICBfdGhpczcwLmRyb3Bkb3duT3B0aW9ucy5zY3JvbGxUb3AgPSBzY3JvbGxPZmZzZXQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgfTsNCg0KICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGlwbGUpIHsNCiAgICAgICAgICAgIGRyb3Bkb3duT3B0aW9ucy5jbG9zZU9uQ2xpY2sgPSBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5kcm9wZG93biA9IE0uRHJvcGRvd24uaW5pdCh0aGlzLmlucHV0LCBkcm9wZG93bk9wdGlvbnMpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQWRkIGluaXRpYWwgc2VsZWN0aW9ucw0KICAgICAgICB0aGlzLl9zZXRTZWxlY3RlZFN0YXRlcygpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEFkZCBvcHRpb24gdG8gdmFsdWUgZGljdA0KICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBlbCAgb3JpZ2luYWwgb3B0aW9uIGVsZW1lbnQNCiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb3B0aW9uRWwgIGdlbmVyYXRlZCBvcHRpb24gZWxlbWVudA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfYWRkT3B0aW9uVG9WYWx1ZURpY3QiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hZGRPcHRpb25Ub1ZhbHVlRGljdChlbCwgb3B0aW9uRWwpIHsNCiAgICAgICAgdmFyIGluZGV4ID0gT2JqZWN0LmtleXModGhpcy5fdmFsdWVEaWN0KS5sZW5ndGg7DQogICAgICAgIHZhciBrZXkgPSB0aGlzLmRyb3Bkb3duT3B0aW9ucy5pZCArIGluZGV4Ow0KICAgICAgICB2YXIgb2JqID0ge307DQogICAgICAgIG9wdGlvbkVsLmlkID0ga2V5Ow0KDQogICAgICAgIG9iai5lbCA9IGVsOw0KICAgICAgICBvYmoub3B0aW9uRWwgPSBvcHRpb25FbDsNCiAgICAgICAgdGhpcy5fdmFsdWVEaWN0W2tleV0gPSBvYmo7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVtb3ZlIGRyb3Bkb3duDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVEcm9wZG93biIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZURyb3Bkb3duKCkgew0KICAgICAgICAkKHRoaXMud3JhcHBlcikuZmluZCgnLmNhcmV0JykucmVtb3ZlKCk7DQogICAgICAgICQodGhpcy5pbnB1dCkucmVtb3ZlKCk7DQogICAgICAgICQodGhpcy5kcm9wZG93bk9wdGlvbnMpLnJlbW92ZSgpOw0KICAgICAgICAkKHRoaXMud3JhcHBlcikuYmVmb3JlKHRoaXMuJGVsKTsNCiAgICAgICAgJCh0aGlzLndyYXBwZXIpLnJlbW92ZSgpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFNldHVwIGRyb3Bkb3duDQogICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHNlbGVjdCAgc2VsZWN0IGVsZW1lbnQNCiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb3B0aW9uICBvcHRpb24gZWxlbWVudCBmcm9tIHNlbGVjdA0KICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUNCiAgICAgICAqIEByZXR1cm4ge0VsZW1lbnR9ICBvcHRpb24gZWxlbWVudCBhZGRlZA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfYXBwZW5kT3B0aW9uV2l0aEljb24iLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBlbmRPcHRpb25XaXRoSWNvbihzZWxlY3QsIG9wdGlvbiwgdHlwZSkgew0KICAgICAgICAvLyBBZGQgZGlzYWJsZWQgYXR0ciBpZiBkaXNhYmxlZA0KICAgICAgICB2YXIgZGlzYWJsZWRDbGFzcyA9IG9wdGlvbi5kaXNhYmxlZCA/ICdkaXNhYmxlZCAnIDogJyc7DQogICAgICAgIHZhciBvcHRncm91cENsYXNzID0gdHlwZSA9PT0gJ29wdGdyb3VwLW9wdGlvbicgPyAnb3B0Z3JvdXAtb3B0aW9uICcgOiAnJzsNCiAgICAgICAgdmFyIG11bHRpcGxlQ2hlY2tib3ggPSB0aGlzLmlzTXVsdGlwbGUgPyAiPGxhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiIgKyBkaXNhYmxlZENsYXNzICsgIlwiLz48c3Bhbj4iICsgb3B0aW9uLmlubmVySFRNTCArICI8L3NwYW4+PC9sYWJlbD4iIDogb3B0aW9uLmlubmVySFRNTDsNCiAgICAgICAgdmFyIGxpRWwgPSAkKCc8bGk+PC9saT4nKTsNCiAgICAgICAgdmFyIHNwYW5FbCA9ICQoJzxzcGFuPjwvc3Bhbj4nKTsNCiAgICAgICAgc3BhbkVsLmh0bWwobXVsdGlwbGVDaGVja2JveCk7DQogICAgICAgIGxpRWwuYWRkQ2xhc3MoZGlzYWJsZWRDbGFzcyArICIgIiArIG9wdGdyb3VwQ2xhc3MpOw0KICAgICAgICBsaUVsLmFwcGVuZChzcGFuRWwpOw0KDQogICAgICAgIC8vIGFkZCBpY29ucw0KICAgICAgICB2YXIgaWNvblVybCA9IG9wdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWNvbicpOw0KICAgICAgICBpZiAoISFpY29uVXJsKSB7DQogICAgICAgICAgdmFyIGltZ0VsID0gJCgiPGltZyBhbHQ9XCJcIiBzcmM9XCIiICsgaWNvblVybCArICJcIj4iKTsNCiAgICAgICAgICBsaUVsLnByZXBlbmQoaW1nRWwpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQ2hlY2sgZm9yIG11bHRpcGxlIHR5cGUuDQogICAgICAgICQodGhpcy5kcm9wZG93bk9wdGlvbnMpLmFwcGVuZChsaUVsWzBdKTsNCiAgICAgICAgcmV0dXJuIGxpRWxbMF07DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogVG9nZ2xlIGVudHJ5IGZyb20gb3B0aW9uDQogICAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5ICBPcHRpb24ga2V5DQogICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSAgaWYgZW50cnkgd2FzIGFkZGVkIG9yIHJlbW92ZWQNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3RvZ2dsZUVudHJ5RnJvbUFycmF5IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdG9nZ2xlRW50cnlGcm9tQXJyYXkoa2V5KSB7DQogICAgICAgIHZhciBub3RBZGRlZCA9ICF0aGlzLl9rZXlzU2VsZWN0ZWQuaGFzT3duUHJvcGVydHkoa2V5KTsNCiAgICAgICAgdmFyICRvcHRpb25MaSA9ICQodGhpcy5fdmFsdWVEaWN0W2tleV0ub3B0aW9uRWwpOw0KDQogICAgICAgIGlmIChub3RBZGRlZCkgew0KICAgICAgICAgIHRoaXMuX2tleXNTZWxlY3RlZFtrZXldID0gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBkZWxldGUgdGhpcy5fa2V5c1NlbGVjdGVkW2tleV07DQogICAgICAgIH0NCg0KICAgICAgICAkb3B0aW9uTGkudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJywgbm90QWRkZWQpOw0KDQogICAgICAgIC8vIFNldCBjaGVja2JveCBjaGVja2VkIHZhbHVlDQogICAgICAgICRvcHRpb25MaS5maW5kKCdpbnB1dFt0eXBlPSJjaGVja2JveCJdJykucHJvcCgnY2hlY2tlZCcsIG5vdEFkZGVkKTsNCg0KICAgICAgICAvLyB1c2Ugbm90QWRkZWQgaW5zdGVhZCBvZiB0cnVlICh0byBkZXRlY3QgaWYgdGhlIG9wdGlvbiBpcyBzZWxlY3RlZCBvciBub3QpDQogICAgICAgICRvcHRpb25MaS5wcm9wKCdzZWxlY3RlZCcsIG5vdEFkZGVkKTsNCg0KICAgICAgICByZXR1cm4gbm90QWRkZWQ7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0IHRleHQgdmFsdWUgdG8gaW5wdXQNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldFZhbHVlVG9JbnB1dCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFZhbHVlVG9JbnB1dCgpIHsNCiAgICAgICAgdmFyIHZhbHVlcyA9IFtdOw0KICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJGVsLmZpbmQoJ29wdGlvbicpOw0KDQogICAgICAgIG9wdGlvbnMuZWFjaChmdW5jdGlvbiAoZWwpIHsNCiAgICAgICAgICBpZiAoJChlbCkucHJvcCgnc2VsZWN0ZWQnKSkgew0KICAgICAgICAgICAgdmFyIHRleHQgPSAkKGVsKS50ZXh0KCk7DQogICAgICAgICAgICB2YWx1ZXMucHVzaCh0ZXh0KTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIGlmICghdmFsdWVzLmxlbmd0aCkgew0KICAgICAgICAgIHZhciBmaXJzdERpc2FibGVkID0gdGhpcy4kZWwuZmluZCgnb3B0aW9uOmRpc2FibGVkJykuZXEoMCk7DQogICAgICAgICAgaWYgKGZpcnN0RGlzYWJsZWQubGVuZ3RoICYmIGZpcnN0RGlzYWJsZWRbMF0udmFsdWUgPT09ICcnKSB7DQogICAgICAgICAgICB2YWx1ZXMucHVzaChmaXJzdERpc2FibGVkLnRleHQoKSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5pbnB1dC52YWx1ZSA9IHZhbHVlcy5qb2luKCcsICcpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFNldCBzZWxlY3RlZCBzdGF0ZSBvZiBkcm9wZG93biB0byBtYXRjaCBhY3R1YWwgc2VsZWN0IGVsZW1lbnQNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldFNlbGVjdGVkU3RhdGVzIiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0U2VsZWN0ZWRTdGF0ZXMoKSB7DQogICAgICAgIHRoaXMuX2tleXNTZWxlY3RlZCA9IHt9Ow0KDQogICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl92YWx1ZURpY3QpIHsNCiAgICAgICAgICB2YXIgb3B0aW9uID0gdGhpcy5fdmFsdWVEaWN0W2tleV07DQogICAgICAgICAgdmFyIG9wdGlvbklzU2VsZWN0ZWQgPSAkKG9wdGlvbi5lbCkucHJvcCgnc2VsZWN0ZWQnKTsNCiAgICAgICAgICAkKG9wdGlvbi5vcHRpb25FbCkuZmluZCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpLnByb3AoJ2NoZWNrZWQnLCBvcHRpb25Jc1NlbGVjdGVkKTsNCiAgICAgICAgICBpZiAob3B0aW9uSXNTZWxlY3RlZCkgew0KICAgICAgICAgICAgdGhpcy5fYWN0aXZhdGVPcHRpb24oJCh0aGlzLmRyb3Bkb3duT3B0aW9ucyksICQob3B0aW9uLm9wdGlvbkVsKSk7DQogICAgICAgICAgICB0aGlzLl9rZXlzU2VsZWN0ZWRba2V5XSA9IHRydWU7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICQob3B0aW9uLm9wdGlvbkVsKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBNYWtlIG9wdGlvbiBhcyBzZWxlY3RlZCBhbmQgc2Nyb2xsIHRvIHNlbGVjdGVkIHBvc2l0aW9uDQogICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gY29sbGVjdGlvbiAgU2VsZWN0IG9wdGlvbnMgalF1ZXJ5IGVsZW1lbnQNCiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3T3B0aW9uICBlbGVtZW50IG9mIHRoZSBuZXcgb3B0aW9uDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9hY3RpdmF0ZU9wdGlvbiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2FjdGl2YXRlT3B0aW9uKGNvbGxlY3Rpb24sIG5ld09wdGlvbikgew0KICAgICAgICBpZiAobmV3T3B0aW9uKSB7DQogICAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlwbGUpIHsNCiAgICAgICAgICAgIGNvbGxlY3Rpb24uZmluZCgnbGkuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdmFyIG9wdGlvbiA9ICQobmV3T3B0aW9uKTsNCiAgICAgICAgICBvcHRpb24uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBHZXQgU2VsZWN0ZWQgVmFsdWVzDQogICAgICAgKiBAcmV0dXJuIHtBcnJheX0gIEFycmF5IG9mIHNlbGVjdGVkIHZhbHVlcw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJnZXRTZWxlY3RlZFZhbHVlcyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VsZWN0ZWRWYWx1ZXMoKSB7DQogICAgICAgIHZhciBzZWxlY3RlZFZhbHVlcyA9IFtdOw0KICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fa2V5c1NlbGVjdGVkKSB7DQogICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMucHVzaCh0aGlzLl92YWx1ZURpY3Rba2V5XS5lbC52YWx1ZSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHNlbGVjdGVkVmFsdWVzOw0KICAgICAgfQ0KICAgIH1dLCBbew0KICAgICAga2V5OiAiaW5pdCIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9nZXQoRm9ybVNlbGVjdC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZvcm1TZWxlY3QpLCAiaW5pdCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBHZXQgSW5zdGFuY2UNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiZ2V0SW5zdGFuY2UiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7DQogICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsOw0KICAgICAgICByZXR1cm4gZG9tRWxlbS5NX0Zvcm1TZWxlY3Q7DQogICAgICB9DQogICAgfSwgew0KICAgICAga2V5OiAiZGVmYXVsdHMiLA0KICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBfZGVmYXVsdHM7DQogICAgICB9DQogICAgfV0pOw0KDQogICAgcmV0dXJuIEZvcm1TZWxlY3Q7DQogIH0oQ29tcG9uZW50KTsNCg0KICBNLkZvcm1TZWxlY3QgPSBGb3JtU2VsZWN0Ow0KDQogIGlmIChNLmpRdWVyeUxvYWRlZCkgew0KICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoRm9ybVNlbGVjdCwgJ2Zvcm1TZWxlY3QnLCAnTV9Gb3JtU2VsZWN0Jyk7DQogIH0NCn0pKGNhc2gpOw0KOyhmdW5jdGlvbiAoJCwgYW5pbSkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgdmFyIF9kZWZhdWx0cyA9IHt9Ow0KDQogIC8qKg0KICAgKiBAY2xhc3MNCiAgICoNCiAgICovDQoNCiAgdmFyIFJhbmdlID0gZnVuY3Rpb24gKF9Db21wb25lbnQyMSkgew0KICAgIF9pbmhlcml0cyhSYW5nZSwgX0NvbXBvbmVudDIxKTsNCg0KICAgIC8qKg0KICAgICAqIENvbnN0cnVjdCBSYW5nZSBpbnN0YW5jZQ0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIFJhbmdlKGVsLCBvcHRpb25zKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmFuZ2UpOw0KDQogICAgICB2YXIgX3RoaXM3MSA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChSYW5nZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFJhbmdlKSkuY2FsbCh0aGlzLCBSYW5nZSwgZWwsIG9wdGlvbnMpKTsNCg0KICAgICAgX3RoaXM3MS5lbC5NX1JhbmdlID0gX3RoaXM3MTsNCg0KICAgICAgLyoqDQogICAgICAgKiBPcHRpb25zIGZvciB0aGUgcmFuZ2UNCiAgICAgICAqIEBtZW1iZXIgUmFuZ2Ujb3B0aW9ucw0KICAgICAgICovDQogICAgICBfdGhpczcxLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgUmFuZ2UuZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICBfdGhpczcxLl9tb3VzZWRvd24gPSBmYWxzZTsNCg0KICAgICAgLy8gU2V0dXANCiAgICAgIF90aGlzNzEuX3NldHVwVGh1bWIoKTsNCg0KICAgICAgX3RoaXM3MS5fc2V0dXBFdmVudEhhbmRsZXJzKCk7DQogICAgICByZXR1cm4gX3RoaXM3MTsNCiAgICB9DQoNCiAgICBfY3JlYXRlQ2xhc3MoUmFuZ2UsIFt7DQogICAgICBrZXk6ICJkZXN0cm95IiwNCg0KDQogICAgICAvKioNCiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudA0KICAgICAgICovDQogICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsNCiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpOw0KICAgICAgICB0aGlzLl9yZW1vdmVUaHVtYigpOw0KICAgICAgICB0aGlzLmVsLk1fUmFuZ2UgPSB1bmRlZmluZWQ7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnMNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHsNCiAgICAgICAgdGhpcy5faGFuZGxlUmFuZ2VDaGFuZ2VCb3VuZCA9IHRoaXMuX2hhbmRsZVJhbmdlQ2hhbmdlLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZVJhbmdlTW91c2Vkb3duVG91Y2hzdGFydEJvdW5kID0gdGhpcy5faGFuZGxlUmFuZ2VNb3VzZWRvd25Ub3VjaHN0YXJ0LmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZVJhbmdlSW5wdXRNb3VzZW1vdmVUb3VjaG1vdmVCb3VuZCA9IHRoaXMuX2hhbmRsZVJhbmdlSW5wdXRNb3VzZW1vdmVUb3VjaG1vdmUuYmluZCh0aGlzKTsNCiAgICAgICAgdGhpcy5faGFuZGxlUmFuZ2VNb3VzZXVwVG91Y2hlbmRCb3VuZCA9IHRoaXMuX2hhbmRsZVJhbmdlTW91c2V1cFRvdWNoZW5kLmJpbmQodGhpcyk7DQogICAgICAgIHRoaXMuX2hhbmRsZVJhbmdlQmx1ck1vdXNlb3V0VG91Y2hsZWF2ZUJvdW5kID0gdGhpcy5faGFuZGxlUmFuZ2VCbHVyTW91c2VvdXRUb3VjaGxlYXZlLmJpbmQodGhpcyk7DQoNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9oYW5kbGVSYW5nZUNoYW5nZUJvdW5kKTsNCg0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZVJhbmdlTW91c2Vkb3duVG91Y2hzdGFydEJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5faGFuZGxlUmFuZ2VNb3VzZWRvd25Ub3VjaHN0YXJ0Qm91bmQpOw0KDQogICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLl9oYW5kbGVSYW5nZUlucHV0TW91c2Vtb3ZlVG91Y2htb3ZlQm91bmQpOw0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX2hhbmRsZVJhbmdlSW5wdXRNb3VzZW1vdmVUb3VjaG1vdmVCb3VuZCk7DQogICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlUmFuZ2VJbnB1dE1vdXNlbW92ZVRvdWNobW92ZUJvdW5kKTsNCg0KICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVSYW5nZU1vdXNldXBUb3VjaGVuZEJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZVJhbmdlTW91c2V1cFRvdWNoZW5kQm91bmQpOw0KDQogICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX2hhbmRsZVJhbmdlQmx1ck1vdXNlb3V0VG91Y2hsZWF2ZUJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHRoaXMuX2hhbmRsZVJhbmdlQmx1ck1vdXNlb3V0VG91Y2hsZWF2ZUJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGxlYXZlJywgdGhpcy5faGFuZGxlUmFuZ2VCbHVyTW91c2VvdXRUb3VjaGxlYXZlQm91bmQpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVycw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfcmVtb3ZlRXZlbnRIYW5kbGVycyIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5faGFuZGxlUmFuZ2VDaGFuZ2VCb3VuZCk7DQoNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVSYW5nZU1vdXNlZG93blRvdWNoc3RhcnRCb3VuZCk7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZVJhbmdlTW91c2Vkb3duVG91Y2hzdGFydEJvdW5kKTsNCg0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5faGFuZGxlUmFuZ2VJbnB1dE1vdXNlbW92ZVRvdWNobW92ZUJvdW5kKTsNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9oYW5kbGVSYW5nZUlucHV0TW91c2Vtb3ZlVG91Y2htb3ZlQm91bmQpOw0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZVJhbmdlSW5wdXRNb3VzZW1vdmVUb3VjaG1vdmVCb3VuZCk7DQoNCiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlUmFuZ2VNb3VzZXVwVG91Y2hlbmRCb3VuZCk7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVSYW5nZU1vdXNldXBUb3VjaGVuZEJvdW5kKTsNCg0KICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmVCb3VuZCk7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmVCb3VuZCk7DQogICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hsZWF2ZScsIHRoaXMuX2hhbmRsZVJhbmdlQmx1ck1vdXNlb3V0VG91Y2hsZWF2ZUJvdW5kKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgUmFuZ2UgQ2hhbmdlDQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVSYW5nZUNoYW5nZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVJhbmdlQ2hhbmdlKCkgew0KICAgICAgICAkKHRoaXMudmFsdWUpLmh0bWwodGhpcy4kZWwudmFsKCkpOw0KDQogICAgICAgIGlmICghJCh0aGlzLnRodW1iKS5oYXNDbGFzcygnYWN0aXZlJykpIHsNCiAgICAgICAgICB0aGlzLl9zaG93UmFuZ2VCdWJibGUoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gdGhpcy5fY2FsY1JhbmdlT2Zmc2V0KCk7DQogICAgICAgICQodGhpcy50aHVtYikuYWRkQ2xhc3MoJ2FjdGl2ZScpLmNzcygnbGVmdCcsIG9mZnNldExlZnQgKyAncHgnKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgUmFuZ2UgTW91c2Vkb3duIGFuZCBUb3VjaHN0YXJ0DQogICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9oYW5kbGVSYW5nZU1vdXNlZG93blRvdWNoc3RhcnQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVSYW5nZU1vdXNlZG93blRvdWNoc3RhcnQoZSkgew0KICAgICAgICAvLyBTZXQgaW5kaWNhdG9yIHZhbHVlDQogICAgICAgICQodGhpcy52YWx1ZSkuaHRtbCh0aGlzLiRlbC52YWwoKSk7DQoNCiAgICAgICAgdGhpcy5fbW91c2Vkb3duID0gdHJ1ZTsNCiAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KDQogICAgICAgIGlmICghJCh0aGlzLnRodW1iKS5oYXNDbGFzcygnYWN0aXZlJykpIHsNCiAgICAgICAgICB0aGlzLl9zaG93UmFuZ2VCdWJibGUoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChlLnR5cGUgIT09ICdpbnB1dCcpIHsNCiAgICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IHRoaXMuX2NhbGNSYW5nZU9mZnNldCgpOw0KICAgICAgICAgICQodGhpcy50aHVtYikuYWRkQ2xhc3MoJ2FjdGl2ZScpLmNzcygnbGVmdCcsIG9mZnNldExlZnQgKyAncHgnKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBSYW5nZSBJbnB1dCwgTW91c2Vtb3ZlIGFuZCBUb3VjaG1vdmUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZVJhbmdlSW5wdXRNb3VzZW1vdmVUb3VjaG1vdmUiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVSYW5nZUlucHV0TW91c2Vtb3ZlVG91Y2htb3ZlKCkgew0KICAgICAgICBpZiAodGhpcy5fbW91c2Vkb3duKSB7DQogICAgICAgICAgaWYgKCEkKHRoaXMudGh1bWIpLmhhc0NsYXNzKCdhY3RpdmUnKSkgew0KICAgICAgICAgICAgdGhpcy5fc2hvd1JhbmdlQnViYmxlKCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIG9mZnNldExlZnQgPSB0aGlzLl9jYWxjUmFuZ2VPZmZzZXQoKTsNCiAgICAgICAgICAkKHRoaXMudGh1bWIpLmFkZENsYXNzKCdhY3RpdmUnKS5jc3MoJ2xlZnQnLCBvZmZzZXRMZWZ0ICsgJ3B4Jyk7DQogICAgICAgICAgJCh0aGlzLnZhbHVlKS5odG1sKHRoaXMuJGVsLnZhbCgpKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIEhhbmRsZSBSYW5nZSBNb3VzZXVwIGFuZCBUb3VjaGVuZA0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfaGFuZGxlUmFuZ2VNb3VzZXVwVG91Y2hlbmQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVSYW5nZU1vdXNldXBUb3VjaGVuZCgpIHsNCiAgICAgICAgdGhpcy5fbW91c2Vkb3duID0gZmFsc2U7DQogICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBIYW5kbGUgUmFuZ2UgQmx1ciwgTW91c2VvdXQgYW5kIFRvdWNobGVhdmUNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX2hhbmRsZVJhbmdlQmx1ck1vdXNlb3V0VG91Y2hsZWF2ZSIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVJhbmdlQmx1ck1vdXNlb3V0VG91Y2hsZWF2ZSgpIHsNCiAgICAgICAgaWYgKCF0aGlzLl9tb3VzZWRvd24pIHsNCiAgICAgICAgICB2YXIgcGFkZGluZ0xlZnQgPSBwYXJzZUludCh0aGlzLiRlbC5jc3MoJ3BhZGRpbmctbGVmdCcpKTsNCiAgICAgICAgICB2YXIgbWFyZ2luTGVmdCA9IDcgKyBwYWRkaW5nTGVmdCArICdweCc7DQoNCiAgICAgICAgICBpZiAoJCh0aGlzLnRodW1iKS5oYXNDbGFzcygnYWN0aXZlJykpIHsNCiAgICAgICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMudGh1bWIpOw0KICAgICAgICAgICAgYW5pbSh7DQogICAgICAgICAgICAgIHRhcmdldHM6IHRoaXMudGh1bWIsDQogICAgICAgICAgICAgIGhlaWdodDogMCwNCiAgICAgICAgICAgICAgd2lkdGg6IDAsDQogICAgICAgICAgICAgIHRvcDogMTAsDQogICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywNCiAgICAgICAgICAgICAgbWFyZ2luTGVmdDogbWFyZ2luTGVmdCwNCiAgICAgICAgICAgICAgZHVyYXRpb246IDEwMA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICAgICQodGhpcy50aHVtYikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogU2V0dXAgZHJvcGRvd24NCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiX3NldHVwVGh1bWIiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cFRodW1iKCkgew0KICAgICAgICB0aGlzLnRodW1iID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOw0KICAgICAgICB0aGlzLnZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOw0KICAgICAgICAkKHRoaXMudGh1bWIpLmFkZENsYXNzKCd0aHVtYicpOw0KICAgICAgICAkKHRoaXMudmFsdWUpLmFkZENsYXNzKCd2YWx1ZScpOw0KICAgICAgICAkKHRoaXMudGh1bWIpLmFwcGVuZCh0aGlzLnZhbHVlKTsNCiAgICAgICAgdGhpcy4kZWwuYWZ0ZXIodGhpcy50aHVtYik7DQogICAgICB9DQoNCiAgICAgIC8qKg0KICAgICAgICogUmVtb3ZlIGRyb3Bkb3duDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9yZW1vdmVUaHVtYiIsDQogICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZVRodW1iKCkgew0KICAgICAgICAkKHRoaXMudGh1bWIpLnJlbW92ZSgpOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIG1vcnBoIHRodW1iIGludG8gYnViYmxlDQogICAgICAgKi8NCg0KICAgIH0sIHsNCiAgICAgIGtleTogIl9zaG93UmFuZ2VCdWJibGUiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zaG93UmFuZ2VCdWJibGUoKSB7DQogICAgICAgIHZhciBwYWRkaW5nTGVmdCA9IHBhcnNlSW50KCQodGhpcy50aHVtYikucGFyZW50KCkuY3NzKCdwYWRkaW5nLWxlZnQnKSk7DQogICAgICAgIHZhciBtYXJnaW5MZWZ0ID0gLTcgKyBwYWRkaW5nTGVmdCArICdweCc7IC8vIFRPRE86IGZpeCBtYWdpYyBudW1iZXI/DQogICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMudGh1bWIpOw0KICAgICAgICBhbmltKHsNCiAgICAgICAgICB0YXJnZXRzOiB0aGlzLnRodW1iLA0KICAgICAgICAgIGhlaWdodDogMzAsDQogICAgICAgICAgd2lkdGg6IDMwLA0KICAgICAgICAgIHRvcDogLTMwLA0KICAgICAgICAgIG1hcmdpbkxlZnQ6IG1hcmdpbkxlZnQsDQogICAgICAgICAgZHVyYXRpb246IDMwMCwNCiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVpbnQnDQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICAvKioNCiAgICAgICAqIENhbGN1bGF0ZSB0aGUgb2Zmc2V0IG9mIHRoZSB0aHVtYg0KICAgICAgICogQHJldHVybiB7TnVtYmVyfSAgb2Zmc2V0IGluIHBpeGVscw0KICAgICAgICovDQoNCiAgICB9LCB7DQogICAgICBrZXk6ICJfY2FsY1JhbmdlT2Zmc2V0IiwNCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2FsY1JhbmdlT2Zmc2V0KCkgew0KICAgICAgICB2YXIgd2lkdGggPSB0aGlzLiRlbC53aWR0aCgpIC0gMTU7DQogICAgICAgIHZhciBtYXggPSBwYXJzZUZsb2F0KHRoaXMuJGVsLmF0dHIoJ21heCcpKSB8fCAxMDA7IC8vIFJhbmdlIGRlZmF1bHQgbWF4DQogICAgICAgIHZhciBtaW4gPSBwYXJzZUZsb2F0KHRoaXMuJGVsLmF0dHIoJ21pbicpKSB8fCAwOyAvLyBSYW5nZSBkZWZhdWx0IG1pbg0KICAgICAgICB2YXIgcGVyY2VudCA9IChwYXJzZUZsb2F0KHRoaXMuJGVsLnZhbCgpKSAtIG1pbikgLyAobWF4IC0gbWluKTsNCiAgICAgICAgcmV0dXJuIHBlcmNlbnQgKiB3aWR0aDsNCiAgICAgIH0NCiAgICB9XSwgW3sNCiAgICAgIGtleTogImluaXQiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7DQogICAgICAgIHJldHVybiBfZ2V0KFJhbmdlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUmFuZ2UpLCAiaW5pdCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTsNCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiBHZXQgSW5zdGFuY2UNCiAgICAgICAqLw0KDQogICAgfSwgew0KICAgICAga2V5OiAiZ2V0SW5zdGFuY2UiLA0KICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7DQogICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsOw0KICAgICAgICByZXR1cm4gZG9tRWxlbS5NX1JhbmdlOw0KICAgICAgfQ0KICAgIH0sIHsNCiAgICAgIGtleTogImRlZmF1bHRzIiwNCiAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gX2RlZmF1bHRzOw0KICAgICAgfQ0KICAgIH1dKTsNCg0KICAgIHJldHVybiBSYW5nZTsNCiAgfShDb21wb25lbnQpOw0KDQogIE0uUmFuZ2UgPSBSYW5nZTsNCg0KICBpZiAoTS5qUXVlcnlMb2FkZWQpIHsNCiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKFJhbmdlLCAncmFuZ2UnLCAnTV9SYW5nZScpOw0KICB9DQoNCiAgUmFuZ2UuaW5pdCgkKCdpbnB1dFt0eXBlPXJhbmdlXScpKTsNCn0pKGNhc2gsIE0uYW5pbWUpOw=="></script>
  <script src="data:text/javascript;base64,aHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi9taW5ha3VuYXBwcy5hcHBzcG90LmNvbS9vL2luaXQuanM/YWx0PW1lZGlhJnRva2VuPTBmZTk4NGMyLTQ3NDctNDg1Mi05MDg4LTI3ODJhZjM0NmQwNw=="></script>
  </body>
</html>
